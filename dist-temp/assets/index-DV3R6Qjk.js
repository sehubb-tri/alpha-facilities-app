(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))o(u);new MutationObserver(u=>{for(const d of u)if(d.type==="childList")for(const f of d.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&o(f)}).observe(document,{childList:!0,subtree:!0});function r(u){const d={};return u.integrity&&(d.integrity=u.integrity),u.referrerPolicy&&(d.referrerPolicy=u.referrerPolicy),u.crossOrigin==="use-credentials"?d.credentials="include":u.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function o(u){if(u.ep)return;u.ep=!0;const d=r(u);fetch(u.href,d)}})();var Kc={exports:{}},Br={};var Pp;function I0(){if(Pp)return Br;Pp=1;var a=Symbol.for("react.transitional.element"),n=Symbol.for("react.fragment");function r(o,u,d){var f=null;if(d!==void 0&&(f=""+d),u.key!==void 0&&(f=""+u.key),"key"in u){d={};for(var p in u)p!=="key"&&(d[p]=u[p])}else d=u;return u=d.ref,{$$typeof:a,type:o,key:f,ref:u!==void 0?u:null,props:d}}return Br.Fragment=n,Br.jsx=r,Br.jsxs=r,Br}var Wp;function G0(){return Wp||(Wp=1,Kc.exports=I0()),Kc.exports}var c=G0(),Jc={exports:{}},ye={};var Zp;function P0(){if(Zp)return ye;Zp=1;var a=Symbol.for("react.transitional.element"),n=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),u=Symbol.for("react.profiler"),d=Symbol.for("react.consumer"),f=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),x=Symbol.for("react.activity"),S=Symbol.iterator;function _(k){return k===null||typeof k!="object"?null:(k=S&&k[S]||k["@@iterator"],typeof k=="function"?k:null)}var E={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},R=Object.assign,T={};function O(k,I,X){this.props=k,this.context=I,this.refs=T,this.updater=X||E}O.prototype.isReactComponent={},O.prototype.setState=function(k,I){if(typeof k!="object"&&typeof k!="function"&&k!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,k,I,"setState")},O.prototype.forceUpdate=function(k){this.updater.enqueueForceUpdate(this,k,"forceUpdate")};function z(){}z.prototype=O.prototype;function B(k,I,X){this.props=k,this.context=I,this.refs=T,this.updater=X||E}var Y=B.prototype=new z;Y.constructor=B,R(Y,O.prototype),Y.isPureReactComponent=!0;var J=Array.isArray;function G(){}var K={H:null,A:null,T:null,S:null},P=Object.prototype.hasOwnProperty;function F(k,I,X){var ee=X.ref;return{$$typeof:a,type:k,key:I,ref:ee!==void 0?ee:null,props:X}}function ve(k,I){return F(k.type,I,k.props)}function be(k){return typeof k=="object"&&k!==null&&k.$$typeof===a}function Ae(k){var I={"=":"=0",":":"=2"};return"$"+k.replace(/[=:]/g,function(X){return I[X]})}var Se=/\/+/g;function q(k,I){return typeof k=="object"&&k!==null&&k.key!=null?Ae(""+k.key):I.toString(36)}function V(k){switch(k.status){case"fulfilled":return k.value;case"rejected":throw k.reason;default:switch(typeof k.status=="string"?k.then(G,G):(k.status="pending",k.then(function(I){k.status==="pending"&&(k.status="fulfilled",k.value=I)},function(I){k.status==="pending"&&(k.status="rejected",k.reason=I)})),k.status){case"fulfilled":return k.value;case"rejected":throw k.reason}}throw k}function j(k,I,X,ee,fe){var ge=typeof k;(ge==="undefined"||ge==="boolean")&&(k=null);var ze=!1;if(k===null)ze=!0;else switch(ge){case"bigint":case"string":case"number":ze=!0;break;case"object":switch(k.$$typeof){case a:case n:ze=!0;break;case b:return ze=k._init,j(ze(k._payload),I,X,ee,fe)}}if(ze)return fe=fe(k),ze=ee===""?"."+q(k,0):ee,J(fe)?(X="",ze!=null&&(X=ze.replace(Se,"$&/")+"/"),j(fe,I,X,"",function(pn){return pn})):fe!=null&&(be(fe)&&(fe=ve(fe,X+(fe.key==null||k&&k.key===fe.key?"":(""+fe.key).replace(Se,"$&/")+"/")+ze)),I.push(fe)),1;ze=0;var Ke=ee===""?".":ee+":";if(J(k))for(var Me=0;Me<k.length;Me++)ee=k[Me],ge=Ke+q(ee,Me),ze+=j(ee,I,X,ge,fe);else if(Me=_(k),typeof Me=="function")for(k=Me.call(k),Me=0;!(ee=k.next()).done;)ee=ee.value,ge=Ke+q(ee,Me++),ze+=j(ee,I,X,ge,fe);else if(ge==="object"){if(typeof k.then=="function")return j(V(k),I,X,ee,fe);throw I=String(k),Error("Objects are not valid as a React child (found: "+(I==="[object Object]"?"object with keys {"+Object.keys(k).join(", ")+"}":I)+"). If you meant to render a collection of children, use an array instead.")}return ze}function M(k,I,X){if(k==null)return k;var ee=[],fe=0;return j(k,ee,"","",function(ge){return I.call(X,ge,fe++)}),ee}function Q(k){if(k._status===-1){var I=k._result;I=I(),I.then(function(X){(k._status===0||k._status===-1)&&(k._status=1,k._result=X)},function(X){(k._status===0||k._status===-1)&&(k._status=2,k._result=X)}),k._status===-1&&(k._status=0,k._result=I)}if(k._status===1)return k._result.default;throw k._result}var de=typeof reportError=="function"?reportError:function(k){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var I=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof k=="object"&&k!==null&&typeof k.message=="string"?String(k.message):String(k),error:k});if(!window.dispatchEvent(I))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",k);return}console.error(k)},he={map:M,forEach:function(k,I,X){M(k,function(){I.apply(this,arguments)},X)},count:function(k){var I=0;return M(k,function(){I++}),I},toArray:function(k){return M(k,function(I){return I})||[]},only:function(k){if(!be(k))throw Error("React.Children.only expected to receive a single React element child.");return k}};return ye.Activity=x,ye.Children=he,ye.Component=O,ye.Fragment=r,ye.Profiler=u,ye.PureComponent=B,ye.StrictMode=o,ye.Suspense=g,ye.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=K,ye.__COMPILER_RUNTIME={__proto__:null,c:function(k){return K.H.useMemoCache(k)}},ye.cache=function(k){return function(){return k.apply(null,arguments)}},ye.cacheSignal=function(){return null},ye.cloneElement=function(k,I,X){if(k==null)throw Error("The argument must be a React element, but you passed "+k+".");var ee=R({},k.props),fe=k.key;if(I!=null)for(ge in I.key!==void 0&&(fe=""+I.key),I)!P.call(I,ge)||ge==="key"||ge==="__self"||ge==="__source"||ge==="ref"&&I.ref===void 0||(ee[ge]=I[ge]);var ge=arguments.length-2;if(ge===1)ee.children=X;else if(1<ge){for(var ze=Array(ge),Ke=0;Ke<ge;Ke++)ze[Ke]=arguments[Ke+2];ee.children=ze}return F(k.type,fe,ee)},ye.createContext=function(k){return k={$$typeof:f,_currentValue:k,_currentValue2:k,_threadCount:0,Provider:null,Consumer:null},k.Provider=k,k.Consumer={$$typeof:d,_context:k},k},ye.createElement=function(k,I,X){var ee,fe={},ge=null;if(I!=null)for(ee in I.key!==void 0&&(ge=""+I.key),I)P.call(I,ee)&&ee!=="key"&&ee!=="__self"&&ee!=="__source"&&(fe[ee]=I[ee]);var ze=arguments.length-2;if(ze===1)fe.children=X;else if(1<ze){for(var Ke=Array(ze),Me=0;Me<ze;Me++)Ke[Me]=arguments[Me+2];fe.children=Ke}if(k&&k.defaultProps)for(ee in ze=k.defaultProps,ze)fe[ee]===void 0&&(fe[ee]=ze[ee]);return F(k,ge,fe)},ye.createRef=function(){return{current:null}},ye.forwardRef=function(k){return{$$typeof:p,render:k}},ye.isValidElement=be,ye.lazy=function(k){return{$$typeof:b,_payload:{_status:-1,_result:k},_init:Q}},ye.memo=function(k,I){return{$$typeof:y,type:k,compare:I===void 0?null:I}},ye.startTransition=function(k){var I=K.T,X={};K.T=X;try{var ee=k(),fe=K.S;fe!==null&&fe(X,ee),typeof ee=="object"&&ee!==null&&typeof ee.then=="function"&&ee.then(G,de)}catch(ge){de(ge)}finally{I!==null&&X.types!==null&&(I.types=X.types),K.T=I}},ye.unstable_useCacheRefresh=function(){return K.H.useCacheRefresh()},ye.use=function(k){return K.H.use(k)},ye.useActionState=function(k,I,X){return K.H.useActionState(k,I,X)},ye.useCallback=function(k,I){return K.H.useCallback(k,I)},ye.useContext=function(k){return K.H.useContext(k)},ye.useDebugValue=function(){},ye.useDeferredValue=function(k,I){return K.H.useDeferredValue(k,I)},ye.useEffect=function(k,I){return K.H.useEffect(k,I)},ye.useEffectEvent=function(k){return K.H.useEffectEvent(k)},ye.useId=function(){return K.H.useId()},ye.useImperativeHandle=function(k,I,X){return K.H.useImperativeHandle(k,I,X)},ye.useInsertionEffect=function(k,I){return K.H.useInsertionEffect(k,I)},ye.useLayoutEffect=function(k,I){return K.H.useLayoutEffect(k,I)},ye.useMemo=function(k,I){return K.H.useMemo(k,I)},ye.useOptimistic=function(k,I){return K.H.useOptimistic(k,I)},ye.useReducer=function(k,I,X){return K.H.useReducer(k,I,X)},ye.useRef=function(k){return K.H.useRef(k)},ye.useState=function(k){return K.H.useState(k)},ye.useSyncExternalStore=function(k,I,X){return K.H.useSyncExternalStore(k,I,X)},ye.useTransition=function(){return K.H.useTransition()},ye.version="19.2.3",ye}var Vp;function Au(){return Vp||(Vp=1,Jc.exports=P0()),Jc.exports}var w=Au(),Qc={exports:{}},Nr={},Xc={exports:{}},Fc={};var Yp;function W0(){return Yp||(Yp=1,(function(a){function n(j,M){var Q=j.length;j.push(M);e:for(;0<Q;){var de=Q-1>>>1,he=j[de];if(0<u(he,M))j[de]=M,j[Q]=he,Q=de;else break e}}function r(j){return j.length===0?null:j[0]}function o(j){if(j.length===0)return null;var M=j[0],Q=j.pop();if(Q!==M){j[0]=Q;e:for(var de=0,he=j.length,k=he>>>1;de<k;){var I=2*(de+1)-1,X=j[I],ee=I+1,fe=j[ee];if(0>u(X,Q))ee<he&&0>u(fe,X)?(j[de]=fe,j[ee]=Q,de=ee):(j[de]=X,j[I]=Q,de=I);else if(ee<he&&0>u(fe,Q))j[de]=fe,j[ee]=Q,de=ee;else break e}}return M}function u(j,M){var Q=j.sortIndex-M.sortIndex;return Q!==0?Q:j.id-M.id}if(a.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var d=performance;a.unstable_now=function(){return d.now()}}else{var f=Date,p=f.now();a.unstable_now=function(){return f.now()-p}}var g=[],y=[],b=1,x=null,S=3,_=!1,E=!1,R=!1,T=!1,O=typeof setTimeout=="function"?setTimeout:null,z=typeof clearTimeout=="function"?clearTimeout:null,B=typeof setImmediate<"u"?setImmediate:null;function Y(j){for(var M=r(y);M!==null;){if(M.callback===null)o(y);else if(M.startTime<=j)o(y),M.sortIndex=M.expirationTime,n(g,M);else break;M=r(y)}}function J(j){if(R=!1,Y(j),!E)if(r(g)!==null)E=!0,G||(G=!0,Ae());else{var M=r(y);M!==null&&V(J,M.startTime-j)}}var G=!1,K=-1,P=5,F=-1;function ve(){return T?!0:!(a.unstable_now()-F<P)}function be(){if(T=!1,G){var j=a.unstable_now();F=j;var M=!0;try{e:{E=!1,R&&(R=!1,z(K),K=-1),_=!0;var Q=S;try{t:{for(Y(j),x=r(g);x!==null&&!(x.expirationTime>j&&ve());){var de=x.callback;if(typeof de=="function"){x.callback=null,S=x.priorityLevel;var he=de(x.expirationTime<=j);if(j=a.unstable_now(),typeof he=="function"){x.callback=he,Y(j),M=!0;break t}x===r(g)&&o(g),Y(j)}else o(g);x=r(g)}if(x!==null)M=!0;else{var k=r(y);k!==null&&V(J,k.startTime-j),M=!1}}break e}finally{x=null,S=Q,_=!1}M=void 0}}finally{M?Ae():G=!1}}}var Ae;if(typeof B=="function")Ae=function(){B(be)};else if(typeof MessageChannel<"u"){var Se=new MessageChannel,q=Se.port2;Se.port1.onmessage=be,Ae=function(){q.postMessage(null)}}else Ae=function(){O(be,0)};function V(j,M){K=O(function(){j(a.unstable_now())},M)}a.unstable_IdlePriority=5,a.unstable_ImmediatePriority=1,a.unstable_LowPriority=4,a.unstable_NormalPriority=3,a.unstable_Profiling=null,a.unstable_UserBlockingPriority=2,a.unstable_cancelCallback=function(j){j.callback=null},a.unstable_forceFrameRate=function(j){0>j||125<j?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<j?Math.floor(1e3/j):5},a.unstable_getCurrentPriorityLevel=function(){return S},a.unstable_next=function(j){switch(S){case 1:case 2:case 3:var M=3;break;default:M=S}var Q=S;S=M;try{return j()}finally{S=Q}},a.unstable_requestPaint=function(){T=!0},a.unstable_runWithPriority=function(j,M){switch(j){case 1:case 2:case 3:case 4:case 5:break;default:j=3}var Q=S;S=j;try{return M()}finally{S=Q}},a.unstable_scheduleCallback=function(j,M,Q){var de=a.unstable_now();switch(typeof Q=="object"&&Q!==null?(Q=Q.delay,Q=typeof Q=="number"&&0<Q?de+Q:de):Q=de,j){case 1:var he=-1;break;case 2:he=250;break;case 5:he=1073741823;break;case 4:he=1e4;break;default:he=5e3}return he=Q+he,j={id:b++,callback:M,priorityLevel:j,startTime:Q,expirationTime:he,sortIndex:-1},Q>de?(j.sortIndex=Q,n(y,j),r(g)===null&&j===r(y)&&(R?(z(K),K=-1):R=!0,V(J,Q-de))):(j.sortIndex=he,n(g,j),E||_||(E=!0,G||(G=!0,Ae()))),j},a.unstable_shouldYield=ve,a.unstable_wrapCallback=function(j){var M=S;return function(){var Q=S;S=M;try{return j.apply(this,arguments)}finally{S=Q}}}})(Fc)),Fc}var Kp;function Z0(){return Kp||(Kp=1,Xc.exports=W0()),Xc.exports}var eu={exports:{}},St={};var Jp;function V0(){if(Jp)return St;Jp=1;var a=Au();function n(g){var y="https://react.dev/errors/"+g;if(1<arguments.length){y+="?args[]="+encodeURIComponent(arguments[1]);for(var b=2;b<arguments.length;b++)y+="&args[]="+encodeURIComponent(arguments[b])}return"Minified React error #"+g+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(){}var o={d:{f:r,r:function(){throw Error(n(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},u=Symbol.for("react.portal");function d(g,y,b){var x=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:u,key:x==null?null:""+x,children:g,containerInfo:y,implementation:b}}var f=a.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function p(g,y){if(g==="font")return"";if(typeof y=="string")return y==="use-credentials"?y:""}return St.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=o,St.createPortal=function(g,y){var b=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11)throw Error(n(299));return d(g,y,null,b)},St.flushSync=function(g){var y=f.T,b=o.p;try{if(f.T=null,o.p=2,g)return g()}finally{f.T=y,o.p=b,o.d.f()}},St.preconnect=function(g,y){typeof g=="string"&&(y?(y=y.crossOrigin,y=typeof y=="string"?y==="use-credentials"?y:"":void 0):y=null,o.d.C(g,y))},St.prefetchDNS=function(g){typeof g=="string"&&o.d.D(g)},St.preinit=function(g,y){if(typeof g=="string"&&y&&typeof y.as=="string"){var b=y.as,x=p(b,y.crossOrigin),S=typeof y.integrity=="string"?y.integrity:void 0,_=typeof y.fetchPriority=="string"?y.fetchPriority:void 0;b==="style"?o.d.S(g,typeof y.precedence=="string"?y.precedence:void 0,{crossOrigin:x,integrity:S,fetchPriority:_}):b==="script"&&o.d.X(g,{crossOrigin:x,integrity:S,fetchPriority:_,nonce:typeof y.nonce=="string"?y.nonce:void 0})}},St.preinitModule=function(g,y){if(typeof g=="string")if(typeof y=="object"&&y!==null){if(y.as==null||y.as==="script"){var b=p(y.as,y.crossOrigin);o.d.M(g,{crossOrigin:b,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0})}}else y==null&&o.d.M(g)},St.preload=function(g,y){if(typeof g=="string"&&typeof y=="object"&&y!==null&&typeof y.as=="string"){var b=y.as,x=p(b,y.crossOrigin);o.d.L(g,b,{crossOrigin:x,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0,type:typeof y.type=="string"?y.type:void 0,fetchPriority:typeof y.fetchPriority=="string"?y.fetchPriority:void 0,referrerPolicy:typeof y.referrerPolicy=="string"?y.referrerPolicy:void 0,imageSrcSet:typeof y.imageSrcSet=="string"?y.imageSrcSet:void 0,imageSizes:typeof y.imageSizes=="string"?y.imageSizes:void 0,media:typeof y.media=="string"?y.media:void 0})}},St.preloadModule=function(g,y){if(typeof g=="string")if(y){var b=p(y.as,y.crossOrigin);o.d.m(g,{as:typeof y.as=="string"&&y.as!=="script"?y.as:void 0,crossOrigin:b,integrity:typeof y.integrity=="string"?y.integrity:void 0})}else o.d.m(g)},St.requestFormReset=function(g){o.d.r(g)},St.unstable_batchedUpdates=function(g,y){return g(y)},St.useFormState=function(g,y,b){return f.H.useFormState(g,y,b)},St.useFormStatus=function(){return f.H.useHostTransitionStatus()},St.version="19.2.3",St}var Qp;function Y0(){if(Qp)return eu.exports;Qp=1;function a(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(a)}catch(n){console.error(n)}}return a(),eu.exports=V0(),eu.exports}var Xp;function K0(){if(Xp)return Nr;Xp=1;var a=Z0(),n=Au(),r=Y0();function o(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var i=2;i<arguments.length;i++)t+="&args[]="+encodeURIComponent(arguments[i])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function u(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function d(e){var t=e,i=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(i=t.return),e=t.return;while(e)}return t.tag===3?i:null}function f(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function p(e){if(e.tag===31){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function g(e){if(d(e)!==e)throw Error(o(188))}function y(e){var t=e.alternate;if(!t){if(t=d(e),t===null)throw Error(o(188));return t!==e?null:e}for(var i=e,s=t;;){var l=i.return;if(l===null)break;var h=l.alternate;if(h===null){if(s=l.return,s!==null){i=s;continue}break}if(l.child===h.child){for(h=l.child;h;){if(h===i)return g(l),e;if(h===s)return g(l),t;h=h.sibling}throw Error(o(188))}if(i.return!==s.return)i=l,s=h;else{for(var m=!1,v=l.child;v;){if(v===i){m=!0,i=l,s=h;break}if(v===s){m=!0,s=l,i=h;break}v=v.sibling}if(!m){for(v=h.child;v;){if(v===i){m=!0,i=h,s=l;break}if(v===s){m=!0,s=h,i=l;break}v=v.sibling}if(!m)throw Error(o(189))}}if(i.alternate!==s)throw Error(o(190))}if(i.tag!==3)throw Error(o(188));return i.stateNode.current===i?e:t}function b(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=b(e),t!==null)return t;e=e.sibling}return null}var x=Object.assign,S=Symbol.for("react.element"),_=Symbol.for("react.transitional.element"),E=Symbol.for("react.portal"),R=Symbol.for("react.fragment"),T=Symbol.for("react.strict_mode"),O=Symbol.for("react.profiler"),z=Symbol.for("react.consumer"),B=Symbol.for("react.context"),Y=Symbol.for("react.forward_ref"),J=Symbol.for("react.suspense"),G=Symbol.for("react.suspense_list"),K=Symbol.for("react.memo"),P=Symbol.for("react.lazy"),F=Symbol.for("react.activity"),ve=Symbol.for("react.memo_cache_sentinel"),be=Symbol.iterator;function Ae(e){return e===null||typeof e!="object"?null:(e=be&&e[be]||e["@@iterator"],typeof e=="function"?e:null)}var Se=Symbol.for("react.client.reference");function q(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===Se?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case R:return"Fragment";case O:return"Profiler";case T:return"StrictMode";case J:return"Suspense";case G:return"SuspenseList";case F:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case E:return"Portal";case B:return e.displayName||"Context";case z:return(e._context.displayName||"Context")+".Consumer";case Y:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case K:return t=e.displayName||null,t!==null?t:q(e.type)||"Memo";case P:t=e._payload,e=e._init;try{return q(e(t))}catch{}}return null}var V=Array.isArray,j=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,M=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Q={pending:!1,data:null,method:null,action:null},de=[],he=-1;function k(e){return{current:e}}function I(e){0>he||(e.current=de[he],de[he]=null,he--)}function X(e,t){he++,de[he]=e.current,e.current=t}var ee=k(null),fe=k(null),ge=k(null),ze=k(null);function Ke(e,t){switch(X(ge,t),X(fe,e),X(ee,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?fp(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=fp(t),e=pp(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}I(ee),X(ee,e)}function Me(){I(ee),I(fe),I(ge)}function pn(e){e.memoizedState!==null&&X(ze,e);var t=ee.current,i=pp(t,e.type);t!==i&&(X(fe,e),X(ee,i))}function gn(e){fe.current===e&&(I(ee),I(fe)),ze.current===e&&(I(ze),Ar._currentValue=Q)}var ne,oe;function pe(e){if(ne===void 0)try{throw Error()}catch(i){var t=i.stack.trim().match(/\n( *(at )?)/);ne=t&&t[1]||"",oe=-1<i.stack.indexOf(`
    at`)?" (<anonymous>)":-1<i.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ne+e+oe}var ke=!1;function _e(e,t){if(!e||ke)return"";ke=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var s={DetermineComponentFrameRoot:function(){try{if(t){var Z=function(){throw Error()};if(Object.defineProperty(Z.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Z,[])}catch(H){var L=H}Reflect.construct(e,[],Z)}else{try{Z.call()}catch(H){L=H}e.call(Z.prototype)}}else{try{throw Error()}catch(H){L=H}(Z=e())&&typeof Z.catch=="function"&&Z.catch(function(){})}}catch(H){if(H&&L&&typeof H.stack=="string")return[H.stack,L.stack]}return[null,null]}};s.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var l=Object.getOwnPropertyDescriptor(s.DetermineComponentFrameRoot,"name");l&&l.configurable&&Object.defineProperty(s.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var h=s.DetermineComponentFrameRoot(),m=h[0],v=h[1];if(m&&v){var C=m.split(`
`),U=v.split(`
`);for(l=s=0;s<C.length&&!C[s].includes("DetermineComponentFrameRoot");)s++;for(;l<U.length&&!U[l].includes("DetermineComponentFrameRoot");)l++;if(s===C.length||l===U.length)for(s=C.length-1,l=U.length-1;1<=s&&0<=l&&C[s]!==U[l];)l--;for(;1<=s&&0<=l;s--,l--)if(C[s]!==U[l]){if(s!==1||l!==1)do if(s--,l--,0>l||C[s]!==U[l]){var $=`
`+C[s].replace(" at new "," at ");return e.displayName&&$.includes("<anonymous>")&&($=$.replace("<anonymous>",e.displayName)),$}while(1<=s&&0<=l);break}}}finally{ke=!1,Error.prepareStackTrace=i}return(i=e?e.displayName||e.name:"")?pe(i):""}function Ot(e,t){switch(e.tag){case 26:case 27:case 5:return pe(e.type);case 16:return pe("Lazy");case 13:return e.child!==t&&t!==null?pe("Suspense Fallback"):pe("Suspense");case 19:return pe("SuspenseList");case 0:case 15:return _e(e.type,!1);case 11:return _e(e.type.render,!1);case 1:return _e(e.type,!0);case 31:return pe("Activity");default:return""}}function ie(e){try{var t="",i=null;do t+=Ot(e,i),i=e,e=e.return;while(e);return t}catch(s){return`
Error generating stack: `+s.message+`
`+s.stack}}var me=Object.prototype.hasOwnProperty,$e=a.unstable_scheduleCallback,tt=a.unstable_cancelCallback,Dt=a.unstable_shouldYield,Vt=a.unstable_requestPaint,at=a.unstable_now,es=a.unstable_getCurrentPriorityLevel,$a=a.unstable_ImmediatePriority,Wu=a.unstable_UserBlockingPriority,ts=a.unstable_NormalPriority,_m=a.unstable_LowPriority,Zu=a.unstable_IdlePriority,Em=a.log,Rm=a.unstable_setDisableYieldValue,Ia=null,Bt=null;function Pn(e){if(typeof Em=="function"&&Rm(e),Bt&&typeof Bt.setStrictMode=="function")try{Bt.setStrictMode(Ia,e)}catch{}}var Nt=Math.clz32?Math.clz32:km,jm=Math.log,Cm=Math.LN2;function km(e){return e>>>=0,e===0?32:31-(jm(e)/Cm|0)|0}var ns=256,is=262144,as=4194304;function yi(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function rs(e,t,i){var s=e.pendingLanes;if(s===0)return 0;var l=0,h=e.suspendedLanes,m=e.pingedLanes;e=e.warmLanes;var v=s&134217727;return v!==0?(s=v&~h,s!==0?l=yi(s):(m&=v,m!==0?l=yi(m):i||(i=v&~e,i!==0&&(l=yi(i))))):(v=s&~h,v!==0?l=yi(v):m!==0?l=yi(m):i||(i=s&~e,i!==0&&(l=yi(i)))),l===0?0:t!==0&&t!==l&&(t&h)===0&&(h=l&-l,i=t&-t,h>=i||h===32&&(i&4194048)!==0)?t:l}function Ga(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function Tm(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Vu(){var e=as;return as<<=1,(as&62914560)===0&&(as=4194304),e}function Mo(e){for(var t=[],i=0;31>i;i++)t.push(e);return t}function Pa(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Am(e,t,i,s,l,h){var m=e.pendingLanes;e.pendingLanes=i,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=i,e.entangledLanes&=i,e.errorRecoveryDisabledLanes&=i,e.shellSuspendCounter=0;var v=e.entanglements,C=e.expirationTimes,U=e.hiddenUpdates;for(i=m&~i;0<i;){var $=31-Nt(i),Z=1<<$;v[$]=0,C[$]=-1;var L=U[$];if(L!==null)for(U[$]=null,$=0;$<L.length;$++){var H=L[$];H!==null&&(H.lane&=-536870913)}i&=~Z}s!==0&&Yu(e,s,0),h!==0&&l===0&&e.tag!==0&&(e.suspendedLanes|=h&~(m&~t))}function Yu(e,t,i){e.pendingLanes|=t,e.suspendedLanes&=~t;var s=31-Nt(t);e.entangledLanes|=t,e.entanglements[s]=e.entanglements[s]|1073741824|i&261930}function Ku(e,t){var i=e.entangledLanes|=t;for(e=e.entanglements;i;){var s=31-Nt(i),l=1<<s;l&t|e[s]&t&&(e[s]|=t),i&=~l}}function Ju(e,t){var i=t&-t;return i=(i&42)!==0?1:Lo(i),(i&(e.suspendedLanes|t))!==0?0:i}function Lo(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Ho(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function Qu(){var e=M.p;return e!==0?e:(e=window.event,e===void 0?32:Mp(e.type))}function Xu(e,t){var i=M.p;try{return M.p=e,t()}finally{M.p=i}}var Wn=Math.random().toString(36).slice(2),gt="__reactFiber$"+Wn,Rt="__reactProps$"+Wn,Ii="__reactContainer$"+Wn,qo="__reactEvents$"+Wn,zm="__reactListeners$"+Wn,Om="__reactHandles$"+Wn,Fu="__reactResources$"+Wn,Wa="__reactMarker$"+Wn;function $o(e){delete e[gt],delete e[Rt],delete e[qo],delete e[zm],delete e[Om]}function Gi(e){var t=e[gt];if(t)return t;for(var i=e.parentNode;i;){if(t=i[Ii]||i[gt]){if(i=t.alternate,t.child!==null||i!==null&&i.child!==null)for(e=wp(e);e!==null;){if(i=e[gt])return i;e=wp(e)}return t}e=i,i=e.parentNode}return null}function Pi(e){if(e=e[gt]||e[Ii]){var t=e.tag;if(t===5||t===6||t===13||t===31||t===26||t===27||t===3)return e}return null}function Za(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(o(33))}function Wi(e){var t=e[Fu];return t||(t=e[Fu]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function ft(e){e[Wa]=!0}var ed=new Set,td={};function bi(e,t){Zi(e,t),Zi(e+"Capture",t)}function Zi(e,t){for(td[e]=t,e=0;e<t.length;e++)ed.add(t[e])}var Dm=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),nd={},id={};function Bm(e){return me.call(id,e)?!0:me.call(nd,e)?!1:Dm.test(e)?id[e]=!0:(nd[e]=!0,!1)}function ss(e,t,i){if(Bm(t))if(i===null)e.removeAttribute(t);else{switch(typeof i){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var s=t.toLowerCase().slice(0,5);if(s!=="data-"&&s!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+i)}}function os(e,t,i){if(i===null)e.removeAttribute(t);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+i)}}function wn(e,t,i,s){if(s===null)e.removeAttribute(i);else{switch(typeof s){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(i);return}e.setAttributeNS(t,i,""+s)}}function Yt(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function ad(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Nm(e,t,i){var s=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var l=s.get,h=s.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return l.call(this)},set:function(m){i=""+m,h.call(this,m)}}),Object.defineProperty(e,t,{enumerable:s.enumerable}),{getValue:function(){return i},setValue:function(m){i=""+m},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Io(e){if(!e._valueTracker){var t=ad(e)?"checked":"value";e._valueTracker=Nm(e,t,""+e[t])}}function rd(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var i=t.getValue(),s="";return e&&(s=ad(e)?e.checked?"true":"false":e.value),e=s,e!==i?(t.setValue(e),!0):!1}function ls(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var Um=/[\n"\\]/g;function Kt(e){return e.replace(Um,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function Go(e,t,i,s,l,h,m,v){e.name="",m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"?e.type=m:e.removeAttribute("type"),t!=null?m==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+Yt(t)):e.value!==""+Yt(t)&&(e.value=""+Yt(t)):m!=="submit"&&m!=="reset"||e.removeAttribute("value"),t!=null?Po(e,m,Yt(t)):i!=null?Po(e,m,Yt(i)):s!=null&&e.removeAttribute("value"),l==null&&h!=null&&(e.defaultChecked=!!h),l!=null&&(e.checked=l&&typeof l!="function"&&typeof l!="symbol"),v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?e.name=""+Yt(v):e.removeAttribute("name")}function sd(e,t,i,s,l,h,m,v){if(h!=null&&typeof h!="function"&&typeof h!="symbol"&&typeof h!="boolean"&&(e.type=h),t!=null||i!=null){if(!(h!=="submit"&&h!=="reset"||t!=null)){Io(e);return}i=i!=null?""+Yt(i):"",t=t!=null?""+Yt(t):i,v||t===e.value||(e.value=t),e.defaultValue=t}s=s??l,s=typeof s!="function"&&typeof s!="symbol"&&!!s,e.checked=v?e.checked:!!s,e.defaultChecked=!!s,m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(e.name=m),Io(e)}function Po(e,t,i){t==="number"&&ls(e.ownerDocument)===e||e.defaultValue===""+i||(e.defaultValue=""+i)}function Vi(e,t,i,s){if(e=e.options,t){t={};for(var l=0;l<i.length;l++)t["$"+i[l]]=!0;for(i=0;i<e.length;i++)l=t.hasOwnProperty("$"+e[i].value),e[i].selected!==l&&(e[i].selected=l),l&&s&&(e[i].defaultSelected=!0)}else{for(i=""+Yt(i),t=null,l=0;l<e.length;l++){if(e[l].value===i){e[l].selected=!0,s&&(e[l].defaultSelected=!0);return}t!==null||e[l].disabled||(t=e[l])}t!==null&&(t.selected=!0)}}function od(e,t,i){if(t!=null&&(t=""+Yt(t),t!==e.value&&(e.value=t),i==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=i!=null?""+Yt(i):""}function ld(e,t,i,s){if(t==null){if(s!=null){if(i!=null)throw Error(o(92));if(V(s)){if(1<s.length)throw Error(o(93));s=s[0]}i=s}i==null&&(i=""),t=i}i=Yt(t),e.defaultValue=i,s=e.textContent,s===i&&s!==""&&s!==null&&(e.value=s),Io(e)}function Yi(e,t){if(t){var i=e.firstChild;if(i&&i===e.lastChild&&i.nodeType===3){i.nodeValue=t;return}}e.textContent=t}var Mm=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function cd(e,t,i){var s=t.indexOf("--")===0;i==null||typeof i=="boolean"||i===""?s?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":s?e.setProperty(t,i):typeof i!="number"||i===0||Mm.has(t)?t==="float"?e.cssFloat=i:e[t]=(""+i).trim():e[t]=i+"px"}function ud(e,t,i){if(t!=null&&typeof t!="object")throw Error(o(62));if(e=e.style,i!=null){for(var s in i)!i.hasOwnProperty(s)||t!=null&&t.hasOwnProperty(s)||(s.indexOf("--")===0?e.setProperty(s,""):s==="float"?e.cssFloat="":e[s]="");for(var l in t)s=t[l],t.hasOwnProperty(l)&&i[l]!==s&&cd(e,l,s)}else for(var h in t)t.hasOwnProperty(h)&&cd(e,h,t[h])}function Wo(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Lm=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Hm=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function cs(e){return Hm.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function Sn(){}var Zo=null;function Vo(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Ki=null,Ji=null;function dd(e){var t=Pi(e);if(t&&(e=t.stateNode)){var i=e[Rt]||null;e:switch(e=t.stateNode,t.type){case"input":if(Go(e,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name),t=i.name,i.type==="radio"&&t!=null){for(i=e;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll('input[name="'+Kt(""+t)+'"][type="radio"]'),t=0;t<i.length;t++){var s=i[t];if(s!==e&&s.form===e.form){var l=s[Rt]||null;if(!l)throw Error(o(90));Go(s,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name)}}for(t=0;t<i.length;t++)s=i[t],s.form===e.form&&rd(s)}break e;case"textarea":od(e,i.value,i.defaultValue);break e;case"select":t=i.value,t!=null&&Vi(e,!!i.multiple,t,!1)}}}var Yo=!1;function hd(e,t,i){if(Yo)return e(t,i);Yo=!0;try{var s=e(t);return s}finally{if(Yo=!1,(Ki!==null||Ji!==null)&&(Js(),Ki&&(t=Ki,e=Ji,Ji=Ki=null,dd(t),e)))for(t=0;t<e.length;t++)dd(e[t])}}function Va(e,t){var i=e.stateNode;if(i===null)return null;var s=i[Rt]||null;if(s===null)return null;i=s[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(e=e.type,s=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!s;break e;default:e=!1}if(e)return null;if(i&&typeof i!="function")throw Error(o(231,t,typeof i));return i}var _n=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ko=!1;if(_n)try{var Ya={};Object.defineProperty(Ya,"passive",{get:function(){Ko=!0}}),window.addEventListener("test",Ya,Ya),window.removeEventListener("test",Ya,Ya)}catch{Ko=!1}var Zn=null,Jo=null,us=null;function fd(){if(us)return us;var e,t=Jo,i=t.length,s,l="value"in Zn?Zn.value:Zn.textContent,h=l.length;for(e=0;e<i&&t[e]===l[e];e++);var m=i-e;for(s=1;s<=m&&t[i-s]===l[h-s];s++);return us=l.slice(e,1<s?1-s:void 0)}function ds(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function hs(){return!0}function pd(){return!1}function jt(e){function t(i,s,l,h,m){this._reactName=i,this._targetInst=l,this.type=s,this.nativeEvent=h,this.target=m,this.currentTarget=null;for(var v in e)e.hasOwnProperty(v)&&(i=e[v],this[v]=i?i(h):h[v]);return this.isDefaultPrevented=(h.defaultPrevented!=null?h.defaultPrevented:h.returnValue===!1)?hs:pd,this.isPropagationStopped=pd,this}return x(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var i=this.nativeEvent;i&&(i.preventDefault?i.preventDefault():typeof i.returnValue!="unknown"&&(i.returnValue=!1),this.isDefaultPrevented=hs)},stopPropagation:function(){var i=this.nativeEvent;i&&(i.stopPropagation?i.stopPropagation():typeof i.cancelBubble!="unknown"&&(i.cancelBubble=!0),this.isPropagationStopped=hs)},persist:function(){},isPersistent:hs}),t}var xi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},fs=jt(xi),Ka=x({},xi,{view:0,detail:0}),qm=jt(Ka),Qo,Xo,Ja,ps=x({},Ka,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:el,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ja&&(Ja&&e.type==="mousemove"?(Qo=e.screenX-Ja.screenX,Xo=e.screenY-Ja.screenY):Xo=Qo=0,Ja=e),Qo)},movementY:function(e){return"movementY"in e?e.movementY:Xo}}),gd=jt(ps),$m=x({},ps,{dataTransfer:0}),Im=jt($m),Gm=x({},Ka,{relatedTarget:0}),Fo=jt(Gm),Pm=x({},xi,{animationName:0,elapsedTime:0,pseudoElement:0}),Wm=jt(Pm),Zm=x({},xi,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Vm=jt(Zm),Ym=x({},xi,{data:0}),md=jt(Ym),Km={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Jm={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Qm={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Xm(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Qm[e])?!!t[e]:!1}function el(){return Xm}var Fm=x({},Ka,{key:function(e){if(e.key){var t=Km[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=ds(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Jm[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:el,charCode:function(e){return e.type==="keypress"?ds(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?ds(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),ey=jt(Fm),ty=x({},ps,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),yd=jt(ty),ny=x({},Ka,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:el}),iy=jt(ny),ay=x({},xi,{propertyName:0,elapsedTime:0,pseudoElement:0}),ry=jt(ay),sy=x({},ps,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),oy=jt(sy),ly=x({},xi,{newState:0,oldState:0}),cy=jt(ly),uy=[9,13,27,32],tl=_n&&"CompositionEvent"in window,Qa=null;_n&&"documentMode"in document&&(Qa=document.documentMode);var dy=_n&&"TextEvent"in window&&!Qa,bd=_n&&(!tl||Qa&&8<Qa&&11>=Qa),xd=" ",vd=!1;function wd(e,t){switch(e){case"keyup":return uy.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Sd(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Qi=!1;function hy(e,t){switch(e){case"compositionend":return Sd(t);case"keypress":return t.which!==32?null:(vd=!0,xd);case"textInput":return e=t.data,e===xd&&vd?null:e;default:return null}}function fy(e,t){if(Qi)return e==="compositionend"||!tl&&wd(e,t)?(e=fd(),us=Jo=Zn=null,Qi=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return bd&&t.locale!=="ko"?null:t.data;default:return null}}var py={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function _d(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!py[e.type]:t==="textarea"}function Ed(e,t,i,s){Ki?Ji?Ji.push(s):Ji=[s]:Ki=s,t=io(t,"onChange"),0<t.length&&(i=new fs("onChange","change",null,i,s),e.push({event:i,listeners:t}))}var Xa=null,Fa=null;function gy(e){op(e,0)}function gs(e){var t=Za(e);if(rd(t))return e}function Rd(e,t){if(e==="change")return t}var jd=!1;if(_n){var nl;if(_n){var il="oninput"in document;if(!il){var Cd=document.createElement("div");Cd.setAttribute("oninput","return;"),il=typeof Cd.oninput=="function"}nl=il}else nl=!1;jd=nl&&(!document.documentMode||9<document.documentMode)}function kd(){Xa&&(Xa.detachEvent("onpropertychange",Td),Fa=Xa=null)}function Td(e){if(e.propertyName==="value"&&gs(Fa)){var t=[];Ed(t,Fa,e,Vo(e)),hd(gy,t)}}function my(e,t,i){e==="focusin"?(kd(),Xa=t,Fa=i,Xa.attachEvent("onpropertychange",Td)):e==="focusout"&&kd()}function yy(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return gs(Fa)}function by(e,t){if(e==="click")return gs(t)}function xy(e,t){if(e==="input"||e==="change")return gs(t)}function vy(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Ut=typeof Object.is=="function"?Object.is:vy;function er(e,t){if(Ut(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var i=Object.keys(e),s=Object.keys(t);if(i.length!==s.length)return!1;for(s=0;s<i.length;s++){var l=i[s];if(!me.call(t,l)||!Ut(e[l],t[l]))return!1}return!0}function Ad(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function zd(e,t){var i=Ad(e);e=0;for(var s;i;){if(i.nodeType===3){if(s=e+i.textContent.length,e<=t&&s>=t)return{node:i,offset:t-e};e=s}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=Ad(i)}}function Od(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Od(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Dd(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=ls(e.document);t instanceof e.HTMLIFrameElement;){try{var i=typeof t.contentWindow.location.href=="string"}catch{i=!1}if(i)e=t.contentWindow;else break;t=ls(e.document)}return t}function al(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var wy=_n&&"documentMode"in document&&11>=document.documentMode,Xi=null,rl=null,tr=null,sl=!1;function Bd(e,t,i){var s=i.window===i?i.document:i.nodeType===9?i:i.ownerDocument;sl||Xi==null||Xi!==ls(s)||(s=Xi,"selectionStart"in s&&al(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),tr&&er(tr,s)||(tr=s,s=io(rl,"onSelect"),0<s.length&&(t=new fs("onSelect","select",null,t,i),e.push({event:t,listeners:s}),t.target=Xi)))}function vi(e,t){var i={};return i[e.toLowerCase()]=t.toLowerCase(),i["Webkit"+e]="webkit"+t,i["Moz"+e]="moz"+t,i}var Fi={animationend:vi("Animation","AnimationEnd"),animationiteration:vi("Animation","AnimationIteration"),animationstart:vi("Animation","AnimationStart"),transitionrun:vi("Transition","TransitionRun"),transitionstart:vi("Transition","TransitionStart"),transitioncancel:vi("Transition","TransitionCancel"),transitionend:vi("Transition","TransitionEnd")},ol={},Nd={};_n&&(Nd=document.createElement("div").style,"AnimationEvent"in window||(delete Fi.animationend.animation,delete Fi.animationiteration.animation,delete Fi.animationstart.animation),"TransitionEvent"in window||delete Fi.transitionend.transition);function wi(e){if(ol[e])return ol[e];if(!Fi[e])return e;var t=Fi[e],i;for(i in t)if(t.hasOwnProperty(i)&&i in Nd)return ol[e]=t[i];return e}var Ud=wi("animationend"),Md=wi("animationiteration"),Ld=wi("animationstart"),Sy=wi("transitionrun"),_y=wi("transitionstart"),Ey=wi("transitioncancel"),Hd=wi("transitionend"),qd=new Map,ll="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");ll.push("scrollEnd");function sn(e,t){qd.set(e,t),bi(t,[e])}var ms=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},Jt=[],ea=0,cl=0;function ys(){for(var e=ea,t=cl=ea=0;t<e;){var i=Jt[t];Jt[t++]=null;var s=Jt[t];Jt[t++]=null;var l=Jt[t];Jt[t++]=null;var h=Jt[t];if(Jt[t++]=null,s!==null&&l!==null){var m=s.pending;m===null?l.next=l:(l.next=m.next,m.next=l),s.pending=l}h!==0&&$d(i,l,h)}}function bs(e,t,i,s){Jt[ea++]=e,Jt[ea++]=t,Jt[ea++]=i,Jt[ea++]=s,cl|=s,e.lanes|=s,e=e.alternate,e!==null&&(e.lanes|=s)}function ul(e,t,i,s){return bs(e,t,i,s),xs(e)}function Si(e,t){return bs(e,null,null,t),xs(e)}function $d(e,t,i){e.lanes|=i;var s=e.alternate;s!==null&&(s.lanes|=i);for(var l=!1,h=e.return;h!==null;)h.childLanes|=i,s=h.alternate,s!==null&&(s.childLanes|=i),h.tag===22&&(e=h.stateNode,e===null||e._visibility&1||(l=!0)),e=h,h=h.return;return e.tag===3?(h=e.stateNode,l&&t!==null&&(l=31-Nt(i),e=h.hiddenUpdates,s=e[l],s===null?e[l]=[t]:s.push(t),t.lane=i|536870912),h):null}function xs(e){if(50<_r)throw _r=0,xc=null,Error(o(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var ta={};function Ry(e,t,i,s){this.tag=e,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Mt(e,t,i,s){return new Ry(e,t,i,s)}function dl(e){return e=e.prototype,!(!e||!e.isReactComponent)}function En(e,t){var i=e.alternate;return i===null?(i=Mt(e.tag,t,e.key,e.mode),i.elementType=e.elementType,i.type=e.type,i.stateNode=e.stateNode,i.alternate=e,e.alternate=i):(i.pendingProps=t,i.type=e.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=e.flags&65011712,i.childLanes=e.childLanes,i.lanes=e.lanes,i.child=e.child,i.memoizedProps=e.memoizedProps,i.memoizedState=e.memoizedState,i.updateQueue=e.updateQueue,t=e.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},i.sibling=e.sibling,i.index=e.index,i.ref=e.ref,i.refCleanup=e.refCleanup,i}function Id(e,t){e.flags&=65011714;var i=e.alternate;return i===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=i.childLanes,e.lanes=i.lanes,e.child=i.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=i.memoizedProps,e.memoizedState=i.memoizedState,e.updateQueue=i.updateQueue,e.type=i.type,t=i.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function vs(e,t,i,s,l,h){var m=0;if(s=e,typeof e=="function")dl(e)&&(m=1);else if(typeof e=="string")m=A0(e,i,ee.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case F:return e=Mt(31,i,t,l),e.elementType=F,e.lanes=h,e;case R:return _i(i.children,l,h,t);case T:m=8,l|=24;break;case O:return e=Mt(12,i,t,l|2),e.elementType=O,e.lanes=h,e;case J:return e=Mt(13,i,t,l),e.elementType=J,e.lanes=h,e;case G:return e=Mt(19,i,t,l),e.elementType=G,e.lanes=h,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case B:m=10;break e;case z:m=9;break e;case Y:m=11;break e;case K:m=14;break e;case P:m=16,s=null;break e}m=29,i=Error(o(130,e===null?"null":typeof e,"")),s=null}return t=Mt(m,i,t,l),t.elementType=e,t.type=s,t.lanes=h,t}function _i(e,t,i,s){return e=Mt(7,e,s,t),e.lanes=i,e}function hl(e,t,i){return e=Mt(6,e,null,t),e.lanes=i,e}function Gd(e){var t=Mt(18,null,null,0);return t.stateNode=e,t}function fl(e,t,i){return t=Mt(4,e.children!==null?e.children:[],e.key,t),t.lanes=i,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Pd=new WeakMap;function Qt(e,t){if(typeof e=="object"&&e!==null){var i=Pd.get(e);return i!==void 0?i:(t={value:e,source:t,stack:ie(t)},Pd.set(e,t),t)}return{value:e,source:t,stack:ie(t)}}var na=[],ia=0,ws=null,nr=0,Xt=[],Ft=0,Vn=null,mn=1,yn="";function Rn(e,t){na[ia++]=nr,na[ia++]=ws,ws=e,nr=t}function Wd(e,t,i){Xt[Ft++]=mn,Xt[Ft++]=yn,Xt[Ft++]=Vn,Vn=e;var s=mn;e=yn;var l=32-Nt(s)-1;s&=~(1<<l),i+=1;var h=32-Nt(t)+l;if(30<h){var m=l-l%5;h=(s&(1<<m)-1).toString(32),s>>=m,l-=m,mn=1<<32-Nt(t)+l|i<<l|s,yn=h+e}else mn=1<<h|i<<l|s,yn=e}function pl(e){e.return!==null&&(Rn(e,1),Wd(e,1,0))}function gl(e){for(;e===ws;)ws=na[--ia],na[ia]=null,nr=na[--ia],na[ia]=null;for(;e===Vn;)Vn=Xt[--Ft],Xt[Ft]=null,yn=Xt[--Ft],Xt[Ft]=null,mn=Xt[--Ft],Xt[Ft]=null}function Zd(e,t){Xt[Ft++]=mn,Xt[Ft++]=yn,Xt[Ft++]=Vn,mn=t.id,yn=t.overflow,Vn=e}var mt=null,Ze=null,Te=!1,Yn=null,en=!1,ml=Error(o(519));function Kn(e){var t=Error(o(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw ir(Qt(t,e)),ml}function Vd(e){var t=e.stateNode,i=e.type,s=e.memoizedProps;switch(t[gt]=e,t[Rt]=s,i){case"dialog":Re("cancel",t),Re("close",t);break;case"iframe":case"object":case"embed":Re("load",t);break;case"video":case"audio":for(i=0;i<Rr.length;i++)Re(Rr[i],t);break;case"source":Re("error",t);break;case"img":case"image":case"link":Re("error",t),Re("load",t);break;case"details":Re("toggle",t);break;case"input":Re("invalid",t),sd(t,s.value,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name,!0);break;case"select":Re("invalid",t);break;case"textarea":Re("invalid",t),ld(t,s.value,s.defaultValue,s.children)}i=s.children,typeof i!="string"&&typeof i!="number"&&typeof i!="bigint"||t.textContent===""+i||s.suppressHydrationWarning===!0||dp(t.textContent,i)?(s.popover!=null&&(Re("beforetoggle",t),Re("toggle",t)),s.onScroll!=null&&Re("scroll",t),s.onScrollEnd!=null&&Re("scrollend",t),s.onClick!=null&&(t.onclick=Sn),t=!0):t=!1,t||Kn(e,!0)}function Yd(e){for(mt=e.return;mt;)switch(mt.tag){case 5:case 31:case 13:en=!1;return;case 27:case 3:en=!0;return;default:mt=mt.return}}function aa(e){if(e!==mt)return!1;if(!Te)return Yd(e),Te=!0,!1;var t=e.tag,i;if((i=t!==3&&t!==27)&&((i=t===5)&&(i=e.type,i=!(i!=="form"&&i!=="button")||Bc(e.type,e.memoizedProps)),i=!i),i&&Ze&&Kn(e),Yd(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(o(317));Ze=vp(e)}else if(t===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(o(317));Ze=vp(e)}else t===27?(t=Ze,ci(e.type)?(e=Hc,Hc=null,Ze=e):Ze=t):Ze=mt?nn(e.stateNode.nextSibling):null;return!0}function Ei(){Ze=mt=null,Te=!1}function yl(){var e=Yn;return e!==null&&(At===null?At=e:At.push.apply(At,e),Yn=null),e}function ir(e){Yn===null?Yn=[e]:Yn.push(e)}var bl=k(null),Ri=null,jn=null;function Jn(e,t,i){X(bl,t._currentValue),t._currentValue=i}function Cn(e){e._currentValue=bl.current,I(bl)}function xl(e,t,i){for(;e!==null;){var s=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,s!==null&&(s.childLanes|=t)):s!==null&&(s.childLanes&t)!==t&&(s.childLanes|=t),e===i)break;e=e.return}}function vl(e,t,i,s){var l=e.child;for(l!==null&&(l.return=e);l!==null;){var h=l.dependencies;if(h!==null){var m=l.child;h=h.firstContext;e:for(;h!==null;){var v=h;h=l;for(var C=0;C<t.length;C++)if(v.context===t[C]){h.lanes|=i,v=h.alternate,v!==null&&(v.lanes|=i),xl(h.return,i,e),s||(m=null);break e}h=v.next}}else if(l.tag===18){if(m=l.return,m===null)throw Error(o(341));m.lanes|=i,h=m.alternate,h!==null&&(h.lanes|=i),xl(m,i,e),m=null}else m=l.child;if(m!==null)m.return=l;else for(m=l;m!==null;){if(m===e){m=null;break}if(l=m.sibling,l!==null){l.return=m.return,m=l;break}m=m.return}l=m}}function ra(e,t,i,s){e=null;for(var l=t,h=!1;l!==null;){if(!h){if((l.flags&524288)!==0)h=!0;else if((l.flags&262144)!==0)break}if(l.tag===10){var m=l.alternate;if(m===null)throw Error(o(387));if(m=m.memoizedProps,m!==null){var v=l.type;Ut(l.pendingProps.value,m.value)||(e!==null?e.push(v):e=[v])}}else if(l===ze.current){if(m=l.alternate,m===null)throw Error(o(387));m.memoizedState.memoizedState!==l.memoizedState.memoizedState&&(e!==null?e.push(Ar):e=[Ar])}l=l.return}e!==null&&vl(t,e,i,s),t.flags|=262144}function Ss(e){for(e=e.firstContext;e!==null;){if(!Ut(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function ji(e){Ri=e,jn=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function yt(e){return Kd(Ri,e)}function _s(e,t){return Ri===null&&ji(e),Kd(e,t)}function Kd(e,t){var i=t._currentValue;if(t={context:t,memoizedValue:i,next:null},jn===null){if(e===null)throw Error(o(308));jn=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else jn=jn.next=t;return i}var jy=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(i,s){e.push(s)}};this.abort=function(){t.aborted=!0,e.forEach(function(i){return i()})}},Cy=a.unstable_scheduleCallback,ky=a.unstable_NormalPriority,rt={$$typeof:B,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function wl(){return{controller:new jy,data:new Map,refCount:0}}function ar(e){e.refCount--,e.refCount===0&&Cy(ky,function(){e.controller.abort()})}var rr=null,Sl=0,sa=0,oa=null;function Ty(e,t){if(rr===null){var i=rr=[];Sl=0,sa=Rc(),oa={status:"pending",value:void 0,then:function(s){i.push(s)}}}return Sl++,t.then(Jd,Jd),t}function Jd(){if(--Sl===0&&rr!==null){oa!==null&&(oa.status="fulfilled");var e=rr;rr=null,sa=0,oa=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function Ay(e,t){var i=[],s={status:"pending",value:null,reason:null,then:function(l){i.push(l)}};return e.then(function(){s.status="fulfilled",s.value=t;for(var l=0;l<i.length;l++)(0,i[l])(t)},function(l){for(s.status="rejected",s.reason=l,l=0;l<i.length;l++)(0,i[l])(void 0)}),s}var Qd=j.S;j.S=function(e,t){Nf=at(),typeof t=="object"&&t!==null&&typeof t.then=="function"&&Ty(e,t),Qd!==null&&Qd(e,t)};var Ci=k(null);function _l(){var e=Ci.current;return e!==null?e:Ie.pooledCache}function Es(e,t){t===null?X(Ci,Ci.current):X(Ci,t.pool)}function Xd(){var e=_l();return e===null?null:{parent:rt._currentValue,pool:e}}var la=Error(o(460)),El=Error(o(474)),Rs=Error(o(542)),js={then:function(){}};function Fd(e){return e=e.status,e==="fulfilled"||e==="rejected"}function eh(e,t,i){switch(i=e[i],i===void 0?e.push(t):i!==t&&(t.then(Sn,Sn),t=i),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,nh(e),e;default:if(typeof t.status=="string")t.then(Sn,Sn);else{if(e=Ie,e!==null&&100<e.shellSuspendCounter)throw Error(o(482));e=t,e.status="pending",e.then(function(s){if(t.status==="pending"){var l=t;l.status="fulfilled",l.value=s}},function(s){if(t.status==="pending"){var l=t;l.status="rejected",l.reason=s}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,nh(e),e}throw Ti=t,la}}function ki(e){try{var t=e._init;return t(e._payload)}catch(i){throw i!==null&&typeof i=="object"&&typeof i.then=="function"?(Ti=i,la):i}}var Ti=null;function th(){if(Ti===null)throw Error(o(459));var e=Ti;return Ti=null,e}function nh(e){if(e===la||e===Rs)throw Error(o(483))}var ca=null,sr=0;function Cs(e){var t=sr;return sr+=1,ca===null&&(ca=[]),eh(ca,e,t)}function or(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function ks(e,t){throw t.$$typeof===S?Error(o(525)):(e=Object.prototype.toString.call(t),Error(o(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function ih(e){function t(D,A){if(e){var N=D.deletions;N===null?(D.deletions=[A],D.flags|=16):N.push(A)}}function i(D,A){if(!e)return null;for(;A!==null;)t(D,A),A=A.sibling;return null}function s(D){for(var A=new Map;D!==null;)D.key!==null?A.set(D.key,D):A.set(D.index,D),D=D.sibling;return A}function l(D,A){return D=En(D,A),D.index=0,D.sibling=null,D}function h(D,A,N){return D.index=N,e?(N=D.alternate,N!==null?(N=N.index,N<A?(D.flags|=67108866,A):N):(D.flags|=67108866,A)):(D.flags|=1048576,A)}function m(D){return e&&D.alternate===null&&(D.flags|=67108866),D}function v(D,A,N,W){return A===null||A.tag!==6?(A=hl(N,D.mode,W),A.return=D,A):(A=l(A,N),A.return=D,A)}function C(D,A,N,W){var se=N.type;return se===R?$(D,A,N.props.children,W,N.key):A!==null&&(A.elementType===se||typeof se=="object"&&se!==null&&se.$$typeof===P&&ki(se)===A.type)?(A=l(A,N.props),or(A,N),A.return=D,A):(A=vs(N.type,N.key,N.props,null,D.mode,W),or(A,N),A.return=D,A)}function U(D,A,N,W){return A===null||A.tag!==4||A.stateNode.containerInfo!==N.containerInfo||A.stateNode.implementation!==N.implementation?(A=fl(N,D.mode,W),A.return=D,A):(A=l(A,N.children||[]),A.return=D,A)}function $(D,A,N,W,se){return A===null||A.tag!==7?(A=_i(N,D.mode,W,se),A.return=D,A):(A=l(A,N),A.return=D,A)}function Z(D,A,N){if(typeof A=="string"&&A!==""||typeof A=="number"||typeof A=="bigint")return A=hl(""+A,D.mode,N),A.return=D,A;if(typeof A=="object"&&A!==null){switch(A.$$typeof){case _:return N=vs(A.type,A.key,A.props,null,D.mode,N),or(N,A),N.return=D,N;case E:return A=fl(A,D.mode,N),A.return=D,A;case P:return A=ki(A),Z(D,A,N)}if(V(A)||Ae(A))return A=_i(A,D.mode,N,null),A.return=D,A;if(typeof A.then=="function")return Z(D,Cs(A),N);if(A.$$typeof===B)return Z(D,_s(D,A),N);ks(D,A)}return null}function L(D,A,N,W){var se=A!==null?A.key:null;if(typeof N=="string"&&N!==""||typeof N=="number"||typeof N=="bigint")return se!==null?null:v(D,A,""+N,W);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case _:return N.key===se?C(D,A,N,W):null;case E:return N.key===se?U(D,A,N,W):null;case P:return N=ki(N),L(D,A,N,W)}if(V(N)||Ae(N))return se!==null?null:$(D,A,N,W,null);if(typeof N.then=="function")return L(D,A,Cs(N),W);if(N.$$typeof===B)return L(D,A,_s(D,N),W);ks(D,N)}return null}function H(D,A,N,W,se){if(typeof W=="string"&&W!==""||typeof W=="number"||typeof W=="bigint")return D=D.get(N)||null,v(A,D,""+W,se);if(typeof W=="object"&&W!==null){switch(W.$$typeof){case _:return D=D.get(W.key===null?N:W.key)||null,C(A,D,W,se);case E:return D=D.get(W.key===null?N:W.key)||null,U(A,D,W,se);case P:return W=ki(W),H(D,A,N,W,se)}if(V(W)||Ae(W))return D=D.get(N)||null,$(A,D,W,se,null);if(typeof W.then=="function")return H(D,A,N,Cs(W),se);if(W.$$typeof===B)return H(D,A,N,_s(A,W),se);ks(A,W)}return null}function te(D,A,N,W){for(var se=null,Oe=null,ae=A,we=A=0,Ce=null;ae!==null&&we<N.length;we++){ae.index>we?(Ce=ae,ae=null):Ce=ae.sibling;var De=L(D,ae,N[we],W);if(De===null){ae===null&&(ae=Ce);break}e&&ae&&De.alternate===null&&t(D,ae),A=h(De,A,we),Oe===null?se=De:Oe.sibling=De,Oe=De,ae=Ce}if(we===N.length)return i(D,ae),Te&&Rn(D,we),se;if(ae===null){for(;we<N.length;we++)ae=Z(D,N[we],W),ae!==null&&(A=h(ae,A,we),Oe===null?se=ae:Oe.sibling=ae,Oe=ae);return Te&&Rn(D,we),se}for(ae=s(ae);we<N.length;we++)Ce=H(ae,D,we,N[we],W),Ce!==null&&(e&&Ce.alternate!==null&&ae.delete(Ce.key===null?we:Ce.key),A=h(Ce,A,we),Oe===null?se=Ce:Oe.sibling=Ce,Oe=Ce);return e&&ae.forEach(function(pi){return t(D,pi)}),Te&&Rn(D,we),se}function le(D,A,N,W){if(N==null)throw Error(o(151));for(var se=null,Oe=null,ae=A,we=A=0,Ce=null,De=N.next();ae!==null&&!De.done;we++,De=N.next()){ae.index>we?(Ce=ae,ae=null):Ce=ae.sibling;var pi=L(D,ae,De.value,W);if(pi===null){ae===null&&(ae=Ce);break}e&&ae&&pi.alternate===null&&t(D,ae),A=h(pi,A,we),Oe===null?se=pi:Oe.sibling=pi,Oe=pi,ae=Ce}if(De.done)return i(D,ae),Te&&Rn(D,we),se;if(ae===null){for(;!De.done;we++,De=N.next())De=Z(D,De.value,W),De!==null&&(A=h(De,A,we),Oe===null?se=De:Oe.sibling=De,Oe=De);return Te&&Rn(D,we),se}for(ae=s(ae);!De.done;we++,De=N.next())De=H(ae,D,we,De.value,W),De!==null&&(e&&De.alternate!==null&&ae.delete(De.key===null?we:De.key),A=h(De,A,we),Oe===null?se=De:Oe.sibling=De,Oe=De);return e&&ae.forEach(function($0){return t(D,$0)}),Te&&Rn(D,we),se}function qe(D,A,N,W){if(typeof N=="object"&&N!==null&&N.type===R&&N.key===null&&(N=N.props.children),typeof N=="object"&&N!==null){switch(N.$$typeof){case _:e:{for(var se=N.key;A!==null;){if(A.key===se){if(se=N.type,se===R){if(A.tag===7){i(D,A.sibling),W=l(A,N.props.children),W.return=D,D=W;break e}}else if(A.elementType===se||typeof se=="object"&&se!==null&&se.$$typeof===P&&ki(se)===A.type){i(D,A.sibling),W=l(A,N.props),or(W,N),W.return=D,D=W;break e}i(D,A);break}else t(D,A);A=A.sibling}N.type===R?(W=_i(N.props.children,D.mode,W,N.key),W.return=D,D=W):(W=vs(N.type,N.key,N.props,null,D.mode,W),or(W,N),W.return=D,D=W)}return m(D);case E:e:{for(se=N.key;A!==null;){if(A.key===se)if(A.tag===4&&A.stateNode.containerInfo===N.containerInfo&&A.stateNode.implementation===N.implementation){i(D,A.sibling),W=l(A,N.children||[]),W.return=D,D=W;break e}else{i(D,A);break}else t(D,A);A=A.sibling}W=fl(N,D.mode,W),W.return=D,D=W}return m(D);case P:return N=ki(N),qe(D,A,N,W)}if(V(N))return te(D,A,N,W);if(Ae(N)){if(se=Ae(N),typeof se!="function")throw Error(o(150));return N=se.call(N),le(D,A,N,W)}if(typeof N.then=="function")return qe(D,A,Cs(N),W);if(N.$$typeof===B)return qe(D,A,_s(D,N),W);ks(D,N)}return typeof N=="string"&&N!==""||typeof N=="number"||typeof N=="bigint"?(N=""+N,A!==null&&A.tag===6?(i(D,A.sibling),W=l(A,N),W.return=D,D=W):(i(D,A),W=hl(N,D.mode,W),W.return=D,D=W),m(D)):i(D,A)}return function(D,A,N,W){try{sr=0;var se=qe(D,A,N,W);return ca=null,se}catch(ae){if(ae===la||ae===Rs)throw ae;var Oe=Mt(29,ae,null,D.mode);return Oe.lanes=W,Oe.return=D,Oe}}}var Ai=ih(!0),ah=ih(!1),Qn=!1;function Rl(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function jl(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Xn(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Fn(e,t,i){var s=e.updateQueue;if(s===null)return null;if(s=s.shared,(Be&2)!==0){var l=s.pending;return l===null?t.next=t:(t.next=l.next,l.next=t),s.pending=t,t=xs(e),$d(e,null,i),t}return bs(e,s,t,i),xs(e)}function lr(e,t,i){if(t=t.updateQueue,t!==null&&(t=t.shared,(i&4194048)!==0)){var s=t.lanes;s&=e.pendingLanes,i|=s,t.lanes=i,Ku(e,i)}}function Cl(e,t){var i=e.updateQueue,s=e.alternate;if(s!==null&&(s=s.updateQueue,i===s)){var l=null,h=null;if(i=i.firstBaseUpdate,i!==null){do{var m={lane:i.lane,tag:i.tag,payload:i.payload,callback:null,next:null};h===null?l=h=m:h=h.next=m,i=i.next}while(i!==null);h===null?l=h=t:h=h.next=t}else l=h=t;i={baseState:s.baseState,firstBaseUpdate:l,lastBaseUpdate:h,shared:s.shared,callbacks:s.callbacks},e.updateQueue=i;return}e=i.lastBaseUpdate,e===null?i.firstBaseUpdate=t:e.next=t,i.lastBaseUpdate=t}var kl=!1;function cr(){if(kl){var e=oa;if(e!==null)throw e}}function ur(e,t,i,s){kl=!1;var l=e.updateQueue;Qn=!1;var h=l.firstBaseUpdate,m=l.lastBaseUpdate,v=l.shared.pending;if(v!==null){l.shared.pending=null;var C=v,U=C.next;C.next=null,m===null?h=U:m.next=U,m=C;var $=e.alternate;$!==null&&($=$.updateQueue,v=$.lastBaseUpdate,v!==m&&(v===null?$.firstBaseUpdate=U:v.next=U,$.lastBaseUpdate=C))}if(h!==null){var Z=l.baseState;m=0,$=U=C=null,v=h;do{var L=v.lane&-536870913,H=L!==v.lane;if(H?(je&L)===L:(s&L)===L){L!==0&&L===sa&&(kl=!0),$!==null&&($=$.next={lane:0,tag:v.tag,payload:v.payload,callback:null,next:null});e:{var te=e,le=v;L=t;var qe=i;switch(le.tag){case 1:if(te=le.payload,typeof te=="function"){Z=te.call(qe,Z,L);break e}Z=te;break e;case 3:te.flags=te.flags&-65537|128;case 0:if(te=le.payload,L=typeof te=="function"?te.call(qe,Z,L):te,L==null)break e;Z=x({},Z,L);break e;case 2:Qn=!0}}L=v.callback,L!==null&&(e.flags|=64,H&&(e.flags|=8192),H=l.callbacks,H===null?l.callbacks=[L]:H.push(L))}else H={lane:L,tag:v.tag,payload:v.payload,callback:v.callback,next:null},$===null?(U=$=H,C=Z):$=$.next=H,m|=L;if(v=v.next,v===null){if(v=l.shared.pending,v===null)break;H=v,v=H.next,H.next=null,l.lastBaseUpdate=H,l.shared.pending=null}}while(!0);$===null&&(C=Z),l.baseState=C,l.firstBaseUpdate=U,l.lastBaseUpdate=$,h===null&&(l.shared.lanes=0),ai|=m,e.lanes=m,e.memoizedState=Z}}function rh(e,t){if(typeof e!="function")throw Error(o(191,e));e.call(t)}function sh(e,t){var i=e.callbacks;if(i!==null)for(e.callbacks=null,e=0;e<i.length;e++)rh(i[e],t)}var ua=k(null),Ts=k(0);function oh(e,t){e=Un,X(Ts,e),X(ua,t),Un=e|t.baseLanes}function Tl(){X(Ts,Un),X(ua,ua.current)}function Al(){Un=Ts.current,I(ua),I(Ts)}var Lt=k(null),tn=null;function ei(e){var t=e.alternate;X(nt,nt.current&1),X(Lt,e),tn===null&&(t===null||ua.current!==null||t.memoizedState!==null)&&(tn=e)}function zl(e){X(nt,nt.current),X(Lt,e),tn===null&&(tn=e)}function lh(e){e.tag===22?(X(nt,nt.current),X(Lt,e),tn===null&&(tn=e)):ti()}function ti(){X(nt,nt.current),X(Lt,Lt.current)}function Ht(e){I(Lt),tn===e&&(tn=null),I(nt)}var nt=k(0);function As(e){for(var t=e;t!==null;){if(t.tag===13){var i=t.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||Mc(i)||Lc(i)))return t}else if(t.tag===19&&(t.memoizedProps.revealOrder==="forwards"||t.memoizedProps.revealOrder==="backwards"||t.memoizedProps.revealOrder==="unstable_legacy-backwards"||t.memoizedProps.revealOrder==="together")){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var kn=0,xe=null,Le=null,st=null,zs=!1,da=!1,zi=!1,Os=0,dr=0,ha=null,zy=0;function Xe(){throw Error(o(321))}function Ol(e,t){if(t===null)return!1;for(var i=0;i<t.length&&i<e.length;i++)if(!Ut(e[i],t[i]))return!1;return!0}function Dl(e,t,i,s,l,h){return kn=h,xe=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,j.H=e===null||e.memoizedState===null?Wh:Yl,zi=!1,h=i(s,l),zi=!1,da&&(h=uh(t,i,s,l)),ch(e),h}function ch(e){j.H=pr;var t=Le!==null&&Le.next!==null;if(kn=0,st=Le=xe=null,zs=!1,dr=0,ha=null,t)throw Error(o(300));e===null||ot||(e=e.dependencies,e!==null&&Ss(e)&&(ot=!0))}function uh(e,t,i,s){xe=e;var l=0;do{if(da&&(ha=null),dr=0,da=!1,25<=l)throw Error(o(301));if(l+=1,st=Le=null,e.updateQueue!=null){var h=e.updateQueue;h.lastEffect=null,h.events=null,h.stores=null,h.memoCache!=null&&(h.memoCache.index=0)}j.H=Zh,h=t(i,s)}while(da);return h}function Oy(){var e=j.H,t=e.useState()[0];return t=typeof t.then=="function"?hr(t):t,e=e.useState()[0],(Le!==null?Le.memoizedState:null)!==e&&(xe.flags|=1024),t}function Bl(){var e=Os!==0;return Os=0,e}function Nl(e,t,i){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i}function Ul(e){if(zs){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}zs=!1}kn=0,st=Le=xe=null,da=!1,dr=Os=0,ha=null}function _t(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return st===null?xe.memoizedState=st=e:st=st.next=e,st}function it(){if(Le===null){var e=xe.alternate;e=e!==null?e.memoizedState:null}else e=Le.next;var t=st===null?xe.memoizedState:st.next;if(t!==null)st=t,Le=e;else{if(e===null)throw xe.alternate===null?Error(o(467)):Error(o(310));Le=e,e={memoizedState:Le.memoizedState,baseState:Le.baseState,baseQueue:Le.baseQueue,queue:Le.queue,next:null},st===null?xe.memoizedState=st=e:st=st.next=e}return st}function Ds(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function hr(e){var t=dr;return dr+=1,ha===null&&(ha=[]),e=eh(ha,e,t),t=xe,(st===null?t.memoizedState:st.next)===null&&(t=t.alternate,j.H=t===null||t.memoizedState===null?Wh:Yl),e}function Bs(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return hr(e);if(e.$$typeof===B)return yt(e)}throw Error(o(438,String(e)))}function Ml(e){var t=null,i=xe.updateQueue;if(i!==null&&(t=i.memoCache),t==null){var s=xe.alternate;s!==null&&(s=s.updateQueue,s!==null&&(s=s.memoCache,s!=null&&(t={data:s.data.map(function(l){return l.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),i===null&&(i=Ds(),xe.updateQueue=i),i.memoCache=t,i=t.data[t.index],i===void 0)for(i=t.data[t.index]=Array(e),s=0;s<e;s++)i[s]=ve;return t.index++,i}function Tn(e,t){return typeof t=="function"?t(e):t}function Ns(e){var t=it();return Ll(t,Le,e)}function Ll(e,t,i){var s=e.queue;if(s===null)throw Error(o(311));s.lastRenderedReducer=i;var l=e.baseQueue,h=s.pending;if(h!==null){if(l!==null){var m=l.next;l.next=h.next,h.next=m}t.baseQueue=l=h,s.pending=null}if(h=e.baseState,l===null)e.memoizedState=h;else{t=l.next;var v=m=null,C=null,U=t,$=!1;do{var Z=U.lane&-536870913;if(Z!==U.lane?(je&Z)===Z:(kn&Z)===Z){var L=U.revertLane;if(L===0)C!==null&&(C=C.next={lane:0,revertLane:0,gesture:null,action:U.action,hasEagerState:U.hasEagerState,eagerState:U.eagerState,next:null}),Z===sa&&($=!0);else if((kn&L)===L){U=U.next,L===sa&&($=!0);continue}else Z={lane:0,revertLane:U.revertLane,gesture:null,action:U.action,hasEagerState:U.hasEagerState,eagerState:U.eagerState,next:null},C===null?(v=C=Z,m=h):C=C.next=Z,xe.lanes|=L,ai|=L;Z=U.action,zi&&i(h,Z),h=U.hasEagerState?U.eagerState:i(h,Z)}else L={lane:Z,revertLane:U.revertLane,gesture:U.gesture,action:U.action,hasEagerState:U.hasEagerState,eagerState:U.eagerState,next:null},C===null?(v=C=L,m=h):C=C.next=L,xe.lanes|=Z,ai|=Z;U=U.next}while(U!==null&&U!==t);if(C===null?m=h:C.next=v,!Ut(h,e.memoizedState)&&(ot=!0,$&&(i=oa,i!==null)))throw i;e.memoizedState=h,e.baseState=m,e.baseQueue=C,s.lastRenderedState=h}return l===null&&(s.lanes=0),[e.memoizedState,s.dispatch]}function Hl(e){var t=it(),i=t.queue;if(i===null)throw Error(o(311));i.lastRenderedReducer=e;var s=i.dispatch,l=i.pending,h=t.memoizedState;if(l!==null){i.pending=null;var m=l=l.next;do h=e(h,m.action),m=m.next;while(m!==l);Ut(h,t.memoizedState)||(ot=!0),t.memoizedState=h,t.baseQueue===null&&(t.baseState=h),i.lastRenderedState=h}return[h,s]}function dh(e,t,i){var s=xe,l=it(),h=Te;if(h){if(i===void 0)throw Error(o(407));i=i()}else i=t();var m=!Ut((Le||l).memoizedState,i);if(m&&(l.memoizedState=i,ot=!0),l=l.queue,Il(ph.bind(null,s,l,e),[e]),l.getSnapshot!==t||m||st!==null&&st.memoizedState.tag&1){if(s.flags|=2048,fa(9,{destroy:void 0},fh.bind(null,s,l,i,t),null),Ie===null)throw Error(o(349));h||(kn&127)!==0||hh(s,t,i)}return i}function hh(e,t,i){e.flags|=16384,e={getSnapshot:t,value:i},t=xe.updateQueue,t===null?(t=Ds(),xe.updateQueue=t,t.stores=[e]):(i=t.stores,i===null?t.stores=[e]:i.push(e))}function fh(e,t,i,s){t.value=i,t.getSnapshot=s,gh(t)&&mh(e)}function ph(e,t,i){return i(function(){gh(t)&&mh(e)})}function gh(e){var t=e.getSnapshot;e=e.value;try{var i=t();return!Ut(e,i)}catch{return!0}}function mh(e){var t=Si(e,2);t!==null&&zt(t,e,2)}function ql(e){var t=_t();if(typeof e=="function"){var i=e;if(e=i(),zi){Pn(!0);try{i()}finally{Pn(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Tn,lastRenderedState:e},t}function yh(e,t,i,s){return e.baseState=i,Ll(e,Le,typeof s=="function"?s:Tn)}function Dy(e,t,i,s,l){if(Ls(e))throw Error(o(485));if(e=t.action,e!==null){var h={payload:l,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(m){h.listeners.push(m)}};j.T!==null?i(!0):h.isTransition=!1,s(h),i=t.pending,i===null?(h.next=t.pending=h,bh(t,h)):(h.next=i.next,t.pending=i.next=h)}}function bh(e,t){var i=t.action,s=t.payload,l=e.state;if(t.isTransition){var h=j.T,m={};j.T=m;try{var v=i(l,s),C=j.S;C!==null&&C(m,v),xh(e,t,v)}catch(U){$l(e,t,U)}finally{h!==null&&m.types!==null&&(h.types=m.types),j.T=h}}else try{h=i(l,s),xh(e,t,h)}catch(U){$l(e,t,U)}}function xh(e,t,i){i!==null&&typeof i=="object"&&typeof i.then=="function"?i.then(function(s){vh(e,t,s)},function(s){return $l(e,t,s)}):vh(e,t,i)}function vh(e,t,i){t.status="fulfilled",t.value=i,wh(t),e.state=i,t=e.pending,t!==null&&(i=t.next,i===t?e.pending=null:(i=i.next,t.next=i,bh(e,i)))}function $l(e,t,i){var s=e.pending;if(e.pending=null,s!==null){s=s.next;do t.status="rejected",t.reason=i,wh(t),t=t.next;while(t!==s)}e.action=null}function wh(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function Sh(e,t){return t}function _h(e,t){if(Te){var i=Ie.formState;if(i!==null){e:{var s=xe;if(Te){if(Ze){t:{for(var l=Ze,h=en;l.nodeType!==8;){if(!h){l=null;break t}if(l=nn(l.nextSibling),l===null){l=null;break t}}h=l.data,l=h==="F!"||h==="F"?l:null}if(l){Ze=nn(l.nextSibling),s=l.data==="F!";break e}}Kn(s)}s=!1}s&&(t=i[0])}}return i=_t(),i.memoizedState=i.baseState=t,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Sh,lastRenderedState:t},i.queue=s,i=Ih.bind(null,xe,s),s.dispatch=i,s=ql(!1),h=Vl.bind(null,xe,!1,s.queue),s=_t(),l={state:t,dispatch:null,action:e,pending:null},s.queue=l,i=Dy.bind(null,xe,l,h,i),l.dispatch=i,s.memoizedState=e,[t,i,!1]}function Eh(e){var t=it();return Rh(t,Le,e)}function Rh(e,t,i){if(t=Ll(e,t,Sh)[0],e=Ns(Tn)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var s=hr(t)}catch(m){throw m===la?Rs:m}else s=t;t=it();var l=t.queue,h=l.dispatch;return i!==t.memoizedState&&(xe.flags|=2048,fa(9,{destroy:void 0},By.bind(null,l,i),null)),[s,h,e]}function By(e,t){e.action=t}function jh(e){var t=it(),i=Le;if(i!==null)return Rh(t,i,e);it(),t=t.memoizedState,i=it();var s=i.queue.dispatch;return i.memoizedState=e,[t,s,!1]}function fa(e,t,i,s){return e={tag:e,create:i,deps:s,inst:t,next:null},t=xe.updateQueue,t===null&&(t=Ds(),xe.updateQueue=t),i=t.lastEffect,i===null?t.lastEffect=e.next=e:(s=i.next,i.next=e,e.next=s,t.lastEffect=e),e}function Ch(){return it().memoizedState}function Us(e,t,i,s){var l=_t();xe.flags|=e,l.memoizedState=fa(1|t,{destroy:void 0},i,s===void 0?null:s)}function Ms(e,t,i,s){var l=it();s=s===void 0?null:s;var h=l.memoizedState.inst;Le!==null&&s!==null&&Ol(s,Le.memoizedState.deps)?l.memoizedState=fa(t,h,i,s):(xe.flags|=e,l.memoizedState=fa(1|t,h,i,s))}function kh(e,t){Us(8390656,8,e,t)}function Il(e,t){Ms(2048,8,e,t)}function Ny(e){xe.flags|=4;var t=xe.updateQueue;if(t===null)t=Ds(),xe.updateQueue=t,t.events=[e];else{var i=t.events;i===null?t.events=[e]:i.push(e)}}function Th(e){var t=it().memoizedState;return Ny({ref:t,nextImpl:e}),function(){if((Be&2)!==0)throw Error(o(440));return t.impl.apply(void 0,arguments)}}function Ah(e,t){return Ms(4,2,e,t)}function zh(e,t){return Ms(4,4,e,t)}function Oh(e,t){if(typeof t=="function"){e=e();var i=t(e);return function(){typeof i=="function"?i():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Dh(e,t,i){i=i!=null?i.concat([e]):null,Ms(4,4,Oh.bind(null,t,e),i)}function Gl(){}function Bh(e,t){var i=it();t=t===void 0?null:t;var s=i.memoizedState;return t!==null&&Ol(t,s[1])?s[0]:(i.memoizedState=[e,t],e)}function Nh(e,t){var i=it();t=t===void 0?null:t;var s=i.memoizedState;if(t!==null&&Ol(t,s[1]))return s[0];if(s=e(),zi){Pn(!0);try{e()}finally{Pn(!1)}}return i.memoizedState=[s,t],s}function Pl(e,t,i){return i===void 0||(kn&1073741824)!==0&&(je&261930)===0?e.memoizedState=t:(e.memoizedState=i,e=Mf(),xe.lanes|=e,ai|=e,i)}function Uh(e,t,i,s){return Ut(i,t)?i:ua.current!==null?(e=Pl(e,i,s),Ut(e,t)||(ot=!0),e):(kn&42)===0||(kn&1073741824)!==0&&(je&261930)===0?(ot=!0,e.memoizedState=i):(e=Mf(),xe.lanes|=e,ai|=e,t)}function Mh(e,t,i,s,l){var h=M.p;M.p=h!==0&&8>h?h:8;var m=j.T,v={};j.T=v,Vl(e,!1,t,i);try{var C=l(),U=j.S;if(U!==null&&U(v,C),C!==null&&typeof C=="object"&&typeof C.then=="function"){var $=Ay(C,s);fr(e,t,$,It(e))}else fr(e,t,s,It(e))}catch(Z){fr(e,t,{then:function(){},status:"rejected",reason:Z},It())}finally{M.p=h,m!==null&&v.types!==null&&(m.types=v.types),j.T=m}}function Uy(){}function Wl(e,t,i,s){if(e.tag!==5)throw Error(o(476));var l=Lh(e).queue;Mh(e,l,t,Q,i===null?Uy:function(){return Hh(e),i(s)})}function Lh(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:Q,baseState:Q,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Tn,lastRenderedState:Q},next:null};var i={};return t.next={memoizedState:i,baseState:i,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Tn,lastRenderedState:i},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function Hh(e){var t=Lh(e);t.next===null&&(t=e.alternate.memoizedState),fr(e,t.next.queue,{},It())}function Zl(){return yt(Ar)}function qh(){return it().memoizedState}function $h(){return it().memoizedState}function My(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var i=It();e=Xn(i);var s=Fn(t,e,i);s!==null&&(zt(s,t,i),lr(s,t,i)),t={cache:wl()},e.payload=t;return}t=t.return}}function Ly(e,t,i){var s=It();i={lane:s,revertLane:0,gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null},Ls(e)?Gh(t,i):(i=ul(e,t,i,s),i!==null&&(zt(i,e,s),Ph(i,t,s)))}function Ih(e,t,i){var s=It();fr(e,t,i,s)}function fr(e,t,i,s){var l={lane:s,revertLane:0,gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null};if(Ls(e))Gh(t,l);else{var h=e.alternate;if(e.lanes===0&&(h===null||h.lanes===0)&&(h=t.lastRenderedReducer,h!==null))try{var m=t.lastRenderedState,v=h(m,i);if(l.hasEagerState=!0,l.eagerState=v,Ut(v,m))return bs(e,t,l,0),Ie===null&&ys(),!1}catch{}if(i=ul(e,t,l,s),i!==null)return zt(i,e,s),Ph(i,t,s),!0}return!1}function Vl(e,t,i,s){if(s={lane:2,revertLane:Rc(),gesture:null,action:s,hasEagerState:!1,eagerState:null,next:null},Ls(e)){if(t)throw Error(o(479))}else t=ul(e,i,s,2),t!==null&&zt(t,e,2)}function Ls(e){var t=e.alternate;return e===xe||t!==null&&t===xe}function Gh(e,t){da=zs=!0;var i=e.pending;i===null?t.next=t:(t.next=i.next,i.next=t),e.pending=t}function Ph(e,t,i){if((i&4194048)!==0){var s=t.lanes;s&=e.pendingLanes,i|=s,t.lanes=i,Ku(e,i)}}var pr={readContext:yt,use:Bs,useCallback:Xe,useContext:Xe,useEffect:Xe,useImperativeHandle:Xe,useLayoutEffect:Xe,useInsertionEffect:Xe,useMemo:Xe,useReducer:Xe,useRef:Xe,useState:Xe,useDebugValue:Xe,useDeferredValue:Xe,useTransition:Xe,useSyncExternalStore:Xe,useId:Xe,useHostTransitionStatus:Xe,useFormState:Xe,useActionState:Xe,useOptimistic:Xe,useMemoCache:Xe,useCacheRefresh:Xe};pr.useEffectEvent=Xe;var Wh={readContext:yt,use:Bs,useCallback:function(e,t){return _t().memoizedState=[e,t===void 0?null:t],e},useContext:yt,useEffect:kh,useImperativeHandle:function(e,t,i){i=i!=null?i.concat([e]):null,Us(4194308,4,Oh.bind(null,t,e),i)},useLayoutEffect:function(e,t){return Us(4194308,4,e,t)},useInsertionEffect:function(e,t){Us(4,2,e,t)},useMemo:function(e,t){var i=_t();t=t===void 0?null:t;var s=e();if(zi){Pn(!0);try{e()}finally{Pn(!1)}}return i.memoizedState=[s,t],s},useReducer:function(e,t,i){var s=_t();if(i!==void 0){var l=i(t);if(zi){Pn(!0);try{i(t)}finally{Pn(!1)}}}else l=t;return s.memoizedState=s.baseState=l,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:l},s.queue=e,e=e.dispatch=Ly.bind(null,xe,e),[s.memoizedState,e]},useRef:function(e){var t=_t();return e={current:e},t.memoizedState=e},useState:function(e){e=ql(e);var t=e.queue,i=Ih.bind(null,xe,t);return t.dispatch=i,[e.memoizedState,i]},useDebugValue:Gl,useDeferredValue:function(e,t){var i=_t();return Pl(i,e,t)},useTransition:function(){var e=ql(!1);return e=Mh.bind(null,xe,e.queue,!0,!1),_t().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,i){var s=xe,l=_t();if(Te){if(i===void 0)throw Error(o(407));i=i()}else{if(i=t(),Ie===null)throw Error(o(349));(je&127)!==0||hh(s,t,i)}l.memoizedState=i;var h={value:i,getSnapshot:t};return l.queue=h,kh(ph.bind(null,s,h,e),[e]),s.flags|=2048,fa(9,{destroy:void 0},fh.bind(null,s,h,i,t),null),i},useId:function(){var e=_t(),t=Ie.identifierPrefix;if(Te){var i=yn,s=mn;i=(s&~(1<<32-Nt(s)-1)).toString(32)+i,t="_"+t+"R_"+i,i=Os++,0<i&&(t+="H"+i.toString(32)),t+="_"}else i=zy++,t="_"+t+"r_"+i.toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:Zl,useFormState:_h,useActionState:_h,useOptimistic:function(e){var t=_t();t.memoizedState=t.baseState=e;var i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=i,t=Vl.bind(null,xe,!0,i),i.dispatch=t,[e,t]},useMemoCache:Ml,useCacheRefresh:function(){return _t().memoizedState=My.bind(null,xe)},useEffectEvent:function(e){var t=_t(),i={impl:e};return t.memoizedState=i,function(){if((Be&2)!==0)throw Error(o(440));return i.impl.apply(void 0,arguments)}}},Yl={readContext:yt,use:Bs,useCallback:Bh,useContext:yt,useEffect:Il,useImperativeHandle:Dh,useInsertionEffect:Ah,useLayoutEffect:zh,useMemo:Nh,useReducer:Ns,useRef:Ch,useState:function(){return Ns(Tn)},useDebugValue:Gl,useDeferredValue:function(e,t){var i=it();return Uh(i,Le.memoizedState,e,t)},useTransition:function(){var e=Ns(Tn)[0],t=it().memoizedState;return[typeof e=="boolean"?e:hr(e),t]},useSyncExternalStore:dh,useId:qh,useHostTransitionStatus:Zl,useFormState:Eh,useActionState:Eh,useOptimistic:function(e,t){var i=it();return yh(i,Le,e,t)},useMemoCache:Ml,useCacheRefresh:$h};Yl.useEffectEvent=Th;var Zh={readContext:yt,use:Bs,useCallback:Bh,useContext:yt,useEffect:Il,useImperativeHandle:Dh,useInsertionEffect:Ah,useLayoutEffect:zh,useMemo:Nh,useReducer:Hl,useRef:Ch,useState:function(){return Hl(Tn)},useDebugValue:Gl,useDeferredValue:function(e,t){var i=it();return Le===null?Pl(i,e,t):Uh(i,Le.memoizedState,e,t)},useTransition:function(){var e=Hl(Tn)[0],t=it().memoizedState;return[typeof e=="boolean"?e:hr(e),t]},useSyncExternalStore:dh,useId:qh,useHostTransitionStatus:Zl,useFormState:jh,useActionState:jh,useOptimistic:function(e,t){var i=it();return Le!==null?yh(i,Le,e,t):(i.baseState=e,[e,i.queue.dispatch])},useMemoCache:Ml,useCacheRefresh:$h};Zh.useEffectEvent=Th;function Kl(e,t,i,s){t=e.memoizedState,i=i(s,t),i=i==null?t:x({},t,i),e.memoizedState=i,e.lanes===0&&(e.updateQueue.baseState=i)}var Jl={enqueueSetState:function(e,t,i){e=e._reactInternals;var s=It(),l=Xn(s);l.payload=t,i!=null&&(l.callback=i),t=Fn(e,l,s),t!==null&&(zt(t,e,s),lr(t,e,s))},enqueueReplaceState:function(e,t,i){e=e._reactInternals;var s=It(),l=Xn(s);l.tag=1,l.payload=t,i!=null&&(l.callback=i),t=Fn(e,l,s),t!==null&&(zt(t,e,s),lr(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var i=It(),s=Xn(i);s.tag=2,t!=null&&(s.callback=t),t=Fn(e,s,i),t!==null&&(zt(t,e,i),lr(t,e,i))}};function Vh(e,t,i,s,l,h,m){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(s,h,m):t.prototype&&t.prototype.isPureReactComponent?!er(i,s)||!er(l,h):!0}function Yh(e,t,i,s){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(i,s),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(i,s),t.state!==e&&Jl.enqueueReplaceState(t,t.state,null)}function Oi(e,t){var i=t;if("ref"in t){i={};for(var s in t)s!=="ref"&&(i[s]=t[s])}if(e=e.defaultProps){i===t&&(i=x({},i));for(var l in e)i[l]===void 0&&(i[l]=e[l])}return i}function Kh(e){ms(e)}function Jh(e){console.error(e)}function Qh(e){ms(e)}function Hs(e,t){try{var i=e.onUncaughtError;i(t.value,{componentStack:t.stack})}catch(s){setTimeout(function(){throw s})}}function Xh(e,t,i){try{var s=e.onCaughtError;s(i.value,{componentStack:i.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(l){setTimeout(function(){throw l})}}function Ql(e,t,i){return i=Xn(i),i.tag=3,i.payload={element:null},i.callback=function(){Hs(e,t)},i}function Fh(e){return e=Xn(e),e.tag=3,e}function ef(e,t,i,s){var l=i.type.getDerivedStateFromError;if(typeof l=="function"){var h=s.value;e.payload=function(){return l(h)},e.callback=function(){Xh(t,i,s)}}var m=i.stateNode;m!==null&&typeof m.componentDidCatch=="function"&&(e.callback=function(){Xh(t,i,s),typeof l!="function"&&(ri===null?ri=new Set([this]):ri.add(this));var v=s.stack;this.componentDidCatch(s.value,{componentStack:v!==null?v:""})})}function Hy(e,t,i,s,l){if(i.flags|=32768,s!==null&&typeof s=="object"&&typeof s.then=="function"){if(t=i.alternate,t!==null&&ra(t,i,l,!0),i=Lt.current,i!==null){switch(i.tag){case 31:case 13:return tn===null?Qs():i.alternate===null&&Fe===0&&(Fe=3),i.flags&=-257,i.flags|=65536,i.lanes=l,s===js?i.flags|=16384:(t=i.updateQueue,t===null?i.updateQueue=new Set([s]):t.add(s),Sc(e,s,l)),!1;case 22:return i.flags|=65536,s===js?i.flags|=16384:(t=i.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([s])},i.updateQueue=t):(i=t.retryQueue,i===null?t.retryQueue=new Set([s]):i.add(s)),Sc(e,s,l)),!1}throw Error(o(435,i.tag))}return Sc(e,s,l),Qs(),!1}if(Te)return t=Lt.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=l,s!==ml&&(e=Error(o(422),{cause:s}),ir(Qt(e,i)))):(s!==ml&&(t=Error(o(423),{cause:s}),ir(Qt(t,i))),e=e.current.alternate,e.flags|=65536,l&=-l,e.lanes|=l,s=Qt(s,i),l=Ql(e.stateNode,s,l),Cl(e,l),Fe!==4&&(Fe=2)),!1;var h=Error(o(520),{cause:s});if(h=Qt(h,i),Sr===null?Sr=[h]:Sr.push(h),Fe!==4&&(Fe=2),t===null)return!0;s=Qt(s,i),i=t;do{switch(i.tag){case 3:return i.flags|=65536,e=l&-l,i.lanes|=e,e=Ql(i.stateNode,s,e),Cl(i,e),!1;case 1:if(t=i.type,h=i.stateNode,(i.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||h!==null&&typeof h.componentDidCatch=="function"&&(ri===null||!ri.has(h))))return i.flags|=65536,l&=-l,i.lanes|=l,l=Fh(l),ef(l,e,i,s),Cl(i,l),!1}i=i.return}while(i!==null);return!1}var Xl=Error(o(461)),ot=!1;function bt(e,t,i,s){t.child=e===null?ah(t,null,i,s):Ai(t,e.child,i,s)}function tf(e,t,i,s,l){i=i.render;var h=t.ref;if("ref"in s){var m={};for(var v in s)v!=="ref"&&(m[v]=s[v])}else m=s;return ji(t),s=Dl(e,t,i,m,h,l),v=Bl(),e!==null&&!ot?(Nl(e,t,l),An(e,t,l)):(Te&&v&&pl(t),t.flags|=1,bt(e,t,s,l),t.child)}function nf(e,t,i,s,l){if(e===null){var h=i.type;return typeof h=="function"&&!dl(h)&&h.defaultProps===void 0&&i.compare===null?(t.tag=15,t.type=h,af(e,t,h,s,l)):(e=vs(i.type,null,s,t,t.mode,l),e.ref=t.ref,e.return=t,t.child=e)}if(h=e.child,!sc(e,l)){var m=h.memoizedProps;if(i=i.compare,i=i!==null?i:er,i(m,s)&&e.ref===t.ref)return An(e,t,l)}return t.flags|=1,e=En(h,s),e.ref=t.ref,e.return=t,t.child=e}function af(e,t,i,s,l){if(e!==null){var h=e.memoizedProps;if(er(h,s)&&e.ref===t.ref)if(ot=!1,t.pendingProps=s=h,sc(e,l))(e.flags&131072)!==0&&(ot=!0);else return t.lanes=e.lanes,An(e,t,l)}return Fl(e,t,i,s,l)}function rf(e,t,i,s){var l=s.children,h=e!==null?e.memoizedState:null;if(e===null&&t.stateNode===null&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.mode==="hidden"){if((t.flags&128)!==0){if(h=h!==null?h.baseLanes|i:i,e!==null){for(s=t.child=e.child,l=0;s!==null;)l=l|s.lanes|s.childLanes,s=s.sibling;s=l&~h}else s=0,t.child=null;return sf(e,t,h,i,s)}if((i&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&Es(t,h!==null?h.cachePool:null),h!==null?oh(t,h):Tl(),lh(t);else return s=t.lanes=536870912,sf(e,t,h!==null?h.baseLanes|i:i,i,s)}else h!==null?(Es(t,h.cachePool),oh(t,h),ti(),t.memoizedState=null):(e!==null&&Es(t,null),Tl(),ti());return bt(e,t,l,i),t.child}function gr(e,t){return e!==null&&e.tag===22||t.stateNode!==null||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function sf(e,t,i,s,l){var h=_l();return h=h===null?null:{parent:rt._currentValue,pool:h},t.memoizedState={baseLanes:i,cachePool:h},e!==null&&Es(t,null),Tl(),lh(t),e!==null&&ra(e,t,s,!0),t.childLanes=l,null}function qs(e,t){return t=Is({mode:t.mode,children:t.children},e.mode),t.ref=e.ref,e.child=t,t.return=e,t}function of(e,t,i){return Ai(t,e.child,null,i),e=qs(t,t.pendingProps),e.flags|=2,Ht(t),t.memoizedState=null,e}function qy(e,t,i){var s=t.pendingProps,l=(t.flags&128)!==0;if(t.flags&=-129,e===null){if(Te){if(s.mode==="hidden")return e=qs(t,s),t.lanes=536870912,gr(null,e);if(zl(t),(e=Ze)?(e=xp(e,en),e=e!==null&&e.data==="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:Vn!==null?{id:mn,overflow:yn}:null,retryLane:536870912,hydrationErrors:null},i=Gd(e),i.return=t,t.child=i,mt=t,Ze=null)):e=null,e===null)throw Kn(t);return t.lanes=536870912,null}return qs(t,s)}var h=e.memoizedState;if(h!==null){var m=h.dehydrated;if(zl(t),l)if(t.flags&256)t.flags&=-257,t=of(e,t,i);else if(t.memoizedState!==null)t.child=e.child,t.flags|=128,t=null;else throw Error(o(558));else if(ot||ra(e,t,i,!1),l=(i&e.childLanes)!==0,ot||l){if(s=Ie,s!==null&&(m=Ju(s,i),m!==0&&m!==h.retryLane))throw h.retryLane=m,Si(e,m),zt(s,e,m),Xl;Qs(),t=of(e,t,i)}else e=h.treeContext,Ze=nn(m.nextSibling),mt=t,Te=!0,Yn=null,en=!1,e!==null&&Zd(t,e),t=qs(t,s),t.flags|=4096;return t}return e=En(e.child,{mode:s.mode,children:s.children}),e.ref=t.ref,t.child=e,e.return=t,e}function $s(e,t){var i=t.ref;if(i===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof i!="function"&&typeof i!="object")throw Error(o(284));(e===null||e.ref!==i)&&(t.flags|=4194816)}}function Fl(e,t,i,s,l){return ji(t),i=Dl(e,t,i,s,void 0,l),s=Bl(),e!==null&&!ot?(Nl(e,t,l),An(e,t,l)):(Te&&s&&pl(t),t.flags|=1,bt(e,t,i,l),t.child)}function lf(e,t,i,s,l,h){return ji(t),t.updateQueue=null,i=uh(t,s,i,l),ch(e),s=Bl(),e!==null&&!ot?(Nl(e,t,h),An(e,t,h)):(Te&&s&&pl(t),t.flags|=1,bt(e,t,i,h),t.child)}function cf(e,t,i,s,l){if(ji(t),t.stateNode===null){var h=ta,m=i.contextType;typeof m=="object"&&m!==null&&(h=yt(m)),h=new i(s,h),t.memoizedState=h.state!==null&&h.state!==void 0?h.state:null,h.updater=Jl,t.stateNode=h,h._reactInternals=t,h=t.stateNode,h.props=s,h.state=t.memoizedState,h.refs={},Rl(t),m=i.contextType,h.context=typeof m=="object"&&m!==null?yt(m):ta,h.state=t.memoizedState,m=i.getDerivedStateFromProps,typeof m=="function"&&(Kl(t,i,m,s),h.state=t.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof h.getSnapshotBeforeUpdate=="function"||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(m=h.state,typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount(),m!==h.state&&Jl.enqueueReplaceState(h,h.state,null),ur(t,s,h,l),cr(),h.state=t.memoizedState),typeof h.componentDidMount=="function"&&(t.flags|=4194308),s=!0}else if(e===null){h=t.stateNode;var v=t.memoizedProps,C=Oi(i,v);h.props=C;var U=h.context,$=i.contextType;m=ta,typeof $=="object"&&$!==null&&(m=yt($));var Z=i.getDerivedStateFromProps;$=typeof Z=="function"||typeof h.getSnapshotBeforeUpdate=="function",v=t.pendingProps!==v,$||typeof h.UNSAFE_componentWillReceiveProps!="function"&&typeof h.componentWillReceiveProps!="function"||(v||U!==m)&&Yh(t,h,s,m),Qn=!1;var L=t.memoizedState;h.state=L,ur(t,s,h,l),cr(),U=t.memoizedState,v||L!==U||Qn?(typeof Z=="function"&&(Kl(t,i,Z,s),U=t.memoizedState),(C=Qn||Vh(t,i,C,s,L,U,m))?($||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount()),typeof h.componentDidMount=="function"&&(t.flags|=4194308)):(typeof h.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=s,t.memoizedState=U),h.props=s,h.state=U,h.context=m,s=C):(typeof h.componentDidMount=="function"&&(t.flags|=4194308),s=!1)}else{h=t.stateNode,jl(e,t),m=t.memoizedProps,$=Oi(i,m),h.props=$,Z=t.pendingProps,L=h.context,U=i.contextType,C=ta,typeof U=="object"&&U!==null&&(C=yt(U)),v=i.getDerivedStateFromProps,(U=typeof v=="function"||typeof h.getSnapshotBeforeUpdate=="function")||typeof h.UNSAFE_componentWillReceiveProps!="function"&&typeof h.componentWillReceiveProps!="function"||(m!==Z||L!==C)&&Yh(t,h,s,C),Qn=!1,L=t.memoizedState,h.state=L,ur(t,s,h,l),cr();var H=t.memoizedState;m!==Z||L!==H||Qn||e!==null&&e.dependencies!==null&&Ss(e.dependencies)?(typeof v=="function"&&(Kl(t,i,v,s),H=t.memoizedState),($=Qn||Vh(t,i,$,s,L,H,C)||e!==null&&e.dependencies!==null&&Ss(e.dependencies))?(U||typeof h.UNSAFE_componentWillUpdate!="function"&&typeof h.componentWillUpdate!="function"||(typeof h.componentWillUpdate=="function"&&h.componentWillUpdate(s,H,C),typeof h.UNSAFE_componentWillUpdate=="function"&&h.UNSAFE_componentWillUpdate(s,H,C)),typeof h.componentDidUpdate=="function"&&(t.flags|=4),typeof h.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof h.componentDidUpdate!="function"||m===e.memoizedProps&&L===e.memoizedState||(t.flags|=4),typeof h.getSnapshotBeforeUpdate!="function"||m===e.memoizedProps&&L===e.memoizedState||(t.flags|=1024),t.memoizedProps=s,t.memoizedState=H),h.props=s,h.state=H,h.context=C,s=$):(typeof h.componentDidUpdate!="function"||m===e.memoizedProps&&L===e.memoizedState||(t.flags|=4),typeof h.getSnapshotBeforeUpdate!="function"||m===e.memoizedProps&&L===e.memoizedState||(t.flags|=1024),s=!1)}return h=s,$s(e,t),s=(t.flags&128)!==0,h||s?(h=t.stateNode,i=s&&typeof i.getDerivedStateFromError!="function"?null:h.render(),t.flags|=1,e!==null&&s?(t.child=Ai(t,e.child,null,l),t.child=Ai(t,null,i,l)):bt(e,t,i,l),t.memoizedState=h.state,e=t.child):e=An(e,t,l),e}function uf(e,t,i,s){return Ei(),t.flags|=256,bt(e,t,i,s),t.child}var ec={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function tc(e){return{baseLanes:e,cachePool:Xd()}}function nc(e,t,i){return e=e!==null?e.childLanes&~i:0,t&&(e|=$t),e}function df(e,t,i){var s=t.pendingProps,l=!1,h=(t.flags&128)!==0,m;if((m=h)||(m=e!==null&&e.memoizedState===null?!1:(nt.current&2)!==0),m&&(l=!0,t.flags&=-129),m=(t.flags&32)!==0,t.flags&=-33,e===null){if(Te){if(l?ei(t):ti(),(e=Ze)?(e=xp(e,en),e=e!==null&&e.data!=="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:Vn!==null?{id:mn,overflow:yn}:null,retryLane:536870912,hydrationErrors:null},i=Gd(e),i.return=t,t.child=i,mt=t,Ze=null)):e=null,e===null)throw Kn(t);return Lc(e)?t.lanes=32:t.lanes=536870912,null}var v=s.children;return s=s.fallback,l?(ti(),l=t.mode,v=Is({mode:"hidden",children:v},l),s=_i(s,l,i,null),v.return=t,s.return=t,v.sibling=s,t.child=v,s=t.child,s.memoizedState=tc(i),s.childLanes=nc(e,m,i),t.memoizedState=ec,gr(null,s)):(ei(t),ic(t,v))}var C=e.memoizedState;if(C!==null&&(v=C.dehydrated,v!==null)){if(h)t.flags&256?(ei(t),t.flags&=-257,t=ac(e,t,i)):t.memoizedState!==null?(ti(),t.child=e.child,t.flags|=128,t=null):(ti(),v=s.fallback,l=t.mode,s=Is({mode:"visible",children:s.children},l),v=_i(v,l,i,null),v.flags|=2,s.return=t,v.return=t,s.sibling=v,t.child=s,Ai(t,e.child,null,i),s=t.child,s.memoizedState=tc(i),s.childLanes=nc(e,m,i),t.memoizedState=ec,t=gr(null,s));else if(ei(t),Lc(v)){if(m=v.nextSibling&&v.nextSibling.dataset,m)var U=m.dgst;m=U,s=Error(o(419)),s.stack="",s.digest=m,ir({value:s,source:null,stack:null}),t=ac(e,t,i)}else if(ot||ra(e,t,i,!1),m=(i&e.childLanes)!==0,ot||m){if(m=Ie,m!==null&&(s=Ju(m,i),s!==0&&s!==C.retryLane))throw C.retryLane=s,Si(e,s),zt(m,e,s),Xl;Mc(v)||Qs(),t=ac(e,t,i)}else Mc(v)?(t.flags|=192,t.child=e.child,t=null):(e=C.treeContext,Ze=nn(v.nextSibling),mt=t,Te=!0,Yn=null,en=!1,e!==null&&Zd(t,e),t=ic(t,s.children),t.flags|=4096);return t}return l?(ti(),v=s.fallback,l=t.mode,C=e.child,U=C.sibling,s=En(C,{mode:"hidden",children:s.children}),s.subtreeFlags=C.subtreeFlags&65011712,U!==null?v=En(U,v):(v=_i(v,l,i,null),v.flags|=2),v.return=t,s.return=t,s.sibling=v,t.child=s,gr(null,s),s=t.child,v=e.child.memoizedState,v===null?v=tc(i):(l=v.cachePool,l!==null?(C=rt._currentValue,l=l.parent!==C?{parent:C,pool:C}:l):l=Xd(),v={baseLanes:v.baseLanes|i,cachePool:l}),s.memoizedState=v,s.childLanes=nc(e,m,i),t.memoizedState=ec,gr(e.child,s)):(ei(t),i=e.child,e=i.sibling,i=En(i,{mode:"visible",children:s.children}),i.return=t,i.sibling=null,e!==null&&(m=t.deletions,m===null?(t.deletions=[e],t.flags|=16):m.push(e)),t.child=i,t.memoizedState=null,i)}function ic(e,t){return t=Is({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function Is(e,t){return e=Mt(22,e,null,t),e.lanes=0,e}function ac(e,t,i){return Ai(t,e.child,null,i),e=ic(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function hf(e,t,i){e.lanes|=t;var s=e.alternate;s!==null&&(s.lanes|=t),xl(e.return,t,i)}function rc(e,t,i,s,l,h){var m=e.memoizedState;m===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:s,tail:i,tailMode:l,treeForkCount:h}:(m.isBackwards=t,m.rendering=null,m.renderingStartTime=0,m.last=s,m.tail=i,m.tailMode=l,m.treeForkCount=h)}function ff(e,t,i){var s=t.pendingProps,l=s.revealOrder,h=s.tail;s=s.children;var m=nt.current,v=(m&2)!==0;if(v?(m=m&1|2,t.flags|=128):m&=1,X(nt,m),bt(e,t,s,i),s=Te?nr:0,!v&&e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&hf(e,i,t);else if(e.tag===19)hf(e,i,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(l){case"forwards":for(i=t.child,l=null;i!==null;)e=i.alternate,e!==null&&As(e)===null&&(l=i),i=i.sibling;i=l,i===null?(l=t.child,t.child=null):(l=i.sibling,i.sibling=null),rc(t,!1,l,i,h,s);break;case"backwards":case"unstable_legacy-backwards":for(i=null,l=t.child,t.child=null;l!==null;){if(e=l.alternate,e!==null&&As(e)===null){t.child=l;break}e=l.sibling,l.sibling=i,i=l,l=e}rc(t,!0,i,null,h,s);break;case"together":rc(t,!1,null,null,void 0,s);break;default:t.memoizedState=null}return t.child}function An(e,t,i){if(e!==null&&(t.dependencies=e.dependencies),ai|=t.lanes,(i&t.childLanes)===0)if(e!==null){if(ra(e,t,i,!1),(i&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(o(153));if(t.child!==null){for(e=t.child,i=En(e,e.pendingProps),t.child=i,i.return=t;e.sibling!==null;)e=e.sibling,i=i.sibling=En(e,e.pendingProps),i.return=t;i.sibling=null}return t.child}function sc(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&Ss(e)))}function $y(e,t,i){switch(t.tag){case 3:Ke(t,t.stateNode.containerInfo),Jn(t,rt,e.memoizedState.cache),Ei();break;case 27:case 5:pn(t);break;case 4:Ke(t,t.stateNode.containerInfo);break;case 10:Jn(t,t.type,t.memoizedProps.value);break;case 31:if(t.memoizedState!==null)return t.flags|=128,zl(t),null;break;case 13:var s=t.memoizedState;if(s!==null)return s.dehydrated!==null?(ei(t),t.flags|=128,null):(i&t.child.childLanes)!==0?df(e,t,i):(ei(t),e=An(e,t,i),e!==null?e.sibling:null);ei(t);break;case 19:var l=(e.flags&128)!==0;if(s=(i&t.childLanes)!==0,s||(ra(e,t,i,!1),s=(i&t.childLanes)!==0),l){if(s)return ff(e,t,i);t.flags|=128}if(l=t.memoizedState,l!==null&&(l.rendering=null,l.tail=null,l.lastEffect=null),X(nt,nt.current),s)break;return null;case 22:return t.lanes=0,rf(e,t,i,t.pendingProps);case 24:Jn(t,rt,e.memoizedState.cache)}return An(e,t,i)}function pf(e,t,i){if(e!==null)if(e.memoizedProps!==t.pendingProps)ot=!0;else{if(!sc(e,i)&&(t.flags&128)===0)return ot=!1,$y(e,t,i);ot=(e.flags&131072)!==0}else ot=!1,Te&&(t.flags&1048576)!==0&&Wd(t,nr,t.index);switch(t.lanes=0,t.tag){case 16:e:{var s=t.pendingProps;if(e=ki(t.elementType),t.type=e,typeof e=="function")dl(e)?(s=Oi(e,s),t.tag=1,t=cf(null,t,e,s,i)):(t.tag=0,t=Fl(null,t,e,s,i));else{if(e!=null){var l=e.$$typeof;if(l===Y){t.tag=11,t=tf(null,t,e,s,i);break e}else if(l===K){t.tag=14,t=nf(null,t,e,s,i);break e}}throw t=q(e)||e,Error(o(306,t,""))}}return t;case 0:return Fl(e,t,t.type,t.pendingProps,i);case 1:return s=t.type,l=Oi(s,t.pendingProps),cf(e,t,s,l,i);case 3:e:{if(Ke(t,t.stateNode.containerInfo),e===null)throw Error(o(387));s=t.pendingProps;var h=t.memoizedState;l=h.element,jl(e,t),ur(t,s,null,i);var m=t.memoizedState;if(s=m.cache,Jn(t,rt,s),s!==h.cache&&vl(t,[rt],i,!0),cr(),s=m.element,h.isDehydrated)if(h={element:s,isDehydrated:!1,cache:m.cache},t.updateQueue.baseState=h,t.memoizedState=h,t.flags&256){t=uf(e,t,s,i);break e}else if(s!==l){l=Qt(Error(o(424)),t),ir(l),t=uf(e,t,s,i);break e}else for(e=t.stateNode.containerInfo,e.nodeType===9?e=e.body:e=e.nodeName==="HTML"?e.ownerDocument.body:e,Ze=nn(e.firstChild),mt=t,Te=!0,Yn=null,en=!0,i=ah(t,null,s,i),t.child=i;i;)i.flags=i.flags&-3|4096,i=i.sibling;else{if(Ei(),s===l){t=An(e,t,i);break e}bt(e,t,s,i)}t=t.child}return t;case 26:return $s(e,t),e===null?(i=Rp(t.type,null,t.pendingProps,null))?t.memoizedState=i:Te||(i=t.type,e=t.pendingProps,s=ao(ge.current).createElement(i),s[gt]=t,s[Rt]=e,xt(s,i,e),ft(s),t.stateNode=s):t.memoizedState=Rp(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return pn(t),e===null&&Te&&(s=t.stateNode=Sp(t.type,t.pendingProps,ge.current),mt=t,en=!0,l=Ze,ci(t.type)?(Hc=l,Ze=nn(s.firstChild)):Ze=l),bt(e,t,t.pendingProps.children,i),$s(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&Te&&((l=s=Ze)&&(s=y0(s,t.type,t.pendingProps,en),s!==null?(t.stateNode=s,mt=t,Ze=nn(s.firstChild),en=!1,l=!0):l=!1),l||Kn(t)),pn(t),l=t.type,h=t.pendingProps,m=e!==null?e.memoizedProps:null,s=h.children,Bc(l,h)?s=null:m!==null&&Bc(l,m)&&(t.flags|=32),t.memoizedState!==null&&(l=Dl(e,t,Oy,null,null,i),Ar._currentValue=l),$s(e,t),bt(e,t,s,i),t.child;case 6:return e===null&&Te&&((e=i=Ze)&&(i=b0(i,t.pendingProps,en),i!==null?(t.stateNode=i,mt=t,Ze=null,e=!0):e=!1),e||Kn(t)),null;case 13:return df(e,t,i);case 4:return Ke(t,t.stateNode.containerInfo),s=t.pendingProps,e===null?t.child=Ai(t,null,s,i):bt(e,t,s,i),t.child;case 11:return tf(e,t,t.type,t.pendingProps,i);case 7:return bt(e,t,t.pendingProps,i),t.child;case 8:return bt(e,t,t.pendingProps.children,i),t.child;case 12:return bt(e,t,t.pendingProps.children,i),t.child;case 10:return s=t.pendingProps,Jn(t,t.type,s.value),bt(e,t,s.children,i),t.child;case 9:return l=t.type._context,s=t.pendingProps.children,ji(t),l=yt(l),s=s(l),t.flags|=1,bt(e,t,s,i),t.child;case 14:return nf(e,t,t.type,t.pendingProps,i);case 15:return af(e,t,t.type,t.pendingProps,i);case 19:return ff(e,t,i);case 31:return qy(e,t,i);case 22:return rf(e,t,i,t.pendingProps);case 24:return ji(t),s=yt(rt),e===null?(l=_l(),l===null&&(l=Ie,h=wl(),l.pooledCache=h,h.refCount++,h!==null&&(l.pooledCacheLanes|=i),l=h),t.memoizedState={parent:s,cache:l},Rl(t),Jn(t,rt,l)):((e.lanes&i)!==0&&(jl(e,t),ur(t,null,null,i),cr()),l=e.memoizedState,h=t.memoizedState,l.parent!==s?(l={parent:s,cache:s},t.memoizedState=l,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=l),Jn(t,rt,s)):(s=h.cache,Jn(t,rt,s),s!==l.cache&&vl(t,[rt],i,!0))),bt(e,t,t.pendingProps.children,i),t.child;case 29:throw t.pendingProps}throw Error(o(156,t.tag))}function zn(e){e.flags|=4}function oc(e,t,i,s,l){if((t=(e.mode&32)!==0)&&(t=!1),t){if(e.flags|=16777216,(l&335544128)===l)if(e.stateNode.complete)e.flags|=8192;else if($f())e.flags|=8192;else throw Ti=js,El}else e.flags&=-16777217}function gf(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!Ap(t))if($f())e.flags|=8192;else throw Ti=js,El}function Gs(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?Vu():536870912,e.lanes|=t,ya|=t)}function mr(e,t){if(!Te)switch(e.tailMode){case"hidden":t=e.tail;for(var i=null;t!==null;)t.alternate!==null&&(i=t),t=t.sibling;i===null?e.tail=null:i.sibling=null;break;case"collapsed":i=e.tail;for(var s=null;i!==null;)i.alternate!==null&&(s=i),i=i.sibling;s===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:s.sibling=null}}function Ve(e){var t=e.alternate!==null&&e.alternate.child===e.child,i=0,s=0;if(t)for(var l=e.child;l!==null;)i|=l.lanes|l.childLanes,s|=l.subtreeFlags&65011712,s|=l.flags&65011712,l.return=e,l=l.sibling;else for(l=e.child;l!==null;)i|=l.lanes|l.childLanes,s|=l.subtreeFlags,s|=l.flags,l.return=e,l=l.sibling;return e.subtreeFlags|=s,e.childLanes=i,t}function Iy(e,t,i){var s=t.pendingProps;switch(gl(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ve(t),null;case 1:return Ve(t),null;case 3:return i=t.stateNode,s=null,e!==null&&(s=e.memoizedState.cache),t.memoizedState.cache!==s&&(t.flags|=2048),Cn(rt),Me(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(e===null||e.child===null)&&(aa(t)?zn(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,yl())),Ve(t),null;case 26:var l=t.type,h=t.memoizedState;return e===null?(zn(t),h!==null?(Ve(t),gf(t,h)):(Ve(t),oc(t,l,null,s,i))):h?h!==e.memoizedState?(zn(t),Ve(t),gf(t,h)):(Ve(t),t.flags&=-16777217):(e=e.memoizedProps,e!==s&&zn(t),Ve(t),oc(t,l,e,s,i)),null;case 27:if(gn(t),i=ge.current,l=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==s&&zn(t);else{if(!s){if(t.stateNode===null)throw Error(o(166));return Ve(t),null}e=ee.current,aa(t)?Vd(t):(e=Sp(l,s,i),t.stateNode=e,zn(t))}return Ve(t),null;case 5:if(gn(t),l=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==s&&zn(t);else{if(!s){if(t.stateNode===null)throw Error(o(166));return Ve(t),null}if(h=ee.current,aa(t))Vd(t);else{var m=ao(ge.current);switch(h){case 1:h=m.createElementNS("http://www.w3.org/2000/svg",l);break;case 2:h=m.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;default:switch(l){case"svg":h=m.createElementNS("http://www.w3.org/2000/svg",l);break;case"math":h=m.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;case"script":h=m.createElement("div"),h.innerHTML="<script><\/script>",h=h.removeChild(h.firstChild);break;case"select":h=typeof s.is=="string"?m.createElement("select",{is:s.is}):m.createElement("select"),s.multiple?h.multiple=!0:s.size&&(h.size=s.size);break;default:h=typeof s.is=="string"?m.createElement(l,{is:s.is}):m.createElement(l)}}h[gt]=t,h[Rt]=s;e:for(m=t.child;m!==null;){if(m.tag===5||m.tag===6)h.appendChild(m.stateNode);else if(m.tag!==4&&m.tag!==27&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===t)break e;for(;m.sibling===null;){if(m.return===null||m.return===t)break e;m=m.return}m.sibling.return=m.return,m=m.sibling}t.stateNode=h;e:switch(xt(h,l,s),l){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}s&&zn(t)}}return Ve(t),oc(t,t.type,e===null?null:e.memoizedProps,t.pendingProps,i),null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==s&&zn(t);else{if(typeof s!="string"&&t.stateNode===null)throw Error(o(166));if(e=ge.current,aa(t)){if(e=t.stateNode,i=t.memoizedProps,s=null,l=mt,l!==null)switch(l.tag){case 27:case 5:s=l.memoizedProps}e[gt]=t,e=!!(e.nodeValue===i||s!==null&&s.suppressHydrationWarning===!0||dp(e.nodeValue,i)),e||Kn(t,!0)}else e=ao(e).createTextNode(s),e[gt]=t,t.stateNode=e}return Ve(t),null;case 31:if(i=t.memoizedState,e===null||e.memoizedState!==null){if(s=aa(t),i!==null){if(e===null){if(!s)throw Error(o(318));if(e=t.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(o(557));e[gt]=t}else Ei(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Ve(t),e=!1}else i=yl(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=i),e=!0;if(!e)return t.flags&256?(Ht(t),t):(Ht(t),null);if((t.flags&128)!==0)throw Error(o(558))}return Ve(t),null;case 13:if(s=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(l=aa(t),s!==null&&s.dehydrated!==null){if(e===null){if(!l)throw Error(o(318));if(l=t.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(o(317));l[gt]=t}else Ei(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Ve(t),l=!1}else l=yl(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=l),l=!0;if(!l)return t.flags&256?(Ht(t),t):(Ht(t),null)}return Ht(t),(t.flags&128)!==0?(t.lanes=i,t):(i=s!==null,e=e!==null&&e.memoizedState!==null,i&&(s=t.child,l=null,s.alternate!==null&&s.alternate.memoizedState!==null&&s.alternate.memoizedState.cachePool!==null&&(l=s.alternate.memoizedState.cachePool.pool),h=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(h=s.memoizedState.cachePool.pool),h!==l&&(s.flags|=2048)),i!==e&&i&&(t.child.flags|=8192),Gs(t,t.updateQueue),Ve(t),null);case 4:return Me(),e===null&&Tc(t.stateNode.containerInfo),Ve(t),null;case 10:return Cn(t.type),Ve(t),null;case 19:if(I(nt),s=t.memoizedState,s===null)return Ve(t),null;if(l=(t.flags&128)!==0,h=s.rendering,h===null)if(l)mr(s,!1);else{if(Fe!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(h=As(e),h!==null){for(t.flags|=128,mr(s,!1),e=h.updateQueue,t.updateQueue=e,Gs(t,e),t.subtreeFlags=0,e=i,i=t.child;i!==null;)Id(i,e),i=i.sibling;return X(nt,nt.current&1|2),Te&&Rn(t,s.treeForkCount),t.child}e=e.sibling}s.tail!==null&&at()>Ys&&(t.flags|=128,l=!0,mr(s,!1),t.lanes=4194304)}else{if(!l)if(e=As(h),e!==null){if(t.flags|=128,l=!0,e=e.updateQueue,t.updateQueue=e,Gs(t,e),mr(s,!0),s.tail===null&&s.tailMode==="hidden"&&!h.alternate&&!Te)return Ve(t),null}else 2*at()-s.renderingStartTime>Ys&&i!==536870912&&(t.flags|=128,l=!0,mr(s,!1),t.lanes=4194304);s.isBackwards?(h.sibling=t.child,t.child=h):(e=s.last,e!==null?e.sibling=h:t.child=h,s.last=h)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=at(),e.sibling=null,i=nt.current,X(nt,l?i&1|2:i&1),Te&&Rn(t,s.treeForkCount),e):(Ve(t),null);case 22:case 23:return Ht(t),Al(),s=t.memoizedState!==null,e!==null?e.memoizedState!==null!==s&&(t.flags|=8192):s&&(t.flags|=8192),s?(i&536870912)!==0&&(t.flags&128)===0&&(Ve(t),t.subtreeFlags&6&&(t.flags|=8192)):Ve(t),i=t.updateQueue,i!==null&&Gs(t,i.retryQueue),i=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(i=e.memoizedState.cachePool.pool),s=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(s=t.memoizedState.cachePool.pool),s!==i&&(t.flags|=2048),e!==null&&I(Ci),null;case 24:return i=null,e!==null&&(i=e.memoizedState.cache),t.memoizedState.cache!==i&&(t.flags|=2048),Cn(rt),Ve(t),null;case 25:return null;case 30:return null}throw Error(o(156,t.tag))}function Gy(e,t){switch(gl(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Cn(rt),Me(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return gn(t),null;case 31:if(t.memoizedState!==null){if(Ht(t),t.alternate===null)throw Error(o(340));Ei()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 13:if(Ht(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(o(340));Ei()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return I(nt),null;case 4:return Me(),null;case 10:return Cn(t.type),null;case 22:case 23:return Ht(t),Al(),e!==null&&I(Ci),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return Cn(rt),null;case 25:return null;default:return null}}function mf(e,t){switch(gl(t),t.tag){case 3:Cn(rt),Me();break;case 26:case 27:case 5:gn(t);break;case 4:Me();break;case 31:t.memoizedState!==null&&Ht(t);break;case 13:Ht(t);break;case 19:I(nt);break;case 10:Cn(t.type);break;case 22:case 23:Ht(t),Al(),e!==null&&I(Ci);break;case 24:Cn(rt)}}function yr(e,t){try{var i=t.updateQueue,s=i!==null?i.lastEffect:null;if(s!==null){var l=s.next;i=l;do{if((i.tag&e)===e){s=void 0;var h=i.create,m=i.inst;s=h(),m.destroy=s}i=i.next}while(i!==l)}}catch(v){Ue(t,t.return,v)}}function ni(e,t,i){try{var s=t.updateQueue,l=s!==null?s.lastEffect:null;if(l!==null){var h=l.next;s=h;do{if((s.tag&e)===e){var m=s.inst,v=m.destroy;if(v!==void 0){m.destroy=void 0,l=t;var C=i,U=v;try{U()}catch($){Ue(l,C,$)}}}s=s.next}while(s!==h)}}catch($){Ue(t,t.return,$)}}function yf(e){var t=e.updateQueue;if(t!==null){var i=e.stateNode;try{sh(t,i)}catch(s){Ue(e,e.return,s)}}}function bf(e,t,i){i.props=Oi(e.type,e.memoizedProps),i.state=e.memoizedState;try{i.componentWillUnmount()}catch(s){Ue(e,t,s)}}function br(e,t){try{var i=e.ref;if(i!==null){switch(e.tag){case 26:case 27:case 5:var s=e.stateNode;break;case 30:s=e.stateNode;break;default:s=e.stateNode}typeof i=="function"?e.refCleanup=i(s):i.current=s}}catch(l){Ue(e,t,l)}}function bn(e,t){var i=e.ref,s=e.refCleanup;if(i!==null)if(typeof s=="function")try{s()}catch(l){Ue(e,t,l)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof i=="function")try{i(null)}catch(l){Ue(e,t,l)}else i.current=null}function xf(e){var t=e.type,i=e.memoizedProps,s=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":i.autoFocus&&s.focus();break e;case"img":i.src?s.src=i.src:i.srcSet&&(s.srcset=i.srcSet)}}catch(l){Ue(e,e.return,l)}}function lc(e,t,i){try{var s=e.stateNode;d0(s,e.type,i,t),s[Rt]=t}catch(l){Ue(e,e.return,l)}}function vf(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&ci(e.type)||e.tag===4}function cc(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||vf(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&ci(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function uc(e,t,i){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i).insertBefore(e,t):(t=i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,t.appendChild(e),i=i._reactRootContainer,i!=null||t.onclick!==null||(t.onclick=Sn));else if(s!==4&&(s===27&&ci(e.type)&&(i=e.stateNode,t=null),e=e.child,e!==null))for(uc(e,t,i),e=e.sibling;e!==null;)uc(e,t,i),e=e.sibling}function Ps(e,t,i){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?i.insertBefore(e,t):i.appendChild(e);else if(s!==4&&(s===27&&ci(e.type)&&(i=e.stateNode),e=e.child,e!==null))for(Ps(e,t,i),e=e.sibling;e!==null;)Ps(e,t,i),e=e.sibling}function wf(e){var t=e.stateNode,i=e.memoizedProps;try{for(var s=e.type,l=t.attributes;l.length;)t.removeAttributeNode(l[0]);xt(t,s,i),t[gt]=e,t[Rt]=i}catch(h){Ue(e,e.return,h)}}var On=!1,lt=!1,dc=!1,Sf=typeof WeakSet=="function"?WeakSet:Set,pt=null;function Py(e,t){if(e=e.containerInfo,Oc=ho,e=Dd(e),al(e)){if("selectionStart"in e)var i={start:e.selectionStart,end:e.selectionEnd};else e:{i=(i=e.ownerDocument)&&i.defaultView||window;var s=i.getSelection&&i.getSelection();if(s&&s.rangeCount!==0){i=s.anchorNode;var l=s.anchorOffset,h=s.focusNode;s=s.focusOffset;try{i.nodeType,h.nodeType}catch{i=null;break e}var m=0,v=-1,C=-1,U=0,$=0,Z=e,L=null;t:for(;;){for(var H;Z!==i||l!==0&&Z.nodeType!==3||(v=m+l),Z!==h||s!==0&&Z.nodeType!==3||(C=m+s),Z.nodeType===3&&(m+=Z.nodeValue.length),(H=Z.firstChild)!==null;)L=Z,Z=H;for(;;){if(Z===e)break t;if(L===i&&++U===l&&(v=m),L===h&&++$===s&&(C=m),(H=Z.nextSibling)!==null)break;Z=L,L=Z.parentNode}Z=H}i=v===-1||C===-1?null:{start:v,end:C}}else i=null}i=i||{start:0,end:0}}else i=null;for(Dc={focusedElem:e,selectionRange:i},ho=!1,pt=t;pt!==null;)if(t=pt,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,pt=e;else for(;pt!==null;){switch(t=pt,h=t.alternate,e=t.flags,t.tag){case 0:if((e&4)!==0&&(e=t.updateQueue,e=e!==null?e.events:null,e!==null))for(i=0;i<e.length;i++)l=e[i],l.ref.impl=l.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&h!==null){e=void 0,i=t,l=h.memoizedProps,h=h.memoizedState,s=i.stateNode;try{var te=Oi(i.type,l);e=s.getSnapshotBeforeUpdate(te,h),s.__reactInternalSnapshotBeforeUpdate=e}catch(le){Ue(i,i.return,le)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,i=e.nodeType,i===9)Uc(e);else if(i===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Uc(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(o(163))}if(e=t.sibling,e!==null){e.return=t.return,pt=e;break}pt=t.return}}function _f(e,t,i){var s=i.flags;switch(i.tag){case 0:case 11:case 15:Bn(e,i),s&4&&yr(5,i);break;case 1:if(Bn(e,i),s&4)if(e=i.stateNode,t===null)try{e.componentDidMount()}catch(m){Ue(i,i.return,m)}else{var l=Oi(i.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(l,t,e.__reactInternalSnapshotBeforeUpdate)}catch(m){Ue(i,i.return,m)}}s&64&&yf(i),s&512&&br(i,i.return);break;case 3:if(Bn(e,i),s&64&&(e=i.updateQueue,e!==null)){if(t=null,i.child!==null)switch(i.child.tag){case 27:case 5:t=i.child.stateNode;break;case 1:t=i.child.stateNode}try{sh(e,t)}catch(m){Ue(i,i.return,m)}}break;case 27:t===null&&s&4&&wf(i);case 26:case 5:Bn(e,i),t===null&&s&4&&xf(i),s&512&&br(i,i.return);break;case 12:Bn(e,i);break;case 31:Bn(e,i),s&4&&jf(e,i);break;case 13:Bn(e,i),s&4&&Cf(e,i),s&64&&(e=i.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(i=Fy.bind(null,i),x0(e,i))));break;case 22:if(s=i.memoizedState!==null||On,!s){t=t!==null&&t.memoizedState!==null||lt,l=On;var h=lt;On=s,(lt=t)&&!h?Nn(e,i,(i.subtreeFlags&8772)!==0):Bn(e,i),On=l,lt=h}break;case 30:break;default:Bn(e,i)}}function Ef(e){var t=e.alternate;t!==null&&(e.alternate=null,Ef(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&$o(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Ye=null,Ct=!1;function Dn(e,t,i){for(i=i.child;i!==null;)Rf(e,t,i),i=i.sibling}function Rf(e,t,i){if(Bt&&typeof Bt.onCommitFiberUnmount=="function")try{Bt.onCommitFiberUnmount(Ia,i)}catch{}switch(i.tag){case 26:lt||bn(i,t),Dn(e,t,i),i.memoizedState?i.memoizedState.count--:i.stateNode&&(i=i.stateNode,i.parentNode.removeChild(i));break;case 27:lt||bn(i,t);var s=Ye,l=Ct;ci(i.type)&&(Ye=i.stateNode,Ct=!1),Dn(e,t,i),Cr(i.stateNode),Ye=s,Ct=l;break;case 5:lt||bn(i,t);case 6:if(s=Ye,l=Ct,Ye=null,Dn(e,t,i),Ye=s,Ct=l,Ye!==null)if(Ct)try{(Ye.nodeType===9?Ye.body:Ye.nodeName==="HTML"?Ye.ownerDocument.body:Ye).removeChild(i.stateNode)}catch(h){Ue(i,t,h)}else try{Ye.removeChild(i.stateNode)}catch(h){Ue(i,t,h)}break;case 18:Ye!==null&&(Ct?(e=Ye,yp(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,i.stateNode),Ra(e)):yp(Ye,i.stateNode));break;case 4:s=Ye,l=Ct,Ye=i.stateNode.containerInfo,Ct=!0,Dn(e,t,i),Ye=s,Ct=l;break;case 0:case 11:case 14:case 15:ni(2,i,t),lt||ni(4,i,t),Dn(e,t,i);break;case 1:lt||(bn(i,t),s=i.stateNode,typeof s.componentWillUnmount=="function"&&bf(i,t,s)),Dn(e,t,i);break;case 21:Dn(e,t,i);break;case 22:lt=(s=lt)||i.memoizedState!==null,Dn(e,t,i),lt=s;break;default:Dn(e,t,i)}}function jf(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{Ra(e)}catch(i){Ue(t,t.return,i)}}}function Cf(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Ra(e)}catch(i){Ue(t,t.return,i)}}function Wy(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new Sf),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new Sf),t;default:throw Error(o(435,e.tag))}}function Ws(e,t){var i=Wy(e);t.forEach(function(s){if(!i.has(s)){i.add(s);var l=e0.bind(null,e,s);s.then(l,l)}})}function kt(e,t){var i=t.deletions;if(i!==null)for(var s=0;s<i.length;s++){var l=i[s],h=e,m=t,v=m;e:for(;v!==null;){switch(v.tag){case 27:if(ci(v.type)){Ye=v.stateNode,Ct=!1;break e}break;case 5:Ye=v.stateNode,Ct=!1;break e;case 3:case 4:Ye=v.stateNode.containerInfo,Ct=!0;break e}v=v.return}if(Ye===null)throw Error(o(160));Rf(h,m,l),Ye=null,Ct=!1,h=l.alternate,h!==null&&(h.return=null),l.return=null}if(t.subtreeFlags&13886)for(t=t.child;t!==null;)kf(t,e),t=t.sibling}var on=null;function kf(e,t){var i=e.alternate,s=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:kt(t,e),Tt(e),s&4&&(ni(3,e,e.return),yr(3,e),ni(5,e,e.return));break;case 1:kt(t,e),Tt(e),s&512&&(lt||i===null||bn(i,i.return)),s&64&&On&&(e=e.updateQueue,e!==null&&(s=e.callbacks,s!==null&&(i=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=i===null?s:i.concat(s))));break;case 26:var l=on;if(kt(t,e),Tt(e),s&512&&(lt||i===null||bn(i,i.return)),s&4){var h=i!==null?i.memoizedState:null;if(s=e.memoizedState,i===null)if(s===null)if(e.stateNode===null){e:{s=e.type,i=e.memoizedProps,l=l.ownerDocument||l;t:switch(s){case"title":h=l.getElementsByTagName("title")[0],(!h||h[Wa]||h[gt]||h.namespaceURI==="http://www.w3.org/2000/svg"||h.hasAttribute("itemprop"))&&(h=l.createElement(s),l.head.insertBefore(h,l.querySelector("head > title"))),xt(h,s,i),h[gt]=e,ft(h),s=h;break e;case"link":var m=kp("link","href",l).get(s+(i.href||""));if(m){for(var v=0;v<m.length;v++)if(h=m[v],h.getAttribute("href")===(i.href==null||i.href===""?null:i.href)&&h.getAttribute("rel")===(i.rel==null?null:i.rel)&&h.getAttribute("title")===(i.title==null?null:i.title)&&h.getAttribute("crossorigin")===(i.crossOrigin==null?null:i.crossOrigin)){m.splice(v,1);break t}}h=l.createElement(s),xt(h,s,i),l.head.appendChild(h);break;case"meta":if(m=kp("meta","content",l).get(s+(i.content||""))){for(v=0;v<m.length;v++)if(h=m[v],h.getAttribute("content")===(i.content==null?null:""+i.content)&&h.getAttribute("name")===(i.name==null?null:i.name)&&h.getAttribute("property")===(i.property==null?null:i.property)&&h.getAttribute("http-equiv")===(i.httpEquiv==null?null:i.httpEquiv)&&h.getAttribute("charset")===(i.charSet==null?null:i.charSet)){m.splice(v,1);break t}}h=l.createElement(s),xt(h,s,i),l.head.appendChild(h);break;default:throw Error(o(468,s))}h[gt]=e,ft(h),s=h}e.stateNode=s}else Tp(l,e.type,e.stateNode);else e.stateNode=Cp(l,s,e.memoizedProps);else h!==s?(h===null?i.stateNode!==null&&(i=i.stateNode,i.parentNode.removeChild(i)):h.count--,s===null?Tp(l,e.type,e.stateNode):Cp(l,s,e.memoizedProps)):s===null&&e.stateNode!==null&&lc(e,e.memoizedProps,i.memoizedProps)}break;case 27:kt(t,e),Tt(e),s&512&&(lt||i===null||bn(i,i.return)),i!==null&&s&4&&lc(e,e.memoizedProps,i.memoizedProps);break;case 5:if(kt(t,e),Tt(e),s&512&&(lt||i===null||bn(i,i.return)),e.flags&32){l=e.stateNode;try{Yi(l,"")}catch(te){Ue(e,e.return,te)}}s&4&&e.stateNode!=null&&(l=e.memoizedProps,lc(e,l,i!==null?i.memoizedProps:l)),s&1024&&(dc=!0);break;case 6:if(kt(t,e),Tt(e),s&4){if(e.stateNode===null)throw Error(o(162));s=e.memoizedProps,i=e.stateNode;try{i.nodeValue=s}catch(te){Ue(e,e.return,te)}}break;case 3:if(oo=null,l=on,on=ro(t.containerInfo),kt(t,e),on=l,Tt(e),s&4&&i!==null&&i.memoizedState.isDehydrated)try{Ra(t.containerInfo)}catch(te){Ue(e,e.return,te)}dc&&(dc=!1,Tf(e));break;case 4:s=on,on=ro(e.stateNode.containerInfo),kt(t,e),Tt(e),on=s;break;case 12:kt(t,e),Tt(e);break;case 31:kt(t,e),Tt(e),s&4&&(s=e.updateQueue,s!==null&&(e.updateQueue=null,Ws(e,s)));break;case 13:kt(t,e),Tt(e),e.child.flags&8192&&e.memoizedState!==null!=(i!==null&&i.memoizedState!==null)&&(Vs=at()),s&4&&(s=e.updateQueue,s!==null&&(e.updateQueue=null,Ws(e,s)));break;case 22:l=e.memoizedState!==null;var C=i!==null&&i.memoizedState!==null,U=On,$=lt;if(On=U||l,lt=$||C,kt(t,e),lt=$,On=U,Tt(e),s&8192)e:for(t=e.stateNode,t._visibility=l?t._visibility&-2:t._visibility|1,l&&(i===null||C||On||lt||Di(e)),i=null,t=e;;){if(t.tag===5||t.tag===26){if(i===null){C=i=t;try{if(h=C.stateNode,l)m=h.style,typeof m.setProperty=="function"?m.setProperty("display","none","important"):m.display="none";else{v=C.stateNode;var Z=C.memoizedProps.style,L=Z!=null&&Z.hasOwnProperty("display")?Z.display:null;v.style.display=L==null||typeof L=="boolean"?"":(""+L).trim()}}catch(te){Ue(C,C.return,te)}}}else if(t.tag===6){if(i===null){C=t;try{C.stateNode.nodeValue=l?"":C.memoizedProps}catch(te){Ue(C,C.return,te)}}}else if(t.tag===18){if(i===null){C=t;try{var H=C.stateNode;l?bp(H,!0):bp(C.stateNode,!1)}catch(te){Ue(C,C.return,te)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;i===t&&(i=null),t=t.return}i===t&&(i=null),t.sibling.return=t.return,t=t.sibling}s&4&&(s=e.updateQueue,s!==null&&(i=s.retryQueue,i!==null&&(s.retryQueue=null,Ws(e,i))));break;case 19:kt(t,e),Tt(e),s&4&&(s=e.updateQueue,s!==null&&(e.updateQueue=null,Ws(e,s)));break;case 30:break;case 21:break;default:kt(t,e),Tt(e)}}function Tt(e){var t=e.flags;if(t&2){try{for(var i,s=e.return;s!==null;){if(vf(s)){i=s;break}s=s.return}if(i==null)throw Error(o(160));switch(i.tag){case 27:var l=i.stateNode,h=cc(e);Ps(e,h,l);break;case 5:var m=i.stateNode;i.flags&32&&(Yi(m,""),i.flags&=-33);var v=cc(e);Ps(e,v,m);break;case 3:case 4:var C=i.stateNode.containerInfo,U=cc(e);uc(e,U,C);break;default:throw Error(o(161))}}catch($){Ue(e,e.return,$)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Tf(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;Tf(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function Bn(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)_f(e,t.alternate,t),t=t.sibling}function Di(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:ni(4,t,t.return),Di(t);break;case 1:bn(t,t.return);var i=t.stateNode;typeof i.componentWillUnmount=="function"&&bf(t,t.return,i),Di(t);break;case 27:Cr(t.stateNode);case 26:case 5:bn(t,t.return),Di(t);break;case 22:t.memoizedState===null&&Di(t);break;case 30:Di(t);break;default:Di(t)}e=e.sibling}}function Nn(e,t,i){for(i=i&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var s=t.alternate,l=e,h=t,m=h.flags;switch(h.tag){case 0:case 11:case 15:Nn(l,h,i),yr(4,h);break;case 1:if(Nn(l,h,i),s=h,l=s.stateNode,typeof l.componentDidMount=="function")try{l.componentDidMount()}catch(U){Ue(s,s.return,U)}if(s=h,l=s.updateQueue,l!==null){var v=s.stateNode;try{var C=l.shared.hiddenCallbacks;if(C!==null)for(l.shared.hiddenCallbacks=null,l=0;l<C.length;l++)rh(C[l],v)}catch(U){Ue(s,s.return,U)}}i&&m&64&&yf(h),br(h,h.return);break;case 27:wf(h);case 26:case 5:Nn(l,h,i),i&&s===null&&m&4&&xf(h),br(h,h.return);break;case 12:Nn(l,h,i);break;case 31:Nn(l,h,i),i&&m&4&&jf(l,h);break;case 13:Nn(l,h,i),i&&m&4&&Cf(l,h);break;case 22:h.memoizedState===null&&Nn(l,h,i),br(h,h.return);break;case 30:break;default:Nn(l,h,i)}t=t.sibling}}function hc(e,t){var i=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(i=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==i&&(e!=null&&e.refCount++,i!=null&&ar(i))}function fc(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&ar(e))}function ln(e,t,i,s){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Af(e,t,i,s),t=t.sibling}function Af(e,t,i,s){var l=t.flags;switch(t.tag){case 0:case 11:case 15:ln(e,t,i,s),l&2048&&yr(9,t);break;case 1:ln(e,t,i,s);break;case 3:ln(e,t,i,s),l&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&ar(e)));break;case 12:if(l&2048){ln(e,t,i,s),e=t.stateNode;try{var h=t.memoizedProps,m=h.id,v=h.onPostCommit;typeof v=="function"&&v(m,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(C){Ue(t,t.return,C)}}else ln(e,t,i,s);break;case 31:ln(e,t,i,s);break;case 13:ln(e,t,i,s);break;case 23:break;case 22:h=t.stateNode,m=t.alternate,t.memoizedState!==null?h._visibility&2?ln(e,t,i,s):xr(e,t):h._visibility&2?ln(e,t,i,s):(h._visibility|=2,pa(e,t,i,s,(t.subtreeFlags&10256)!==0||!1)),l&2048&&hc(m,t);break;case 24:ln(e,t,i,s),l&2048&&fc(t.alternate,t);break;default:ln(e,t,i,s)}}function pa(e,t,i,s,l){for(l=l&&((t.subtreeFlags&10256)!==0||!1),t=t.child;t!==null;){var h=e,m=t,v=i,C=s,U=m.flags;switch(m.tag){case 0:case 11:case 15:pa(h,m,v,C,l),yr(8,m);break;case 23:break;case 22:var $=m.stateNode;m.memoizedState!==null?$._visibility&2?pa(h,m,v,C,l):xr(h,m):($._visibility|=2,pa(h,m,v,C,l)),l&&U&2048&&hc(m.alternate,m);break;case 24:pa(h,m,v,C,l),l&&U&2048&&fc(m.alternate,m);break;default:pa(h,m,v,C,l)}t=t.sibling}}function xr(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var i=e,s=t,l=s.flags;switch(s.tag){case 22:xr(i,s),l&2048&&hc(s.alternate,s);break;case 24:xr(i,s),l&2048&&fc(s.alternate,s);break;default:xr(i,s)}t=t.sibling}}var vr=8192;function ga(e,t,i){if(e.subtreeFlags&vr)for(e=e.child;e!==null;)zf(e,t,i),e=e.sibling}function zf(e,t,i){switch(e.tag){case 26:ga(e,t,i),e.flags&vr&&e.memoizedState!==null&&z0(i,on,e.memoizedState,e.memoizedProps);break;case 5:ga(e,t,i);break;case 3:case 4:var s=on;on=ro(e.stateNode.containerInfo),ga(e,t,i),on=s;break;case 22:e.memoizedState===null&&(s=e.alternate,s!==null&&s.memoizedState!==null?(s=vr,vr=16777216,ga(e,t,i),vr=s):ga(e,t,i));break;default:ga(e,t,i)}}function Of(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function wr(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var i=0;i<t.length;i++){var s=t[i];pt=s,Bf(s,e)}Of(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Df(e),e=e.sibling}function Df(e){switch(e.tag){case 0:case 11:case 15:wr(e),e.flags&2048&&ni(9,e,e.return);break;case 3:wr(e);break;case 12:wr(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,Zs(e)):wr(e);break;default:wr(e)}}function Zs(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var i=0;i<t.length;i++){var s=t[i];pt=s,Bf(s,e)}Of(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:ni(8,t,t.return),Zs(t);break;case 22:i=t.stateNode,i._visibility&2&&(i._visibility&=-3,Zs(t));break;default:Zs(t)}e=e.sibling}}function Bf(e,t){for(;pt!==null;){var i=pt;switch(i.tag){case 0:case 11:case 15:ni(8,i,t);break;case 23:case 22:if(i.memoizedState!==null&&i.memoizedState.cachePool!==null){var s=i.memoizedState.cachePool.pool;s!=null&&s.refCount++}break;case 24:ar(i.memoizedState.cache)}if(s=i.child,s!==null)s.return=i,pt=s;else e:for(i=e;pt!==null;){s=pt;var l=s.sibling,h=s.return;if(Ef(s),s===i){pt=null;break e}if(l!==null){l.return=h,pt=l;break e}pt=h}}}var Zy={getCacheForType:function(e){var t=yt(rt),i=t.data.get(e);return i===void 0&&(i=e(),t.data.set(e,i)),i},cacheSignal:function(){return yt(rt).controller.signal}},Vy=typeof WeakMap=="function"?WeakMap:Map,Be=0,Ie=null,Ee=null,je=0,Ne=0,qt=null,ii=!1,ma=!1,pc=!1,Un=0,Fe=0,ai=0,Bi=0,gc=0,$t=0,ya=0,Sr=null,At=null,mc=!1,Vs=0,Nf=0,Ys=1/0,Ks=null,ri=null,dt=0,si=null,ba=null,Mn=0,yc=0,bc=null,Uf=null,_r=0,xc=null;function It(){return(Be&2)!==0&&je!==0?je&-je:j.T!==null?Rc():Qu()}function Mf(){if($t===0)if((je&536870912)===0||Te){var e=is;is<<=1,(is&3932160)===0&&(is=262144),$t=e}else $t=536870912;return e=Lt.current,e!==null&&(e.flags|=32),$t}function zt(e,t,i){(e===Ie&&(Ne===2||Ne===9)||e.cancelPendingCommit!==null)&&(xa(e,0),oi(e,je,$t,!1)),Pa(e,i),((Be&2)===0||e!==Ie)&&(e===Ie&&((Be&2)===0&&(Bi|=i),Fe===4&&oi(e,je,$t,!1)),xn(e))}function Lf(e,t,i){if((Be&6)!==0)throw Error(o(327));var s=!i&&(t&127)===0&&(t&e.expiredLanes)===0||Ga(e,t),l=s?Jy(e,t):wc(e,t,!0),h=s;do{if(l===0){ma&&!s&&oi(e,t,0,!1);break}else{if(i=e.current.alternate,h&&!Yy(i)){l=wc(e,t,!1),h=!1;continue}if(l===2){if(h=t,e.errorRecoveryDisabledLanes&h)var m=0;else m=e.pendingLanes&-536870913,m=m!==0?m:m&536870912?536870912:0;if(m!==0){t=m;e:{var v=e;l=Sr;var C=v.current.memoizedState.isDehydrated;if(C&&(xa(v,m).flags|=256),m=wc(v,m,!1),m!==2){if(pc&&!C){v.errorRecoveryDisabledLanes|=h,Bi|=h,l=4;break e}h=At,At=l,h!==null&&(At===null?At=h:At.push.apply(At,h))}l=m}if(h=!1,l!==2)continue}}if(l===1){xa(e,0),oi(e,t,0,!0);break}e:{switch(s=e,h=l,h){case 0:case 1:throw Error(o(345));case 4:if((t&4194048)!==t)break;case 6:oi(s,t,$t,!ii);break e;case 2:At=null;break;case 3:case 5:break;default:throw Error(o(329))}if((t&62914560)===t&&(l=Vs+300-at(),10<l)){if(oi(s,t,$t,!ii),rs(s,0,!0)!==0)break e;Mn=t,s.timeoutHandle=gp(Hf.bind(null,s,i,At,Ks,mc,t,$t,Bi,ya,ii,h,"Throttled",-0,0),l);break e}Hf(s,i,At,Ks,mc,t,$t,Bi,ya,ii,h,null,-0,0)}}break}while(!0);xn(e)}function Hf(e,t,i,s,l,h,m,v,C,U,$,Z,L,H){if(e.timeoutHandle=-1,Z=t.subtreeFlags,Z&8192||(Z&16785408)===16785408){Z={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Sn},zf(t,h,Z);var te=(h&62914560)===h?Vs-at():(h&4194048)===h?Nf-at():0;if(te=O0(Z,te),te!==null){Mn=h,e.cancelPendingCommit=te(Vf.bind(null,e,t,h,i,s,l,m,v,C,$,Z,null,L,H)),oi(e,h,m,!U);return}}Vf(e,t,h,i,s,l,m,v,C)}function Yy(e){for(var t=e;;){var i=t.tag;if((i===0||i===11||i===15)&&t.flags&16384&&(i=t.updateQueue,i!==null&&(i=i.stores,i!==null)))for(var s=0;s<i.length;s++){var l=i[s],h=l.getSnapshot;l=l.value;try{if(!Ut(h(),l))return!1}catch{return!1}}if(i=t.child,t.subtreeFlags&16384&&i!==null)i.return=t,t=i;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function oi(e,t,i,s){t&=~gc,t&=~Bi,e.suspendedLanes|=t,e.pingedLanes&=~t,s&&(e.warmLanes|=t),s=e.expirationTimes;for(var l=t;0<l;){var h=31-Nt(l),m=1<<h;s[h]=-1,l&=~m}i!==0&&Yu(e,i,t)}function Js(){return(Be&6)===0?(Er(0),!1):!0}function vc(){if(Ee!==null){if(Ne===0)var e=Ee.return;else e=Ee,jn=Ri=null,Ul(e),ca=null,sr=0,e=Ee;for(;e!==null;)mf(e.alternate,e),e=e.return;Ee=null}}function xa(e,t){var i=e.timeoutHandle;i!==-1&&(e.timeoutHandle=-1,p0(i)),i=e.cancelPendingCommit,i!==null&&(e.cancelPendingCommit=null,i()),Mn=0,vc(),Ie=e,Ee=i=En(e.current,null),je=t,Ne=0,qt=null,ii=!1,ma=Ga(e,t),pc=!1,ya=$t=gc=Bi=ai=Fe=0,At=Sr=null,mc=!1,(t&8)!==0&&(t|=t&32);var s=e.entangledLanes;if(s!==0)for(e=e.entanglements,s&=t;0<s;){var l=31-Nt(s),h=1<<l;t|=e[l],s&=~h}return Un=t,ys(),i}function qf(e,t){xe=null,j.H=pr,t===la||t===Rs?(t=th(),Ne=3):t===El?(t=th(),Ne=4):Ne=t===Xl?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,qt=t,Ee===null&&(Fe=1,Hs(e,Qt(t,e.current)))}function $f(){var e=Lt.current;return e===null?!0:(je&4194048)===je?tn===null:(je&62914560)===je||(je&536870912)!==0?e===tn:!1}function If(){var e=j.H;return j.H=pr,e===null?pr:e}function Gf(){var e=j.A;return j.A=Zy,e}function Qs(){Fe=4,ii||(je&4194048)!==je&&Lt.current!==null||(ma=!0),(ai&134217727)===0&&(Bi&134217727)===0||Ie===null||oi(Ie,je,$t,!1)}function wc(e,t,i){var s=Be;Be|=2;var l=If(),h=Gf();(Ie!==e||je!==t)&&(Ks=null,xa(e,t)),t=!1;var m=Fe;e:do try{if(Ne!==0&&Ee!==null){var v=Ee,C=qt;switch(Ne){case 8:vc(),m=6;break e;case 3:case 2:case 9:case 6:Lt.current===null&&(t=!0);var U=Ne;if(Ne=0,qt=null,va(e,v,C,U),i&&ma){m=0;break e}break;default:U=Ne,Ne=0,qt=null,va(e,v,C,U)}}Ky(),m=Fe;break}catch($){qf(e,$)}while(!0);return t&&e.shellSuspendCounter++,jn=Ri=null,Be=s,j.H=l,j.A=h,Ee===null&&(Ie=null,je=0,ys()),m}function Ky(){for(;Ee!==null;)Pf(Ee)}function Jy(e,t){var i=Be;Be|=2;var s=If(),l=Gf();Ie!==e||je!==t?(Ks=null,Ys=at()+500,xa(e,t)):ma=Ga(e,t);e:do try{if(Ne!==0&&Ee!==null){t=Ee;var h=qt;t:switch(Ne){case 1:Ne=0,qt=null,va(e,t,h,1);break;case 2:case 9:if(Fd(h)){Ne=0,qt=null,Wf(t);break}t=function(){Ne!==2&&Ne!==9||Ie!==e||(Ne=7),xn(e)},h.then(t,t);break e;case 3:Ne=7;break e;case 4:Ne=5;break e;case 7:Fd(h)?(Ne=0,qt=null,Wf(t)):(Ne=0,qt=null,va(e,t,h,7));break;case 5:var m=null;switch(Ee.tag){case 26:m=Ee.memoizedState;case 5:case 27:var v=Ee;if(m?Ap(m):v.stateNode.complete){Ne=0,qt=null;var C=v.sibling;if(C!==null)Ee=C;else{var U=v.return;U!==null?(Ee=U,Xs(U)):Ee=null}break t}}Ne=0,qt=null,va(e,t,h,5);break;case 6:Ne=0,qt=null,va(e,t,h,6);break;case 8:vc(),Fe=6;break e;default:throw Error(o(462))}}Qy();break}catch($){qf(e,$)}while(!0);return jn=Ri=null,j.H=s,j.A=l,Be=i,Ee!==null?0:(Ie=null,je=0,ys(),Fe)}function Qy(){for(;Ee!==null&&!Dt();)Pf(Ee)}function Pf(e){var t=pf(e.alternate,e,Un);e.memoizedProps=e.pendingProps,t===null?Xs(e):Ee=t}function Wf(e){var t=e,i=t.alternate;switch(t.tag){case 15:case 0:t=lf(i,t,t.pendingProps,t.type,void 0,je);break;case 11:t=lf(i,t,t.pendingProps,t.type.render,t.ref,je);break;case 5:Ul(t);default:mf(i,t),t=Ee=Id(t,Un),t=pf(i,t,Un)}e.memoizedProps=e.pendingProps,t===null?Xs(e):Ee=t}function va(e,t,i,s){jn=Ri=null,Ul(t),ca=null,sr=0;var l=t.return;try{if(Hy(e,l,t,i,je)){Fe=1,Hs(e,Qt(i,e.current)),Ee=null;return}}catch(h){if(l!==null)throw Ee=l,h;Fe=1,Hs(e,Qt(i,e.current)),Ee=null;return}t.flags&32768?(Te||s===1?e=!0:ma||(je&536870912)!==0?e=!1:(ii=e=!0,(s===2||s===9||s===3||s===6)&&(s=Lt.current,s!==null&&s.tag===13&&(s.flags|=16384))),Zf(t,e)):Xs(t)}function Xs(e){var t=e;do{if((t.flags&32768)!==0){Zf(t,ii);return}e=t.return;var i=Iy(t.alternate,t,Un);if(i!==null){Ee=i;return}if(t=t.sibling,t!==null){Ee=t;return}Ee=t=e}while(t!==null);Fe===0&&(Fe=5)}function Zf(e,t){do{var i=Gy(e.alternate,e);if(i!==null){i.flags&=32767,Ee=i;return}if(i=e.return,i!==null&&(i.flags|=32768,i.subtreeFlags=0,i.deletions=null),!t&&(e=e.sibling,e!==null)){Ee=e;return}Ee=e=i}while(e!==null);Fe=6,Ee=null}function Vf(e,t,i,s,l,h,m,v,C){e.cancelPendingCommit=null;do Fs();while(dt!==0);if((Be&6)!==0)throw Error(o(327));if(t!==null){if(t===e.current)throw Error(o(177));if(h=t.lanes|t.childLanes,h|=cl,Am(e,i,h,m,v,C),e===Ie&&(Ee=Ie=null,je=0),ba=t,si=e,Mn=i,yc=h,bc=l,Uf=s,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,t0(ts,function(){return Xf(),null})):(e.callbackNode=null,e.callbackPriority=0),s=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||s){s=j.T,j.T=null,l=M.p,M.p=2,m=Be,Be|=4;try{Py(e,t,i)}finally{Be=m,M.p=l,j.T=s}}dt=1,Yf(),Kf(),Jf()}}function Yf(){if(dt===1){dt=0;var e=si,t=ba,i=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||i){i=j.T,j.T=null;var s=M.p;M.p=2;var l=Be;Be|=4;try{kf(t,e);var h=Dc,m=Dd(e.containerInfo),v=h.focusedElem,C=h.selectionRange;if(m!==v&&v&&v.ownerDocument&&Od(v.ownerDocument.documentElement,v)){if(C!==null&&al(v)){var U=C.start,$=C.end;if($===void 0&&($=U),"selectionStart"in v)v.selectionStart=U,v.selectionEnd=Math.min($,v.value.length);else{var Z=v.ownerDocument||document,L=Z&&Z.defaultView||window;if(L.getSelection){var H=L.getSelection(),te=v.textContent.length,le=Math.min(C.start,te),qe=C.end===void 0?le:Math.min(C.end,te);!H.extend&&le>qe&&(m=qe,qe=le,le=m);var D=zd(v,le),A=zd(v,qe);if(D&&A&&(H.rangeCount!==1||H.anchorNode!==D.node||H.anchorOffset!==D.offset||H.focusNode!==A.node||H.focusOffset!==A.offset)){var N=Z.createRange();N.setStart(D.node,D.offset),H.removeAllRanges(),le>qe?(H.addRange(N),H.extend(A.node,A.offset)):(N.setEnd(A.node,A.offset),H.addRange(N))}}}}for(Z=[],H=v;H=H.parentNode;)H.nodeType===1&&Z.push({element:H,left:H.scrollLeft,top:H.scrollTop});for(typeof v.focus=="function"&&v.focus(),v=0;v<Z.length;v++){var W=Z[v];W.element.scrollLeft=W.left,W.element.scrollTop=W.top}}ho=!!Oc,Dc=Oc=null}finally{Be=l,M.p=s,j.T=i}}e.current=t,dt=2}}function Kf(){if(dt===2){dt=0;var e=si,t=ba,i=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||i){i=j.T,j.T=null;var s=M.p;M.p=2;var l=Be;Be|=4;try{_f(e,t.alternate,t)}finally{Be=l,M.p=s,j.T=i}}dt=3}}function Jf(){if(dt===4||dt===3){dt=0,Vt();var e=si,t=ba,i=Mn,s=Uf;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?dt=5:(dt=0,ba=si=null,Qf(e,e.pendingLanes));var l=e.pendingLanes;if(l===0&&(ri=null),Ho(i),t=t.stateNode,Bt&&typeof Bt.onCommitFiberRoot=="function")try{Bt.onCommitFiberRoot(Ia,t,void 0,(t.current.flags&128)===128)}catch{}if(s!==null){t=j.T,l=M.p,M.p=2,j.T=null;try{for(var h=e.onRecoverableError,m=0;m<s.length;m++){var v=s[m];h(v.value,{componentStack:v.stack})}}finally{j.T=t,M.p=l}}(Mn&3)!==0&&Fs(),xn(e),l=e.pendingLanes,(i&261930)!==0&&(l&42)!==0?e===xc?_r++:(_r=0,xc=e):_r=0,Er(0)}}function Qf(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,ar(t)))}function Fs(){return Yf(),Kf(),Jf(),Xf()}function Xf(){if(dt!==5)return!1;var e=si,t=yc;yc=0;var i=Ho(Mn),s=j.T,l=M.p;try{M.p=32>i?32:i,j.T=null,i=bc,bc=null;var h=si,m=Mn;if(dt=0,ba=si=null,Mn=0,(Be&6)!==0)throw Error(o(331));var v=Be;if(Be|=4,Df(h.current),Af(h,h.current,m,i),Be=v,Er(0,!1),Bt&&typeof Bt.onPostCommitFiberRoot=="function")try{Bt.onPostCommitFiberRoot(Ia,h)}catch{}return!0}finally{M.p=l,j.T=s,Qf(e,t)}}function Ff(e,t,i){t=Qt(i,t),t=Ql(e.stateNode,t,2),e=Fn(e,t,2),e!==null&&(Pa(e,2),xn(e))}function Ue(e,t,i){if(e.tag===3)Ff(e,e,i);else for(;t!==null;){if(t.tag===3){Ff(t,e,i);break}else if(t.tag===1){var s=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(ri===null||!ri.has(s))){e=Qt(i,e),i=Fh(2),s=Fn(t,i,2),s!==null&&(ef(i,s,t,e),Pa(s,2),xn(s));break}}t=t.return}}function Sc(e,t,i){var s=e.pingCache;if(s===null){s=e.pingCache=new Vy;var l=new Set;s.set(t,l)}else l=s.get(t),l===void 0&&(l=new Set,s.set(t,l));l.has(i)||(pc=!0,l.add(i),e=Xy.bind(null,e,t,i),t.then(e,e))}function Xy(e,t,i){var s=e.pingCache;s!==null&&s.delete(t),e.pingedLanes|=e.suspendedLanes&i,e.warmLanes&=~i,Ie===e&&(je&i)===i&&(Fe===4||Fe===3&&(je&62914560)===je&&300>at()-Vs?(Be&2)===0&&xa(e,0):gc|=i,ya===je&&(ya=0)),xn(e)}function ep(e,t){t===0&&(t=Vu()),e=Si(e,t),e!==null&&(Pa(e,t),xn(e))}function Fy(e){var t=e.memoizedState,i=0;t!==null&&(i=t.retryLane),ep(e,i)}function e0(e,t){var i=0;switch(e.tag){case 31:case 13:var s=e.stateNode,l=e.memoizedState;l!==null&&(i=l.retryLane);break;case 19:s=e.stateNode;break;case 22:s=e.stateNode._retryCache;break;default:throw Error(o(314))}s!==null&&s.delete(t),ep(e,i)}function t0(e,t){return $e(e,t)}var eo=null,wa=null,_c=!1,to=!1,Ec=!1,li=0;function xn(e){e!==wa&&e.next===null&&(wa===null?eo=wa=e:wa=wa.next=e),to=!0,_c||(_c=!0,i0())}function Er(e,t){if(!Ec&&to){Ec=!0;do for(var i=!1,s=eo;s!==null;){if(e!==0){var l=s.pendingLanes;if(l===0)var h=0;else{var m=s.suspendedLanes,v=s.pingedLanes;h=(1<<31-Nt(42|e)+1)-1,h&=l&~(m&~v),h=h&201326741?h&201326741|1:h?h|2:0}h!==0&&(i=!0,ap(s,h))}else h=je,h=rs(s,s===Ie?h:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),(h&3)===0||Ga(s,h)||(i=!0,ap(s,h));s=s.next}while(i);Ec=!1}}function n0(){tp()}function tp(){to=_c=!1;var e=0;li!==0&&f0()&&(e=li);for(var t=at(),i=null,s=eo;s!==null;){var l=s.next,h=np(s,t);h===0?(s.next=null,i===null?eo=l:i.next=l,l===null&&(wa=i)):(i=s,(e!==0||(h&3)!==0)&&(to=!0)),s=l}dt!==0&&dt!==5||Er(e),li!==0&&(li=0)}function np(e,t){for(var i=e.suspendedLanes,s=e.pingedLanes,l=e.expirationTimes,h=e.pendingLanes&-62914561;0<h;){var m=31-Nt(h),v=1<<m,C=l[m];C===-1?((v&i)===0||(v&s)!==0)&&(l[m]=Tm(v,t)):C<=t&&(e.expiredLanes|=v),h&=~v}if(t=Ie,i=je,i=rs(e,e===t?i:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),s=e.callbackNode,i===0||e===t&&(Ne===2||Ne===9)||e.cancelPendingCommit!==null)return s!==null&&s!==null&&tt(s),e.callbackNode=null,e.callbackPriority=0;if((i&3)===0||Ga(e,i)){if(t=i&-i,t===e.callbackPriority)return t;switch(s!==null&&tt(s),Ho(i)){case 2:case 8:i=Wu;break;case 32:i=ts;break;case 268435456:i=Zu;break;default:i=ts}return s=ip.bind(null,e),i=$e(i,s),e.callbackPriority=t,e.callbackNode=i,t}return s!==null&&s!==null&&tt(s),e.callbackPriority=2,e.callbackNode=null,2}function ip(e,t){if(dt!==0&&dt!==5)return e.callbackNode=null,e.callbackPriority=0,null;var i=e.callbackNode;if(Fs()&&e.callbackNode!==i)return null;var s=je;return s=rs(e,e===Ie?s:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),s===0?null:(Lf(e,s,t),np(e,at()),e.callbackNode!=null&&e.callbackNode===i?ip.bind(null,e):null)}function ap(e,t){if(Fs())return null;Lf(e,t,!0)}function i0(){g0(function(){(Be&6)!==0?$e($a,n0):tp()})}function Rc(){if(li===0){var e=sa;e===0&&(e=ns,ns<<=1,(ns&261888)===0&&(ns=256)),li=e}return li}function rp(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:cs(""+e)}function sp(e,t){var i=t.ownerDocument.createElement("input");return i.name=t.name,i.value=t.value,e.id&&i.setAttribute("form",e.id),t.parentNode.insertBefore(i,t),e=new FormData(e),i.parentNode.removeChild(i),e}function a0(e,t,i,s,l){if(t==="submit"&&i&&i.stateNode===l){var h=rp((l[Rt]||null).action),m=s.submitter;m&&(t=(t=m[Rt]||null)?rp(t.formAction):m.getAttribute("formAction"),t!==null&&(h=t,m=null));var v=new fs("action","action",null,s,l);e.push({event:v,listeners:[{instance:null,listener:function(){if(s.defaultPrevented){if(li!==0){var C=m?sp(l,m):new FormData(l);Wl(i,{pending:!0,data:C,method:l.method,action:h},null,C)}}else typeof h=="function"&&(v.preventDefault(),C=m?sp(l,m):new FormData(l),Wl(i,{pending:!0,data:C,method:l.method,action:h},h,C))},currentTarget:l}]})}}for(var jc=0;jc<ll.length;jc++){var Cc=ll[jc],r0=Cc.toLowerCase(),s0=Cc[0].toUpperCase()+Cc.slice(1);sn(r0,"on"+s0)}sn(Ud,"onAnimationEnd"),sn(Md,"onAnimationIteration"),sn(Ld,"onAnimationStart"),sn("dblclick","onDoubleClick"),sn("focusin","onFocus"),sn("focusout","onBlur"),sn(Sy,"onTransitionRun"),sn(_y,"onTransitionStart"),sn(Ey,"onTransitionCancel"),sn(Hd,"onTransitionEnd"),Zi("onMouseEnter",["mouseout","mouseover"]),Zi("onMouseLeave",["mouseout","mouseover"]),Zi("onPointerEnter",["pointerout","pointerover"]),Zi("onPointerLeave",["pointerout","pointerover"]),bi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),bi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),bi("onBeforeInput",["compositionend","keypress","textInput","paste"]),bi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),bi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),bi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Rr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),o0=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Rr));function op(e,t){t=(t&4)!==0;for(var i=0;i<e.length;i++){var s=e[i],l=s.event;s=s.listeners;e:{var h=void 0;if(t)for(var m=s.length-1;0<=m;m--){var v=s[m],C=v.instance,U=v.currentTarget;if(v=v.listener,C!==h&&l.isPropagationStopped())break e;h=v,l.currentTarget=U;try{h(l)}catch($){ms($)}l.currentTarget=null,h=C}else for(m=0;m<s.length;m++){if(v=s[m],C=v.instance,U=v.currentTarget,v=v.listener,C!==h&&l.isPropagationStopped())break e;h=v,l.currentTarget=U;try{h(l)}catch($){ms($)}l.currentTarget=null,h=C}}}}function Re(e,t){var i=t[qo];i===void 0&&(i=t[qo]=new Set);var s=e+"__bubble";i.has(s)||(lp(t,e,2,!1),i.add(s))}function kc(e,t,i){var s=0;t&&(s|=4),lp(i,e,s,t)}var no="_reactListening"+Math.random().toString(36).slice(2);function Tc(e){if(!e[no]){e[no]=!0,ed.forEach(function(i){i!=="selectionchange"&&(o0.has(i)||kc(i,!1,e),kc(i,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[no]||(t[no]=!0,kc("selectionchange",!1,t))}}function lp(e,t,i,s){switch(Mp(t)){case 2:var l=N0;break;case 8:l=U0;break;default:l=Pc}i=l.bind(null,t,i,e),l=void 0,!Ko||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(l=!0),s?l!==void 0?e.addEventListener(t,i,{capture:!0,passive:l}):e.addEventListener(t,i,!0):l!==void 0?e.addEventListener(t,i,{passive:l}):e.addEventListener(t,i,!1)}function Ac(e,t,i,s,l){var h=s;if((t&1)===0&&(t&2)===0&&s!==null)e:for(;;){if(s===null)return;var m=s.tag;if(m===3||m===4){var v=s.stateNode.containerInfo;if(v===l)break;if(m===4)for(m=s.return;m!==null;){var C=m.tag;if((C===3||C===4)&&m.stateNode.containerInfo===l)return;m=m.return}for(;v!==null;){if(m=Gi(v),m===null)return;if(C=m.tag,C===5||C===6||C===26||C===27){s=h=m;continue e}v=v.parentNode}}s=s.return}hd(function(){var U=h,$=Vo(i),Z=[];e:{var L=qd.get(e);if(L!==void 0){var H=fs,te=e;switch(e){case"keypress":if(ds(i)===0)break e;case"keydown":case"keyup":H=ey;break;case"focusin":te="focus",H=Fo;break;case"focusout":te="blur",H=Fo;break;case"beforeblur":case"afterblur":H=Fo;break;case"click":if(i.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":H=gd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":H=Im;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":H=iy;break;case Ud:case Md:case Ld:H=Wm;break;case Hd:H=ry;break;case"scroll":case"scrollend":H=qm;break;case"wheel":H=oy;break;case"copy":case"cut":case"paste":H=Vm;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":H=yd;break;case"toggle":case"beforetoggle":H=cy}var le=(t&4)!==0,qe=!le&&(e==="scroll"||e==="scrollend"),D=le?L!==null?L+"Capture":null:L;le=[];for(var A=U,N;A!==null;){var W=A;if(N=W.stateNode,W=W.tag,W!==5&&W!==26&&W!==27||N===null||D===null||(W=Va(A,D),W!=null&&le.push(jr(A,W,N))),qe)break;A=A.return}0<le.length&&(L=new H(L,te,null,i,$),Z.push({event:L,listeners:le}))}}if((t&7)===0){e:{if(L=e==="mouseover"||e==="pointerover",H=e==="mouseout"||e==="pointerout",L&&i!==Zo&&(te=i.relatedTarget||i.fromElement)&&(Gi(te)||te[Ii]))break e;if((H||L)&&(L=$.window===$?$:(L=$.ownerDocument)?L.defaultView||L.parentWindow:window,H?(te=i.relatedTarget||i.toElement,H=U,te=te?Gi(te):null,te!==null&&(qe=d(te),le=te.tag,te!==qe||le!==5&&le!==27&&le!==6)&&(te=null)):(H=null,te=U),H!==te)){if(le=gd,W="onMouseLeave",D="onMouseEnter",A="mouse",(e==="pointerout"||e==="pointerover")&&(le=yd,W="onPointerLeave",D="onPointerEnter",A="pointer"),qe=H==null?L:Za(H),N=te==null?L:Za(te),L=new le(W,A+"leave",H,i,$),L.target=qe,L.relatedTarget=N,W=null,Gi($)===U&&(le=new le(D,A+"enter",te,i,$),le.target=N,le.relatedTarget=qe,W=le),qe=W,H&&te)t:{for(le=l0,D=H,A=te,N=0,W=D;W;W=le(W))N++;W=0;for(var se=A;se;se=le(se))W++;for(;0<N-W;)D=le(D),N--;for(;0<W-N;)A=le(A),W--;for(;N--;){if(D===A||A!==null&&D===A.alternate){le=D;break t}D=le(D),A=le(A)}le=null}else le=null;H!==null&&cp(Z,L,H,le,!1),te!==null&&qe!==null&&cp(Z,qe,te,le,!0)}}e:{if(L=U?Za(U):window,H=L.nodeName&&L.nodeName.toLowerCase(),H==="select"||H==="input"&&L.type==="file")var Oe=Rd;else if(_d(L))if(jd)Oe=xy;else{Oe=yy;var ae=my}else H=L.nodeName,!H||H.toLowerCase()!=="input"||L.type!=="checkbox"&&L.type!=="radio"?U&&Wo(U.elementType)&&(Oe=Rd):Oe=by;if(Oe&&(Oe=Oe(e,U))){Ed(Z,Oe,i,$);break e}ae&&ae(e,L,U),e==="focusout"&&U&&L.type==="number"&&U.memoizedProps.value!=null&&Po(L,"number",L.value)}switch(ae=U?Za(U):window,e){case"focusin":(_d(ae)||ae.contentEditable==="true")&&(Xi=ae,rl=U,tr=null);break;case"focusout":tr=rl=Xi=null;break;case"mousedown":sl=!0;break;case"contextmenu":case"mouseup":case"dragend":sl=!1,Bd(Z,i,$);break;case"selectionchange":if(wy)break;case"keydown":case"keyup":Bd(Z,i,$)}var we;if(tl)e:{switch(e){case"compositionstart":var Ce="onCompositionStart";break e;case"compositionend":Ce="onCompositionEnd";break e;case"compositionupdate":Ce="onCompositionUpdate";break e}Ce=void 0}else Qi?wd(e,i)&&(Ce="onCompositionEnd"):e==="keydown"&&i.keyCode===229&&(Ce="onCompositionStart");Ce&&(bd&&i.locale!=="ko"&&(Qi||Ce!=="onCompositionStart"?Ce==="onCompositionEnd"&&Qi&&(we=fd()):(Zn=$,Jo="value"in Zn?Zn.value:Zn.textContent,Qi=!0)),ae=io(U,Ce),0<ae.length&&(Ce=new md(Ce,e,null,i,$),Z.push({event:Ce,listeners:ae}),we?Ce.data=we:(we=Sd(i),we!==null&&(Ce.data=we)))),(we=dy?hy(e,i):fy(e,i))&&(Ce=io(U,"onBeforeInput"),0<Ce.length&&(ae=new md("onBeforeInput","beforeinput",null,i,$),Z.push({event:ae,listeners:Ce}),ae.data=we)),a0(Z,e,U,i,$)}op(Z,t)})}function jr(e,t,i){return{instance:e,listener:t,currentTarget:i}}function io(e,t){for(var i=t+"Capture",s=[];e!==null;){var l=e,h=l.stateNode;if(l=l.tag,l!==5&&l!==26&&l!==27||h===null||(l=Va(e,i),l!=null&&s.unshift(jr(e,l,h)),l=Va(e,t),l!=null&&s.push(jr(e,l,h))),e.tag===3)return s;e=e.return}return[]}function l0(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function cp(e,t,i,s,l){for(var h=t._reactName,m=[];i!==null&&i!==s;){var v=i,C=v.alternate,U=v.stateNode;if(v=v.tag,C!==null&&C===s)break;v!==5&&v!==26&&v!==27||U===null||(C=U,l?(U=Va(i,h),U!=null&&m.unshift(jr(i,U,C))):l||(U=Va(i,h),U!=null&&m.push(jr(i,U,C)))),i=i.return}m.length!==0&&e.push({event:t,listeners:m})}var c0=/\r\n?/g,u0=/\u0000|\uFFFD/g;function up(e){return(typeof e=="string"?e:""+e).replace(c0,`
`).replace(u0,"")}function dp(e,t){return t=up(t),up(e)===t}function He(e,t,i,s,l,h){switch(i){case"children":typeof s=="string"?t==="body"||t==="textarea"&&s===""||Yi(e,s):(typeof s=="number"||typeof s=="bigint")&&t!=="body"&&Yi(e,""+s);break;case"className":os(e,"class",s);break;case"tabIndex":os(e,"tabindex",s);break;case"dir":case"role":case"viewBox":case"width":case"height":os(e,i,s);break;case"style":ud(e,s,h);break;case"data":if(t!=="object"){os(e,"data",s);break}case"src":case"href":if(s===""&&(t!=="a"||i!=="href")){e.removeAttribute(i);break}if(s==null||typeof s=="function"||typeof s=="symbol"||typeof s=="boolean"){e.removeAttribute(i);break}s=cs(""+s),e.setAttribute(i,s);break;case"action":case"formAction":if(typeof s=="function"){e.setAttribute(i,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof h=="function"&&(i==="formAction"?(t!=="input"&&He(e,t,"name",l.name,l,null),He(e,t,"formEncType",l.formEncType,l,null),He(e,t,"formMethod",l.formMethod,l,null),He(e,t,"formTarget",l.formTarget,l,null)):(He(e,t,"encType",l.encType,l,null),He(e,t,"method",l.method,l,null),He(e,t,"target",l.target,l,null)));if(s==null||typeof s=="symbol"||typeof s=="boolean"){e.removeAttribute(i);break}s=cs(""+s),e.setAttribute(i,s);break;case"onClick":s!=null&&(e.onclick=Sn);break;case"onScroll":s!=null&&Re("scroll",e);break;case"onScrollEnd":s!=null&&Re("scrollend",e);break;case"dangerouslySetInnerHTML":if(s!=null){if(typeof s!="object"||!("__html"in s))throw Error(o(61));if(i=s.__html,i!=null){if(l.children!=null)throw Error(o(60));e.innerHTML=i}}break;case"multiple":e.multiple=s&&typeof s!="function"&&typeof s!="symbol";break;case"muted":e.muted=s&&typeof s!="function"&&typeof s!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(s==null||typeof s=="function"||typeof s=="boolean"||typeof s=="symbol"){e.removeAttribute("xlink:href");break}i=cs(""+s),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",i);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":s!=null&&typeof s!="function"&&typeof s!="symbol"?e.setAttribute(i,""+s):e.removeAttribute(i);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":s&&typeof s!="function"&&typeof s!="symbol"?e.setAttribute(i,""):e.removeAttribute(i);break;case"capture":case"download":s===!0?e.setAttribute(i,""):s!==!1&&s!=null&&typeof s!="function"&&typeof s!="symbol"?e.setAttribute(i,s):e.removeAttribute(i);break;case"cols":case"rows":case"size":case"span":s!=null&&typeof s!="function"&&typeof s!="symbol"&&!isNaN(s)&&1<=s?e.setAttribute(i,s):e.removeAttribute(i);break;case"rowSpan":case"start":s==null||typeof s=="function"||typeof s=="symbol"||isNaN(s)?e.removeAttribute(i):e.setAttribute(i,s);break;case"popover":Re("beforetoggle",e),Re("toggle",e),ss(e,"popover",s);break;case"xlinkActuate":wn(e,"http://www.w3.org/1999/xlink","xlink:actuate",s);break;case"xlinkArcrole":wn(e,"http://www.w3.org/1999/xlink","xlink:arcrole",s);break;case"xlinkRole":wn(e,"http://www.w3.org/1999/xlink","xlink:role",s);break;case"xlinkShow":wn(e,"http://www.w3.org/1999/xlink","xlink:show",s);break;case"xlinkTitle":wn(e,"http://www.w3.org/1999/xlink","xlink:title",s);break;case"xlinkType":wn(e,"http://www.w3.org/1999/xlink","xlink:type",s);break;case"xmlBase":wn(e,"http://www.w3.org/XML/1998/namespace","xml:base",s);break;case"xmlLang":wn(e,"http://www.w3.org/XML/1998/namespace","xml:lang",s);break;case"xmlSpace":wn(e,"http://www.w3.org/XML/1998/namespace","xml:space",s);break;case"is":ss(e,"is",s);break;case"innerText":case"textContent":break;default:(!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(i=Lm.get(i)||i,ss(e,i,s))}}function zc(e,t,i,s,l,h){switch(i){case"style":ud(e,s,h);break;case"dangerouslySetInnerHTML":if(s!=null){if(typeof s!="object"||!("__html"in s))throw Error(o(61));if(i=s.__html,i!=null){if(l.children!=null)throw Error(o(60));e.innerHTML=i}}break;case"children":typeof s=="string"?Yi(e,s):(typeof s=="number"||typeof s=="bigint")&&Yi(e,""+s);break;case"onScroll":s!=null&&Re("scroll",e);break;case"onScrollEnd":s!=null&&Re("scrollend",e);break;case"onClick":s!=null&&(e.onclick=Sn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!td.hasOwnProperty(i))e:{if(i[0]==="o"&&i[1]==="n"&&(l=i.endsWith("Capture"),t=i.slice(2,l?i.length-7:void 0),h=e[Rt]||null,h=h!=null?h[i]:null,typeof h=="function"&&e.removeEventListener(t,h,l),typeof s=="function")){typeof h!="function"&&h!==null&&(i in e?e[i]=null:e.hasAttribute(i)&&e.removeAttribute(i)),e.addEventListener(t,s,l);break e}i in e?e[i]=s:s===!0?e.setAttribute(i,""):ss(e,i,s)}}}function xt(e,t,i){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Re("error",e),Re("load",e);var s=!1,l=!1,h;for(h in i)if(i.hasOwnProperty(h)){var m=i[h];if(m!=null)switch(h){case"src":s=!0;break;case"srcSet":l=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(o(137,t));default:He(e,t,h,m,i,null)}}l&&He(e,t,"srcSet",i.srcSet,i,null),s&&He(e,t,"src",i.src,i,null);return;case"input":Re("invalid",e);var v=h=m=l=null,C=null,U=null;for(s in i)if(i.hasOwnProperty(s)){var $=i[s];if($!=null)switch(s){case"name":l=$;break;case"type":m=$;break;case"checked":C=$;break;case"defaultChecked":U=$;break;case"value":h=$;break;case"defaultValue":v=$;break;case"children":case"dangerouslySetInnerHTML":if($!=null)throw Error(o(137,t));break;default:He(e,t,s,$,i,null)}}sd(e,h,v,C,U,m,l,!1);return;case"select":Re("invalid",e),s=m=h=null;for(l in i)if(i.hasOwnProperty(l)&&(v=i[l],v!=null))switch(l){case"value":h=v;break;case"defaultValue":m=v;break;case"multiple":s=v;default:He(e,t,l,v,i,null)}t=h,i=m,e.multiple=!!s,t!=null?Vi(e,!!s,t,!1):i!=null&&Vi(e,!!s,i,!0);return;case"textarea":Re("invalid",e),h=l=s=null;for(m in i)if(i.hasOwnProperty(m)&&(v=i[m],v!=null))switch(m){case"value":s=v;break;case"defaultValue":l=v;break;case"children":h=v;break;case"dangerouslySetInnerHTML":if(v!=null)throw Error(o(91));break;default:He(e,t,m,v,i,null)}ld(e,s,l,h);return;case"option":for(C in i)i.hasOwnProperty(C)&&(s=i[C],s!=null)&&(C==="selected"?e.selected=s&&typeof s!="function"&&typeof s!="symbol":He(e,t,C,s,i,null));return;case"dialog":Re("beforetoggle",e),Re("toggle",e),Re("cancel",e),Re("close",e);break;case"iframe":case"object":Re("load",e);break;case"video":case"audio":for(s=0;s<Rr.length;s++)Re(Rr[s],e);break;case"image":Re("error",e),Re("load",e);break;case"details":Re("toggle",e);break;case"embed":case"source":case"link":Re("error",e),Re("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(U in i)if(i.hasOwnProperty(U)&&(s=i[U],s!=null))switch(U){case"children":case"dangerouslySetInnerHTML":throw Error(o(137,t));default:He(e,t,U,s,i,null)}return;default:if(Wo(t)){for($ in i)i.hasOwnProperty($)&&(s=i[$],s!==void 0&&zc(e,t,$,s,i,void 0));return}}for(v in i)i.hasOwnProperty(v)&&(s=i[v],s!=null&&He(e,t,v,s,i,null))}function d0(e,t,i,s){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var l=null,h=null,m=null,v=null,C=null,U=null,$=null;for(H in i){var Z=i[H];if(i.hasOwnProperty(H)&&Z!=null)switch(H){case"checked":break;case"value":break;case"defaultValue":C=Z;default:s.hasOwnProperty(H)||He(e,t,H,null,s,Z)}}for(var L in s){var H=s[L];if(Z=i[L],s.hasOwnProperty(L)&&(H!=null||Z!=null))switch(L){case"type":h=H;break;case"name":l=H;break;case"checked":U=H;break;case"defaultChecked":$=H;break;case"value":m=H;break;case"defaultValue":v=H;break;case"children":case"dangerouslySetInnerHTML":if(H!=null)throw Error(o(137,t));break;default:H!==Z&&He(e,t,L,H,s,Z)}}Go(e,m,v,C,U,$,h,l);return;case"select":H=m=v=L=null;for(h in i)if(C=i[h],i.hasOwnProperty(h)&&C!=null)switch(h){case"value":break;case"multiple":H=C;default:s.hasOwnProperty(h)||He(e,t,h,null,s,C)}for(l in s)if(h=s[l],C=i[l],s.hasOwnProperty(l)&&(h!=null||C!=null))switch(l){case"value":L=h;break;case"defaultValue":v=h;break;case"multiple":m=h;default:h!==C&&He(e,t,l,h,s,C)}t=v,i=m,s=H,L!=null?Vi(e,!!i,L,!1):!!s!=!!i&&(t!=null?Vi(e,!!i,t,!0):Vi(e,!!i,i?[]:"",!1));return;case"textarea":H=L=null;for(v in i)if(l=i[v],i.hasOwnProperty(v)&&l!=null&&!s.hasOwnProperty(v))switch(v){case"value":break;case"children":break;default:He(e,t,v,null,s,l)}for(m in s)if(l=s[m],h=i[m],s.hasOwnProperty(m)&&(l!=null||h!=null))switch(m){case"value":L=l;break;case"defaultValue":H=l;break;case"children":break;case"dangerouslySetInnerHTML":if(l!=null)throw Error(o(91));break;default:l!==h&&He(e,t,m,l,s,h)}od(e,L,H);return;case"option":for(var te in i)L=i[te],i.hasOwnProperty(te)&&L!=null&&!s.hasOwnProperty(te)&&(te==="selected"?e.selected=!1:He(e,t,te,null,s,L));for(C in s)L=s[C],H=i[C],s.hasOwnProperty(C)&&L!==H&&(L!=null||H!=null)&&(C==="selected"?e.selected=L&&typeof L!="function"&&typeof L!="symbol":He(e,t,C,L,s,H));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var le in i)L=i[le],i.hasOwnProperty(le)&&L!=null&&!s.hasOwnProperty(le)&&He(e,t,le,null,s,L);for(U in s)if(L=s[U],H=i[U],s.hasOwnProperty(U)&&L!==H&&(L!=null||H!=null))switch(U){case"children":case"dangerouslySetInnerHTML":if(L!=null)throw Error(o(137,t));break;default:He(e,t,U,L,s,H)}return;default:if(Wo(t)){for(var qe in i)L=i[qe],i.hasOwnProperty(qe)&&L!==void 0&&!s.hasOwnProperty(qe)&&zc(e,t,qe,void 0,s,L);for($ in s)L=s[$],H=i[$],!s.hasOwnProperty($)||L===H||L===void 0&&H===void 0||zc(e,t,$,L,s,H);return}}for(var D in i)L=i[D],i.hasOwnProperty(D)&&L!=null&&!s.hasOwnProperty(D)&&He(e,t,D,null,s,L);for(Z in s)L=s[Z],H=i[Z],!s.hasOwnProperty(Z)||L===H||L==null&&H==null||He(e,t,Z,L,s,H)}function hp(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function h0(){if(typeof performance.getEntriesByType=="function"){for(var e=0,t=0,i=performance.getEntriesByType("resource"),s=0;s<i.length;s++){var l=i[s],h=l.transferSize,m=l.initiatorType,v=l.duration;if(h&&v&&hp(m)){for(m=0,v=l.responseEnd,s+=1;s<i.length;s++){var C=i[s],U=C.startTime;if(U>v)break;var $=C.transferSize,Z=C.initiatorType;$&&hp(Z)&&(C=C.responseEnd,m+=$*(C<v?1:(v-U)/(C-U)))}if(--s,t+=8*(h+m)/(l.duration/1e3),e++,10<e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var Oc=null,Dc=null;function ao(e){return e.nodeType===9?e:e.ownerDocument}function fp(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function pp(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function Bc(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Nc=null;function f0(){var e=window.event;return e&&e.type==="popstate"?e===Nc?!1:(Nc=e,!0):(Nc=null,!1)}var gp=typeof setTimeout=="function"?setTimeout:void 0,p0=typeof clearTimeout=="function"?clearTimeout:void 0,mp=typeof Promise=="function"?Promise:void 0,g0=typeof queueMicrotask=="function"?queueMicrotask:typeof mp<"u"?function(e){return mp.resolve(null).then(e).catch(m0)}:gp;function m0(e){setTimeout(function(){throw e})}function ci(e){return e==="head"}function yp(e,t){var i=t,s=0;do{var l=i.nextSibling;if(e.removeChild(i),l&&l.nodeType===8)if(i=l.data,i==="/$"||i==="/&"){if(s===0){e.removeChild(l),Ra(t);return}s--}else if(i==="$"||i==="$?"||i==="$~"||i==="$!"||i==="&")s++;else if(i==="html")Cr(e.ownerDocument.documentElement);else if(i==="head"){i=e.ownerDocument.head,Cr(i);for(var h=i.firstChild;h;){var m=h.nextSibling,v=h.nodeName;h[Wa]||v==="SCRIPT"||v==="STYLE"||v==="LINK"&&h.rel.toLowerCase()==="stylesheet"||i.removeChild(h),h=m}}else i==="body"&&Cr(e.ownerDocument.body);i=l}while(i);Ra(t)}function bp(e,t){var i=e;e=0;do{var s=i.nextSibling;if(i.nodeType===1?t?(i._stashedDisplay=i.style.display,i.style.display="none"):(i.style.display=i._stashedDisplay||"",i.getAttribute("style")===""&&i.removeAttribute("style")):i.nodeType===3&&(t?(i._stashedText=i.nodeValue,i.nodeValue=""):i.nodeValue=i._stashedText||""),s&&s.nodeType===8)if(i=s.data,i==="/$"){if(e===0)break;e--}else i!=="$"&&i!=="$?"&&i!=="$~"&&i!=="$!"||e++;i=s}while(i)}function Uc(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var i=t;switch(t=t.nextSibling,i.nodeName){case"HTML":case"HEAD":case"BODY":Uc(i),$o(i);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(i.rel.toLowerCase()==="stylesheet")continue}e.removeChild(i)}}function y0(e,t,i,s){for(;e.nodeType===1;){var l=i;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!s&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(s){if(!e[Wa])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(h=e.getAttribute("rel"),h==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(h!==l.rel||e.getAttribute("href")!==(l.href==null||l.href===""?null:l.href)||e.getAttribute("crossorigin")!==(l.crossOrigin==null?null:l.crossOrigin)||e.getAttribute("title")!==(l.title==null?null:l.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(h=e.getAttribute("src"),(h!==(l.src==null?null:l.src)||e.getAttribute("type")!==(l.type==null?null:l.type)||e.getAttribute("crossorigin")!==(l.crossOrigin==null?null:l.crossOrigin))&&h&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var h=l.name==null?null:""+l.name;if(l.type==="hidden"&&e.getAttribute("name")===h)return e}else return e;if(e=nn(e.nextSibling),e===null)break}return null}function b0(e,t,i){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!i||(e=nn(e.nextSibling),e===null))return null;return e}function xp(e,t){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!t||(e=nn(e.nextSibling),e===null))return null;return e}function Mc(e){return e.data==="$?"||e.data==="$~"}function Lc(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function x0(e,t){var i=e.ownerDocument;if(e.data==="$~")e._reactRetry=t;else if(e.data!=="$?"||i.readyState!=="loading")t();else{var s=function(){t(),i.removeEventListener("DOMContentLoaded",s)};i.addEventListener("DOMContentLoaded",s),e._reactRetry=s}}function nn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="$~"||t==="&"||t==="F!"||t==="F")break;if(t==="/$"||t==="/&")return null}}return e}var Hc=null;function vp(e){e=e.nextSibling;for(var t=0;e;){if(e.nodeType===8){var i=e.data;if(i==="/$"||i==="/&"){if(t===0)return nn(e.nextSibling);t--}else i!=="$"&&i!=="$!"&&i!=="$?"&&i!=="$~"&&i!=="&"||t++}e=e.nextSibling}return null}function wp(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var i=e.data;if(i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"){if(t===0)return e;t--}else i!=="/$"&&i!=="/&"||t++}e=e.previousSibling}return null}function Sp(e,t,i){switch(t=ao(i),e){case"html":if(e=t.documentElement,!e)throw Error(o(452));return e;case"head":if(e=t.head,!e)throw Error(o(453));return e;case"body":if(e=t.body,!e)throw Error(o(454));return e;default:throw Error(o(451))}}function Cr(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);$o(e)}var an=new Map,_p=new Set;function ro(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Ln=M.d;M.d={f:v0,r:w0,D:S0,C:_0,L:E0,m:R0,X:C0,S:j0,M:k0};function v0(){var e=Ln.f(),t=Js();return e||t}function w0(e){var t=Pi(e);t!==null&&t.tag===5&&t.type==="form"?Hh(t):Ln.r(e)}var Sa=typeof document>"u"?null:document;function Ep(e,t,i){var s=Sa;if(s&&typeof t=="string"&&t){var l=Kt(t);l='link[rel="'+e+'"][href="'+l+'"]',typeof i=="string"&&(l+='[crossorigin="'+i+'"]'),_p.has(l)||(_p.add(l),e={rel:e,crossOrigin:i,href:t},s.querySelector(l)===null&&(t=s.createElement("link"),xt(t,"link",e),ft(t),s.head.appendChild(t)))}}function S0(e){Ln.D(e),Ep("dns-prefetch",e,null)}function _0(e,t){Ln.C(e,t),Ep("preconnect",e,t)}function E0(e,t,i){Ln.L(e,t,i);var s=Sa;if(s&&e&&t){var l='link[rel="preload"][as="'+Kt(t)+'"]';t==="image"&&i&&i.imageSrcSet?(l+='[imagesrcset="'+Kt(i.imageSrcSet)+'"]',typeof i.imageSizes=="string"&&(l+='[imagesizes="'+Kt(i.imageSizes)+'"]')):l+='[href="'+Kt(e)+'"]';var h=l;switch(t){case"style":h=_a(e);break;case"script":h=Ea(e)}an.has(h)||(e=x({rel:"preload",href:t==="image"&&i&&i.imageSrcSet?void 0:e,as:t},i),an.set(h,e),s.querySelector(l)!==null||t==="style"&&s.querySelector(kr(h))||t==="script"&&s.querySelector(Tr(h))||(t=s.createElement("link"),xt(t,"link",e),ft(t),s.head.appendChild(t)))}}function R0(e,t){Ln.m(e,t);var i=Sa;if(i&&e){var s=t&&typeof t.as=="string"?t.as:"script",l='link[rel="modulepreload"][as="'+Kt(s)+'"][href="'+Kt(e)+'"]',h=l;switch(s){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":h=Ea(e)}if(!an.has(h)&&(e=x({rel:"modulepreload",href:e},t),an.set(h,e),i.querySelector(l)===null)){switch(s){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(i.querySelector(Tr(h)))return}s=i.createElement("link"),xt(s,"link",e),ft(s),i.head.appendChild(s)}}}function j0(e,t,i){Ln.S(e,t,i);var s=Sa;if(s&&e){var l=Wi(s).hoistableStyles,h=_a(e);t=t||"default";var m=l.get(h);if(!m){var v={loading:0,preload:null};if(m=s.querySelector(kr(h)))v.loading=5;else{e=x({rel:"stylesheet",href:e,"data-precedence":t},i),(i=an.get(h))&&qc(e,i);var C=m=s.createElement("link");ft(C),xt(C,"link",e),C._p=new Promise(function(U,$){C.onload=U,C.onerror=$}),C.addEventListener("load",function(){v.loading|=1}),C.addEventListener("error",function(){v.loading|=2}),v.loading|=4,so(m,t,s)}m={type:"stylesheet",instance:m,count:1,state:v},l.set(h,m)}}}function C0(e,t){Ln.X(e,t);var i=Sa;if(i&&e){var s=Wi(i).hoistableScripts,l=Ea(e),h=s.get(l);h||(h=i.querySelector(Tr(l)),h||(e=x({src:e,async:!0},t),(t=an.get(l))&&$c(e,t),h=i.createElement("script"),ft(h),xt(h,"link",e),i.head.appendChild(h)),h={type:"script",instance:h,count:1,state:null},s.set(l,h))}}function k0(e,t){Ln.M(e,t);var i=Sa;if(i&&e){var s=Wi(i).hoistableScripts,l=Ea(e),h=s.get(l);h||(h=i.querySelector(Tr(l)),h||(e=x({src:e,async:!0,type:"module"},t),(t=an.get(l))&&$c(e,t),h=i.createElement("script"),ft(h),xt(h,"link",e),i.head.appendChild(h)),h={type:"script",instance:h,count:1,state:null},s.set(l,h))}}function Rp(e,t,i,s){var l=(l=ge.current)?ro(l):null;if(!l)throw Error(o(446));switch(e){case"meta":case"title":return null;case"style":return typeof i.precedence=="string"&&typeof i.href=="string"?(t=_a(i.href),i=Wi(l).hoistableStyles,s=i.get(t),s||(s={type:"style",instance:null,count:0,state:null},i.set(t,s)),s):{type:"void",instance:null,count:0,state:null};case"link":if(i.rel==="stylesheet"&&typeof i.href=="string"&&typeof i.precedence=="string"){e=_a(i.href);var h=Wi(l).hoistableStyles,m=h.get(e);if(m||(l=l.ownerDocument||l,m={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},h.set(e,m),(h=l.querySelector(kr(e)))&&!h._p&&(m.instance=h,m.state.loading=5),an.has(e)||(i={rel:"preload",as:"style",href:i.href,crossOrigin:i.crossOrigin,integrity:i.integrity,media:i.media,hrefLang:i.hrefLang,referrerPolicy:i.referrerPolicy},an.set(e,i),h||T0(l,e,i,m.state))),t&&s===null)throw Error(o(528,""));return m}if(t&&s!==null)throw Error(o(529,""));return null;case"script":return t=i.async,i=i.src,typeof i=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=Ea(i),i=Wi(l).hoistableScripts,s=i.get(t),s||(s={type:"script",instance:null,count:0,state:null},i.set(t,s)),s):{type:"void",instance:null,count:0,state:null};default:throw Error(o(444,e))}}function _a(e){return'href="'+Kt(e)+'"'}function kr(e){return'link[rel="stylesheet"]['+e+"]"}function jp(e){return x({},e,{"data-precedence":e.precedence,precedence:null})}function T0(e,t,i,s){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?s.loading=1:(t=e.createElement("link"),s.preload=t,t.addEventListener("load",function(){return s.loading|=1}),t.addEventListener("error",function(){return s.loading|=2}),xt(t,"link",i),ft(t),e.head.appendChild(t))}function Ea(e){return'[src="'+Kt(e)+'"]'}function Tr(e){return"script[async]"+e}function Cp(e,t,i){if(t.count++,t.instance===null)switch(t.type){case"style":var s=e.querySelector('style[data-href~="'+Kt(i.href)+'"]');if(s)return t.instance=s,ft(s),s;var l=x({},i,{"data-href":i.href,"data-precedence":i.precedence,href:null,precedence:null});return s=(e.ownerDocument||e).createElement("style"),ft(s),xt(s,"style",l),so(s,i.precedence,e),t.instance=s;case"stylesheet":l=_a(i.href);var h=e.querySelector(kr(l));if(h)return t.state.loading|=4,t.instance=h,ft(h),h;s=jp(i),(l=an.get(l))&&qc(s,l),h=(e.ownerDocument||e).createElement("link"),ft(h);var m=h;return m._p=new Promise(function(v,C){m.onload=v,m.onerror=C}),xt(h,"link",s),t.state.loading|=4,so(h,i.precedence,e),t.instance=h;case"script":return h=Ea(i.src),(l=e.querySelector(Tr(h)))?(t.instance=l,ft(l),l):(s=i,(l=an.get(h))&&(s=x({},i),$c(s,l)),e=e.ownerDocument||e,l=e.createElement("script"),ft(l),xt(l,"link",s),e.head.appendChild(l),t.instance=l);case"void":return null;default:throw Error(o(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(s=t.instance,t.state.loading|=4,so(s,i.precedence,e));return t.instance}function so(e,t,i){for(var s=i.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),l=s.length?s[s.length-1]:null,h=l,m=0;m<s.length;m++){var v=s[m];if(v.dataset.precedence===t)h=v;else if(h!==l)break}h?h.parentNode.insertBefore(e,h.nextSibling):(t=i.nodeType===9?i.head:i,t.insertBefore(e,t.firstChild))}function qc(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function $c(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var oo=null;function kp(e,t,i){if(oo===null){var s=new Map,l=oo=new Map;l.set(i,s)}else l=oo,s=l.get(i),s||(s=new Map,l.set(i,s));if(s.has(e))return s;for(s.set(e,null),i=i.getElementsByTagName(e),l=0;l<i.length;l++){var h=i[l];if(!(h[Wa]||h[gt]||e==="link"&&h.getAttribute("rel")==="stylesheet")&&h.namespaceURI!=="http://www.w3.org/2000/svg"){var m=h.getAttribute(t)||"";m=e+m;var v=s.get(m);v?v.push(h):s.set(m,[h])}}return s}function Tp(e,t,i){e=e.ownerDocument||e,e.head.insertBefore(i,t==="title"?e.querySelector("head > title"):null)}function A0(e,t,i){if(i===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;return t.rel==="stylesheet"?(e=t.disabled,typeof t.precedence=="string"&&e==null):!0;case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function Ap(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function z0(e,t,i,s){if(i.type==="stylesheet"&&(typeof s.media!="string"||matchMedia(s.media).matches!==!1)&&(i.state.loading&4)===0){if(i.instance===null){var l=_a(s.href),h=t.querySelector(kr(l));if(h){t=h._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(e.count++,e=lo.bind(e),t.then(e,e)),i.state.loading|=4,i.instance=h,ft(h);return}h=t.ownerDocument||t,s=jp(s),(l=an.get(l))&&qc(s,l),h=h.createElement("link"),ft(h);var m=h;m._p=new Promise(function(v,C){m.onload=v,m.onerror=C}),xt(h,"link",s),i.instance=h}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(i,t),(t=i.state.preload)&&(i.state.loading&3)===0&&(e.count++,i=lo.bind(e),t.addEventListener("load",i),t.addEventListener("error",i))}}var Ic=0;function O0(e,t){return e.stylesheets&&e.count===0&&uo(e,e.stylesheets),0<e.count||0<e.imgCount?function(i){var s=setTimeout(function(){if(e.stylesheets&&uo(e,e.stylesheets),e.unsuspend){var h=e.unsuspend;e.unsuspend=null,h()}},6e4+t);0<e.imgBytes&&Ic===0&&(Ic=62500*h0());var l=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&uo(e,e.stylesheets),e.unsuspend)){var h=e.unsuspend;e.unsuspend=null,h()}},(e.imgBytes>Ic?50:800)+t);return e.unsuspend=i,function(){e.unsuspend=null,clearTimeout(s),clearTimeout(l)}}:null}function lo(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)uo(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var co=null;function uo(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,co=new Map,t.forEach(D0,e),co=null,lo.call(e))}function D0(e,t){if(!(t.state.loading&4)){var i=co.get(e);if(i)var s=i.get(null);else{i=new Map,co.set(e,i);for(var l=e.querySelectorAll("link[data-precedence],style[data-precedence]"),h=0;h<l.length;h++){var m=l[h];(m.nodeName==="LINK"||m.getAttribute("media")!=="not all")&&(i.set(m.dataset.precedence,m),s=m)}s&&i.set(null,s)}l=t.instance,m=l.getAttribute("data-precedence"),h=i.get(m)||s,h===s&&i.set(null,l),i.set(m,l),this.count++,s=lo.bind(this),l.addEventListener("load",s),l.addEventListener("error",s),h?h.parentNode.insertBefore(l,h.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(l,e.firstChild)),t.state.loading|=4}}var Ar={$$typeof:B,Provider:null,Consumer:null,_currentValue:Q,_currentValue2:Q,_threadCount:0};function B0(e,t,i,s,l,h,m,v,C){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Mo(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Mo(0),this.hiddenUpdates=Mo(null),this.identifierPrefix=s,this.onUncaughtError=l,this.onCaughtError=h,this.onRecoverableError=m,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=C,this.incompleteTransitions=new Map}function zp(e,t,i,s,l,h,m,v,C,U,$,Z){return e=new B0(e,t,i,m,C,U,$,Z,v),t=1,h===!0&&(t|=24),h=Mt(3,null,null,t),e.current=h,h.stateNode=e,t=wl(),t.refCount++,e.pooledCache=t,t.refCount++,h.memoizedState={element:s,isDehydrated:i,cache:t},Rl(h),e}function Op(e){return e?(e=ta,e):ta}function Dp(e,t,i,s,l,h){l=Op(l),s.context===null?s.context=l:s.pendingContext=l,s=Xn(t),s.payload={element:i},h=h===void 0?null:h,h!==null&&(s.callback=h),i=Fn(e,s,t),i!==null&&(zt(i,e,t),lr(i,e,t))}function Bp(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var i=e.retryLane;e.retryLane=i!==0&&i<t?i:t}}function Gc(e,t){Bp(e,t),(e=e.alternate)&&Bp(e,t)}function Np(e){if(e.tag===13||e.tag===31){var t=Si(e,67108864);t!==null&&zt(t,e,67108864),Gc(e,67108864)}}function Up(e){if(e.tag===13||e.tag===31){var t=It();t=Lo(t);var i=Si(e,t);i!==null&&zt(i,e,t),Gc(e,t)}}var ho=!0;function N0(e,t,i,s){var l=j.T;j.T=null;var h=M.p;try{M.p=2,Pc(e,t,i,s)}finally{M.p=h,j.T=l}}function U0(e,t,i,s){var l=j.T;j.T=null;var h=M.p;try{M.p=8,Pc(e,t,i,s)}finally{M.p=h,j.T=l}}function Pc(e,t,i,s){if(ho){var l=Wc(s);if(l===null)Ac(e,t,s,fo,i),Lp(e,s);else if(L0(l,e,t,i,s))s.stopPropagation();else if(Lp(e,s),t&4&&-1<M0.indexOf(e)){for(;l!==null;){var h=Pi(l);if(h!==null)switch(h.tag){case 3:if(h=h.stateNode,h.current.memoizedState.isDehydrated){var m=yi(h.pendingLanes);if(m!==0){var v=h;for(v.pendingLanes|=2,v.entangledLanes|=2;m;){var C=1<<31-Nt(m);v.entanglements[1]|=C,m&=~C}xn(h),(Be&6)===0&&(Ys=at()+500,Er(0))}}break;case 31:case 13:v=Si(h,2),v!==null&&zt(v,h,2),Js(),Gc(h,2)}if(h=Wc(s),h===null&&Ac(e,t,s,fo,i),h===l)break;l=h}l!==null&&s.stopPropagation()}else Ac(e,t,s,null,i)}}function Wc(e){return e=Vo(e),Zc(e)}var fo=null;function Zc(e){if(fo=null,e=Gi(e),e!==null){var t=d(e);if(t===null)e=null;else{var i=t.tag;if(i===13){if(e=f(t),e!==null)return e;e=null}else if(i===31){if(e=p(t),e!==null)return e;e=null}else if(i===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return fo=e,null}function Mp(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(es()){case $a:return 2;case Wu:return 8;case ts:case _m:return 32;case Zu:return 268435456;default:return 32}default:return 32}}var Vc=!1,ui=null,di=null,hi=null,zr=new Map,Or=new Map,fi=[],M0="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Lp(e,t){switch(e){case"focusin":case"focusout":ui=null;break;case"dragenter":case"dragleave":di=null;break;case"mouseover":case"mouseout":hi=null;break;case"pointerover":case"pointerout":zr.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Or.delete(t.pointerId)}}function Dr(e,t,i,s,l,h){return e===null||e.nativeEvent!==h?(e={blockedOn:t,domEventName:i,eventSystemFlags:s,nativeEvent:h,targetContainers:[l]},t!==null&&(t=Pi(t),t!==null&&Np(t)),e):(e.eventSystemFlags|=s,t=e.targetContainers,l!==null&&t.indexOf(l)===-1&&t.push(l),e)}function L0(e,t,i,s,l){switch(t){case"focusin":return ui=Dr(ui,e,t,i,s,l),!0;case"dragenter":return di=Dr(di,e,t,i,s,l),!0;case"mouseover":return hi=Dr(hi,e,t,i,s,l),!0;case"pointerover":var h=l.pointerId;return zr.set(h,Dr(zr.get(h)||null,e,t,i,s,l)),!0;case"gotpointercapture":return h=l.pointerId,Or.set(h,Dr(Or.get(h)||null,e,t,i,s,l)),!0}return!1}function Hp(e){var t=Gi(e.target);if(t!==null){var i=d(t);if(i!==null){if(t=i.tag,t===13){if(t=f(i),t!==null){e.blockedOn=t,Xu(e.priority,function(){Up(i)});return}}else if(t===31){if(t=p(i),t!==null){e.blockedOn=t,Xu(e.priority,function(){Up(i)});return}}else if(t===3&&i.stateNode.current.memoizedState.isDehydrated){e.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}e.blockedOn=null}function po(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var i=Wc(e.nativeEvent);if(i===null){i=e.nativeEvent;var s=new i.constructor(i.type,i);Zo=s,i.target.dispatchEvent(s),Zo=null}else return t=Pi(i),t!==null&&Np(t),e.blockedOn=i,!1;t.shift()}return!0}function qp(e,t,i){po(e)&&i.delete(t)}function H0(){Vc=!1,ui!==null&&po(ui)&&(ui=null),di!==null&&po(di)&&(di=null),hi!==null&&po(hi)&&(hi=null),zr.forEach(qp),Or.forEach(qp)}function go(e,t){e.blockedOn===t&&(e.blockedOn=null,Vc||(Vc=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,H0)))}var mo=null;function $p(e){mo!==e&&(mo=e,a.unstable_scheduleCallback(a.unstable_NormalPriority,function(){mo===e&&(mo=null);for(var t=0;t<e.length;t+=3){var i=e[t],s=e[t+1],l=e[t+2];if(typeof s!="function"){if(Zc(s||i)===null)continue;break}var h=Pi(i);h!==null&&(e.splice(t,3),t-=3,Wl(h,{pending:!0,data:l,method:i.method,action:s},s,l))}}))}function Ra(e){function t(C){return go(C,e)}ui!==null&&go(ui,e),di!==null&&go(di,e),hi!==null&&go(hi,e),zr.forEach(t),Or.forEach(t);for(var i=0;i<fi.length;i++){var s=fi[i];s.blockedOn===e&&(s.blockedOn=null)}for(;0<fi.length&&(i=fi[0],i.blockedOn===null);)Hp(i),i.blockedOn===null&&fi.shift();if(i=(e.ownerDocument||e).$$reactFormReplay,i!=null)for(s=0;s<i.length;s+=3){var l=i[s],h=i[s+1],m=l[Rt]||null;if(typeof h=="function")m||$p(i);else if(m){var v=null;if(h&&h.hasAttribute("formAction")){if(l=h,m=h[Rt]||null)v=m.formAction;else if(Zc(l)!==null)continue}else v=m.action;typeof v=="function"?i[s+1]=v:(i.splice(s,3),s-=3),$p(i)}}}function Ip(){function e(h){h.canIntercept&&h.info==="react-transition"&&h.intercept({handler:function(){return new Promise(function(m){return l=m})},focusReset:"manual",scroll:"manual"})}function t(){l!==null&&(l(),l=null),s||setTimeout(i,20)}function i(){if(!s&&!navigation.transition){var h=navigation.currentEntry;h&&h.url!=null&&navigation.navigate(h.url,{state:h.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var s=!1,l=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(i,100),function(){s=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),l!==null&&(l(),l=null)}}}function Yc(e){this._internalRoot=e}yo.prototype.render=Yc.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(o(409));var i=t.current,s=It();Dp(i,s,e,t,null,null)},yo.prototype.unmount=Yc.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Dp(e.current,2,null,e,null,null),Js(),t[Ii]=null}};function yo(e){this._internalRoot=e}yo.prototype.unstable_scheduleHydration=function(e){if(e){var t=Qu();e={blockedOn:null,target:e,priority:t};for(var i=0;i<fi.length&&t!==0&&t<fi[i].priority;i++);fi.splice(i,0,e),i===0&&Hp(e)}};var Gp=n.version;if(Gp!=="19.2.3")throw Error(o(527,Gp,"19.2.3"));M.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(o(188)):(e=Object.keys(e).join(","),Error(o(268,e)));return e=y(t),e=e!==null?b(e):null,e=e===null?null:e.stateNode,e};var q0={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:j,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var bo=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!bo.isDisabled&&bo.supportsFiber)try{Ia=bo.inject(q0),Bt=bo}catch{}}return Nr.createRoot=function(e,t){if(!u(e))throw Error(o(299));var i=!1,s="",l=Kh,h=Jh,m=Qh;return t!=null&&(t.unstable_strictMode===!0&&(i=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onUncaughtError!==void 0&&(l=t.onUncaughtError),t.onCaughtError!==void 0&&(h=t.onCaughtError),t.onRecoverableError!==void 0&&(m=t.onRecoverableError)),t=zp(e,1,!1,null,null,i,s,null,l,h,m,Ip),e[Ii]=t.current,Tc(e),new Yc(t)},Nr.hydrateRoot=function(e,t,i){if(!u(e))throw Error(o(299));var s=!1,l="",h=Kh,m=Jh,v=Qh,C=null;return i!=null&&(i.unstable_strictMode===!0&&(s=!0),i.identifierPrefix!==void 0&&(l=i.identifierPrefix),i.onUncaughtError!==void 0&&(h=i.onUncaughtError),i.onCaughtError!==void 0&&(m=i.onCaughtError),i.onRecoverableError!==void 0&&(v=i.onRecoverableError),i.formState!==void 0&&(C=i.formState)),t=zp(e,1,!0,t,i??null,s,l,C,h,m,v,Ip),t.context=Op(null),i=t.current,s=It(),s=Lo(s),l=Xn(s),l.callback=null,Fn(i,l,s),i=s,t.current.lanes=i,Pa(t,i),xn(t),e[Ii]=t.current,Tc(e),new yo(t)},Nr.version="19.2.3",Nr}var Fp;function J0(){if(Fp)return Qc.exports;Fp=1;function a(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(a)}catch(n){console.error(n)}}return a(),Qc.exports=K0(),Qc.exports}var Q0=J0();var eg="popstate";function X0(a={}){function n(o,u){let{pathname:d,search:f,hash:p}=o.location;return yu("",{pathname:d,search:f,hash:p},u.state&&u.state.usr||null,u.state&&u.state.key||"default")}function r(o,u){return typeof u=="string"?u:Gr(u)}return eb(n,r,null,a)}function Qe(a,n){if(a===!1||a===null||typeof a>"u")throw new Error(n)}function fn(a,n){if(!a){typeof console<"u"&&console.warn(n);try{throw new Error(n)}catch{}}}function F0(){return Math.random().toString(36).substring(2,10)}function tg(a,n){return{usr:a.state,key:a.key,idx:n}}function yu(a,n,r=null,o){return{pathname:typeof a=="string"?a:a.pathname,search:"",hash:"",...typeof n=="string"?Ha(n):n,state:r,key:n&&n.key||o||F0()}}function Gr({pathname:a="/",search:n="",hash:r=""}){return n&&n!=="?"&&(a+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(a+=r.charAt(0)==="#"?r:"#"+r),a}function Ha(a){let n={};if(a){let r=a.indexOf("#");r>=0&&(n.hash=a.substring(r),a=a.substring(0,r));let o=a.indexOf("?");o>=0&&(n.search=a.substring(o),a=a.substring(0,o)),a&&(n.pathname=a)}return n}function eb(a,n,r,o={}){let{window:u=document.defaultView,v5Compat:d=!1}=o,f=u.history,p="POP",g=null,y=b();y==null&&(y=0,f.replaceState({...f.state,idx:y},""));function b(){return(f.state||{idx:null}).idx}function x(){p="POP";let T=b(),O=T==null?null:T-y;y=T,g&&g({action:p,location:R.location,delta:O})}function S(T,O){p="PUSH";let z=yu(R.location,T,O);y=b()+1;let B=tg(z,y),Y=R.createHref(z);try{f.pushState(B,"",Y)}catch(J){if(J instanceof DOMException&&J.name==="DataCloneError")throw J;u.location.assign(Y)}d&&g&&g({action:p,location:R.location,delta:1})}function _(T,O){p="REPLACE";let z=yu(R.location,T,O);y=b();let B=tg(z,y),Y=R.createHref(z);f.replaceState(B,"",Y),d&&g&&g({action:p,location:R.location,delta:0})}function E(T){return tb(T)}let R={get action(){return p},get location(){return a(u,f)},listen(T){if(g)throw new Error("A history only accepts one active listener");return u.addEventListener(eg,x),g=T,()=>{u.removeEventListener(eg,x),g=null}},createHref(T){return n(u,T)},createURL:E,encodeLocation(T){let O=E(T);return{pathname:O.pathname,search:O.search,hash:O.hash}},push:S,replace:_,go(T){return f.go(T)}};return R}function tb(a,n=!1){let r="http://localhost";typeof window<"u"&&(r=window.location.origin!=="null"?window.location.origin:window.location.href),Qe(r,"No window.location.(origin|href) available to create URL");let o=typeof a=="string"?a:Gr(a);return o=o.replace(/ $/,"%20"),!n&&o.startsWith("//")&&(o=r+o),new URL(o,r)}function Dg(a,n,r="/"){return nb(a,n,r,!1)}function nb(a,n,r,o){let u=typeof n=="string"?Ha(n):n,d=$n(u.pathname||"/",r);if(d==null)return null;let f=Bg(a);ib(f);let p=null;for(let g=0;p==null&&g<f.length;++g){let y=pb(d);p=hb(f[g],y,o)}return p}function Bg(a,n=[],r=[],o="",u=!1){let d=(f,p,g=u,y)=>{let b={relativePath:y===void 0?f.path||"":y,caseSensitive:f.caseSensitive===!0,childrenIndex:p,route:f};if(b.relativePath.startsWith("/")){if(!b.relativePath.startsWith(o)&&g)return;Qe(b.relativePath.startsWith(o),`Absolute route path "${b.relativePath}" nested under path "${o}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),b.relativePath=b.relativePath.slice(o.length)}let x=qn([o,b.relativePath]),S=r.concat(b);f.children&&f.children.length>0&&(Qe(f.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${x}".`),Bg(f.children,n,S,x,g)),!(f.path==null&&!f.index)&&n.push({path:x,score:ub(x,f.index),routesMeta:S})};return a.forEach((f,p)=>{if(f.path===""||!f.path?.includes("?"))d(f,p);else for(let g of Ng(f.path))d(f,p,!0,g)}),n}function Ng(a){let n=a.split("/");if(n.length===0)return[];let[r,...o]=n,u=r.endsWith("?"),d=r.replace(/\?$/,"");if(o.length===0)return u?[d,""]:[d];let f=Ng(o.join("/")),p=[];return p.push(...f.map(g=>g===""?d:[d,g].join("/"))),u&&p.push(...f),p.map(g=>a.startsWith("/")&&g===""?"/":g)}function ib(a){a.sort((n,r)=>n.score!==r.score?r.score-n.score:db(n.routesMeta.map(o=>o.childrenIndex),r.routesMeta.map(o=>o.childrenIndex)))}var ab=/^:[\w-]+$/,rb=3,sb=2,ob=1,lb=10,cb=-2,ng=a=>a==="*";function ub(a,n){let r=a.split("/"),o=r.length;return r.some(ng)&&(o+=cb),n&&(o+=sb),r.filter(u=>!ng(u)).reduce((u,d)=>u+(ab.test(d)?rb:d===""?ob:lb),o)}function db(a,n){return a.length===n.length&&a.slice(0,-1).every((o,u)=>o===n[u])?a[a.length-1]-n[n.length-1]:0}function hb(a,n,r=!1){let{routesMeta:o}=a,u={},d="/",f=[];for(let p=0;p<o.length;++p){let g=o[p],y=p===o.length-1,b=d==="/"?n:n.slice(d.length)||"/",x=Co({path:g.relativePath,caseSensitive:g.caseSensitive,end:y},b),S=g.route;if(!x&&y&&r&&!o[o.length-1].route.index&&(x=Co({path:g.relativePath,caseSensitive:g.caseSensitive,end:!1},b)),!x)return null;Object.assign(u,x.params),f.push({params:u,pathname:qn([d,x.pathname]),pathnameBase:bb(qn([d,x.pathnameBase])),route:S}),x.pathnameBase!=="/"&&(d=qn([d,x.pathnameBase]))}return f}function Co(a,n){typeof a=="string"&&(a={path:a,caseSensitive:!1,end:!0});let[r,o]=fb(a.path,a.caseSensitive,a.end),u=n.match(r);if(!u)return null;let d=u[0],f=d.replace(/(.)\/+$/,"$1"),p=u.slice(1);return{params:o.reduce((y,{paramName:b,isOptional:x},S)=>{if(b==="*"){let E=p[S]||"";f=d.slice(0,d.length-E.length).replace(/(.)\/+$/,"$1")}const _=p[S];return x&&!_?y[b]=void 0:y[b]=(_||"").replace(/%2F/g,"/"),y},{}),pathname:d,pathnameBase:f,pattern:a}}function fb(a,n=!1,r=!0){fn(a==="*"||!a.endsWith("*")||a.endsWith("/*"),`Route path "${a}" will be treated as if it were "${a.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${a.replace(/\*$/,"/*")}".`);let o=[],u="^"+a.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(f,p,g)=>(o.push({paramName:p,isOptional:g!=null}),g?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return a.endsWith("*")?(o.push({paramName:"*"}),u+=a==="*"||a==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?u+="\\/*$":a!==""&&a!=="/"&&(u+="(?:(?=\\/|$))"),[new RegExp(u,n?void 0:"i"),o]}function pb(a){try{return a.split("/").map(n=>decodeURIComponent(n).replace(/\//g,"%2F")).join("/")}catch(n){return fn(!1,`The URL path "${a}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${n}).`),a}}function $n(a,n){if(n==="/")return a;if(!a.toLowerCase().startsWith(n.toLowerCase()))return null;let r=n.endsWith("/")?n.length-1:n.length,o=a.charAt(r);return o&&o!=="/"?null:a.slice(r)||"/"}var Ug=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,gb=a=>Ug.test(a);function mb(a,n="/"){let{pathname:r,search:o="",hash:u=""}=typeof a=="string"?Ha(a):a,d;if(r)if(gb(r))d=r;else{if(r.includes("//")){let f=r;r=r.replace(/\/\/+/g,"/"),fn(!1,`Pathnames cannot have embedded double slashes - normalizing ${f} -> ${r}`)}r.startsWith("/")?d=ig(r.substring(1),"/"):d=ig(r,n)}else d=n;return{pathname:d,search:xb(o),hash:vb(u)}}function ig(a,n){let r=n.replace(/\/+$/,"").split("/");return a.split("/").forEach(u=>{u===".."?r.length>1&&r.pop():u!=="."&&r.push(u)}),r.length>1?r.join("/"):"/"}function tu(a,n,r,o){return`Cannot include a '${a}' character in a manually specified \`to.${n}\` field [${JSON.stringify(o)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function yb(a){return a.filter((n,r)=>r===0||n.route.path&&n.route.path.length>0)}function Mg(a){let n=yb(a);return n.map((r,o)=>o===n.length-1?r.pathname:r.pathnameBase)}function Lg(a,n,r,o=!1){let u;typeof a=="string"?u=Ha(a):(u={...a},Qe(!u.pathname||!u.pathname.includes("?"),tu("?","pathname","search",u)),Qe(!u.pathname||!u.pathname.includes("#"),tu("#","pathname","hash",u)),Qe(!u.search||!u.search.includes("#"),tu("#","search","hash",u)));let d=a===""||u.pathname==="",f=d?"/":u.pathname,p;if(f==null)p=r;else{let x=n.length-1;if(!o&&f.startsWith("..")){let S=f.split("/");for(;S[0]==="..";)S.shift(),x-=1;u.pathname=S.join("/")}p=x>=0?n[x]:"/"}let g=mb(u,p),y=f&&f!=="/"&&f.endsWith("/"),b=(d||f===".")&&r.endsWith("/");return!g.pathname.endsWith("/")&&(y||b)&&(g.pathname+="/"),g}var qn=a=>a.join("/").replace(/\/\/+/g,"/"),bb=a=>a.replace(/\/+$/,"").replace(/^\/*/,"/"),xb=a=>!a||a==="?"?"":a.startsWith("?")?a:"?"+a,vb=a=>!a||a==="#"?"":a.startsWith("#")?a:"#"+a,wb=class{constructor(a,n,r,o=!1){this.status=a,this.statusText=n||"",this.internal=o,r instanceof Error?(this.data=r.toString(),this.error=r):this.data=r}};function Sb(a){return a!=null&&typeof a.status=="number"&&typeof a.statusText=="string"&&typeof a.internal=="boolean"&&"data"in a}function _b(a){return a.map(n=>n.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var Hg=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function qg(a,n){let r=a;if(typeof r!="string"||!Ug.test(r))return{absoluteURL:void 0,isExternal:!1,to:r};let o=r,u=!1;if(Hg)try{let d=new URL(window.location.href),f=r.startsWith("//")?new URL(d.protocol+r):new URL(r),p=$n(f.pathname,n);f.origin===d.origin&&p!=null?r=p+f.search+f.hash:u=!0}catch{fn(!1,`<Link to="${r}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:o,isExternal:u,to:r}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var $g=["POST","PUT","PATCH","DELETE"];new Set($g);var Eb=["GET",...$g];new Set(Eb);var qa=w.createContext(null);qa.displayName="DataRouter";var zo=w.createContext(null);zo.displayName="DataRouterState";var Rb=w.createContext(!1),Ig=w.createContext({isTransitioning:!1});Ig.displayName="ViewTransition";var jb=w.createContext(new Map);jb.displayName="Fetchers";var Cb=w.createContext(null);Cb.displayName="Await";var rn=w.createContext(null);rn.displayName="Navigation";var Jr=w.createContext(null);Jr.displayName="Location";var vn=w.createContext({outlet:null,matches:[],isDataRoute:!1});vn.displayName="Route";var zu=w.createContext(null);zu.displayName="RouteError";var Gg="REACT_ROUTER_ERROR",kb="REDIRECT",Tb="ROUTE_ERROR_RESPONSE";function Ab(a){if(a.startsWith(`${Gg}:${kb}:{`))try{let n=JSON.parse(a.slice(28));if(typeof n=="object"&&n&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.location=="string"&&typeof n.reloadDocument=="boolean"&&typeof n.replace=="boolean")return n}catch{}}function zb(a){if(a.startsWith(`${Gg}:${Tb}:{`))try{let n=JSON.parse(a.slice(40));if(typeof n=="object"&&n&&typeof n.status=="number"&&typeof n.statusText=="string")return new wb(n.status,n.statusText,n.data)}catch{}}function Ob(a,{relative:n}={}){Qe(Qr(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:o}=w.useContext(rn),{hash:u,pathname:d,search:f}=Xr(a,{relative:n}),p=d;return r!=="/"&&(p=d==="/"?r:qn([r,d])),o.createHref({pathname:p,search:f,hash:u})}function Qr(){return w.useContext(Jr)!=null}function $i(){return Qe(Qr(),"useLocation() may be used only in the context of a <Router> component."),w.useContext(Jr).location}var Pg="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Wg(a){w.useContext(rn).static||w.useLayoutEffect(a)}function We(){let{isDataRoute:a}=w.useContext(vn);return a?Wb():Db()}function Db(){Qe(Qr(),"useNavigate() may be used only in the context of a <Router> component.");let a=w.useContext(qa),{basename:n,navigator:r}=w.useContext(rn),{matches:o}=w.useContext(vn),{pathname:u}=$i(),d=JSON.stringify(Mg(o)),f=w.useRef(!1);return Wg(()=>{f.current=!0}),w.useCallback((g,y={})=>{if(fn(f.current,Pg),!f.current)return;if(typeof g=="number"){r.go(g);return}let b=Lg(g,JSON.parse(d),u,y.relative==="path");a==null&&n!=="/"&&(b.pathname=b.pathname==="/"?n:qn([n,b.pathname])),(y.replace?r.replace:r.push)(b,y.state,y)},[n,r,d,u,a])}w.createContext(null);function Ou(){let{matches:a}=w.useContext(vn),n=a[a.length-1];return n?n.params:{}}function Xr(a,{relative:n}={}){let{matches:r}=w.useContext(vn),{pathname:o}=$i(),u=JSON.stringify(Mg(r));return w.useMemo(()=>Lg(a,JSON.parse(u),o,n==="path"),[a,u,o,n])}function Bb(a,n){return Zg(a,n)}function Zg(a,n,r,o,u){Qe(Qr(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:d}=w.useContext(rn),{matches:f}=w.useContext(vn),p=f[f.length-1],g=p?p.params:{},y=p?p.pathname:"/",b=p?p.pathnameBase:"/",x=p&&p.route;{let z=x&&x.path||"";Yg(y,!x||z.endsWith("*")||z.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${y}" (under <Route path="${z}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${z}"> to <Route path="${z==="/"?"*":`${z}/*`}">.`)}let S=$i(),_;if(n){let z=typeof n=="string"?Ha(n):n;Qe(b==="/"||z.pathname?.startsWith(b),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${b}" but pathname "${z.pathname}" was given in the \`location\` prop.`),_=z}else _=S;let E=_.pathname||"/",R=E;if(b!=="/"){let z=b.replace(/^\//,"").split("/");R="/"+E.replace(/^\//,"").split("/").slice(z.length).join("/")}let T=Dg(a,{pathname:R});fn(x||T!=null,`No routes matched location "${_.pathname}${_.search}${_.hash}" `),fn(T==null||T[T.length-1].route.element!==void 0||T[T.length-1].route.Component!==void 0||T[T.length-1].route.lazy!==void 0,`Matched leaf route at location "${_.pathname}${_.search}${_.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let O=Hb(T&&T.map(z=>Object.assign({},z,{params:Object.assign({},g,z.params),pathname:qn([b,d.encodeLocation?d.encodeLocation(z.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:z.pathname]),pathnameBase:z.pathnameBase==="/"?b:qn([b,d.encodeLocation?d.encodeLocation(z.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:z.pathnameBase])})),f,r,o,u);return n&&O?w.createElement(Jr.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",..._},navigationType:"POP"}},O):O}function Nb(){let a=Pb(),n=Sb(a)?`${a.status} ${a.statusText}`:a instanceof Error?a.message:JSON.stringify(a),r=a instanceof Error?a.stack:null,o="rgba(200,200,200, 0.5)",u={padding:"0.5rem",backgroundColor:o},d={padding:"2px 4px",backgroundColor:o},f=null;return console.error("Error handled by React Router default ErrorBoundary:",a),f=w.createElement(w.Fragment,null,w.createElement("p",null," Hey developer "),w.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",w.createElement("code",{style:d},"ErrorBoundary")," or"," ",w.createElement("code",{style:d},"errorElement")," prop on your route.")),w.createElement(w.Fragment,null,w.createElement("h2",null,"Unexpected Application Error!"),w.createElement("h3",{style:{fontStyle:"italic"}},n),r?w.createElement("pre",{style:u},r):null,f)}var Ub=w.createElement(Nb,null),Vg=class extends w.Component{constructor(a){super(a),this.state={location:a.location,revalidation:a.revalidation,error:a.error}}static getDerivedStateFromError(a){return{error:a}}static getDerivedStateFromProps(a,n){return n.location!==a.location||n.revalidation!=="idle"&&a.revalidation==="idle"?{error:a.error,location:a.location,revalidation:a.revalidation}:{error:a.error!==void 0?a.error:n.error,location:n.location,revalidation:a.revalidation||n.revalidation}}componentDidCatch(a,n){this.props.onError?this.props.onError(a,n):console.error("React Router caught the following error during render",a)}render(){let a=this.state.error;if(this.context&&typeof a=="object"&&a&&"digest"in a&&typeof a.digest=="string"){const r=zb(a.digest);r&&(a=r)}let n=a!==void 0?w.createElement(vn.Provider,{value:this.props.routeContext},w.createElement(zu.Provider,{value:a,children:this.props.component})):this.props.children;return this.context?w.createElement(Mb,{error:a},n):n}};Vg.contextType=Rb;var nu=new WeakMap;function Mb({children:a,error:n}){let{basename:r}=w.useContext(rn);if(typeof n=="object"&&n&&"digest"in n&&typeof n.digest=="string"){let o=Ab(n.digest);if(o){let u=nu.get(n);if(u)throw u;let d=qg(o.location,r);if(Hg&&!nu.get(n))if(d.isExternal||o.reloadDocument)window.location.href=d.absoluteURL||d.to;else{const f=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(d.to,{replace:o.replace}));throw nu.set(n,f),f}return w.createElement("meta",{httpEquiv:"refresh",content:`0;url=${d.absoluteURL||d.to}`})}}return a}function Lb({routeContext:a,match:n,children:r}){let o=w.useContext(qa);return o&&o.static&&o.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=n.route.id),w.createElement(vn.Provider,{value:a},r)}function Hb(a,n=[],r=null,o=null,u=null){if(a==null){if(!r)return null;if(r.errors)a=r.matches;else if(n.length===0&&!r.initialized&&r.matches.length>0)a=r.matches;else return null}let d=a,f=r?.errors;if(f!=null){let b=d.findIndex(x=>x.route.id&&f?.[x.route.id]!==void 0);Qe(b>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(f).join(",")}`),d=d.slice(0,Math.min(d.length,b+1))}let p=!1,g=-1;if(r)for(let b=0;b<d.length;b++){let x=d[b];if((x.route.HydrateFallback||x.route.hydrateFallbackElement)&&(g=b),x.route.id){let{loaderData:S,errors:_}=r,E=x.route.loader&&!S.hasOwnProperty(x.route.id)&&(!_||_[x.route.id]===void 0);if(x.route.lazy||E){p=!0,g>=0?d=d.slice(0,g+1):d=[d[0]];break}}}let y=r&&o?(b,x)=>{o(b,{location:r.location,params:r.matches?.[0]?.params??{},unstable_pattern:_b(r.matches),errorInfo:x})}:void 0;return d.reduceRight((b,x,S)=>{let _,E=!1,R=null,T=null;r&&(_=f&&x.route.id?f[x.route.id]:void 0,R=x.route.errorElement||Ub,p&&(g<0&&S===0?(Yg("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),E=!0,T=null):g===S&&(E=!0,T=x.route.hydrateFallbackElement||null)));let O=n.concat(d.slice(0,S+1)),z=()=>{let B;return _?B=R:E?B=T:x.route.Component?B=w.createElement(x.route.Component,null):x.route.element?B=x.route.element:B=b,w.createElement(Lb,{match:x,routeContext:{outlet:b,matches:O,isDataRoute:r!=null},children:B})};return r&&(x.route.ErrorBoundary||x.route.errorElement||S===0)?w.createElement(Vg,{location:r.location,revalidation:r.revalidation,component:R,error:_,children:z(),routeContext:{outlet:null,matches:O,isDataRoute:!0},onError:y}):z()},null)}function Du(a){return`${a} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function qb(a){let n=w.useContext(qa);return Qe(n,Du(a)),n}function $b(a){let n=w.useContext(zo);return Qe(n,Du(a)),n}function Ib(a){let n=w.useContext(vn);return Qe(n,Du(a)),n}function Bu(a){let n=Ib(a),r=n.matches[n.matches.length-1];return Qe(r.route.id,`${a} can only be used on routes that contain a unique "id"`),r.route.id}function Gb(){return Bu("useRouteId")}function Pb(){let a=w.useContext(zu),n=$b("useRouteError"),r=Bu("useRouteError");return a!==void 0?a:n.errors?.[r]}function Wb(){let{router:a}=qb("useNavigate"),n=Bu("useNavigate"),r=w.useRef(!1);return Wg(()=>{r.current=!0}),w.useCallback(async(u,d={})=>{fn(r.current,Pg),r.current&&(typeof u=="number"?await a.navigate(u):await a.navigate(u,{fromRouteId:n,...d}))},[a,n])}var ag={};function Yg(a,n,r){!n&&!ag[a]&&(ag[a]=!0,fn(!1,r))}w.memo(Zb);function Zb({routes:a,future:n,state:r,onError:o}){return Zg(a,void 0,r,o,n)}function Ge(a){Qe(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Vb({basename:a="/",children:n=null,location:r,navigationType:o="POP",navigator:u,static:d=!1,unstable_useTransitions:f}){Qe(!Qr(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let p=a.replace(/^\/*/,"/"),g=w.useMemo(()=>({basename:p,navigator:u,static:d,unstable_useTransitions:f,future:{}}),[p,u,d,f]);typeof r=="string"&&(r=Ha(r));let{pathname:y="/",search:b="",hash:x="",state:S=null,key:_="default"}=r,E=w.useMemo(()=>{let R=$n(y,p);return R==null?null:{location:{pathname:R,search:b,hash:x,state:S,key:_},navigationType:o}},[p,y,b,x,S,_,o]);return fn(E!=null,`<Router basename="${p}"> is not able to match the URL "${y}${b}${x}" because it does not start with the basename, so the <Router> won't render anything.`),E==null?null:w.createElement(rn.Provider,{value:g},w.createElement(Jr.Provider,{children:n,value:E}))}function Yb({children:a,location:n}){return Bb(bu(a),n)}function bu(a,n=[]){let r=[];return w.Children.forEach(a,(o,u)=>{if(!w.isValidElement(o))return;let d=[...n,u];if(o.type===w.Fragment){r.push.apply(r,bu(o.props.children,d));return}Qe(o.type===Ge,`[${typeof o.type=="string"?o.type:o.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Qe(!o.props.index||!o.props.children,"An index route cannot have child routes.");let f={id:o.props.id||d.join("-"),caseSensitive:o.props.caseSensitive,element:o.props.element,Component:o.props.Component,index:o.props.index,path:o.props.path,middleware:o.props.middleware,loader:o.props.loader,action:o.props.action,hydrateFallbackElement:o.props.hydrateFallbackElement,HydrateFallback:o.props.HydrateFallback,errorElement:o.props.errorElement,ErrorBoundary:o.props.ErrorBoundary,hasErrorBoundary:o.props.hasErrorBoundary===!0||o.props.ErrorBoundary!=null||o.props.errorElement!=null,shouldRevalidate:o.props.shouldRevalidate,handle:o.props.handle,lazy:o.props.lazy};o.props.children&&(f.children=bu(o.props.children,d)),r.push(f)}),r}var Ro="get",jo="application/x-www-form-urlencoded";function Oo(a){return typeof HTMLElement<"u"&&a instanceof HTMLElement}function Kb(a){return Oo(a)&&a.tagName.toLowerCase()==="button"}function Jb(a){return Oo(a)&&a.tagName.toLowerCase()==="form"}function Qb(a){return Oo(a)&&a.tagName.toLowerCase()==="input"}function Xb(a){return!!(a.metaKey||a.altKey||a.ctrlKey||a.shiftKey)}function Fb(a,n){return a.button===0&&(!n||n==="_self")&&!Xb(a)}var xo=null;function ex(){if(xo===null)try{new FormData(document.createElement("form"),0),xo=!1}catch{xo=!0}return xo}var tx=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function iu(a){return a!=null&&!tx.has(a)?(fn(!1,`"${a}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${jo}"`),null):a}function nx(a,n){let r,o,u,d,f;if(Jb(a)){let p=a.getAttribute("action");o=p?$n(p,n):null,r=a.getAttribute("method")||Ro,u=iu(a.getAttribute("enctype"))||jo,d=new FormData(a)}else if(Kb(a)||Qb(a)&&(a.type==="submit"||a.type==="image")){let p=a.form;if(p==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let g=a.getAttribute("formaction")||p.getAttribute("action");if(o=g?$n(g,n):null,r=a.getAttribute("formmethod")||p.getAttribute("method")||Ro,u=iu(a.getAttribute("formenctype"))||iu(p.getAttribute("enctype"))||jo,d=new FormData(p,a),!ex()){let{name:y,type:b,value:x}=a;if(b==="image"){let S=y?`${y}.`:"";d.append(`${S}x`,"0"),d.append(`${S}y`,"0")}else y&&d.append(y,x)}}else{if(Oo(a))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=Ro,o=null,u=jo,f=a}return d&&u==="text/plain"&&(f=d,d=void 0),{action:o,method:r.toLowerCase(),encType:u,formData:d,body:f}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Nu(a,n){if(a===!1||a===null||typeof a>"u")throw new Error(n)}function ix(a,n,r,o){let u=typeof a=="string"?new URL(a,typeof window>"u"?"server://singlefetch/":window.location.origin):a;return r?u.pathname.endsWith("/")?u.pathname=`${u.pathname}_.${o}`:u.pathname=`${u.pathname}.${o}`:u.pathname==="/"?u.pathname=`_root.${o}`:n&&$n(u.pathname,n)==="/"?u.pathname=`${n.replace(/\/$/,"")}/_root.${o}`:u.pathname=`${u.pathname.replace(/\/$/,"")}.${o}`,u}async function ax(a,n){if(a.id in n)return n[a.id];try{let r=await import(a.module);return n[a.id]=r,r}catch(r){return console.error(`Error loading route module \`${a.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function rx(a){return a==null?!1:a.href==null?a.rel==="preload"&&typeof a.imageSrcSet=="string"&&typeof a.imageSizes=="string":typeof a.rel=="string"&&typeof a.href=="string"}async function sx(a,n,r){let o=await Promise.all(a.map(async u=>{let d=n.routes[u.route.id];if(d){let f=await ax(d,r);return f.links?f.links():[]}return[]}));return ux(o.flat(1).filter(rx).filter(u=>u.rel==="stylesheet"||u.rel==="preload").map(u=>u.rel==="stylesheet"?{...u,rel:"prefetch",as:"style"}:{...u,rel:"prefetch"}))}function rg(a,n,r,o,u,d){let f=(g,y)=>r[y]?g.route.id!==r[y].route.id:!0,p=(g,y)=>r[y].pathname!==g.pathname||r[y].route.path?.endsWith("*")&&r[y].params["*"]!==g.params["*"];return d==="assets"?n.filter((g,y)=>f(g,y)||p(g,y)):d==="data"?n.filter((g,y)=>{let b=o.routes[g.route.id];if(!b||!b.hasLoader)return!1;if(f(g,y)||p(g,y))return!0;if(g.route.shouldRevalidate){let x=g.route.shouldRevalidate({currentUrl:new URL(u.pathname+u.search+u.hash,window.origin),currentParams:r[0]?.params||{},nextUrl:new URL(a,window.origin),nextParams:g.params,defaultShouldRevalidate:!0});if(typeof x=="boolean")return x}return!0}):[]}function ox(a,n,{includeHydrateFallback:r}={}){return lx(a.map(o=>{let u=n.routes[o.route.id];if(!u)return[];let d=[u.module];return u.clientActionModule&&(d=d.concat(u.clientActionModule)),u.clientLoaderModule&&(d=d.concat(u.clientLoaderModule)),r&&u.hydrateFallbackModule&&(d=d.concat(u.hydrateFallbackModule)),u.imports&&(d=d.concat(u.imports)),d}).flat(1))}function lx(a){return[...new Set(a)]}function cx(a){let n={},r=Object.keys(a).sort();for(let o of r)n[o]=a[o];return n}function ux(a,n){let r=new Set;return new Set(n),a.reduce((o,u)=>{let d=JSON.stringify(cx(u));return r.has(d)||(r.add(d),o.push({key:d,link:u})),o},[])}function Kg(){let a=w.useContext(qa);return Nu(a,"You must render this element inside a <DataRouterContext.Provider> element"),a}function dx(){let a=w.useContext(zo);return Nu(a,"You must render this element inside a <DataRouterStateContext.Provider> element"),a}var Uu=w.createContext(void 0);Uu.displayName="FrameworkContext";function Jg(){let a=w.useContext(Uu);return Nu(a,"You must render this element inside a <HydratedRouter> element"),a}function hx(a,n){let r=w.useContext(Uu),[o,u]=w.useState(!1),[d,f]=w.useState(!1),{onFocus:p,onBlur:g,onMouseEnter:y,onMouseLeave:b,onTouchStart:x}=n,S=w.useRef(null);w.useEffect(()=>{if(a==="render"&&f(!0),a==="viewport"){let R=O=>{O.forEach(z=>{f(z.isIntersecting)})},T=new IntersectionObserver(R,{threshold:.5});return S.current&&T.observe(S.current),()=>{T.disconnect()}}},[a]),w.useEffect(()=>{if(o){let R=setTimeout(()=>{f(!0)},100);return()=>{clearTimeout(R)}}},[o]);let _=()=>{u(!0)},E=()=>{u(!1),f(!1)};return r?a!=="intent"?[d,S,{}]:[d,S,{onFocus:Ur(p,_),onBlur:Ur(g,E),onMouseEnter:Ur(y,_),onMouseLeave:Ur(b,E),onTouchStart:Ur(x,_)}]:[!1,S,{}]}function Ur(a,n){return r=>{a&&a(r),r.defaultPrevented||n(r)}}function fx({page:a,...n}){let{router:r}=Kg(),o=w.useMemo(()=>Dg(r.routes,a,r.basename),[r.routes,a,r.basename]);return o?w.createElement(gx,{page:a,matches:o,...n}):null}function px(a){let{manifest:n,routeModules:r}=Jg(),[o,u]=w.useState([]);return w.useEffect(()=>{let d=!1;return sx(a,n,r).then(f=>{d||u(f)}),()=>{d=!0}},[a,n,r]),o}function gx({page:a,matches:n,...r}){let o=$i(),{future:u,manifest:d,routeModules:f}=Jg(),{basename:p}=Kg(),{loaderData:g,matches:y}=dx(),b=w.useMemo(()=>rg(a,n,y,d,o,"data"),[a,n,y,d,o]),x=w.useMemo(()=>rg(a,n,y,d,o,"assets"),[a,n,y,d,o]),S=w.useMemo(()=>{if(a===o.pathname+o.search+o.hash)return[];let R=new Set,T=!1;if(n.forEach(z=>{let B=d.routes[z.route.id];!B||!B.hasLoader||(!b.some(Y=>Y.route.id===z.route.id)&&z.route.id in g&&f[z.route.id]?.shouldRevalidate||B.hasClientLoader?T=!0:R.add(z.route.id))}),R.size===0)return[];let O=ix(a,p,u.unstable_trailingSlashAwareDataRequests,"data");return T&&R.size>0&&O.searchParams.set("_routes",n.filter(z=>R.has(z.route.id)).map(z=>z.route.id).join(",")),[O.pathname+O.search]},[p,u.unstable_trailingSlashAwareDataRequests,g,o,d,b,n,a,f]),_=w.useMemo(()=>ox(x,d),[x,d]),E=px(x);return w.createElement(w.Fragment,null,S.map(R=>w.createElement("link",{key:R,rel:"prefetch",as:"fetch",href:R,...r})),_.map(R=>w.createElement("link",{key:R,rel:"modulepreload",href:R,...r})),E.map(({key:R,link:T})=>w.createElement("link",{key:R,nonce:r.nonce,...T})))}function mx(...a){return n=>{a.forEach(r=>{typeof r=="function"?r(n):r!=null&&(r.current=n)})}}var yx=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{yx&&(window.__reactRouterVersion="7.12.0")}catch{}function bx({basename:a,children:n,unstable_useTransitions:r,window:o}){let u=w.useRef();u.current==null&&(u.current=X0({window:o,v5Compat:!0}));let d=u.current,[f,p]=w.useState({action:d.action,location:d.location}),g=w.useCallback(y=>{r===!1?p(y):w.startTransition(()=>p(y))},[r]);return w.useLayoutEffect(()=>d.listen(g),[d,g]),w.createElement(Vb,{basename:a,children:n,location:f.location,navigationType:f.action,navigator:d,unstable_useTransitions:r})}var Qg=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Xg=w.forwardRef(function({onClick:n,discover:r="render",prefetch:o="none",relative:u,reloadDocument:d,replace:f,state:p,target:g,to:y,preventScrollReset:b,viewTransition:x,unstable_defaultShouldRevalidate:S,..._},E){let{basename:R,unstable_useTransitions:T}=w.useContext(rn),O=typeof y=="string"&&Qg.test(y),z=qg(y,R);y=z.to;let B=Ob(y,{relative:u}),[Y,J,G]=hx(o,_),K=Sx(y,{replace:f,state:p,target:g,preventScrollReset:b,relative:u,viewTransition:x,unstable_defaultShouldRevalidate:S,unstable_useTransitions:T});function P(ve){n&&n(ve),ve.defaultPrevented||K(ve)}let F=w.createElement("a",{..._,...G,href:z.absoluteURL||B,onClick:z.isExternal||d?n:P,ref:mx(E,J),target:g,"data-discover":!O&&r==="render"?"true":void 0});return Y&&!O?w.createElement(w.Fragment,null,F,w.createElement(fx,{page:B})):F});Xg.displayName="Link";var xx=w.forwardRef(function({"aria-current":n="page",caseSensitive:r=!1,className:o="",end:u=!1,style:d,to:f,viewTransition:p,children:g,...y},b){let x=Xr(f,{relative:y.relative}),S=$i(),_=w.useContext(zo),{navigator:E,basename:R}=w.useContext(rn),T=_!=null&&Cx(x)&&p===!0,O=E.encodeLocation?E.encodeLocation(x).pathname:x.pathname,z=S.pathname,B=_&&_.navigation&&_.navigation.location?_.navigation.location.pathname:null;r||(z=z.toLowerCase(),B=B?B.toLowerCase():null,O=O.toLowerCase()),B&&R&&(B=$n(B,R)||B);const Y=O!=="/"&&O.endsWith("/")?O.length-1:O.length;let J=z===O||!u&&z.startsWith(O)&&z.charAt(Y)==="/",G=B!=null&&(B===O||!u&&B.startsWith(O)&&B.charAt(O.length)==="/"),K={isActive:J,isPending:G,isTransitioning:T},P=J?n:void 0,F;typeof o=="function"?F=o(K):F=[o,J?"active":null,G?"pending":null,T?"transitioning":null].filter(Boolean).join(" ");let ve=typeof d=="function"?d(K):d;return w.createElement(Xg,{...y,"aria-current":P,className:F,ref:b,style:ve,to:f,viewTransition:p},typeof g=="function"?g(K):g)});xx.displayName="NavLink";var vx=w.forwardRef(({discover:a="render",fetcherKey:n,navigate:r,reloadDocument:o,replace:u,state:d,method:f=Ro,action:p,onSubmit:g,relative:y,preventScrollReset:b,viewTransition:x,unstable_defaultShouldRevalidate:S,..._},E)=>{let{unstable_useTransitions:R}=w.useContext(rn),T=Rx(),O=jx(p,{relative:y}),z=f.toLowerCase()==="get"?"get":"post",B=typeof p=="string"&&Qg.test(p),Y=J=>{if(g&&g(J),J.defaultPrevented)return;J.preventDefault();let G=J.nativeEvent.submitter,K=G?.getAttribute("formmethod")||f,P=()=>T(G||J.currentTarget,{fetcherKey:n,method:K,navigate:r,replace:u,state:d,relative:y,preventScrollReset:b,viewTransition:x,unstable_defaultShouldRevalidate:S});R&&r!==!1?w.startTransition(()=>P()):P()};return w.createElement("form",{ref:E,method:z,action:O,onSubmit:o?g:Y,..._,"data-discover":!B&&a==="render"?"true":void 0})});vx.displayName="Form";function wx(a){return`${a} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Fg(a){let n=w.useContext(qa);return Qe(n,wx(a)),n}function Sx(a,{target:n,replace:r,state:o,preventScrollReset:u,relative:d,viewTransition:f,unstable_defaultShouldRevalidate:p,unstable_useTransitions:g}={}){let y=We(),b=$i(),x=Xr(a,{relative:d});return w.useCallback(S=>{if(Fb(S,n)){S.preventDefault();let _=r!==void 0?r:Gr(b)===Gr(x),E=()=>y(a,{replace:_,state:o,preventScrollReset:u,relative:d,viewTransition:f,unstable_defaultShouldRevalidate:p});g?w.startTransition(()=>E()):E()}},[b,y,x,r,o,n,a,u,d,f,p,g])}var _x=0,Ex=()=>`__${String(++_x)}__`;function Rx(){let{router:a}=Fg("useSubmit"),{basename:n}=w.useContext(rn),r=Gb(),o=a.fetch,u=a.navigate;return w.useCallback(async(d,f={})=>{let{action:p,method:g,encType:y,formData:b,body:x}=nx(d,n);if(f.navigate===!1){let S=f.fetcherKey||Ex();await o(S,r,f.action||p,{unstable_defaultShouldRevalidate:f.unstable_defaultShouldRevalidate,preventScrollReset:f.preventScrollReset,formData:b,body:x,formMethod:f.method||g,formEncType:f.encType||y,flushSync:f.flushSync})}else await u(f.action||p,{unstable_defaultShouldRevalidate:f.unstable_defaultShouldRevalidate,preventScrollReset:f.preventScrollReset,formData:b,body:x,formMethod:f.method||g,formEncType:f.encType||y,replace:f.replace,state:f.state,fromRouteId:r,flushSync:f.flushSync,viewTransition:f.viewTransition})},[o,u,n,r])}function jx(a,{relative:n}={}){let{basename:r}=w.useContext(rn),o=w.useContext(vn);Qe(o,"useFormAction must be used inside a RouteContext");let[u]=o.matches.slice(-1),d={...Xr(a||".",{relative:n})},f=$i();if(a==null){d.search=f.search;let p=new URLSearchParams(d.search),g=p.getAll("index");if(g.some(b=>b==="")){p.delete("index"),g.filter(x=>x).forEach(x=>p.append("index",x));let b=p.toString();d.search=b?`?${b}`:""}}return(!a||a===".")&&u.route.index&&(d.search=d.search?d.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(d.pathname=d.pathname==="/"?r:qn([r,d.pathname])),Gr(d)}function Cx(a,{relative:n}={}){let r=w.useContext(Ig);Qe(r!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:o}=Fg("useViewTransitionState"),u=Xr(a,{relative:n});if(!r.isTransitioning)return!1;let d=$n(r.currentLocation.pathname,o)||r.currentLocation.pathname,f=$n(r.nextLocation.pathname,o)||r.nextLocation.pathname;return Co(u.pathname,f)!=null||Co(u.pathname,d)!=null}function Do(a,n){var r={};for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&n.indexOf(o)<0&&(r[o]=a[o]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var u=0,o=Object.getOwnPropertySymbols(a);u<o.length;u++)n.indexOf(o[u])<0&&Object.prototype.propertyIsEnumerable.call(a,o[u])&&(r[o[u]]=a[o[u]]);return r}function kx(a,n,r,o){function u(d){return d instanceof r?d:new r(function(f){f(d)})}return new(r||(r=Promise))(function(d,f){function p(b){try{y(o.next(b))}catch(x){f(x)}}function g(b){try{y(o.throw(b))}catch(x){f(x)}}function y(b){b.done?d(b.value):u(b.value).then(p,g)}y((o=o.apply(a,n||[])).next())})}const Tx=a=>a?(...n)=>a(...n):(...n)=>fetch(...n);class Mu extends Error{constructor(n,r="FunctionsError",o){super(n),this.name=r,this.context=o}}class Ax extends Mu{constructor(n){super("Failed to send a request to the Edge Function","FunctionsFetchError",n)}}class sg extends Mu{constructor(n){super("Relay Error invoking the Edge Function","FunctionsRelayError",n)}}class og extends Mu{constructor(n){super("Edge Function returned a non-2xx status code","FunctionsHttpError",n)}}var xu;(function(a){a.Any="any",a.ApNortheast1="ap-northeast-1",a.ApNortheast2="ap-northeast-2",a.ApSouth1="ap-south-1",a.ApSoutheast1="ap-southeast-1",a.ApSoutheast2="ap-southeast-2",a.CaCentral1="ca-central-1",a.EuCentral1="eu-central-1",a.EuWest1="eu-west-1",a.EuWest2="eu-west-2",a.EuWest3="eu-west-3",a.SaEast1="sa-east-1",a.UsEast1="us-east-1",a.UsWest1="us-west-1",a.UsWest2="us-west-2"})(xu||(xu={}));class zx{constructor(n,{headers:r={},customFetch:o,region:u=xu.Any}={}){this.url=n,this.headers=r,this.region=u,this.fetch=Tx(o)}setAuth(n){this.headers.Authorization=`Bearer ${n}`}invoke(n){return kx(this,arguments,void 0,function*(r,o={}){var u;let d,f;try{const{headers:p,method:g,body:y,signal:b,timeout:x}=o;let S={},{region:_}=o;_||(_=this.region);const E=new URL(`${this.url}/${r}`);_&&_!=="any"&&(S["x-region"]=_,E.searchParams.set("forceFunctionRegion",_));let R;y&&(p&&!Object.prototype.hasOwnProperty.call(p,"Content-Type")||!p)?typeof Blob<"u"&&y instanceof Blob||y instanceof ArrayBuffer?(S["Content-Type"]="application/octet-stream",R=y):typeof y=="string"?(S["Content-Type"]="text/plain",R=y):typeof FormData<"u"&&y instanceof FormData?R=y:(S["Content-Type"]="application/json",R=JSON.stringify(y)):y&&typeof y!="string"&&!(typeof Blob<"u"&&y instanceof Blob)&&!(y instanceof ArrayBuffer)&&!(typeof FormData<"u"&&y instanceof FormData)?R=JSON.stringify(y):R=y;let T=b;x&&(f=new AbortController,d=setTimeout(()=>f.abort(),x),b?(T=f.signal,b.addEventListener("abort",()=>f.abort())):T=f.signal);const O=yield this.fetch(E.toString(),{method:g||"POST",headers:Object.assign(Object.assign(Object.assign({},S),this.headers),p),body:R,signal:T}).catch(J=>{throw new Ax(J)}),z=O.headers.get("x-relay-error");if(z&&z==="true")throw new sg(O);if(!O.ok)throw new og(O);let B=((u=O.headers.get("Content-Type"))!==null&&u!==void 0?u:"text/plain").split(";")[0].trim(),Y;return B==="application/json"?Y=yield O.json():B==="application/octet-stream"||B==="application/pdf"?Y=yield O.blob():B==="text/event-stream"?Y=O:B==="multipart/form-data"?Y=yield O.formData():Y=yield O.text(),{data:Y,error:null,response:O}}catch(p){return{data:null,error:p,response:p instanceof og||p instanceof sg?p.context:void 0}}finally{d&&clearTimeout(d)}})}}var Ox=class extends Error{constructor(a){super(a.message),this.name="PostgrestError",this.details=a.details,this.hint=a.hint,this.code=a.code}},Dx=class{constructor(a){var n,r;this.shouldThrowOnError=!1,this.method=a.method,this.url=a.url,this.headers=new Headers(a.headers),this.schema=a.schema,this.body=a.body,this.shouldThrowOnError=(n=a.shouldThrowOnError)!==null&&n!==void 0?n:!1,this.signal=a.signal,this.isMaybeSingle=(r=a.isMaybeSingle)!==null&&r!==void 0?r:!1,a.fetch?this.fetch=a.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(a,n){return this.headers=new Headers(this.headers),this.headers.set(a,n),this}then(a,n){var r=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const o=this.fetch;let u=o(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async d=>{let f=null,p=null,g=null,y=d.status,b=d.statusText;if(d.ok){var x,S;if(r.method!=="HEAD"){var _;const O=await d.text();O===""||(r.headers.get("Accept")==="text/csv"||r.headers.get("Accept")&&(!((_=r.headers.get("Accept"))===null||_===void 0)&&_.includes("application/vnd.pgrst.plan+text"))?p=O:p=JSON.parse(O))}const R=(x=r.headers.get("Prefer"))===null||x===void 0?void 0:x.match(/count=(exact|planned|estimated)/),T=(S=d.headers.get("content-range"))===null||S===void 0?void 0:S.split("/");R&&T&&T.length>1&&(g=parseInt(T[1])),r.isMaybeSingle&&r.method==="GET"&&Array.isArray(p)&&(p.length>1?(f={code:"PGRST116",details:`Results contain ${p.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},p=null,g=null,y=406,b="Not Acceptable"):p.length===1?p=p[0]:p=null)}else{var E;const R=await d.text();try{f=JSON.parse(R),Array.isArray(f)&&d.status===404&&(p=[],f=null,y=200,b="OK")}catch{d.status===404&&R===""?(y=204,b="No Content"):f={message:R}}if(f&&r.isMaybeSingle&&(!(f==null||(E=f.details)===null||E===void 0)&&E.includes("0 rows"))&&(f=null,y=200,b="OK"),f&&r.shouldThrowOnError)throw new Ox(f)}return{error:f,data:p,count:g,status:y,statusText:b}});return this.shouldThrowOnError||(u=u.catch(d=>{var f;let p="";const g=d?.cause;if(g){var y,b,x,S;const E=(y=g?.message)!==null&&y!==void 0?y:"",R=(b=g?.code)!==null&&b!==void 0?b:"";p=`${(x=d?.name)!==null&&x!==void 0?x:"FetchError"}: ${d?.message}`,p+=`

Caused by: ${(S=g?.name)!==null&&S!==void 0?S:"Error"}: ${E}`,R&&(p+=` (${R})`),g?.stack&&(p+=`
${g.stack}`)}else{var _;p=(_=d?.stack)!==null&&_!==void 0?_:""}return{error:{message:`${(f=d?.name)!==null&&f!==void 0?f:"FetchError"}: ${d?.message}`,details:p,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),u.then(a,n)}returns(){return this}overrideTypes(){return this}},Bx=class extends Dx{select(a){let n=!1;const r=(a??"*").split("").map(o=>/\s/.test(o)&&!n?"":(o==='"'&&(n=!n),o)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(a,{ascending:n=!0,nullsFirst:r,foreignTable:o,referencedTable:u=o}={}){const d=u?`${u}.order`:"order",f=this.url.searchParams.get(d);return this.url.searchParams.set(d,`${f?`${f},`:""}${a}.${n?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(a,{foreignTable:n,referencedTable:r=n}={}){const o=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(o,`${a}`),this}range(a,n,{foreignTable:r,referencedTable:o=r}={}){const u=typeof o>"u"?"offset":`${o}.offset`,d=typeof o>"u"?"limit":`${o}.limit`;return this.url.searchParams.set(u,`${a}`),this.url.searchParams.set(d,`${n-a+1}`),this}abortSignal(a){return this.signal=a,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:a=!1,verbose:n=!1,settings:r=!1,buffers:o=!1,wal:u=!1,format:d="text"}={}){var f;const p=[a?"analyze":null,n?"verbose":null,r?"settings":null,o?"buffers":null,u?"wal":null].filter(Boolean).join("|"),g=(f=this.headers.get("Accept"))!==null&&f!==void 0?f:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${d}; for="${g}"; options=${p};`),d==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(a){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${a}`),this}};const lg=new RegExp("[,()]");var Oa=class extends Bx{eq(a,n){return this.url.searchParams.append(a,`eq.${n}`),this}neq(a,n){return this.url.searchParams.append(a,`neq.${n}`),this}gt(a,n){return this.url.searchParams.append(a,`gt.${n}`),this}gte(a,n){return this.url.searchParams.append(a,`gte.${n}`),this}lt(a,n){return this.url.searchParams.append(a,`lt.${n}`),this}lte(a,n){return this.url.searchParams.append(a,`lte.${n}`),this}like(a,n){return this.url.searchParams.append(a,`like.${n}`),this}likeAllOf(a,n){return this.url.searchParams.append(a,`like(all).{${n.join(",")}}`),this}likeAnyOf(a,n){return this.url.searchParams.append(a,`like(any).{${n.join(",")}}`),this}ilike(a,n){return this.url.searchParams.append(a,`ilike.${n}`),this}ilikeAllOf(a,n){return this.url.searchParams.append(a,`ilike(all).{${n.join(",")}}`),this}ilikeAnyOf(a,n){return this.url.searchParams.append(a,`ilike(any).{${n.join(",")}}`),this}regexMatch(a,n){return this.url.searchParams.append(a,`match.${n}`),this}regexIMatch(a,n){return this.url.searchParams.append(a,`imatch.${n}`),this}is(a,n){return this.url.searchParams.append(a,`is.${n}`),this}isDistinct(a,n){return this.url.searchParams.append(a,`isdistinct.${n}`),this}in(a,n){const r=Array.from(new Set(n)).map(o=>typeof o=="string"&&lg.test(o)?`"${o}"`:`${o}`).join(",");return this.url.searchParams.append(a,`in.(${r})`),this}notIn(a,n){const r=Array.from(new Set(n)).map(o=>typeof o=="string"&&lg.test(o)?`"${o}"`:`${o}`).join(",");return this.url.searchParams.append(a,`not.in.(${r})`),this}contains(a,n){return typeof n=="string"?this.url.searchParams.append(a,`cs.${n}`):Array.isArray(n)?this.url.searchParams.append(a,`cs.{${n.join(",")}}`):this.url.searchParams.append(a,`cs.${JSON.stringify(n)}`),this}containedBy(a,n){return typeof n=="string"?this.url.searchParams.append(a,`cd.${n}`):Array.isArray(n)?this.url.searchParams.append(a,`cd.{${n.join(",")}}`):this.url.searchParams.append(a,`cd.${JSON.stringify(n)}`),this}rangeGt(a,n){return this.url.searchParams.append(a,`sr.${n}`),this}rangeGte(a,n){return this.url.searchParams.append(a,`nxl.${n}`),this}rangeLt(a,n){return this.url.searchParams.append(a,`sl.${n}`),this}rangeLte(a,n){return this.url.searchParams.append(a,`nxr.${n}`),this}rangeAdjacent(a,n){return this.url.searchParams.append(a,`adj.${n}`),this}overlaps(a,n){return typeof n=="string"?this.url.searchParams.append(a,`ov.${n}`):this.url.searchParams.append(a,`ov.{${n.join(",")}}`),this}textSearch(a,n,{config:r,type:o}={}){let u="";o==="plain"?u="pl":o==="phrase"?u="ph":o==="websearch"&&(u="w");const d=r===void 0?"":`(${r})`;return this.url.searchParams.append(a,`${u}fts${d}.${n}`),this}match(a){return Object.entries(a).forEach(([n,r])=>{this.url.searchParams.append(n,`eq.${r}`)}),this}not(a,n,r){return this.url.searchParams.append(a,`not.${n}.${r}`),this}or(a,{foreignTable:n,referencedTable:r=n}={}){const o=r?`${r}.or`:"or";return this.url.searchParams.append(o,`(${a})`),this}filter(a,n,r){return this.url.searchParams.append(a,`${n}.${r}`),this}},Nx=class{constructor(a,{headers:n={},schema:r,fetch:o}){this.url=a,this.headers=new Headers(n),this.schema=r,this.fetch=o}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(a,n){const{head:r=!1,count:o}=n??{},u=r?"HEAD":"GET";let d=!1;const f=(a??"*").split("").map(y=>/\s/.test(y)&&!d?"":(y==='"'&&(d=!d),y)).join(""),{url:p,headers:g}=this.cloneRequestState();return p.searchParams.set("select",f),o&&g.append("Prefer",`count=${o}`),new Oa({method:u,url:p,headers:g,schema:this.schema,fetch:this.fetch})}insert(a,{count:n,defaultToNull:r=!0}={}){var o;const u="POST",{url:d,headers:f}=this.cloneRequestState();if(n&&f.append("Prefer",`count=${n}`),r||f.append("Prefer","missing=default"),Array.isArray(a)){const p=a.reduce((g,y)=>g.concat(Object.keys(y)),[]);if(p.length>0){const g=[...new Set(p)].map(y=>`"${y}"`);d.searchParams.set("columns",g.join(","))}}return new Oa({method:u,url:d,headers:f,schema:this.schema,body:a,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}upsert(a,{onConflict:n,ignoreDuplicates:r=!1,count:o,defaultToNull:u=!0}={}){var d;const f="POST",{url:p,headers:g}=this.cloneRequestState();if(g.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),n!==void 0&&p.searchParams.set("on_conflict",n),o&&g.append("Prefer",`count=${o}`),u||g.append("Prefer","missing=default"),Array.isArray(a)){const y=a.reduce((b,x)=>b.concat(Object.keys(x)),[]);if(y.length>0){const b=[...new Set(y)].map(x=>`"${x}"`);p.searchParams.set("columns",b.join(","))}}return new Oa({method:f,url:p,headers:g,schema:this.schema,body:a,fetch:(d=this.fetch)!==null&&d!==void 0?d:fetch})}update(a,{count:n}={}){var r;const o="PATCH",{url:u,headers:d}=this.cloneRequestState();return n&&d.append("Prefer",`count=${n}`),new Oa({method:o,url:u,headers:d,schema:this.schema,body:a,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}delete({count:a}={}){var n;const r="DELETE",{url:o,headers:u}=this.cloneRequestState();return a&&u.append("Prefer",`count=${a}`),new Oa({method:r,url:o,headers:u,schema:this.schema,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}},Ux=class em{constructor(n,{headers:r={},schema:o,fetch:u}={}){this.url=n,this.headers=new Headers(r),this.schemaName=o,this.fetch=u}from(n){if(!n||typeof n!="string"||n.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new Nx(new URL(`${this.url}/${n}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(n){return new em(this.url,{headers:this.headers,schema:n,fetch:this.fetch})}rpc(n,r={},{head:o=!1,get:u=!1,count:d}={}){var f;let p;const g=new URL(`${this.url}/rpc/${n}`);let y;const b=_=>_!==null&&typeof _=="object"&&(!Array.isArray(_)||_.some(b)),x=o&&Object.values(r).some(b);x?(p="POST",y=r):o||u?(p=o?"HEAD":"GET",Object.entries(r).filter(([_,E])=>E!==void 0).map(([_,E])=>[_,Array.isArray(E)?`{${E.join(",")}}`:`${E}`]).forEach(([_,E])=>{g.searchParams.append(_,E)})):(p="POST",y=r);const S=new Headers(this.headers);return x?S.set("Prefer",d?`count=${d},return=minimal`:"return=minimal"):d&&S.set("Prefer",`count=${d}`),new Oa({method:p,url:g,headers:S,schema:this.schemaName,body:y,fetch:(f=this.fetch)!==null&&f!==void 0?f:fetch})}};class Mx{constructor(){}static detectEnvironment(){var n;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((n=navigator.userAgent)===null||n===void 0)&&n.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};const r=globalThis.process;if(r){const o=r.versions;if(o&&o.node){const u=o.node,d=parseInt(u.replace(/^v/,"").split(".")[0]);return d>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${d} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${d} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const n=this.detectEnvironment();if(n.constructor)return n.constructor;let r=n.error||"WebSocket not supported in this environment.";throw n.workaround&&(r+=`

Suggested solution: ${n.workaround}`),new Error(r)}static createWebSocket(n,r){const o=this.getWebSocketConstructor();return new o(n,r)}static isWebSocketSupported(){try{const n=this.detectEnvironment();return n.type==="native"||n.type==="ws"}catch{return!1}}}const Lx="2.91.0",Hx=`realtime-js/${Lx}`,qx="1.0.0",tm="2.0.0",cg=tm,vu=1e4,$x=1e3,Ix=100;var gi;(function(a){a[a.connecting=0]="connecting",a[a.open=1]="open",a[a.closing=2]="closing",a[a.closed=3]="closed"})(gi||(gi={}));var ht;(function(a){a.closed="closed",a.errored="errored",a.joined="joined",a.joining="joining",a.leaving="leaving"})(ht||(ht={}));var dn;(function(a){a.close="phx_close",a.error="phx_error",a.join="phx_join",a.reply="phx_reply",a.leave="phx_leave",a.access_token="access_token"})(dn||(dn={}));var wu;(function(a){a.websocket="websocket"})(wu||(wu={}));var Li;(function(a){a.Connecting="connecting",a.Open="open",a.Closing="closing",a.Closed="closed"})(Li||(Li={}));class Gx{constructor(n){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=n??[]}encode(n,r){if(n.event===this.BROADCAST_EVENT&&!(n.payload instanceof ArrayBuffer)&&typeof n.payload.event=="string")return r(this._binaryEncodeUserBroadcastPush(n));let o=[n.join_ref,n.ref,n.topic,n.event,n.payload];return r(JSON.stringify(o))}_binaryEncodeUserBroadcastPush(n){var r;return this._isArrayBuffer((r=n.payload)===null||r===void 0?void 0:r.payload)?this._encodeBinaryUserBroadcastPush(n):this._encodeJsonUserBroadcastPush(n)}_encodeBinaryUserBroadcastPush(n){var r,o;const u=(o=(r=n.payload)===null||r===void 0?void 0:r.payload)!==null&&o!==void 0?o:new ArrayBuffer(0);return this._encodeUserBroadcastPush(n,this.BINARY_ENCODING,u)}_encodeJsonUserBroadcastPush(n){var r,o;const u=(o=(r=n.payload)===null||r===void 0?void 0:r.payload)!==null&&o!==void 0?o:{},f=new TextEncoder().encode(JSON.stringify(u)).buffer;return this._encodeUserBroadcastPush(n,this.JSON_ENCODING,f)}_encodeUserBroadcastPush(n,r,o){var u,d;const f=n.topic,p=(u=n.ref)!==null&&u!==void 0?u:"",g=(d=n.join_ref)!==null&&d!==void 0?d:"",y=n.payload.event,b=this.allowedMetadataKeys?this._pick(n.payload,this.allowedMetadataKeys):{},x=Object.keys(b).length===0?"":JSON.stringify(b);if(g.length>255)throw new Error(`joinRef length ${g.length} exceeds maximum of 255`);if(p.length>255)throw new Error(`ref length ${p.length} exceeds maximum of 255`);if(f.length>255)throw new Error(`topic length ${f.length} exceeds maximum of 255`);if(y.length>255)throw new Error(`userEvent length ${y.length} exceeds maximum of 255`);if(x.length>255)throw new Error(`metadata length ${x.length} exceeds maximum of 255`);const S=this.USER_BROADCAST_PUSH_META_LENGTH+g.length+p.length+f.length+y.length+x.length,_=new ArrayBuffer(this.HEADER_LENGTH+S);let E=new DataView(_),R=0;E.setUint8(R++,this.KINDS.userBroadcastPush),E.setUint8(R++,g.length),E.setUint8(R++,p.length),E.setUint8(R++,f.length),E.setUint8(R++,y.length),E.setUint8(R++,x.length),E.setUint8(R++,r),Array.from(g,O=>E.setUint8(R++,O.charCodeAt(0))),Array.from(p,O=>E.setUint8(R++,O.charCodeAt(0))),Array.from(f,O=>E.setUint8(R++,O.charCodeAt(0))),Array.from(y,O=>E.setUint8(R++,O.charCodeAt(0))),Array.from(x,O=>E.setUint8(R++,O.charCodeAt(0)));var T=new Uint8Array(_.byteLength+o.byteLength);return T.set(new Uint8Array(_),0),T.set(new Uint8Array(o),_.byteLength),T.buffer}decode(n,r){if(this._isArrayBuffer(n)){let o=this._binaryDecode(n);return r(o)}if(typeof n=="string"){const o=JSON.parse(n),[u,d,f,p,g]=o;return r({join_ref:u,ref:d,topic:f,event:p,payload:g})}return r({})}_binaryDecode(n){const r=new DataView(n),o=r.getUint8(0),u=new TextDecoder;if(o===this.KINDS.userBroadcast)return this._decodeUserBroadcast(n,r,u)}_decodeUserBroadcast(n,r,o){const u=r.getUint8(1),d=r.getUint8(2),f=r.getUint8(3),p=r.getUint8(4);let g=this.HEADER_LENGTH+4;const y=o.decode(n.slice(g,g+u));g=g+u;const b=o.decode(n.slice(g,g+d));g=g+d;const x=o.decode(n.slice(g,g+f));g=g+f;const S=n.slice(g,n.byteLength),_=p===this.JSON_ENCODING?JSON.parse(o.decode(S)):S,E={type:this.BROADCAST_EVENT,event:b,payload:_};return f>0&&(E.meta=JSON.parse(x)),{join_ref:null,ref:null,topic:y,event:this.BROADCAST_EVENT,payload:E}}_isArrayBuffer(n){var r;return n instanceof ArrayBuffer||((r=n?.constructor)===null||r===void 0?void 0:r.name)==="ArrayBuffer"}_pick(n,r){return!n||typeof n!="object"?{}:Object.fromEntries(Object.entries(n).filter(([o])=>r.includes(o)))}}class nm{constructor(n,r){this.callback=n,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=n,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Pe;(function(a){a.abstime="abstime",a.bool="bool",a.date="date",a.daterange="daterange",a.float4="float4",a.float8="float8",a.int2="int2",a.int4="int4",a.int4range="int4range",a.int8="int8",a.int8range="int8range",a.json="json",a.jsonb="jsonb",a.money="money",a.numeric="numeric",a.oid="oid",a.reltime="reltime",a.text="text",a.time="time",a.timestamp="timestamp",a.timestamptz="timestamptz",a.timetz="timetz",a.tsrange="tsrange",a.tstzrange="tstzrange"})(Pe||(Pe={}));const ug=(a,n,r={})=>{var o;const u=(o=r.skipTypes)!==null&&o!==void 0?o:[];return n?Object.keys(n).reduce((d,f)=>(d[f]=Px(f,a,n,u),d),{}):{}},Px=(a,n,r,o)=>{const u=n.find(p=>p.name===a),d=u?.type,f=r[a];return d&&!o.includes(d)?im(d,f):Su(f)},im=(a,n)=>{if(a.charAt(0)==="_"){const r=a.slice(1,a.length);return Yx(n,r)}switch(a){case Pe.bool:return Wx(n);case Pe.float4:case Pe.float8:case Pe.int2:case Pe.int4:case Pe.int8:case Pe.numeric:case Pe.oid:return Zx(n);case Pe.json:case Pe.jsonb:return Vx(n);case Pe.timestamp:return Kx(n);case Pe.abstime:case Pe.date:case Pe.daterange:case Pe.int4range:case Pe.int8range:case Pe.money:case Pe.reltime:case Pe.text:case Pe.time:case Pe.timestamptz:case Pe.timetz:case Pe.tsrange:case Pe.tstzrange:return Su(n);default:return Su(n)}},Su=a=>a,Wx=a=>{switch(a){case"t":return!0;case"f":return!1;default:return a}},Zx=a=>{if(typeof a=="string"){const n=parseFloat(a);if(!Number.isNaN(n))return n}return a},Vx=a=>{if(typeof a=="string")try{return JSON.parse(a)}catch{return a}return a},Yx=(a,n)=>{if(typeof a!="string")return a;const r=a.length-1,o=a[r];if(a[0]==="{"&&o==="}"){let d;const f=a.slice(1,r);try{d=JSON.parse("["+f+"]")}catch{d=f?f.split(","):[]}return d.map(p=>im(n,p))}return a},Kx=a=>typeof a=="string"?a.replace(" ","T"):a,am=a=>{const n=new URL(a);return n.protocol=n.protocol.replace(/^ws/i,"http"),n.pathname=n.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),n.pathname===""||n.pathname==="/"?n.pathname="/api/broadcast":n.pathname=n.pathname+"/api/broadcast",n.href};class au{constructor(n,r,o={},u=vu){this.channel=n,this.event=r,this.payload=o,this.timeout=u,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(n){this.timeout=n,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(n){this.payload=Object.assign(Object.assign({},this.payload),n)}receive(n,r){var o;return this._hasReceived(n)&&r((o=this.receivedResp)===null||o===void 0?void 0:o.response),this.recHooks.push({status:n,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const n=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},n),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(n,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:n,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:n,response:r}){this.recHooks.filter(o=>o.status===n).forEach(o=>o.callback(r))}_hasReceived(n){return this.receivedResp&&this.receivedResp.status===n}}var dg;(function(a){a.SYNC="sync",a.JOIN="join",a.LEAVE="leave"})(dg||(dg={}));class Hr{constructor(n,r){this.channel=n,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const o=r?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(o.state,{},u=>{const{onJoin:d,onLeave:f,onSync:p}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Hr.syncState(this.state,u,d,f),this.pendingDiffs.forEach(g=>{this.state=Hr.syncDiff(this.state,g,d,f)}),this.pendingDiffs=[],p()}),this.channel._on(o.diff,{},u=>{const{onJoin:d,onLeave:f,onSync:p}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(u):(this.state=Hr.syncDiff(this.state,u,d,f),p())}),this.onJoin((u,d,f)=>{this.channel._trigger("presence",{event:"join",key:u,currentPresences:d,newPresences:f})}),this.onLeave((u,d,f)=>{this.channel._trigger("presence",{event:"leave",key:u,currentPresences:d,leftPresences:f})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(n,r,o,u){const d=this.cloneDeep(n),f=this.transformState(r),p={},g={};return this.map(d,(y,b)=>{f[y]||(g[y]=b)}),this.map(f,(y,b)=>{const x=d[y];if(x){const S=b.map(T=>T.presence_ref),_=x.map(T=>T.presence_ref),E=b.filter(T=>_.indexOf(T.presence_ref)<0),R=x.filter(T=>S.indexOf(T.presence_ref)<0);E.length>0&&(p[y]=E),R.length>0&&(g[y]=R)}else p[y]=b}),this.syncDiff(d,{joins:p,leaves:g},o,u)}static syncDiff(n,r,o,u){const{joins:d,leaves:f}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return o||(o=()=>{}),u||(u=()=>{}),this.map(d,(p,g)=>{var y;const b=(y=n[p])!==null&&y!==void 0?y:[];if(n[p]=this.cloneDeep(g),b.length>0){const x=n[p].map(_=>_.presence_ref),S=b.filter(_=>x.indexOf(_.presence_ref)<0);n[p].unshift(...S)}o(p,b,g)}),this.map(f,(p,g)=>{let y=n[p];if(!y)return;const b=g.map(x=>x.presence_ref);y=y.filter(x=>b.indexOf(x.presence_ref)<0),n[p]=y,u(p,y,g),y.length===0&&delete n[p]}),n}static map(n,r){return Object.getOwnPropertyNames(n).map(o=>r(o,n[o]))}static transformState(n){return n=this.cloneDeep(n),Object.getOwnPropertyNames(n).reduce((r,o)=>{const u=n[o];return"metas"in u?r[o]=u.metas.map(d=>(d.presence_ref=d.phx_ref,delete d.phx_ref,delete d.phx_ref_prev,d)):r[o]=u,r},{})}static cloneDeep(n){return JSON.parse(JSON.stringify(n))}onJoin(n){this.caller.onJoin=n}onLeave(n){this.caller.onLeave=n}onSync(n){this.caller.onSync=n}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var hg;(function(a){a.ALL="*",a.INSERT="INSERT",a.UPDATE="UPDATE",a.DELETE="DELETE"})(hg||(hg={}));var qr;(function(a){a.BROADCAST="broadcast",a.PRESENCE="presence",a.POSTGRES_CHANGES="postgres_changes",a.SYSTEM="system"})(qr||(qr={}));var Hn;(function(a){a.SUBSCRIBED="SUBSCRIBED",a.TIMED_OUT="TIMED_OUT",a.CLOSED="CLOSED",a.CHANNEL_ERROR="CHANNEL_ERROR"})(Hn||(Hn={}));class Na{constructor(n,r={config:{}},o){var u,d;if(this.topic=n,this.params=r,this.socket=o,this.bindings={},this.state=ht.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=n.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new au(this,dn.join,this.params,this.timeout),this.rejoinTimer=new nm(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=ht.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(f=>f.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=ht.closed,this.socket._remove(this)}),this._onError(f=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,f),this.state=ht.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=ht.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",f=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,f),this.state=ht.errored,this.rejoinTimer.scheduleTimeout())}),this._on(dn.reply,{},(f,p)=>{this._trigger(this._replyEventName(p),f)}),this.presence=new Hr(this),this.broadcastEndpointURL=am(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((d=(u=this.params.config)===null||u===void 0?void 0:u.broadcast)===null||d===void 0)&&d.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(n,r=this.timeout){var o,u,d;if(this.socket.isConnected()||this.socket.connect(),this.state==ht.closed){const{config:{broadcast:f,presence:p,private:g}}=this.params,y=(u=(o=this.bindings.postgres_changes)===null||o===void 0?void 0:o.map(_=>_.filter))!==null&&u!==void 0?u:[],b=!!this.bindings[qr.PRESENCE]&&this.bindings[qr.PRESENCE].length>0||((d=this.params.config.presence)===null||d===void 0?void 0:d.enabled)===!0,x={},S={broadcast:f,presence:Object.assign(Object.assign({},p),{enabled:b}),postgres_changes:y,private:g};this.socket.accessTokenValue&&(x.access_token=this.socket.accessTokenValue),this._onError(_=>n?.(Hn.CHANNEL_ERROR,_)),this._onClose(()=>n?.(Hn.CLOSED)),this.updateJoinPayload(Object.assign({config:S},x)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:_})=>{var E;if(this.socket._isManualToken()||this.socket.setAuth(),_===void 0){n?.(Hn.SUBSCRIBED);return}else{const R=this.bindings.postgres_changes,T=(E=R?.length)!==null&&E!==void 0?E:0,O=[];for(let z=0;z<T;z++){const B=R[z],{filter:{event:Y,schema:J,table:G,filter:K}}=B,P=_&&_[z];if(P&&P.event===Y&&Na.isFilterValueEqual(P.schema,J)&&Na.isFilterValueEqual(P.table,G)&&Na.isFilterValueEqual(P.filter,K))O.push(Object.assign(Object.assign({},B),{id:P.id}));else{this.unsubscribe(),this.state=ht.errored,n?.(Hn.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=O,n&&n(Hn.SUBSCRIBED);return}}).receive("error",_=>{this.state=ht.errored,n?.(Hn.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(_).join(", ")||"error")))}).receive("timeout",()=>{n?.(Hn.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(n,r={}){return await this.send({type:"presence",event:"track",payload:n},r.timeout||this.timeout)}async untrack(n={}){return await this.send({type:"presence",event:"untrack"},n)}on(n,r,o){return this.state===ht.joined&&n===qr.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(n,r,o)}async httpSend(n,r,o={}){var u;if(r==null)return Promise.reject("Payload is required for httpSend()");const d={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(d.Authorization=`Bearer ${this.socket.accessTokenValue}`);const f={method:"POST",headers:d,body:JSON.stringify({messages:[{topic:this.subTopic,event:n,payload:r,private:this.private}]})},p=await this._fetchWithTimeout(this.broadcastEndpointURL,f,(u=o.timeout)!==null&&u!==void 0?u:this.timeout);if(p.status===202)return{success:!0};let g=p.statusText;try{const y=await p.json();g=y.error||y.message||g}catch{}return Promise.reject(new Error(g))}async send(n,r={}){var o,u;if(!this._canPush()&&n.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:d,payload:f}=n,p={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(p.Authorization=`Bearer ${this.socket.accessTokenValue}`);const g={method:"POST",headers:p,body:JSON.stringify({messages:[{topic:this.subTopic,event:d,payload:f,private:this.private}]})};try{const y=await this._fetchWithTimeout(this.broadcastEndpointURL,g,(o=r.timeout)!==null&&o!==void 0?o:this.timeout);return await((u=y.body)===null||u===void 0?void 0:u.cancel()),y.ok?"ok":"error"}catch(y){return y.name==="AbortError"?"timed out":"error"}}else return new Promise(d=>{var f,p,g;const y=this._push(n.type,n,r.timeout||this.timeout);n.type==="broadcast"&&!(!((g=(p=(f=this.params)===null||f===void 0?void 0:f.config)===null||p===void 0?void 0:p.broadcast)===null||g===void 0)&&g.ack)&&d("ok"),y.receive("ok",()=>d("ok")),y.receive("error",()=>d("error")),y.receive("timeout",()=>d("timed out"))})}updateJoinPayload(n){this.joinPush.updatePayload(n)}unsubscribe(n=this.timeout){this.state=ht.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(dn.close,"leave",this._joinRef())};this.joinPush.destroy();let o=null;return new Promise(u=>{o=new au(this,dn.leave,{},n),o.receive("ok",()=>{r(),u("ok")}).receive("timeout",()=>{r(),u("timed out")}).receive("error",()=>{u("error")}),o.send(),this._canPush()||o.trigger("ok",{})}).finally(()=>{o?.destroy()})}teardown(){this.pushBuffer.forEach(n=>n.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=ht.closed,this.bindings={}}async _fetchWithTimeout(n,r,o){const u=new AbortController,d=setTimeout(()=>u.abort(),o),f=await this.socket.fetch(n,Object.assign(Object.assign({},r),{signal:u.signal}));return clearTimeout(d),f}_push(n,r,o=this.timeout){if(!this.joinedOnce)throw`tried to push '${n}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let u=new au(this,n,r,o);return this._canPush()?u.send():this._addToPushBuffer(u),u}_addToPushBuffer(n){if(n.startTimeout(),this.pushBuffer.push(n),this.pushBuffer.length>Ix){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(n,r,o){return r}_isMember(n){return this.topic===n}_joinRef(){return this.joinPush.ref}_trigger(n,r,o){var u,d;const f=n.toLocaleLowerCase(),{close:p,error:g,leave:y,join:b}=dn;if(o&&[p,g,y,b].indexOf(f)>=0&&o!==this._joinRef())return;let S=this._onMessage(f,r,o);if(r&&!S)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(f)?(u=this.bindings.postgres_changes)===null||u===void 0||u.filter(_=>{var E,R,T;return((E=_.filter)===null||E===void 0?void 0:E.event)==="*"||((T=(R=_.filter)===null||R===void 0?void 0:R.event)===null||T===void 0?void 0:T.toLocaleLowerCase())===f}).map(_=>_.callback(S,o)):(d=this.bindings[f])===null||d===void 0||d.filter(_=>{var E,R,T,O,z,B,Y,J;if(["broadcast","presence","postgres_changes"].includes(f))if("id"in _){const G=_.id,K=(E=_.filter)===null||E===void 0?void 0:E.event;return G&&((R=r.ids)===null||R===void 0?void 0:R.includes(G))&&(K==="*"||K?.toLocaleLowerCase()===((T=r.data)===null||T===void 0?void 0:T.type.toLocaleLowerCase()))&&(!(!((O=_.filter)===null||O===void 0)&&O.table)||_.filter.table===((z=r.data)===null||z===void 0?void 0:z.table))}else{const G=(Y=(B=_?.filter)===null||B===void 0?void 0:B.event)===null||Y===void 0?void 0:Y.toLocaleLowerCase();return G==="*"||G===((J=r?.event)===null||J===void 0?void 0:J.toLocaleLowerCase())}else return _.type.toLocaleLowerCase()===f}).map(_=>{if(typeof S=="object"&&"ids"in S){const E=S.data,{schema:R,table:T,commit_timestamp:O,type:z,errors:B}=E;S=Object.assign(Object.assign({},{schema:R,table:T,commit_timestamp:O,eventType:z,new:{},old:{},errors:B}),this._getPayloadRecords(E))}_.callback(S,o)})}_isClosed(){return this.state===ht.closed}_isJoined(){return this.state===ht.joined}_isJoining(){return this.state===ht.joining}_isLeaving(){return this.state===ht.leaving}_replyEventName(n){return`chan_reply_${n}`}_on(n,r,o){const u=n.toLocaleLowerCase(),d={type:u,filter:r,callback:o};return this.bindings[u]?this.bindings[u].push(d):this.bindings[u]=[d],this}_off(n,r){const o=n.toLocaleLowerCase();return this.bindings[o]&&(this.bindings[o]=this.bindings[o].filter(u=>{var d;return!(((d=u.type)===null||d===void 0?void 0:d.toLocaleLowerCase())===o&&Na.isEqual(u.filter,r))})),this}static isEqual(n,r){if(Object.keys(n).length!==Object.keys(r).length)return!1;for(const o in n)if(n[o]!==r[o])return!1;return!0}static isFilterValueEqual(n,r){return(n??void 0)===(r??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(n){this._on(dn.close,{},n)}_onError(n){this._on(dn.error,{},r=>n(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(n=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=ht.joining,this.joinPush.resend(n))}_getPayloadRecords(n){const r={new:{},old:{}};return(n.type==="INSERT"||n.type==="UPDATE")&&(r.new=ug(n.columns,n.record)),(n.type==="UPDATE"||n.type==="DELETE")&&(r.old=ug(n.columns,n.old_record)),r}}const ru=()=>{},vo={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},Jx=[1e3,2e3,5e3,1e4],Qx=1e4,Xx=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Fx{constructor(n,r){var o;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=vu,this.transport=null,this.heartbeatIntervalMs=vo.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=ru,this.ref=0,this.reconnectTimer=null,this.vsn=cg,this.logger=ru,this.conn=null,this.sendBuffer=[],this.serializer=new Gx,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=u=>u?(...d)=>u(...d):(...d)=>fetch(...d),!(!((o=r?.params)===null||o===void 0)&&o.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${n}/${wu.websocket}`,this.httpEndpoint=am(n),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Mx.createWebSocket(this.endpointURL())}catch(n){this._setConnectionState("disconnected");const r=n.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(n,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const o=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(o),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(n?this.conn.close(n,r??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(n){const r=await n.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const n=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),n}log(n,r,o){this.logger(n,r,o)}connectionState(){switch(this.conn&&this.conn.readyState){case gi.connecting:return Li.Connecting;case gi.open:return Li.Open;case gi.closing:return Li.Closing;default:return Li.Closed}}isConnected(){return this.connectionState()===Li.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(n,r={config:{}}){const o=`realtime:${n}`,u=this.getChannels().find(d=>d.topic===o);if(u)return u;{const d=new Na(`realtime:${n}`,r,this);return this.channels.push(d),d}}push(n){const{topic:r,event:o,payload:u,ref:d}=n,f=()=>{this.encode(n,p=>{var g;(g=this.conn)===null||g===void 0||g.send(p)})};this.log("push",`${r} ${o} (${d})`,u),this.isConnected()?f():this.sendBuffer.push(f)}async setAuth(n=null){this._authPromise=this._performAuth(n);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var n;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(n=this.conn)===null||n===void 0||n.close($x,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},vo.HEARTBEAT_TIMEOUT_FALLBACK);return}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(n){this.heartbeatCallback=n}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(n=>n()),this.sendBuffer=[])}_makeRef(){let n=this.ref+1;return n===this.ref?this.ref=0:this.ref=n,this.ref.toString()}_leaveOpenTopic(n){let r=this.channels.find(o=>o.topic===n&&(o._isJoined()||o._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${n}"`),r.unsubscribe())}_remove(n){this.channels=this.channels.filter(r=>r.topic!==n.topic)}_onConnMessage(n){this.decode(n.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply"&&r.ref&&r.ref===this.pendingHeartbeatRef){const y=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error",y)}catch(b){this.log("error","error in heartbeat callback",b)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}const{topic:o,event:u,payload:d,ref:f}=r,p=f?`(${f})`:"",g=d.status||"";this.log("receive",`${g} ${o} ${u} ${p}`.trim(),d),this.channels.filter(y=>y._isMember(o)).forEach(y=>y._trigger(u,d,f)),this._triggerStateCallbacks("message",r)})}_clearTimer(n){var r;n==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):n==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=n=>this._onConnError(n),this.conn.onmessage=n=>this._onConnMessage(n),this.conn.onclose=n=>this._onConnClose(n),this.conn.readyState===gi.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===gi.open||this.conn.readyState===gi.connecting)try{this.conn.close()}catch(n){this.log("error","Error closing connection",n)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(n=>n.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(r=>{this.log("error","error waiting for auth on connect",r),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const n=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(n),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this._terminateWorker()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(n){var r;this._setConnectionState("disconnected"),this.log("transport","close",n),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",n)}_onConnError(n){this._setConnectionState("disconnected"),this.log("transport",`${n}`),this._triggerChanError(),this._triggerStateCallbacks("error",n)}_triggerChanError(){this.channels.forEach(n=>n._trigger(dn.error))}_appendParams(n,r){if(Object.keys(r).length===0)return n;const o=n.match(/\?/)?"&":"?",u=new URLSearchParams(r);return`${n}${o}${u}`}_workerObjectUrl(n){let r;if(n)r=n;else{const o=new Blob([Xx],{type:"application/javascript"});r=URL.createObjectURL(o)}return r}_setConnectionState(n,r=!1){this._connectionState=n,n==="connecting"?this._wasManualDisconnect=!1:n==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(n=null){let r,o=!1;if(n)r=n,o=!0;else if(this.accessToken)try{r=await this.accessToken()}catch(u){this.log("error","Error fetching access token from callback",u),r=this.accessTokenValue}else r=this.accessTokenValue;o?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(u=>{const d={access_token:r,version:Hx};r&&u.updateJoinPayload(d),u.joinedOnce&&u._isJoined()&&u._push(dn.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(n="general"){this._isManualToken()||this.setAuth().catch(r=>{this.log("error",`Error setting auth in ${n}`,r)})}_triggerStateCallbacks(n,r){try{this.stateChangeCallbacks[n].forEach(o=>{try{o(r)}catch(u){this.log("error",`error in ${n} callback`,u)}})}catch(o){this.log("error",`error triggering ${n} callbacks`,o)}}_setupReconnectionTimer(){this.reconnectTimer=new nm(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},vo.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(n){var r,o,u,d,f,p,g,y,b,x,S,_;switch(this.transport=(r=n?.transport)!==null&&r!==void 0?r:null,this.timeout=(o=n?.timeout)!==null&&o!==void 0?o:vu,this.heartbeatIntervalMs=(u=n?.heartbeatIntervalMs)!==null&&u!==void 0?u:vo.HEARTBEAT_INTERVAL,this.worker=(d=n?.worker)!==null&&d!==void 0?d:!1,this.accessToken=(f=n?.accessToken)!==null&&f!==void 0?f:null,this.heartbeatCallback=(p=n?.heartbeatCallback)!==null&&p!==void 0?p:ru,this.vsn=(g=n?.vsn)!==null&&g!==void 0?g:cg,n?.params&&(this.params=n.params),n?.logger&&(this.logger=n.logger),(n?.logLevel||n?.log_level)&&(this.logLevel=n.logLevel||n.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(y=n?.reconnectAfterMs)!==null&&y!==void 0?y:(E=>Jx[E-1]||Qx),this.vsn){case qx:this.encode=(b=n?.encode)!==null&&b!==void 0?b:((E,R)=>R(JSON.stringify(E))),this.decode=(x=n?.decode)!==null&&x!==void 0?x:((E,R)=>R(JSON.parse(E)));break;case tm:this.encode=(S=n?.encode)!==null&&S!==void 0?S:this.serializer.encode.bind(this.serializer),this.decode=(_=n?.decode)!==null&&_!==void 0?_:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=n?.workerUrl}}}var Pr=class extends Error{constructor(a,n){super(a),this.name="IcebergError",this.status=n.status,this.icebergType=n.icebergType,this.icebergCode=n.icebergCode,this.details=n.details,this.isCommitStateUnknown=n.icebergType==="CommitStateUnknownException"||[500,502,504].includes(n.status)&&n.icebergType?.includes("CommitState")===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function ev(a,n,r){const o=new URL(n,a);if(r)for(const[u,d]of Object.entries(r))d!==void 0&&o.searchParams.set(u,d);return o.toString()}async function tv(a){return!a||a.type==="none"?{}:a.type==="bearer"?{Authorization:`Bearer ${a.token}`}:a.type==="header"?{[a.name]:a.value}:a.type==="custom"?await a.getHeaders():{}}function nv(a){const n=a.fetchImpl??globalThis.fetch;return{async request({method:r,path:o,query:u,body:d,headers:f}){const p=ev(a.baseUrl,o,u),g=await tv(a.auth),y=await n(p,{method:r,headers:{...d?{"Content-Type":"application/json"}:{},...g,...f},body:d?JSON.stringify(d):void 0}),b=await y.text(),x=(y.headers.get("content-type")||"").includes("application/json"),S=x&&b?JSON.parse(b):b;if(!y.ok){const _=x?S:void 0,E=_?.error;throw new Pr(E?.message??`Request failed with status ${y.status}`,{status:y.status,icebergType:E?.type,icebergCode:E?.code,details:_})}return{status:y.status,headers:y.headers,data:S}}}}function wo(a){return a.join("")}var iv=class{constructor(a,n=""){this.client=a,this.prefix=n}async listNamespaces(a){const n=a?{parent:wo(a.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:n})).data.namespaces.map(o=>({namespace:o}))}async createNamespace(a,n){const r={namespace:a.namespace,properties:n?.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:r})).data}async dropNamespace(a){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${wo(a.namespace)}`})}async loadNamespaceMetadata(a){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${wo(a.namespace)}`})).data.properties}}async namespaceExists(a){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${wo(a.namespace)}`}),!0}catch(n){if(n instanceof Pr&&n.status===404)return!1;throw n}}async createNamespaceIfNotExists(a,n){try{return await this.createNamespace(a,n)}catch(r){if(r instanceof Pr&&r.status===409)return;throw r}}};function ja(a){return a.join("")}var av=class{constructor(a,n="",r){this.client=a,this.prefix=n,this.accessDelegation=r}async listTables(a){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${ja(a.namespace)}/tables`})).data.identifiers}async createTable(a,n){const r={};return this.accessDelegation&&(r["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${ja(a.namespace)}/tables`,body:n,headers:r})).data.metadata}async updateTable(a,n){const r=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${ja(a.namespace)}/tables/${a.name}`,body:n});return{"metadata-location":r.data["metadata-location"],metadata:r.data.metadata}}async dropTable(a,n){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${ja(a.namespace)}/tables/${a.name}`,query:{purgeRequested:String(n?.purge??!1)}})}async loadTable(a){const n={};return this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${ja(a.namespace)}/tables/${a.name}`,headers:n})).data.metadata}async tableExists(a){const n={};this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${ja(a.namespace)}/tables/${a.name}`,headers:n}),!0}catch(r){if(r instanceof Pr&&r.status===404)return!1;throw r}}async createTableIfNotExists(a,n){try{return await this.createTable(a,n)}catch(r){if(r instanceof Pr&&r.status===409)return await this.loadTable({namespace:a.namespace,name:n.name});throw r}}},rv=class{constructor(a){let n="v1";a.catalogName&&(n+=`/${a.catalogName}`);const r=a.baseUrl.endsWith("/")?a.baseUrl:`${a.baseUrl}/`;this.client=nv({baseUrl:r,auth:a.auth,fetchImpl:a.fetch}),this.accessDelegation=a.accessDelegation?.join(","),this.namespaceOps=new iv(this.client,n),this.tableOps=new av(this.client,n,this.accessDelegation)}async listNamespaces(a){return this.namespaceOps.listNamespaces(a)}async createNamespace(a,n){return this.namespaceOps.createNamespace(a,n)}async dropNamespace(a){await this.namespaceOps.dropNamespace(a)}async loadNamespaceMetadata(a){return this.namespaceOps.loadNamespaceMetadata(a)}async listTables(a){return this.tableOps.listTables(a)}async createTable(a,n){return this.tableOps.createTable(a,n)}async updateTable(a,n){return this.tableOps.updateTable(a,n)}async dropTable(a,n){await this.tableOps.dropTable(a,n)}async loadTable(a){return this.tableOps.loadTable(a)}async namespaceExists(a){return this.namespaceOps.namespaceExists(a)}async tableExists(a){return this.tableOps.tableExists(a)}async createNamespaceIfNotExists(a,n){return this.namespaceOps.createNamespaceIfNotExists(a,n)}async createTableIfNotExists(a,n){return this.tableOps.createTableIfNotExists(a,n)}},Bo=class extends Error{constructor(a){super(a),this.__isStorageError=!0,this.name="StorageError"}};function Je(a){return typeof a=="object"&&a!==null&&"__isStorageError"in a}var sv=class extends Bo{constructor(a,n,r){super(a),this.name="StorageApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},_u=class extends Bo{constructor(a,n){super(a),this.name="StorageUnknownError",this.originalError=n}};const Lu=a=>a?(...n)=>a(...n):(...n)=>fetch(...n),ov=()=>Response,Eu=a=>{if(Array.isArray(a))return a.map(r=>Eu(r));if(typeof a=="function"||a!==Object(a))return a;const n={};return Object.entries(a).forEach(([r,o])=>{const u=r.replace(/([-_][a-z])/gi,d=>d.toUpperCase().replace(/[-_]/g,""));n[u]=Eu(o)}),n},lv=a=>{if(typeof a!="object"||a===null)return!1;const n=Object.getPrototypeOf(a);return(n===null||n===Object.prototype||Object.getPrototypeOf(n)===null)&&!(Symbol.toStringTag in a)&&!(Symbol.iterator in a)},cv=a=>!a||typeof a!="string"||a.length===0||a.length>100||a.trim()!==a||a.includes("/")||a.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(a);function Wr(a){"@babel/helpers - typeof";return Wr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Wr(a)}function uv(a,n){if(Wr(a)!="object"||!a)return a;var r=a[Symbol.toPrimitive];if(r!==void 0){var o=r.call(a,n);if(Wr(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(a)}function dv(a){var n=uv(a,"string");return Wr(n)=="symbol"?n:n+""}function hv(a,n,r){return(n=dv(n))in a?Object.defineProperty(a,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):a[n]=r,a}function fg(a,n){var r=Object.keys(a);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(a);n&&(o=o.filter(function(u){return Object.getOwnPropertyDescriptor(a,u).enumerable})),r.push.apply(r,o)}return r}function ue(a){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?fg(Object(r),!0).forEach(function(o){hv(a,o,r[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(r)):fg(Object(r)).forEach(function(o){Object.defineProperty(a,o,Object.getOwnPropertyDescriptor(r,o))})}return a}const su=a=>{var n;return a.msg||a.message||a.error_description||(typeof a.error=="string"?a.error:(n=a.error)===null||n===void 0?void 0:n.message)||JSON.stringify(a)},fv=async(a,n,r)=>{a instanceof await ov()&&!r?.noResolveJson?a.json().then(o=>{const u=a.status||500,d=o?.statusCode||u+"";n(new sv(su(o),u,d))}).catch(o=>{n(new _u(su(o),o))}):n(new _u(su(a),a))},pv=(a,n,r,o)=>{const u={method:a,headers:n?.headers||{}};return a==="GET"||!o?u:(lv(o)?(u.headers=ue({"Content-Type":"application/json"},n?.headers),u.body=JSON.stringify(o)):u.body=o,n?.duplex&&(u.duplex=n.duplex),ue(ue({},u),r))};async function Fr(a,n,r,o,u,d){return new Promise((f,p)=>{a(r,pv(n,o,u,d)).then(g=>{if(!g.ok)throw g;return o?.noResolveJson?g:g.json()}).then(g=>f(g)).catch(g=>fv(g,p,o))})}async function Zr(a,n,r,o){return Fr(a,"GET",n,r,o)}async function un(a,n,r,o,u){return Fr(a,"POST",n,o,u,r)}async function Ru(a,n,r,o,u){return Fr(a,"PUT",n,o,u,r)}async function gv(a,n,r,o){return Fr(a,"HEAD",n,ue(ue({},r),{},{noResolveJson:!0}),o)}async function Hu(a,n,r,o,u){return Fr(a,"DELETE",n,o,u,r)}var mv=class{constructor(a,n){this.downloadFn=a,this.shouldThrowOnError=n}then(a,n){return this.execute().then(a,n)}async execute(){var a=this;try{return{data:(await a.downloadFn()).body,error:null}}catch(n){if(a.shouldThrowOnError)throw n;if(Je(n))return{data:null,error:n};throw n}}};let rm;rm=Symbol.toStringTag;var yv=class{constructor(a,n){this.downloadFn=a,this.shouldThrowOnError=n,this[rm]="BlobDownloadBuilder",this.promise=null}asStream(){return new mv(this.downloadFn,this.shouldThrowOnError)}then(a,n){return this.getPromise().then(a,n)}catch(a){return this.getPromise().catch(a)}finally(a){return this.getPromise().finally(a)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var a=this;try{return{data:await(await a.downloadFn()).blob(),error:null}}catch(n){if(a.shouldThrowOnError)throw n;if(Je(n))return{data:null,error:n};throw n}}};const bv={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},pg={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var xv=class{constructor(a,n={},r,o){this.shouldThrowOnError=!1,this.url=a,this.headers=n,this.bucketId=r,this.fetch=Lu(o)}throwOnError(){return this.shouldThrowOnError=!0,this}async uploadOrUpdate(a,n,r,o){var u=this;try{let d;const f=ue(ue({},pg),o);let p=ue(ue({},u.headers),a==="POST"&&{"x-upsert":String(f.upsert)});const g=f.metadata;typeof Blob<"u"&&r instanceof Blob?(d=new FormData,d.append("cacheControl",f.cacheControl),g&&d.append("metadata",u.encodeMetadata(g)),d.append("",r)):typeof FormData<"u"&&r instanceof FormData?(d=r,d.has("cacheControl")||d.append("cacheControl",f.cacheControl),g&&!d.has("metadata")&&d.append("metadata",u.encodeMetadata(g))):(d=r,p["cache-control"]=`max-age=${f.cacheControl}`,p["content-type"]=f.contentType,g&&(p["x-metadata"]=u.toBase64(u.encodeMetadata(g))),(typeof ReadableStream<"u"&&d instanceof ReadableStream||d&&typeof d=="object"&&"pipe"in d&&typeof d.pipe=="function")&&!f.duplex&&(f.duplex="half")),o?.headers&&(p=ue(ue({},p),o.headers));const y=u._removeEmptyFolders(n),b=u._getFinalPath(y),x=await(a=="PUT"?Ru:un)(u.fetch,`${u.url}/object/${b}`,d,ue({headers:p},f?.duplex?{duplex:f.duplex}:{}));return{data:{path:y,id:x.Id,fullPath:x.Key},error:null}}catch(d){if(u.shouldThrowOnError)throw d;if(Je(d))return{data:null,error:d};throw d}}async upload(a,n,r){return this.uploadOrUpdate("POST",a,n,r)}async uploadToSignedUrl(a,n,r,o){var u=this;const d=u._removeEmptyFolders(a),f=u._getFinalPath(d),p=new URL(u.url+`/object/upload/sign/${f}`);p.searchParams.set("token",n);try{let g;const y=ue({upsert:pg.upsert},o),b=ue(ue({},u.headers),{"x-upsert":String(y.upsert)});return typeof Blob<"u"&&r instanceof Blob?(g=new FormData,g.append("cacheControl",y.cacheControl),g.append("",r)):typeof FormData<"u"&&r instanceof FormData?(g=r,g.append("cacheControl",y.cacheControl)):(g=r,b["cache-control"]=`max-age=${y.cacheControl}`,b["content-type"]=y.contentType),{data:{path:d,fullPath:(await Ru(u.fetch,p.toString(),g,{headers:b})).Key},error:null}}catch(g){if(u.shouldThrowOnError)throw g;if(Je(g))return{data:null,error:g};throw g}}async createSignedUploadUrl(a,n){var r=this;try{let o=r._getFinalPath(a);const u=ue({},r.headers);n?.upsert&&(u["x-upsert"]="true");const d=await un(r.fetch,`${r.url}/object/upload/sign/${o}`,{},{headers:u}),f=new URL(r.url+d.url),p=f.searchParams.get("token");if(!p)throw new Bo("No token returned by API");return{data:{signedUrl:f.toString(),path:a,token:p},error:null}}catch(o){if(r.shouldThrowOnError)throw o;if(Je(o))return{data:null,error:o};throw o}}async update(a,n,r){return this.uploadOrUpdate("PUT",a,n,r)}async move(a,n,r){var o=this;try{return{data:await un(o.fetch,`${o.url}/object/move`,{bucketId:o.bucketId,sourceKey:a,destinationKey:n,destinationBucket:r?.destinationBucket},{headers:o.headers}),error:null}}catch(u){if(o.shouldThrowOnError)throw u;if(Je(u))return{data:null,error:u};throw u}}async copy(a,n,r){var o=this;try{return{data:{path:(await un(o.fetch,`${o.url}/object/copy`,{bucketId:o.bucketId,sourceKey:a,destinationKey:n,destinationBucket:r?.destinationBucket},{headers:o.headers})).Key},error:null}}catch(u){if(o.shouldThrowOnError)throw u;if(Je(u))return{data:null,error:u};throw u}}async createSignedUrl(a,n,r){var o=this;try{let u=o._getFinalPath(a),d=await un(o.fetch,`${o.url}/object/sign/${u}`,ue({expiresIn:n},r?.transform?{transform:r.transform}:{}),{headers:o.headers});const f=r?.download?`&download=${r.download===!0?"":r.download}`:"";return d={signedUrl:encodeURI(`${o.url}${d.signedURL}${f}`)},{data:d,error:null}}catch(u){if(o.shouldThrowOnError)throw u;if(Je(u))return{data:null,error:u};throw u}}async createSignedUrls(a,n,r){var o=this;try{const u=await un(o.fetch,`${o.url}/object/sign/${o.bucketId}`,{expiresIn:n,paths:a},{headers:o.headers}),d=r?.download?`&download=${r.download===!0?"":r.download}`:"";return{data:u.map(f=>ue(ue({},f),{},{signedUrl:f.signedURL?encodeURI(`${o.url}${f.signedURL}${d}`):null})),error:null}}catch(u){if(o.shouldThrowOnError)throw u;if(Je(u))return{data:null,error:u};throw u}}download(a,n){const r=typeof n?.transform<"u"?"render/image/authenticated":"object",o=this.transformOptsToQueryString(n?.transform||{}),u=o?`?${o}`:"",d=this._getFinalPath(a),f=()=>Zr(this.fetch,`${this.url}/${r}/${d}${u}`,{headers:this.headers,noResolveJson:!0});return new yv(f,this.shouldThrowOnError)}async info(a){var n=this;const r=n._getFinalPath(a);try{return{data:Eu(await Zr(n.fetch,`${n.url}/object/info/${r}`,{headers:n.headers})),error:null}}catch(o){if(n.shouldThrowOnError)throw o;if(Je(o))return{data:null,error:o};throw o}}async exists(a){var n=this;const r=n._getFinalPath(a);try{return await gv(n.fetch,`${n.url}/object/${r}`,{headers:n.headers}),{data:!0,error:null}}catch(o){if(n.shouldThrowOnError)throw o;if(Je(o)&&o instanceof _u){const u=o.originalError;if([400,404].includes(u?.status))return{data:!1,error:o}}throw o}}getPublicUrl(a,n){const r=this._getFinalPath(a),o=[],u=n?.download?`download=${n.download===!0?"":n.download}`:"";u!==""&&o.push(u);const d=typeof n?.transform<"u"?"render/image":"object",f=this.transformOptsToQueryString(n?.transform||{});f!==""&&o.push(f);let p=o.join("&");return p!==""&&(p=`?${p}`),{data:{publicUrl:encodeURI(`${this.url}/${d}/public/${r}${p}`)}}}async remove(a){var n=this;try{return{data:await Hu(n.fetch,`${n.url}/object/${n.bucketId}`,{prefixes:a},{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(Je(r))return{data:null,error:r};throw r}}async list(a,n,r){var o=this;try{const u=ue(ue(ue({},bv),n),{},{prefix:a||""});return{data:await un(o.fetch,`${o.url}/object/list/${o.bucketId}`,u,{headers:o.headers},r),error:null}}catch(u){if(o.shouldThrowOnError)throw u;if(Je(u))return{data:null,error:u};throw u}}async listV2(a,n){var r=this;try{const o=ue({},a);return{data:await un(r.fetch,`${r.url}/object/list-v2/${r.bucketId}`,o,{headers:r.headers},n),error:null}}catch(o){if(r.shouldThrowOnError)throw o;if(Je(o))return{data:null,error:o};throw o}}encodeMetadata(a){return JSON.stringify(a)}toBase64(a){return typeof Buffer<"u"?Buffer.from(a).toString("base64"):btoa(a)}_getFinalPath(a){return`${this.bucketId}/${a.replace(/^\/+/,"")}`}_removeEmptyFolders(a){return a.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(a){const n=[];return a.width&&n.push(`width=${a.width}`),a.height&&n.push(`height=${a.height}`),a.resize&&n.push(`resize=${a.resize}`),a.format&&n.push(`format=${a.format}`),a.quality&&n.push(`quality=${a.quality}`),n.join("&")}};const sm="2.91.0",om={"X-Client-Info":`storage-js/${sm}`};var vv=class{constructor(a,n={},r,o){this.shouldThrowOnError=!1;const u=new URL(a);o?.useNewHostname&&/supabase\.(co|in|red)$/.test(u.hostname)&&!u.hostname.includes("storage.supabase.")&&(u.hostname=u.hostname.replace("supabase.","storage.supabase.")),this.url=u.href.replace(/\/$/,""),this.headers=ue(ue({},om),n),this.fetch=Lu(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async listBuckets(a){var n=this;try{const r=n.listBucketOptionsToQueryString(a);return{data:await Zr(n.fetch,`${n.url}/bucket${r}`,{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(Je(r))return{data:null,error:r};throw r}}async getBucket(a){var n=this;try{return{data:await Zr(n.fetch,`${n.url}/bucket/${a}`,{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(Je(r))return{data:null,error:r};throw r}}async createBucket(a,n={public:!1}){var r=this;try{return{data:await un(r.fetch,`${r.url}/bucket`,{id:a,name:a,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:r.headers}),error:null}}catch(o){if(r.shouldThrowOnError)throw o;if(Je(o))return{data:null,error:o};throw o}}async updateBucket(a,n){var r=this;try{return{data:await Ru(r.fetch,`${r.url}/bucket/${a}`,{id:a,name:a,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:r.headers}),error:null}}catch(o){if(r.shouldThrowOnError)throw o;if(Je(o))return{data:null,error:o};throw o}}async emptyBucket(a){var n=this;try{return{data:await un(n.fetch,`${n.url}/bucket/${a}/empty`,{},{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(Je(r))return{data:null,error:r};throw r}}async deleteBucket(a){var n=this;try{return{data:await Hu(n.fetch,`${n.url}/bucket/${a}`,{},{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(Je(r))return{data:null,error:r};throw r}}listBucketOptionsToQueryString(a){const n={};return a&&("limit"in a&&(n.limit=String(a.limit)),"offset"in a&&(n.offset=String(a.offset)),a.search&&(n.search=a.search),a.sortColumn&&(n.sortColumn=a.sortColumn),a.sortOrder&&(n.sortOrder=a.sortOrder)),Object.keys(n).length>0?"?"+new URLSearchParams(n).toString():""}},wv=class{constructor(a,n={},r){this.shouldThrowOnError=!1,this.url=a.replace(/\/$/,""),this.headers=ue(ue({},om),n),this.fetch=Lu(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(a){var n=this;try{return{data:await un(n.fetch,`${n.url}/bucket`,{name:a},{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(Je(r))return{data:null,error:r};throw r}}async listBuckets(a){var n=this;try{const r=new URLSearchParams;a?.limit!==void 0&&r.set("limit",a.limit.toString()),a?.offset!==void 0&&r.set("offset",a.offset.toString()),a?.sortColumn&&r.set("sortColumn",a.sortColumn),a?.sortOrder&&r.set("sortOrder",a.sortOrder),a?.search&&r.set("search",a.search);const o=r.toString(),u=o?`${n.url}/bucket?${o}`:`${n.url}/bucket`;return{data:await Zr(n.fetch,u,{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(Je(r))return{data:null,error:r};throw r}}async deleteBucket(a){var n=this;try{return{data:await Hu(n.fetch,`${n.url}/bucket/${a}`,{},{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(Je(r))return{data:null,error:r};throw r}}from(a){var n=this;if(!cv(a))throw new Bo("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const r=new rv({baseUrl:this.url,catalogName:a,auth:{type:"custom",getHeaders:async()=>n.headers},fetch:this.fetch}),o=this.shouldThrowOnError;return new Proxy(r,{get(u,d){const f=u[d];return typeof f!="function"?f:async(...p)=>{try{return{data:await f.apply(u,p),error:null}}catch(g){if(o)throw g;return{data:null,error:g}}}}})}};const qu={"X-Client-Info":`storage-js/${sm}`,"Content-Type":"application/json"};var lm=class extends Error{constructor(a){super(a),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}};function Pt(a){return typeof a=="object"&&a!==null&&"__isStorageVectorsError"in a}var ou=class extends lm{constructor(a,n,r){super(a),this.name="StorageVectorsApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},Sv=class extends lm{constructor(a,n){super(a),this.name="StorageVectorsUnknownError",this.originalError=n}};const $u=a=>a?(...n)=>a(...n):(...n)=>fetch(...n),_v=a=>{if(typeof a!="object"||a===null)return!1;const n=Object.getPrototypeOf(a);return(n===null||n===Object.prototype||Object.getPrototypeOf(n)===null)&&!(Symbol.toStringTag in a)&&!(Symbol.iterator in a)},gg=a=>a.msg||a.message||a.error_description||a.error||JSON.stringify(a),Ev=async(a,n,r)=>{if(a&&typeof a=="object"&&"status"in a&&"ok"in a&&typeof a.status=="number"&&!r?.noResolveJson){const o=a.status||500,u=a;if(typeof u.json=="function")u.json().then(d=>{const f=d?.statusCode||d?.code||o+"";n(new ou(gg(d),o,f))}).catch(()=>{const d=o+"";n(new ou(u.statusText||`HTTP ${o} error`,o,d))});else{const d=o+"";n(new ou(u.statusText||`HTTP ${o} error`,o,d))}}else n(new Sv(gg(a),a))},Rv=(a,n,r,o)=>{const u={method:a,headers:n?.headers||{}};return o?(_v(o)?(u.headers=ue({"Content-Type":"application/json"},n?.headers),u.body=JSON.stringify(o)):u.body=o,ue(ue({},u),r)):u};async function jv(a,n,r,o,u,d){return new Promise((f,p)=>{a(r,Rv(n,o,u,d)).then(g=>{if(!g.ok)throw g;if(o?.noResolveJson)return g;const y=g.headers.get("content-type");return!y||!y.includes("application/json")?{}:g.json()}).then(g=>f(g)).catch(g=>Ev(g,p,o))})}async function Wt(a,n,r,o,u){return jv(a,"POST",n,o,u,r)}var Cv=class{constructor(a,n={},r){this.shouldThrowOnError=!1,this.url=a.replace(/\/$/,""),this.headers=ue(ue({},qu),n),this.fetch=$u(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async createIndex(a){var n=this;try{return{data:await Wt(n.fetch,`${n.url}/CreateIndex`,a,{headers:n.headers})||{},error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(Pt(r))return{data:null,error:r};throw r}}async getIndex(a,n){var r=this;try{return{data:await Wt(r.fetch,`${r.url}/GetIndex`,{vectorBucketName:a,indexName:n},{headers:r.headers}),error:null}}catch(o){if(r.shouldThrowOnError)throw o;if(Pt(o))return{data:null,error:o};throw o}}async listIndexes(a){var n=this;try{return{data:await Wt(n.fetch,`${n.url}/ListIndexes`,a,{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(Pt(r))return{data:null,error:r};throw r}}async deleteIndex(a,n){var r=this;try{return{data:await Wt(r.fetch,`${r.url}/DeleteIndex`,{vectorBucketName:a,indexName:n},{headers:r.headers})||{},error:null}}catch(o){if(r.shouldThrowOnError)throw o;if(Pt(o))return{data:null,error:o};throw o}}},kv=class{constructor(a,n={},r){this.shouldThrowOnError=!1,this.url=a.replace(/\/$/,""),this.headers=ue(ue({},qu),n),this.fetch=$u(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async putVectors(a){var n=this;try{if(a.vectors.length<1||a.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:await Wt(n.fetch,`${n.url}/PutVectors`,a,{headers:n.headers})||{},error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(Pt(r))return{data:null,error:r};throw r}}async getVectors(a){var n=this;try{return{data:await Wt(n.fetch,`${n.url}/GetVectors`,a,{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(Pt(r))return{data:null,error:r};throw r}}async listVectors(a){var n=this;try{if(a.segmentCount!==void 0){if(a.segmentCount<1||a.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(a.segmentIndex!==void 0&&(a.segmentIndex<0||a.segmentIndex>=a.segmentCount))throw new Error(`segmentIndex must be between 0 and ${a.segmentCount-1}`)}return{data:await Wt(n.fetch,`${n.url}/ListVectors`,a,{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(Pt(r))return{data:null,error:r};throw r}}async queryVectors(a){var n=this;try{return{data:await Wt(n.fetch,`${n.url}/QueryVectors`,a,{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(Pt(r))return{data:null,error:r};throw r}}async deleteVectors(a){var n=this;try{if(a.keys.length<1||a.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:await Wt(n.fetch,`${n.url}/DeleteVectors`,a,{headers:n.headers})||{},error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(Pt(r))return{data:null,error:r};throw r}}},Tv=class{constructor(a,n={},r){this.shouldThrowOnError=!1,this.url=a.replace(/\/$/,""),this.headers=ue(ue({},qu),n),this.fetch=$u(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(a){var n=this;try{return{data:await Wt(n.fetch,`${n.url}/CreateVectorBucket`,{vectorBucketName:a},{headers:n.headers})||{},error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(Pt(r))return{data:null,error:r};throw r}}async getBucket(a){var n=this;try{return{data:await Wt(n.fetch,`${n.url}/GetVectorBucket`,{vectorBucketName:a},{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(Pt(r))return{data:null,error:r};throw r}}async listBuckets(a={}){var n=this;try{return{data:await Wt(n.fetch,`${n.url}/ListVectorBuckets`,a,{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(Pt(r))return{data:null,error:r};throw r}}async deleteBucket(a){var n=this;try{return{data:await Wt(n.fetch,`${n.url}/DeleteVectorBucket`,{vectorBucketName:a},{headers:n.headers})||{},error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(Pt(r))return{data:null,error:r};throw r}}},Av=class extends Tv{constructor(a,n={}){super(a,n.headers||{},n.fetch)}from(a){return new zv(this.url,this.headers,a,this.fetch)}async createBucket(a){var n=()=>super.createBucket,r=this;return n().call(r,a)}async getBucket(a){var n=()=>super.getBucket,r=this;return n().call(r,a)}async listBuckets(a={}){var n=()=>super.listBuckets,r=this;return n().call(r,a)}async deleteBucket(a){var n=()=>super.deleteBucket,r=this;return n().call(r,a)}},zv=class extends Cv{constructor(a,n,r,o){super(a,n,o),this.vectorBucketName=r}async createIndex(a){var n=()=>super.createIndex,r=this;return n().call(r,ue(ue({},a),{},{vectorBucketName:r.vectorBucketName}))}async listIndexes(a={}){var n=()=>super.listIndexes,r=this;return n().call(r,ue(ue({},a),{},{vectorBucketName:r.vectorBucketName}))}async getIndex(a){var n=()=>super.getIndex,r=this;return n().call(r,r.vectorBucketName,a)}async deleteIndex(a){var n=()=>super.deleteIndex,r=this;return n().call(r,r.vectorBucketName,a)}index(a){return new Ov(this.url,this.headers,this.vectorBucketName,a,this.fetch)}},Ov=class extends kv{constructor(a,n,r,o,u){super(a,n,u),this.vectorBucketName=r,this.indexName=o}async putVectors(a){var n=()=>super.putVectors,r=this;return n().call(r,ue(ue({},a),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async getVectors(a){var n=()=>super.getVectors,r=this;return n().call(r,ue(ue({},a),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async listVectors(a={}){var n=()=>super.listVectors,r=this;return n().call(r,ue(ue({},a),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async queryVectors(a){var n=()=>super.queryVectors,r=this;return n().call(r,ue(ue({},a),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async deleteVectors(a){var n=()=>super.deleteVectors,r=this;return n().call(r,ue(ue({},a),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}},Dv=class extends vv{constructor(a,n={},r,o){super(a,n,r,o)}from(a){return new xv(this.url,this.headers,a,this.fetch)}get vectors(){return new Av(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new wv(this.url+"/iceberg",this.headers,this.fetch)}};const cm="2.91.0",Da=30*1e3,ju=3,lu=ju*Da,Bv="http://localhost:9999",Nv="supabase.auth.token",Uv={"X-Client-Info":`gotrue-js/${cm}`},Cu="X-Supabase-Api-Version",um={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Mv=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Lv=600*1e3;class Vr extends Error{constructor(n,r,o){super(n),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=o}}function re(a){return typeof a=="object"&&a!==null&&"__isAuthError"in a}class Hv extends Vr{constructor(n,r,o){super(n,r,o),this.name="AuthApiError",this.status=r,this.code=o}}function qv(a){return re(a)&&a.name==="AuthApiError"}class Hi extends Vr{constructor(n,r){super(n),this.name="AuthUnknownError",this.originalError=r}}class In extends Vr{constructor(n,r,o,u){super(n,o,u),this.name=r,this.status=o}}class Gt extends In{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function $v(a){return re(a)&&a.name==="AuthSessionMissingError"}class Ca extends In{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class So extends In{constructor(n){super(n,"AuthInvalidCredentialsError",400,void 0)}}class _o extends In{constructor(n,r=null){super(n,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Iv(a){return re(a)&&a.name==="AuthImplicitGrantRedirectError"}class mg extends In{constructor(n,r=null){super(n,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Gv extends In{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class ku extends In{constructor(n,r){super(n,"AuthRetryableFetchError",r,void 0)}}function cu(a){return re(a)&&a.name==="AuthRetryableFetchError"}class yg extends In{constructor(n,r,o){super(n,"AuthWeakPasswordError",r,"weak_password"),this.reasons=o}}class Tu extends In{constructor(n){super(n,"AuthInvalidJwtError",400,"invalid_jwt")}}const ko="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),bg=` 	
\r=`.split(""),Pv=(()=>{const a=new Array(128);for(let n=0;n<a.length;n+=1)a[n]=-1;for(let n=0;n<bg.length;n+=1)a[bg[n].charCodeAt(0)]=-2;for(let n=0;n<ko.length;n+=1)a[ko[n].charCodeAt(0)]=n;return a})();function xg(a,n,r){if(a!==null)for(n.queue=n.queue<<8|a,n.queuedBits+=8;n.queuedBits>=6;){const o=n.queue>>n.queuedBits-6&63;r(ko[o]),n.queuedBits-=6}else if(n.queuedBits>0)for(n.queue=n.queue<<6-n.queuedBits,n.queuedBits=6;n.queuedBits>=6;){const o=n.queue>>n.queuedBits-6&63;r(ko[o]),n.queuedBits-=6}}function dm(a,n,r){const o=Pv[a];if(o>-1)for(n.queue=n.queue<<6|o,n.queuedBits+=6;n.queuedBits>=8;)r(n.queue>>n.queuedBits-8&255),n.queuedBits-=8;else{if(o===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(a)}"`)}}function vg(a){const n=[],r=f=>{n.push(String.fromCodePoint(f))},o={utf8seq:0,codepoint:0},u={queue:0,queuedBits:0},d=f=>{Vv(f,o,r)};for(let f=0;f<a.length;f+=1)dm(a.charCodeAt(f),u,d);return n.join("")}function Wv(a,n){if(a<=127){n(a);return}else if(a<=2047){n(192|a>>6),n(128|a&63);return}else if(a<=65535){n(224|a>>12),n(128|a>>6&63),n(128|a&63);return}else if(a<=1114111){n(240|a>>18),n(128|a>>12&63),n(128|a>>6&63),n(128|a&63);return}throw new Error(`Unrecognized Unicode codepoint: ${a.toString(16)}`)}function Zv(a,n){for(let r=0;r<a.length;r+=1){let o=a.charCodeAt(r);if(o>55295&&o<=56319){const u=(o-55296)*1024&65535;o=(a.charCodeAt(r+1)-56320&65535|u)+65536,r+=1}Wv(o,n)}}function Vv(a,n,r){if(n.utf8seq===0){if(a<=127){r(a);return}for(let o=1;o<6;o+=1)if((a>>7-o&1)===0){n.utf8seq=o;break}if(n.utf8seq===2)n.codepoint=a&31;else if(n.utf8seq===3)n.codepoint=a&15;else if(n.utf8seq===4)n.codepoint=a&7;else throw new Error("Invalid UTF-8 sequence");n.utf8seq-=1}else if(n.utf8seq>0){if(a<=127)throw new Error("Invalid UTF-8 sequence");n.codepoint=n.codepoint<<6|a&63,n.utf8seq-=1,n.utf8seq===0&&r(n.codepoint)}}function Ua(a){const n=[],r={queue:0,queuedBits:0},o=u=>{n.push(u)};for(let u=0;u<a.length;u+=1)dm(a.charCodeAt(u),r,o);return new Uint8Array(n)}function Yv(a){const n=[];return Zv(a,r=>n.push(r)),new Uint8Array(n)}function qi(a){const n=[],r={queue:0,queuedBits:0},o=u=>{n.push(u)};return a.forEach(u=>xg(u,r,o)),xg(null,r,o),n.join("")}function Kv(a){return Math.round(Date.now()/1e3)+a}function Jv(){return Symbol("auth-callback")}const wt=()=>typeof window<"u"&&typeof document<"u",Ni={tested:!1,writable:!1},hm=()=>{if(!wt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Ni.tested)return Ni.writable;const a=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(a,a),globalThis.localStorage.removeItem(a),Ni.tested=!0,Ni.writable=!0}catch{Ni.tested=!0,Ni.writable=!1}return Ni.writable};function Qv(a){const n={},r=new URL(a);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((u,d)=>{n[d]=u})}catch{}return r.searchParams.forEach((o,u)=>{n[u]=o}),n}const fm=a=>a?(...n)=>a(...n):(...n)=>fetch(...n),Xv=a=>typeof a=="object"&&a!==null&&"status"in a&&"ok"in a&&"json"in a&&typeof a.json=="function",Ba=async(a,n,r)=>{await a.setItem(n,JSON.stringify(r))},Ui=async(a,n)=>{const r=await a.getItem(n);if(!r)return null;try{return JSON.parse(r)}catch{return r}},vt=async(a,n)=>{await a.removeItem(n)};class No{constructor(){this.promise=new No.promiseConstructor((n,r)=>{this.resolve=n,this.reject=r})}}No.promiseConstructor=Promise;function uu(a){const n=a.split(".");if(n.length!==3)throw new Tu("Invalid JWT structure");for(let o=0;o<n.length;o++)if(!Mv.test(n[o]))throw new Tu("JWT not in base64url format");return{header:JSON.parse(vg(n[0])),payload:JSON.parse(vg(n[1])),signature:Ua(n[2]),raw:{header:n[0],payload:n[1]}}}async function Fv(a){return await new Promise(n=>{setTimeout(()=>n(null),a)})}function e1(a,n){return new Promise((o,u)=>{(async()=>{for(let d=0;d<1/0;d++)try{const f=await a(d);if(!n(d,null,f)){o(f);return}}catch(f){if(!n(d,f)){u(f);return}}})()})}function t1(a){return("0"+a.toString(16)).substr(-2)}function n1(){const n=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",o=r.length;let u="";for(let d=0;d<56;d++)u+=r.charAt(Math.floor(Math.random()*o));return u}return crypto.getRandomValues(n),Array.from(n,t1).join("")}async function i1(a){const r=new TextEncoder().encode(a),o=await crypto.subtle.digest("SHA-256",r),u=new Uint8Array(o);return Array.from(u).map(d=>String.fromCharCode(d)).join("")}async function a1(a){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),a;const r=await i1(a);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function ka(a,n,r=!1){const o=n1();let u=o;r&&(u+="/PASSWORD_RECOVERY"),await Ba(a,`${n}-code-verifier`,u);const d=await a1(o);return[d,o===d?"plain":"s256"]}const r1=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function s1(a){const n=a.headers.get(Cu);if(!n||!n.match(r1))return null;try{return new Date(`${n}T00:00:00.0Z`)}catch{return null}}function o1(a){if(!a)throw new Error("Missing exp claim");const n=Math.floor(Date.now()/1e3);if(a<=n)throw new Error("JWT has expired")}function l1(a){switch(a){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const c1=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Ta(a){if(!c1.test(a))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function du(){const a={};return new Proxy(a,{get:(n,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const o=r.toString();if(o==="Symbol(Symbol.toPrimitive)"||o==="Symbol(Symbol.toStringTag)"||o==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(n,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(n,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function u1(a,n){return new Proxy(a,{get:(r,o,u)=>{if(o==="__isInsecureUserWarningProxy")return!0;if(typeof o=="symbol"){const d=o.toString();if(d==="Symbol(Symbol.toPrimitive)"||d==="Symbol(Symbol.toStringTag)"||d==="Symbol(util.inspect.custom)"||d==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(r,o,u)}return!n.value&&typeof o=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),n.value=!0),Reflect.get(r,o,u)}})}function wg(a){return JSON.parse(JSON.stringify(a))}const Mi=a=>a.msg||a.message||a.error_description||a.error||JSON.stringify(a),d1=[502,503,504];async function Sg(a){var n;if(!Xv(a))throw new ku(Mi(a),0);if(d1.includes(a.status))throw new ku(Mi(a),a.status);let r;try{r=await a.json()}catch(d){throw new Hi(Mi(d),d)}let o;const u=s1(a);if(u&&u.getTime()>=um["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?o=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(o=r.error_code),o){if(o==="weak_password")throw new yg(Mi(r),a.status,((n=r.weak_password)===null||n===void 0?void 0:n.reasons)||[]);if(o==="session_not_found")throw new Gt}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((d,f)=>d&&typeof f=="string",!0))throw new yg(Mi(r),a.status,r.weak_password.reasons);throw new Hv(Mi(r),a.status||500,o)}const h1=(a,n,r,o)=>{const u={method:a,headers:n?.headers||{}};return a==="GET"?u:(u.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},n?.headers),u.body=JSON.stringify(o),Object.assign(Object.assign({},u),r))};async function ce(a,n,r,o){var u;const d=Object.assign({},o?.headers);d[Cu]||(d[Cu]=um["2024-01-01"].name),o?.jwt&&(d.Authorization=`Bearer ${o.jwt}`);const f=(u=o?.query)!==null&&u!==void 0?u:{};o?.redirectTo&&(f.redirect_to=o.redirectTo);const p=Object.keys(f).length?"?"+new URLSearchParams(f).toString():"",g=await f1(a,n,r+p,{headers:d,noResolveJson:o?.noResolveJson},{},o?.body);return o?.xform?o?.xform(g):{data:Object.assign({},g),error:null}}async function f1(a,n,r,o,u,d){const f=h1(n,o,u,d);let p;try{p=await a(r,Object.assign({},f))}catch(g){throw console.error(g),new ku(Mi(g),0)}if(p.ok||await Sg(p),o?.noResolveJson)return p;try{return await p.json()}catch(g){await Sg(g)}}function cn(a){var n;let r=null;m1(a)&&(r=Object.assign({},a),a.expires_at||(r.expires_at=Kv(a.expires_in)));const o=(n=a.user)!==null&&n!==void 0?n:a;return{data:{session:r,user:o},error:null}}function _g(a){const n=cn(a);return!n.error&&a.weak_password&&typeof a.weak_password=="object"&&Array.isArray(a.weak_password.reasons)&&a.weak_password.reasons.length&&a.weak_password.message&&typeof a.weak_password.message=="string"&&a.weak_password.reasons.reduce((r,o)=>r&&typeof o=="string",!0)&&(n.data.weak_password=a.weak_password),n}function mi(a){var n;return{data:{user:(n=a.user)!==null&&n!==void 0?n:a},error:null}}function p1(a){return{data:a,error:null}}function g1(a){const{action_link:n,email_otp:r,hashed_token:o,redirect_to:u,verification_type:d}=a,f=Do(a,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),p={action_link:n,email_otp:r,hashed_token:o,redirect_to:u,verification_type:d},g=Object.assign({},f);return{data:{properties:p,user:g},error:null}}function Eg(a){return a}function m1(a){return a.access_token&&a.refresh_token&&a.expires_in}const hu=["global","local","others"];class y1{constructor({url:n="",headers:r={},fetch:o}){this.url=n,this.headers=r,this.fetch=fm(o),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(n,r=hu[0]){if(hu.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${hu.join(", ")}`);try{return await ce(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:n,noResolveJson:!0}),{data:null,error:null}}catch(o){if(re(o))return{data:null,error:o};throw o}}async inviteUserByEmail(n,r={}){try{return await ce(this.fetch,"POST",`${this.url}/invite`,{body:{email:n,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:mi})}catch(o){if(re(o))return{data:{user:null},error:o};throw o}}async generateLink(n){try{const{options:r}=n,o=Do(n,["options"]),u=Object.assign(Object.assign({},o),r);return"newEmail"in o&&(u.new_email=o?.newEmail,delete u.newEmail),await ce(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:u,headers:this.headers,xform:g1,redirectTo:r?.redirectTo})}catch(r){if(re(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(n){try{return await ce(this.fetch,"POST",`${this.url}/admin/users`,{body:n,headers:this.headers,xform:mi})}catch(r){if(re(r))return{data:{user:null},error:r};throw r}}async listUsers(n){var r,o,u,d,f,p,g;try{const y={nextPage:null,lastPage:0,total:0},b=await ce(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(o=(r=n?.page)===null||r===void 0?void 0:r.toString())!==null&&o!==void 0?o:"",per_page:(d=(u=n?.perPage)===null||u===void 0?void 0:u.toString())!==null&&d!==void 0?d:""},xform:Eg});if(b.error)throw b.error;const x=await b.json(),S=(f=b.headers.get("x-total-count"))!==null&&f!==void 0?f:0,_=(g=(p=b.headers.get("link"))===null||p===void 0?void 0:p.split(","))!==null&&g!==void 0?g:[];return _.length>0&&(_.forEach(E=>{const R=parseInt(E.split(";")[0].split("=")[1].substring(0,1)),T=JSON.parse(E.split(";")[1].split("=")[1]);y[`${T}Page`]=R}),y.total=parseInt(S)),{data:Object.assign(Object.assign({},x),y),error:null}}catch(y){if(re(y))return{data:{users:[]},error:y};throw y}}async getUserById(n){Ta(n);try{return await ce(this.fetch,"GET",`${this.url}/admin/users/${n}`,{headers:this.headers,xform:mi})}catch(r){if(re(r))return{data:{user:null},error:r};throw r}}async updateUserById(n,r){Ta(n);try{return await ce(this.fetch,"PUT",`${this.url}/admin/users/${n}`,{body:r,headers:this.headers,xform:mi})}catch(o){if(re(o))return{data:{user:null},error:o};throw o}}async deleteUser(n,r=!1){Ta(n);try{return await ce(this.fetch,"DELETE",`${this.url}/admin/users/${n}`,{headers:this.headers,body:{should_soft_delete:r},xform:mi})}catch(o){if(re(o))return{data:{user:null},error:o};throw o}}async _listFactors(n){Ta(n.userId);try{const{data:r,error:o}=await ce(this.fetch,"GET",`${this.url}/admin/users/${n.userId}/factors`,{headers:this.headers,xform:u=>({data:{factors:u},error:null})});return{data:r,error:o}}catch(r){if(re(r))return{data:null,error:r};throw r}}async _deleteFactor(n){Ta(n.userId),Ta(n.id);try{return{data:await ce(this.fetch,"DELETE",`${this.url}/admin/users/${n.userId}/factors/${n.id}`,{headers:this.headers}),error:null}}catch(r){if(re(r))return{data:null,error:r};throw r}}async _listOAuthClients(n){var r,o,u,d,f,p,g;try{const y={nextPage:null,lastPage:0,total:0},b=await ce(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(o=(r=n?.page)===null||r===void 0?void 0:r.toString())!==null&&o!==void 0?o:"",per_page:(d=(u=n?.perPage)===null||u===void 0?void 0:u.toString())!==null&&d!==void 0?d:""},xform:Eg});if(b.error)throw b.error;const x=await b.json(),S=(f=b.headers.get("x-total-count"))!==null&&f!==void 0?f:0,_=(g=(p=b.headers.get("link"))===null||p===void 0?void 0:p.split(","))!==null&&g!==void 0?g:[];return _.length>0&&(_.forEach(E=>{const R=parseInt(E.split(";")[0].split("=")[1].substring(0,1)),T=JSON.parse(E.split(";")[1].split("=")[1]);y[`${T}Page`]=R}),y.total=parseInt(S)),{data:Object.assign(Object.assign({},x),y),error:null}}catch(y){if(re(y))return{data:{clients:[]},error:y};throw y}}async _createOAuthClient(n){try{return await ce(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:n,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(re(r))return{data:null,error:r};throw r}}async _getOAuthClient(n){try{return await ce(this.fetch,"GET",`${this.url}/admin/oauth/clients/${n}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(re(r))return{data:null,error:r};throw r}}async _updateOAuthClient(n,r){try{return await ce(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${n}`,{body:r,headers:this.headers,xform:o=>({data:o,error:null})})}catch(o){if(re(o))return{data:null,error:o};throw o}}async _deleteOAuthClient(n){try{return await ce(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${n}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(r){if(re(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(n){try{return await ce(this.fetch,"POST",`${this.url}/admin/oauth/clients/${n}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(re(r))return{data:null,error:r};throw r}}}function Rg(a={}){return{getItem:n=>a[n]||null,setItem:(n,r)=>{a[n]=r},removeItem:n=>{delete a[n]}}}const Aa={debug:!!(globalThis&&hm()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class pm extends Error{constructor(n){super(n),this.isAcquireTimeout=!0}}class b1 extends pm{}async function x1(a,n,r){Aa.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",a,n);const o=new globalThis.AbortController;return n>0&&setTimeout(()=>{o.abort(),Aa.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",a)},n),await Promise.resolve().then(()=>globalThis.navigator.locks.request(a,n===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:o.signal},async u=>{if(u){Aa.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",a,u.name);try{return await r()}finally{Aa.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",a,u.name)}}else{if(n===0)throw Aa.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",a),new b1(`Acquiring an exclusive Navigator LockManager lock "${a}" immediately failed`);if(Aa.debug)try{const d=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(d,null,"  "))}catch(d){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",d)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}function v1(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function gm(a){if(!/^0x[a-fA-F0-9]{40}$/.test(a))throw new Error(`@supabase/auth-js: Address "${a}" is invalid.`);return a.toLowerCase()}function w1(a){return parseInt(a,16)}function S1(a){const n=new TextEncoder().encode(a);return"0x"+Array.from(n,o=>o.toString(16).padStart(2,"0")).join("")}function _1(a){var n;const{chainId:r,domain:o,expirationTime:u,issuedAt:d=new Date,nonce:f,notBefore:p,requestId:g,resources:y,scheme:b,uri:x,version:S}=a;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!o)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(f&&f.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${f}`);if(!x)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(S!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${S}`);if(!((n=a.statement)===null||n===void 0)&&n.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${a.statement}`)}const _=gm(a.address),E=b?`${b}://${o}`:o,R=a.statement?`${a.statement}
`:"",T=`${E} wants you to sign in with your Ethereum account:
${_}

${R}`;let O=`URI: ${x}
Version: ${S}
Chain ID: ${r}${f?`
Nonce: ${f}`:""}
Issued At: ${d.toISOString()}`;if(u&&(O+=`
Expiration Time: ${u.toISOString()}`),p&&(O+=`
Not Before: ${p.toISOString()}`),g&&(O+=`
Request ID: ${g}`),y){let z=`
Resources:`;for(const B of y){if(!B||typeof B!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${B}`);z+=`
- ${B}`}O+=z}return`${T}
${O}`}class ct extends Error{constructor({message:n,code:r,cause:o,name:u}){var d;super(n,{cause:o}),this.__isWebAuthnError=!0,this.name=(d=u??(o instanceof Error?o.name:void 0))!==null&&d!==void 0?d:"Unknown Error",this.code=r}}class To extends ct{constructor(n,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:n}),this.name="WebAuthnUnknownError",this.originalError=r}}function E1({error:a,options:n}){var r,o,u;const{publicKey:d}=n;if(!d)throw Error("options was missing required publicKey property");if(a.name==="AbortError"){if(n.signal instanceof AbortSignal)return new ct({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:a})}else if(a.name==="ConstraintError"){if(((r=d.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new ct({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:a});if(n.mediation==="conditional"&&((o=d.authenticatorSelection)===null||o===void 0?void 0:o.userVerification)==="required")return new ct({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:a});if(((u=d.authenticatorSelection)===null||u===void 0?void 0:u.userVerification)==="required")return new ct({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:a})}else{if(a.name==="InvalidStateError")return new ct({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:a});if(a.name==="NotAllowedError")return new ct({message:a.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:a});if(a.name==="NotSupportedError")return d.pubKeyCredParams.filter(p=>p.type==="public-key").length===0?new ct({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:a}):new ct({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:a});if(a.name==="SecurityError"){const f=window.location.hostname;if(mm(f)){if(d.rp.id!==f)return new ct({message:`The RP ID "${d.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:a})}else return new ct({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:a})}else if(a.name==="TypeError"){if(d.user.id.byteLength<1||d.user.id.byteLength>64)return new ct({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:a})}else if(a.name==="UnknownError")return new ct({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:a})}return new ct({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:a})}function R1({error:a,options:n}){const{publicKey:r}=n;if(!r)throw Error("options was missing required publicKey property");if(a.name==="AbortError"){if(n.signal instanceof AbortSignal)return new ct({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:a})}else{if(a.name==="NotAllowedError")return new ct({message:a.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:a});if(a.name==="SecurityError"){const o=window.location.hostname;if(mm(o)){if(r.rpId!==o)return new ct({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:a})}else return new ct({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:a})}else if(a.name==="UnknownError")return new ct({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:a})}return new ct({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:a})}class j1{createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const n=new AbortController;return this.controller=n,n.signal}cancelCeremony(){if(this.controller){const n=new Error("Manually cancelling existing WebAuthn API call");n.name="AbortError",this.controller.abort(n),this.controller=void 0}}}const C1=new j1;function k1(a){if(!a)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(a);const{challenge:n,user:r,excludeCredentials:o}=a,u=Do(a,["challenge","user","excludeCredentials"]),d=Ua(n).buffer,f=Object.assign(Object.assign({},r),{id:Ua(r.id).buffer}),p=Object.assign(Object.assign({},u),{challenge:d,user:f});if(o&&o.length>0){p.excludeCredentials=new Array(o.length);for(let g=0;g<o.length;g++){const y=o[g];p.excludeCredentials[g]=Object.assign(Object.assign({},y),{id:Ua(y.id).buffer,type:y.type||"public-key",transports:y.transports})}}return p}function T1(a){if(!a)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(a);const{challenge:n,allowCredentials:r}=a,o=Do(a,["challenge","allowCredentials"]),u=Ua(n).buffer,d=Object.assign(Object.assign({},o),{challenge:u});if(r&&r.length>0){d.allowCredentials=new Array(r.length);for(let f=0;f<r.length;f++){const p=r[f];d.allowCredentials[f]=Object.assign(Object.assign({},p),{id:Ua(p.id).buffer,type:p.type||"public-key",transports:p.transports})}}return d}function A1(a){var n;if("toJSON"in a&&typeof a.toJSON=="function")return a.toJSON();const r=a;return{id:a.id,rawId:a.id,response:{attestationObject:qi(new Uint8Array(a.response.attestationObject)),clientDataJSON:qi(new Uint8Array(a.response.clientDataJSON))},type:"public-key",clientExtensionResults:a.getClientExtensionResults(),authenticatorAttachment:(n=r.authenticatorAttachment)!==null&&n!==void 0?n:void 0}}function z1(a){var n;if("toJSON"in a&&typeof a.toJSON=="function")return a.toJSON();const r=a,o=a.getClientExtensionResults(),u=a.response;return{id:a.id,rawId:a.id,response:{authenticatorData:qi(new Uint8Array(u.authenticatorData)),clientDataJSON:qi(new Uint8Array(u.clientDataJSON)),signature:qi(new Uint8Array(u.signature)),userHandle:u.userHandle?qi(new Uint8Array(u.userHandle)):void 0},type:"public-key",clientExtensionResults:o,authenticatorAttachment:(n=r.authenticatorAttachment)!==null&&n!==void 0?n:void 0}}function mm(a){return a==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(a)}function jg(){var a,n;return!!(wt()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((a=navigator?.credentials)===null||a===void 0?void 0:a.create)=="function"&&typeof((n=navigator?.credentials)===null||n===void 0?void 0:n.get)=="function")}async function O1(a){try{const n=await navigator.credentials.create(a);return n?n instanceof PublicKeyCredential?{data:n,error:null}:{data:null,error:new To("Browser returned unexpected credential type",n)}:{data:null,error:new To("Empty credential response",n)}}catch(n){return{data:null,error:E1({error:n,options:a})}}}async function D1(a){try{const n=await navigator.credentials.get(a);return n?n instanceof PublicKeyCredential?{data:n,error:null}:{data:null,error:new To("Browser returned unexpected credential type",n)}:{data:null,error:new To("Empty credential response",n)}}catch(n){return{data:null,error:R1({error:n,options:a})}}}const B1={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},N1={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function Ao(...a){const n=u=>u!==null&&typeof u=="object"&&!Array.isArray(u),r=u=>u instanceof ArrayBuffer||ArrayBuffer.isView(u),o={};for(const u of a)if(u)for(const d in u){const f=u[d];if(f!==void 0)if(Array.isArray(f))o[d]=f;else if(r(f))o[d]=f;else if(n(f)){const p=o[d];n(p)?o[d]=Ao(p,f):o[d]=Ao(f)}else o[d]=f}return o}function U1(a,n){return Ao(B1,a,n||{})}function M1(a,n){return Ao(N1,a,n||{})}class L1{constructor(n){this.client=n,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(n){return this.client.mfa.enroll(Object.assign(Object.assign({},n),{factorType:"webauthn"}))}async _challenge({factorId:n,webauthn:r,friendlyName:o,signal:u},d){try{const{data:f,error:p}=await this.client.mfa.challenge({factorId:n,webauthn:r});if(!f)return{data:null,error:p};const g=u??C1.createNewAbortSignal();if(f.webauthn.type==="create"){const{user:y}=f.webauthn.credential_options.publicKey;y.name||(y.name=`${y.id}:${o}`),y.displayName||(y.displayName=y.name)}switch(f.webauthn.type){case"create":{const y=U1(f.webauthn.credential_options.publicKey,d?.create),{data:b,error:x}=await O1({publicKey:y,signal:g});return b?{data:{factorId:n,challengeId:f.id,webauthn:{type:f.webauthn.type,credential_response:b}},error:null}:{data:null,error:x}}case"request":{const y=M1(f.webauthn.credential_options.publicKey,d?.request),{data:b,error:x}=await D1(Object.assign(Object.assign({},f.webauthn.credential_options),{publicKey:y,signal:g}));return b?{data:{factorId:n,challengeId:f.id,webauthn:{type:f.webauthn.type,credential_response:b}},error:null}:{data:null,error:x}}}}catch(f){return re(f)?{data:null,error:f}:{data:null,error:new Hi("Unexpected error in challenge",f)}}}async _verify({challengeId:n,factorId:r,webauthn:o}){return this.client.mfa.verify({factorId:r,challengeId:n,webauthn:o})}async _authenticate({factorId:n,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:o=typeof window<"u"?[window.location.origin]:void 0,signal:u}={}},d){if(!r)return{data:null,error:new Vr("rpId is required for WebAuthn authentication")};try{if(!jg())return{data:null,error:new Hi("Browser does not support WebAuthn",null)};const{data:f,error:p}=await this.challenge({factorId:n,webauthn:{rpId:r,rpOrigins:o},signal:u},{request:d});if(!f)return{data:null,error:p};const{webauthn:g}=f;return this._verify({factorId:n,challengeId:f.challengeId,webauthn:{type:g.type,rpId:r,rpOrigins:o,credential_response:g.credential_response}})}catch(f){return re(f)?{data:null,error:f}:{data:null,error:new Hi("Unexpected error in authenticate",f)}}}async _register({friendlyName:n,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:o=typeof window<"u"?[window.location.origin]:void 0,signal:u}={}},d){if(!r)return{data:null,error:new Vr("rpId is required for WebAuthn registration")};try{if(!jg())return{data:null,error:new Hi("Browser does not support WebAuthn",null)};const{data:f,error:p}=await this._enroll({friendlyName:n});if(!f)return await this.client.mfa.listFactors().then(b=>{var x;return(x=b.data)===null||x===void 0?void 0:x.all.find(S=>S.factor_type==="webauthn"&&S.friendly_name===n&&S.status!=="unverified")}).then(b=>b?this.client.mfa.unenroll({factorId:b?.id}):void 0),{data:null,error:p};const{data:g,error:y}=await this._challenge({factorId:f.id,friendlyName:f.friendly_name,webauthn:{rpId:r,rpOrigins:o},signal:u},{create:d});return g?this._verify({factorId:f.id,challengeId:g.challengeId,webauthn:{rpId:r,rpOrigins:o,type:g.webauthn.type,credential_response:g.webauthn.credential_response}}):{data:null,error:y}}catch(f){return re(f)?{data:null,error:f}:{data:null,error:new Hi("Unexpected error in register",f)}}}}v1();const H1={url:Bv,storageKey:Nv,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Uv,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4};async function Cg(a,n,r){return await r()}const za={};class Yr{get jwks(){var n,r;return(r=(n=za[this.storageKey])===null||n===void 0?void 0:n.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(n){za[this.storageKey]=Object.assign(Object.assign({},za[this.storageKey]),{jwks:n})}get jwks_cached_at(){var n,r;return(r=(n=za[this.storageKey])===null||n===void 0?void 0:n.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(n){za[this.storageKey]=Object.assign(Object.assign({},za[this.storageKey]),{cachedAt:n})}constructor(n){var r,o,u;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const d=Object.assign(Object.assign({},H1),n);if(this.storageKey=d.storageKey,this.instanceID=(r=Yr.nextInstanceID[this.storageKey])!==null&&r!==void 0?r:0,Yr.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!d.debug,typeof d.debug=="function"&&(this.logger=d.debug),this.instanceID>0&&wt()){const f=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(f),this.logDebugMessages&&console.trace(f)}if(this.persistSession=d.persistSession,this.autoRefreshToken=d.autoRefreshToken,this.admin=new y1({url:d.url,headers:d.headers,fetch:d.fetch}),this.url=d.url,this.headers=d.headers,this.fetch=fm(d.fetch),this.lock=d.lock||Cg,this.detectSessionInUrl=d.detectSessionInUrl,this.flowType=d.flowType,this.hasCustomAuthorizationHeader=d.hasCustomAuthorizationHeader,this.throwOnError=d.throwOnError,this.lockAcquireTimeout=d.lockAcquireTimeout,d.lock?this.lock=d.lock:this.persistSession&&wt()&&(!((o=globalThis?.navigator)===null||o===void 0)&&o.locks)?this.lock=x1:this.lock=Cg,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new L1(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(d.storage?this.storage=d.storage:hm()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Rg(this.memoryStorage)),d.userStorage&&(this.userStorage=d.userStorage)):(this.memoryStorage={},this.storage=Rg(this.memoryStorage)),wt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(f){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",f)}(u=this.broadcastChannel)===null||u===void 0||u.addEventListener("message",async f=>{this._debug("received broadcast notification from other tab or client",f),await this._notifyAllSubscribers(f.data.event,f.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(n){if(this.throwOnError&&n&&n.error)throw n.error;return n}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${cm}) ${new Date().toISOString()}`}_debug(...n){return this.logDebugMessages&&this.logger(this._logPrefix(),...n),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(this.lockAcquireTimeout,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var n;try{let r={},o="none";if(wt()&&(r=Qv(window.location.href),this._isImplicitGrantCallback(r)?o="implicit":await this._isPKCECallback(r)&&(o="pkce")),wt()&&this.detectSessionInUrl&&o!=="none"){const{data:u,error:d}=await this._getSessionFromURL(r,o);if(d){if(this._debug("#_initialize()","error detecting session from URL",d),Iv(d)){const g=(n=d.details)===null||n===void 0?void 0:n.code;if(g==="identity_already_exists"||g==="identity_not_found"||g==="single_identity_not_deletable")return{error:d}}return{error:d}}const{session:f,redirectType:p}=u;return this._debug("#_initialize()","detected session in URL",f,"redirect type",p),await this._saveSession(f),setTimeout(async()=>{p==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",f):await this._notifyAllSubscribers("SIGNED_IN",f)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return re(r)?this._returnResult({error:r}):this._returnResult({error:new Hi("Unexpected error during initialization",r)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(n){var r,o,u;try{const d=await ce(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(o=(r=n?.options)===null||r===void 0?void 0:r.data)!==null&&o!==void 0?o:{},gotrue_meta_security:{captcha_token:(u=n?.options)===null||u===void 0?void 0:u.captchaToken}},xform:cn}),{data:f,error:p}=d;if(p||!f)return this._returnResult({data:{user:null,session:null},error:p});const g=f.session,y=f.user;return f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("SIGNED_IN",g)),this._returnResult({data:{user:y,session:g},error:null})}catch(d){if(re(d))return this._returnResult({data:{user:null,session:null},error:d});throw d}}async signUp(n){var r,o,u;try{let d;if("email"in n){const{email:b,password:x,options:S}=n;let _=null,E=null;this.flowType==="pkce"&&([_,E]=await ka(this.storage,this.storageKey)),d=await ce(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:S?.emailRedirectTo,body:{email:b,password:x,data:(r=S?.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:S?.captchaToken},code_challenge:_,code_challenge_method:E},xform:cn})}else if("phone"in n){const{phone:b,password:x,options:S}=n;d=await ce(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:b,password:x,data:(o=S?.data)!==null&&o!==void 0?o:{},channel:(u=S?.channel)!==null&&u!==void 0?u:"sms",gotrue_meta_security:{captcha_token:S?.captchaToken}},xform:cn})}else throw new So("You must provide either an email or phone number and a password");const{data:f,error:p}=d;if(p||!f)return await vt(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:p});const g=f.session,y=f.user;return f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("SIGNED_IN",g)),this._returnResult({data:{user:y,session:g},error:null})}catch(d){if(await vt(this.storage,`${this.storageKey}-code-verifier`),re(d))return this._returnResult({data:{user:null,session:null},error:d});throw d}}async signInWithPassword(n){try{let r;if("email"in n){const{email:d,password:f,options:p}=n;r=await ce(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:d,password:f,gotrue_meta_security:{captcha_token:p?.captchaToken}},xform:_g})}else if("phone"in n){const{phone:d,password:f,options:p}=n;r=await ce(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:d,password:f,gotrue_meta_security:{captcha_token:p?.captchaToken}},xform:_g})}else throw new So("You must provide either an email or phone number and a password");const{data:o,error:u}=r;if(u)return this._returnResult({data:{user:null,session:null},error:u});if(!o||!o.session||!o.user){const d=new Ca;return this._returnResult({data:{user:null,session:null},error:d})}return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),this._returnResult({data:Object.assign({user:o.user,session:o.session},o.weak_password?{weakPassword:o.weak_password}:null),error:u})}catch(r){if(re(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOAuth(n){var r,o,u,d;return await this._handleProviderSignIn(n.provider,{redirectTo:(r=n.options)===null||r===void 0?void 0:r.redirectTo,scopes:(o=n.options)===null||o===void 0?void 0:o.scopes,queryParams:(u=n.options)===null||u===void 0?void 0:u.queryParams,skipBrowserRedirect:(d=n.options)===null||d===void 0?void 0:d.skipBrowserRedirect})}async exchangeCodeForSession(n){return await this.initializePromise,this._acquireLock(this.lockAcquireTimeout,async()=>this._exchangeCodeForSession(n))}async signInWithWeb3(n){const{chain:r}=n;switch(r){case"ethereum":return await this.signInWithEthereum(n);case"solana":return await this.signInWithSolana(n);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(n){var r,o,u,d,f,p,g,y,b,x,S;let _,E;if("message"in n)_=n.message,E=n.signature;else{const{chain:R,wallet:T,statement:O,options:z}=n;let B;if(wt())if(typeof T=="object")B=T;else{const F=window;if("ethereum"in F&&typeof F.ethereum=="object"&&"request"in F.ethereum&&typeof F.ethereum.request=="function")B=F.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof T!="object"||!z?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");B=T}const Y=new URL((r=z?.url)!==null&&r!==void 0?r:window.location.href),J=await B.request({method:"eth_requestAccounts"}).then(F=>F).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!J||J.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const G=gm(J[0]);let K=(o=z?.signInWithEthereum)===null||o===void 0?void 0:o.chainId;if(!K){const F=await B.request({method:"eth_chainId"});K=w1(F)}const P={domain:Y.host,address:G,statement:O,uri:Y.href,version:"1",chainId:K,nonce:(u=z?.signInWithEthereum)===null||u===void 0?void 0:u.nonce,issuedAt:(f=(d=z?.signInWithEthereum)===null||d===void 0?void 0:d.issuedAt)!==null&&f!==void 0?f:new Date,expirationTime:(p=z?.signInWithEthereum)===null||p===void 0?void 0:p.expirationTime,notBefore:(g=z?.signInWithEthereum)===null||g===void 0?void 0:g.notBefore,requestId:(y=z?.signInWithEthereum)===null||y===void 0?void 0:y.requestId,resources:(b=z?.signInWithEthereum)===null||b===void 0?void 0:b.resources};_=_1(P),E=await B.request({method:"personal_sign",params:[S1(_),G]})}try{const{data:R,error:T}=await ce(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:_,signature:E},!((x=n.options)===null||x===void 0)&&x.captchaToken?{gotrue_meta_security:{captcha_token:(S=n.options)===null||S===void 0?void 0:S.captchaToken}}:null),xform:cn});if(T)throw T;if(!R||!R.session||!R.user){const O=new Ca;return this._returnResult({data:{user:null,session:null},error:O})}return R.session&&(await this._saveSession(R.session),await this._notifyAllSubscribers("SIGNED_IN",R.session)),this._returnResult({data:Object.assign({},R),error:T})}catch(R){if(re(R))return this._returnResult({data:{user:null,session:null},error:R});throw R}}async signInWithSolana(n){var r,o,u,d,f,p,g,y,b,x,S,_;let E,R;if("message"in n)E=n.message,R=n.signature;else{const{chain:T,wallet:O,statement:z,options:B}=n;let Y;if(wt())if(typeof O=="object")Y=O;else{const G=window;if("solana"in G&&typeof G.solana=="object"&&("signIn"in G.solana&&typeof G.solana.signIn=="function"||"signMessage"in G.solana&&typeof G.solana.signMessage=="function"))Y=G.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof O!="object"||!B?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");Y=O}const J=new URL((r=B?.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in Y&&Y.signIn){const G=await Y.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},B?.signInWithSolana),{version:"1",domain:J.host,uri:J.href}),z?{statement:z}:null));let K;if(Array.isArray(G)&&G[0]&&typeof G[0]=="object")K=G[0];else if(G&&typeof G=="object"&&"signedMessage"in G&&"signature"in G)K=G;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in K&&"signature"in K&&(typeof K.signedMessage=="string"||K.signedMessage instanceof Uint8Array)&&K.signature instanceof Uint8Array)E=typeof K.signedMessage=="string"?K.signedMessage:new TextDecoder().decode(K.signedMessage),R=K.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in Y)||typeof Y.signMessage!="function"||!("publicKey"in Y)||typeof Y!="object"||!Y.publicKey||!("toBase58"in Y.publicKey)||typeof Y.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");E=[`${J.host} wants you to sign in with your Solana account:`,Y.publicKey.toBase58(),...z?["",z,""]:[""],"Version: 1",`URI: ${J.href}`,`Issued At: ${(u=(o=B?.signInWithSolana)===null||o===void 0?void 0:o.issuedAt)!==null&&u!==void 0?u:new Date().toISOString()}`,...!((d=B?.signInWithSolana)===null||d===void 0)&&d.notBefore?[`Not Before: ${B.signInWithSolana.notBefore}`]:[],...!((f=B?.signInWithSolana)===null||f===void 0)&&f.expirationTime?[`Expiration Time: ${B.signInWithSolana.expirationTime}`]:[],...!((p=B?.signInWithSolana)===null||p===void 0)&&p.chainId?[`Chain ID: ${B.signInWithSolana.chainId}`]:[],...!((g=B?.signInWithSolana)===null||g===void 0)&&g.nonce?[`Nonce: ${B.signInWithSolana.nonce}`]:[],...!((y=B?.signInWithSolana)===null||y===void 0)&&y.requestId?[`Request ID: ${B.signInWithSolana.requestId}`]:[],...!((x=(b=B?.signInWithSolana)===null||b===void 0?void 0:b.resources)===null||x===void 0)&&x.length?["Resources",...B.signInWithSolana.resources.map(K=>`- ${K}`)]:[]].join(`
`);const G=await Y.signMessage(new TextEncoder().encode(E),"utf8");if(!G||!(G instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");R=G}}try{const{data:T,error:O}=await ce(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:E,signature:qi(R)},!((S=n.options)===null||S===void 0)&&S.captchaToken?{gotrue_meta_security:{captcha_token:(_=n.options)===null||_===void 0?void 0:_.captchaToken}}:null),xform:cn});if(O)throw O;if(!T||!T.session||!T.user){const z=new Ca;return this._returnResult({data:{user:null,session:null},error:z})}return T.session&&(await this._saveSession(T.session),await this._notifyAllSubscribers("SIGNED_IN",T.session)),this._returnResult({data:Object.assign({},T),error:O})}catch(T){if(re(T))return this._returnResult({data:{user:null,session:null},error:T});throw T}}async _exchangeCodeForSession(n){const r=await Ui(this.storage,`${this.storageKey}-code-verifier`),[o,u]=(r??"").split("/");try{if(!o&&this.flowType==="pkce")throw new Gv;const{data:d,error:f}=await ce(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:n,code_verifier:o},xform:cn});if(await vt(this.storage,`${this.storageKey}-code-verifier`),f)throw f;if(!d||!d.session||!d.user){const p=new Ca;return this._returnResult({data:{user:null,session:null,redirectType:null},error:p})}return d.session&&(await this._saveSession(d.session),setTimeout(async()=>{await this._notifyAllSubscribers("SIGNED_IN",d.session)},0)),this._returnResult({data:Object.assign(Object.assign({},d),{redirectType:u??null}),error:f})}catch(d){if(await vt(this.storage,`${this.storageKey}-code-verifier`),re(d))return this._returnResult({data:{user:null,session:null,redirectType:null},error:d});throw d}}async signInWithIdToken(n){try{const{options:r,provider:o,token:u,access_token:d,nonce:f}=n,p=await ce(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:o,id_token:u,access_token:d,nonce:f,gotrue_meta_security:{captcha_token:r?.captchaToken}},xform:cn}),{data:g,error:y}=p;if(y)return this._returnResult({data:{user:null,session:null},error:y});if(!g||!g.session||!g.user){const b=new Ca;return this._returnResult({data:{user:null,session:null},error:b})}return g.session&&(await this._saveSession(g.session),await this._notifyAllSubscribers("SIGNED_IN",g.session)),this._returnResult({data:g,error:y})}catch(r){if(re(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOtp(n){var r,o,u,d,f;try{if("email"in n){const{email:p,options:g}=n;let y=null,b=null;this.flowType==="pkce"&&([y,b]=await ka(this.storage,this.storageKey));const{error:x}=await ce(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:p,data:(r=g?.data)!==null&&r!==void 0?r:{},create_user:(o=g?.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:g?.captchaToken},code_challenge:y,code_challenge_method:b},redirectTo:g?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:x})}if("phone"in n){const{phone:p,options:g}=n,{data:y,error:b}=await ce(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:p,data:(u=g?.data)!==null&&u!==void 0?u:{},create_user:(d=g?.shouldCreateUser)!==null&&d!==void 0?d:!0,gotrue_meta_security:{captcha_token:g?.captchaToken},channel:(f=g?.channel)!==null&&f!==void 0?f:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:y?.message_id},error:b})}throw new So("You must provide either an email or phone number.")}catch(p){if(await vt(this.storage,`${this.storageKey}-code-verifier`),re(p))return this._returnResult({data:{user:null,session:null},error:p});throw p}}async verifyOtp(n){var r,o;try{let u,d;"options"in n&&(u=(r=n.options)===null||r===void 0?void 0:r.redirectTo,d=(o=n.options)===null||o===void 0?void 0:o.captchaToken);const{data:f,error:p}=await ce(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},n),{gotrue_meta_security:{captcha_token:d}}),redirectTo:u,xform:cn});if(p)throw p;if(!f)throw new Error("An error occurred on token verification.");const g=f.session,y=f.user;return g?.access_token&&(await this._saveSession(g),await this._notifyAllSubscribers(n.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",g)),this._returnResult({data:{user:y,session:g},error:null})}catch(u){if(re(u))return this._returnResult({data:{user:null,session:null},error:u});throw u}}async signInWithSSO(n){var r,o,u,d,f;try{let p=null,g=null;this.flowType==="pkce"&&([p,g]=await ka(this.storage,this.storageKey));const y=await ce(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in n?{provider_id:n.providerId}:null),"domain"in n?{domain:n.domain}:null),{redirect_to:(o=(r=n.options)===null||r===void 0?void 0:r.redirectTo)!==null&&o!==void 0?o:void 0}),!((u=n?.options)===null||u===void 0)&&u.captchaToken?{gotrue_meta_security:{captcha_token:n.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:p,code_challenge_method:g}),headers:this.headers,xform:p1});return!((d=y.data)===null||d===void 0)&&d.url&&wt()&&!(!((f=n.options)===null||f===void 0)&&f.skipBrowserRedirect)&&window.location.assign(y.data.url),this._returnResult(y)}catch(p){if(await vt(this.storage,`${this.storageKey}-code-verifier`),re(p))return this._returnResult({data:null,error:p});throw p}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async n=>{const{data:{session:r},error:o}=n;if(o)throw o;if(!r)throw new Gt;const{error:u}=await ce(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return this._returnResult({data:{user:null,session:null},error:u})})}catch(n){if(re(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async resend(n){try{const r=`${this.url}/resend`;if("email"in n){const{email:o,type:u,options:d}=n,{error:f}=await ce(this.fetch,"POST",r,{headers:this.headers,body:{email:o,type:u,gotrue_meta_security:{captcha_token:d?.captchaToken}},redirectTo:d?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:f})}else if("phone"in n){const{phone:o,type:u,options:d}=n,{data:f,error:p}=await ce(this.fetch,"POST",r,{headers:this.headers,body:{phone:o,type:u,gotrue_meta_security:{captcha_token:d?.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:f?.message_id},error:p})}throw new So("You must provide either an email or phone number and a type")}catch(r){if(re(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>this._useSession(async r=>r))}async _acquireLock(n,r){this._debug("#_acquireLock","begin",n);try{if(this.lockAcquired){const o=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),u=(async()=>(await o,await r()))();return this.pendingInLock.push((async()=>{try{await u}catch{}})()),u}return await this.lock(`lock:${this.storageKey}`,n,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const o=r();for(this.pendingInLock.push((async()=>{try{await o}catch{}})()),await o;this.pendingInLock.length;){const u=[...this.pendingInLock];await Promise.all(u),this.pendingInLock.splice(0,u.length)}return await o}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(n){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await n(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let n=null;const r=await Ui(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?n=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!n)return{data:{session:null},error:null};const o=n.expires_at?n.expires_at*1e3-Date.now()<lu:!1;if(this._debug("#__loadSession()",`session has${o?"":" not"} expired`,"expires_at",n.expires_at),!o){if(this.userStorage){const f=await Ui(this.userStorage,this.storageKey+"-user");f?.user?n.user=f.user:n.user=du()}if(this.storage.isServer&&n.user&&!n.user.__isUserNotAvailableProxy){const f={value:this.suppressGetSessionWarning};n.user=u1(n.user,f),f.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:n},error:null}}const{data:u,error:d}=await this._callRefreshToken(n.refresh_token);return d?this._returnResult({data:{session:null},error:d}):this._returnResult({data:{session:u},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(n){if(n)return await this._getUser(n);await this.initializePromise;const r=await this._acquireLock(this.lockAcquireTimeout,async()=>await this._getUser());return r.data.user&&(this.suppressGetSessionWarning=!0),r}async _getUser(n){try{return n?await ce(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:n,xform:mi}):await this._useSession(async r=>{var o,u,d;const{data:f,error:p}=r;if(p)throw p;return!(!((o=f.session)===null||o===void 0)&&o.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Gt}:await ce(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(d=(u=f.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0,xform:mi})})}catch(r){if(re(r))return $v(r)&&(await this._removeSession(),await vt(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:r});throw r}}async updateUser(n,r={}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._updateUser(n,r))}async _updateUser(n,r={}){try{return await this._useSession(async o=>{const{data:u,error:d}=o;if(d)throw d;if(!u.session)throw new Gt;const f=u.session;let p=null,g=null;this.flowType==="pkce"&&n.email!=null&&([p,g]=await ka(this.storage,this.storageKey));const{data:y,error:b}=await ce(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r?.emailRedirectTo,body:Object.assign(Object.assign({},n),{code_challenge:p,code_challenge_method:g}),jwt:f.access_token,xform:mi});if(b)throw b;return f.user=y.user,await this._saveSession(f),await this._notifyAllSubscribers("USER_UPDATED",f),this._returnResult({data:{user:f.user},error:null})})}catch(o){if(await vt(this.storage,`${this.storageKey}-code-verifier`),re(o))return this._returnResult({data:{user:null},error:o});throw o}}async setSession(n){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._setSession(n))}async _setSession(n){try{if(!n.access_token||!n.refresh_token)throw new Gt;const r=Date.now()/1e3;let o=r,u=!0,d=null;const{payload:f}=uu(n.access_token);if(f.exp&&(o=f.exp,u=o<=r),u){const{data:p,error:g}=await this._callRefreshToken(n.refresh_token);if(g)return this._returnResult({data:{user:null,session:null},error:g});if(!p)return{data:{user:null,session:null},error:null};d=p}else{const{data:p,error:g}=await this._getUser(n.access_token);if(g)throw g;d={access_token:n.access_token,refresh_token:n.refresh_token,user:p.user,token_type:"bearer",expires_in:o-r,expires_at:o},await this._saveSession(d),await this._notifyAllSubscribers("SIGNED_IN",d)}return this._returnResult({data:{user:d.user,session:d},error:null})}catch(r){if(re(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}}async refreshSession(n){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._refreshSession(n))}async _refreshSession(n){try{return await this._useSession(async r=>{var o;if(!n){const{data:f,error:p}=r;if(p)throw p;n=(o=f.session)!==null&&o!==void 0?o:void 0}if(!n?.refresh_token)throw new Gt;const{data:u,error:d}=await this._callRefreshToken(n.refresh_token);return d?this._returnResult({data:{user:null,session:null},error:d}):u?this._returnResult({data:{user:u.user,session:u},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(r){if(re(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async _getSessionFromURL(n,r){try{if(!wt())throw new _o("No browser detected.");if(n.error||n.error_description||n.error_code)throw new _o(n.error_description||"Error in URL with unspecified error_description",{error:n.error||"unspecified_error",code:n.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new mg("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new _o("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!n.code)throw new mg("No code detected.");const{data:z,error:B}=await this._exchangeCodeForSession(n.code);if(B)throw B;const Y=new URL(window.location.href);return Y.searchParams.delete("code"),window.history.replaceState(window.history.state,"",Y.toString()),{data:{session:z.session,redirectType:null},error:null}}const{provider_token:o,provider_refresh_token:u,access_token:d,refresh_token:f,expires_in:p,expires_at:g,token_type:y}=n;if(!d||!p||!f||!y)throw new _o("No session defined in URL");const b=Math.round(Date.now()/1e3),x=parseInt(p);let S=b+x;g&&(S=parseInt(g));const _=S-b;_*1e3<=Da&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${_}s, should have been closer to ${x}s`);const E=S-x;b-E>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",E,S,b):b-E<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",E,S,b);const{data:R,error:T}=await this._getUser(d);if(T)throw T;const O={provider_token:o,provider_refresh_token:u,access_token:d,expires_in:x,expires_at:S,refresh_token:f,token_type:y,user:R.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:O,redirectType:n.type},error:null})}catch(o){if(re(o))return this._returnResult({data:{session:null,redirectType:null},error:o});throw o}}_isImplicitGrantCallback(n){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),n):!!(n.access_token||n.error_description)}async _isPKCECallback(n){const r=await Ui(this.storage,`${this.storageKey}-code-verifier`);return!!(n.code&&r)}async signOut(n={scope:"global"}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._signOut(n))}async _signOut({scope:n}={scope:"global"}){return await this._useSession(async r=>{var o;const{data:u,error:d}=r;if(d)return this._returnResult({error:d});const f=(o=u.session)===null||o===void 0?void 0:o.access_token;if(f){const{error:p}=await this.admin.signOut(f,n);if(p&&!(qv(p)&&(p.status===404||p.status===401||p.status===403)))return this._returnResult({error:p})}return n!=="others"&&(await this._removeSession(),await vt(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(n){const r=Jv(),o={id:r,callback:n,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,o),(async()=>(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:o}}}async _emitInitialSession(n){return await this._useSession(async r=>{var o,u;try{const{data:{session:d},error:f}=r;if(f)throw f;await((o=this.stateChangeEmitters.get(n))===null||o===void 0?void 0:o.callback("INITIAL_SESSION",d)),this._debug("INITIAL_SESSION","callback id",n,"session",d)}catch(d){await((u=this.stateChangeEmitters.get(n))===null||u===void 0?void 0:u.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",n,"error",d),console.error(d)}})}async resetPasswordForEmail(n,r={}){let o=null,u=null;this.flowType==="pkce"&&([o,u]=await ka(this.storage,this.storageKey,!0));try{return await ce(this.fetch,"POST",`${this.url}/recover`,{body:{email:n,code_challenge:o,code_challenge_method:u,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(d){if(await vt(this.storage,`${this.storageKey}-code-verifier`),re(d))return this._returnResult({data:null,error:d});throw d}}async getUserIdentities(){var n;try{const{data:r,error:o}=await this.getUser();if(o)throw o;return this._returnResult({data:{identities:(n=r.user.identities)!==null&&n!==void 0?n:[]},error:null})}catch(r){if(re(r))return this._returnResult({data:null,error:r});throw r}}async linkIdentity(n){return"token"in n?this.linkIdentityIdToken(n):this.linkIdentityOAuth(n)}async linkIdentityOAuth(n){var r;try{const{data:o,error:u}=await this._useSession(async d=>{var f,p,g,y,b;const{data:x,error:S}=d;if(S)throw S;const _=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,n.provider,{redirectTo:(f=n.options)===null||f===void 0?void 0:f.redirectTo,scopes:(p=n.options)===null||p===void 0?void 0:p.scopes,queryParams:(g=n.options)===null||g===void 0?void 0:g.queryParams,skipBrowserRedirect:!0});return await ce(this.fetch,"GET",_,{headers:this.headers,jwt:(b=(y=x.session)===null||y===void 0?void 0:y.access_token)!==null&&b!==void 0?b:void 0})});if(u)throw u;return wt()&&!(!((r=n.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(o?.url),this._returnResult({data:{provider:n.provider,url:o?.url},error:null})}catch(o){if(re(o))return this._returnResult({data:{provider:n.provider,url:null},error:o});throw o}}async linkIdentityIdToken(n){return await this._useSession(async r=>{var o;try{const{error:u,data:{session:d}}=r;if(u)throw u;const{options:f,provider:p,token:g,access_token:y,nonce:b}=n,x=await ce(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(o=d?.access_token)!==null&&o!==void 0?o:void 0,body:{provider:p,id_token:g,access_token:y,nonce:b,link_identity:!0,gotrue_meta_security:{captcha_token:f?.captchaToken}},xform:cn}),{data:S,error:_}=x;return _?this._returnResult({data:{user:null,session:null},error:_}):!S||!S.session||!S.user?this._returnResult({data:{user:null,session:null},error:new Ca}):(S.session&&(await this._saveSession(S.session),await this._notifyAllSubscribers("USER_UPDATED",S.session)),this._returnResult({data:S,error:_}))}catch(u){if(await vt(this.storage,`${this.storageKey}-code-verifier`),re(u))return this._returnResult({data:{user:null,session:null},error:u});throw u}})}async unlinkIdentity(n){try{return await this._useSession(async r=>{var o,u;const{data:d,error:f}=r;if(f)throw f;return await ce(this.fetch,"DELETE",`${this.url}/user/identities/${n.identity_id}`,{headers:this.headers,jwt:(u=(o=d.session)===null||o===void 0?void 0:o.access_token)!==null&&u!==void 0?u:void 0})})}catch(r){if(re(r))return this._returnResult({data:null,error:r});throw r}}async _refreshAccessToken(n){const r=`#_refreshAccessToken(${n.substring(0,5)}...)`;this._debug(r,"begin");try{const o=Date.now();return await e1(async u=>(u>0&&await Fv(200*Math.pow(2,u-1)),this._debug(r,"refreshing attempt",u),await ce(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:n},headers:this.headers,xform:cn})),(u,d)=>{const f=200*Math.pow(2,u);return d&&cu(d)&&Date.now()+f-o<Da})}catch(o){if(this._debug(r,"error",o),re(o))return this._returnResult({data:{session:null,user:null},error:o});throw o}finally{this._debug(r,"end")}}_isValidSession(n){return typeof n=="object"&&n!==null&&"access_token"in n&&"refresh_token"in n&&"expires_at"in n}async _handleProviderSignIn(n,r){const o=await this._getUrlForProvider(`${this.url}/authorize`,n,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",n,"options",r,"url",o),wt()&&!r.skipBrowserRedirect&&window.location.assign(o),{data:{provider:n,url:o},error:null}}async _recoverAndRefresh(){var n,r;const o="#_recoverAndRefresh()";this._debug(o,"begin");try{const u=await Ui(this.storage,this.storageKey);if(u&&this.userStorage){let f=await Ui(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!f&&(f={user:u.user},await Ba(this.userStorage,this.storageKey+"-user",f)),u.user=(n=f?.user)!==null&&n!==void 0?n:du()}else if(u&&!u.user&&!u.user){const f=await Ui(this.storage,this.storageKey+"-user");f&&f?.user?(u.user=f.user,await vt(this.storage,this.storageKey+"-user"),await Ba(this.storage,this.storageKey,u)):u.user=du()}if(this._debug(o,"session from storage",u),!this._isValidSession(u)){this._debug(o,"session is not valid"),u!==null&&await this._removeSession();return}const d=((r=u.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<lu;if(this._debug(o,`session has${d?"":" not"} expired with margin of ${lu}s`),d){if(this.autoRefreshToken&&u.refresh_token){const{error:f}=await this._callRefreshToken(u.refresh_token);f&&(console.error(f),cu(f)||(this._debug(o,"refresh failed with a non-retryable error, removing the session",f),await this._removeSession()))}}else if(u.user&&u.user.__isUserNotAvailableProxy===!0)try{const{data:f,error:p}=await this._getUser(u.access_token);!p&&f?.user?(u.user=f.user,await this._saveSession(u),await this._notifyAllSubscribers("SIGNED_IN",u)):this._debug(o,"could not get user data, skipping SIGNED_IN notification")}catch(f){console.error("Error getting user data:",f),this._debug(o,"error getting user data, skipping SIGNED_IN notification",f)}else await this._notifyAllSubscribers("SIGNED_IN",u)}catch(u){this._debug(o,"error",u),console.error(u);return}finally{this._debug(o,"end")}}async _callRefreshToken(n){var r,o;if(!n)throw new Gt;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const u=`#_callRefreshToken(${n.substring(0,5)}...)`;this._debug(u,"begin");try{this.refreshingDeferred=new No;const{data:d,error:f}=await this._refreshAccessToken(n);if(f)throw f;if(!d.session)throw new Gt;await this._saveSession(d.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",d.session);const p={data:d.session,error:null};return this.refreshingDeferred.resolve(p),p}catch(d){if(this._debug(u,"error",d),re(d)){const f={data:null,error:d};return cu(d)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(f),f}throw(o=this.refreshingDeferred)===null||o===void 0||o.reject(d),d}finally{this.refreshingDeferred=null,this._debug(u,"end")}}async _notifyAllSubscribers(n,r,o=!0){const u=`#_notifyAllSubscribers(${n})`;this._debug(u,"begin",r,`broadcast = ${o}`);try{this.broadcastChannel&&o&&this.broadcastChannel.postMessage({event:n,session:r});const d=[],f=Array.from(this.stateChangeEmitters.values()).map(async p=>{try{await p.callback(n,r)}catch(g){d.push(g)}});if(await Promise.all(f),d.length>0){for(let p=0;p<d.length;p+=1)console.error(d[p]);throw d[0]}}finally{this._debug(u,"end")}}async _saveSession(n){this._debug("#_saveSession()",n),this.suppressGetSessionWarning=!0,await vt(this.storage,`${this.storageKey}-code-verifier`);const r=Object.assign({},n),o=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!o&&r.user&&await Ba(this.userStorage,this.storageKey+"-user",{user:r.user});const u=Object.assign({},r);delete u.user;const d=wg(u);await Ba(this.storage,this.storageKey,d)}else{const u=wg(r);await Ba(this.storage,this.storageKey,u)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await vt(this.storage,this.storageKey),await vt(this.storage,this.storageKey+"-code-verifier"),await vt(this.storage,this.storageKey+"-user"),this.userStorage&&await vt(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const n=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{n&&wt()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",n)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const n=setInterval(()=>this._autoRefreshTokenTick(),Da);this.autoRefreshTicker=n,n&&typeof n=="object"&&typeof n.unref=="function"?n.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(n);const r=setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0);this.autoRefreshTickTimeout=r,r&&typeof r=="object"&&typeof r.unref=="function"?r.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(r)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const n=this.autoRefreshTicker;this.autoRefreshTicker=null,n&&clearInterval(n);const r=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,r&&clearTimeout(r)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const n=Date.now();try{return await this._useSession(async r=>{const{data:{session:o}}=r;if(!o||!o.refresh_token||!o.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const u=Math.floor((o.expires_at*1e3-n)/Da);this._debug("#_autoRefreshTokenTick()",`access token expires in ${u} ticks, a tick lasts ${Da}ms, refresh threshold is ${ju} ticks`),u<=ju&&await this._callRefreshToken(o.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(n){if(n.isAcquireTimeout||n instanceof pm)this._debug("auto refresh token tick lock not available");else throw n}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!wt()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(n){console.error("_handleVisibilityChange",n)}}async _onVisibilityChanged(n){const r=`#_onVisibilityChanged(${n})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),n||(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(n,r,o){const u=[`provider=${encodeURIComponent(r)}`];if(o?.redirectTo&&u.push(`redirect_to=${encodeURIComponent(o.redirectTo)}`),o?.scopes&&u.push(`scopes=${encodeURIComponent(o.scopes)}`),this.flowType==="pkce"){const[d,f]=await ka(this.storage,this.storageKey),p=new URLSearchParams({code_challenge:`${encodeURIComponent(d)}`,code_challenge_method:`${encodeURIComponent(f)}`});u.push(p.toString())}if(o?.queryParams){const d=new URLSearchParams(o.queryParams);u.push(d.toString())}return o?.skipBrowserRedirect&&u.push(`skip_http_redirect=${o.skipBrowserRedirect}`),`${n}?${u.join("&")}`}async _unenroll(n){try{return await this._useSession(async r=>{var o;const{data:u,error:d}=r;return d?this._returnResult({data:null,error:d}):await ce(this.fetch,"DELETE",`${this.url}/factors/${n.factorId}`,{headers:this.headers,jwt:(o=u?.session)===null||o===void 0?void 0:o.access_token})})}catch(r){if(re(r))return this._returnResult({data:null,error:r});throw r}}async _enroll(n){try{return await this._useSession(async r=>{var o,u;const{data:d,error:f}=r;if(f)return this._returnResult({data:null,error:f});const p=Object.assign({friendly_name:n.friendlyName,factor_type:n.factorType},n.factorType==="phone"?{phone:n.phone}:n.factorType==="totp"?{issuer:n.issuer}:{}),{data:g,error:y}=await ce(this.fetch,"POST",`${this.url}/factors`,{body:p,headers:this.headers,jwt:(o=d?.session)===null||o===void 0?void 0:o.access_token});return y?this._returnResult({data:null,error:y}):(n.factorType==="totp"&&g.type==="totp"&&(!((u=g?.totp)===null||u===void 0)&&u.qr_code)&&(g.totp.qr_code=`data:image/svg+xml;utf-8,${g.totp.qr_code}`),this._returnResult({data:g,error:null}))})}catch(r){if(re(r))return this._returnResult({data:null,error:r});throw r}}async _verify(n){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async r=>{var o;const{data:u,error:d}=r;if(d)return this._returnResult({data:null,error:d});const f=Object.assign({challenge_id:n.challengeId},"webauthn"in n?{webauthn:Object.assign(Object.assign({},n.webauthn),{credential_response:n.webauthn.type==="create"?A1(n.webauthn.credential_response):z1(n.webauthn.credential_response)})}:{code:n.code}),{data:p,error:g}=await ce(this.fetch,"POST",`${this.url}/factors/${n.factorId}/verify`,{body:f,headers:this.headers,jwt:(o=u?.session)===null||o===void 0?void 0:o.access_token});return g?this._returnResult({data:null,error:g}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+p.expires_in},p)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",p),this._returnResult({data:p,error:g}))})}catch(r){if(re(r))return this._returnResult({data:null,error:r});throw r}})}async _challenge(n){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async r=>{var o;const{data:u,error:d}=r;if(d)return this._returnResult({data:null,error:d});const f=await ce(this.fetch,"POST",`${this.url}/factors/${n.factorId}/challenge`,{body:n,headers:this.headers,jwt:(o=u?.session)===null||o===void 0?void 0:o.access_token});if(f.error)return f;const{data:p}=f;if(p.type!=="webauthn")return{data:p,error:null};switch(p.webauthn.type){case"create":return{data:Object.assign(Object.assign({},p),{webauthn:Object.assign(Object.assign({},p.webauthn),{credential_options:Object.assign(Object.assign({},p.webauthn.credential_options),{publicKey:k1(p.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},p),{webauthn:Object.assign(Object.assign({},p.webauthn),{credential_options:Object.assign(Object.assign({},p.webauthn.credential_options),{publicKey:T1(p.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(re(r))return this._returnResult({data:null,error:r});throw r}})}async _challengeAndVerify(n){const{data:r,error:o}=await this._challenge({factorId:n.factorId});return o?this._returnResult({data:null,error:o}):await this._verify({factorId:n.factorId,challengeId:r.id,code:n.code})}async _listFactors(){var n;const{data:{user:r},error:o}=await this.getUser();if(o)return{data:null,error:o};const u={all:[],phone:[],totp:[],webauthn:[]};for(const d of(n=r?.factors)!==null&&n!==void 0?n:[])u.all.push(d),d.status==="verified"&&u[d.factor_type].push(d);return{data:u,error:null}}async _getAuthenticatorAssuranceLevel(){var n,r;const{data:{session:o},error:u}=await this.getSession();if(u)return this._returnResult({data:null,error:u});if(!o)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:d}=uu(o.access_token);let f=null;d.aal&&(f=d.aal);let p=f;((r=(n=o.user.factors)===null||n===void 0?void 0:n.filter(b=>b.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(p="aal2");const y=d.amr||[];return{data:{currentLevel:f,nextLevel:p,currentAuthenticationMethods:y},error:null}}async _getAuthorizationDetails(n){try{return await this._useSession(async r=>{const{data:{session:o},error:u}=r;return u?this._returnResult({data:null,error:u}):o?await ce(this.fetch,"GET",`${this.url}/oauth/authorizations/${n}`,{headers:this.headers,jwt:o.access_token,xform:d=>({data:d,error:null})}):this._returnResult({data:null,error:new Gt})})}catch(r){if(re(r))return this._returnResult({data:null,error:r});throw r}}async _approveAuthorization(n,r){try{return await this._useSession(async o=>{const{data:{session:u},error:d}=o;if(d)return this._returnResult({data:null,error:d});if(!u)return this._returnResult({data:null,error:new Gt});const f=await ce(this.fetch,"POST",`${this.url}/oauth/authorizations/${n}/consent`,{headers:this.headers,jwt:u.access_token,body:{action:"approve"},xform:p=>({data:p,error:null})});return f.data&&f.data.redirect_url&&wt()&&!r?.skipBrowserRedirect&&window.location.assign(f.data.redirect_url),f})}catch(o){if(re(o))return this._returnResult({data:null,error:o});throw o}}async _denyAuthorization(n,r){try{return await this._useSession(async o=>{const{data:{session:u},error:d}=o;if(d)return this._returnResult({data:null,error:d});if(!u)return this._returnResult({data:null,error:new Gt});const f=await ce(this.fetch,"POST",`${this.url}/oauth/authorizations/${n}/consent`,{headers:this.headers,jwt:u.access_token,body:{action:"deny"},xform:p=>({data:p,error:null})});return f.data&&f.data.redirect_url&&wt()&&!r?.skipBrowserRedirect&&window.location.assign(f.data.redirect_url),f})}catch(o){if(re(o))return this._returnResult({data:null,error:o});throw o}}async _listOAuthGrants(){try{return await this._useSession(async n=>{const{data:{session:r},error:o}=n;return o?this._returnResult({data:null,error:o}):r?await ce(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,xform:u=>({data:u,error:null})}):this._returnResult({data:null,error:new Gt})})}catch(n){if(re(n))return this._returnResult({data:null,error:n});throw n}}async _revokeOAuthGrant(n){try{return await this._useSession(async r=>{const{data:{session:o},error:u}=r;return u?this._returnResult({data:null,error:u}):o?(await ce(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:o.access_token,query:{client_id:n.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new Gt})})}catch(r){if(re(r))return this._returnResult({data:null,error:r});throw r}}async fetchJwk(n,r={keys:[]}){let o=r.keys.find(p=>p.kid===n);if(o)return o;const u=Date.now();if(o=this.jwks.keys.find(p=>p.kid===n),o&&this.jwks_cached_at+Lv>u)return o;const{data:d,error:f}=await ce(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(f)throw f;return!d.keys||d.keys.length===0||(this.jwks=d,this.jwks_cached_at=u,o=d.keys.find(p=>p.kid===n),!o)?null:o}async getClaims(n,r={}){try{let o=n;if(!o){const{data:_,error:E}=await this.getSession();if(E||!_.session)return this._returnResult({data:null,error:E});o=_.session.access_token}const{header:u,payload:d,signature:f,raw:{header:p,payload:g}}=uu(o);r?.allowExpired||o1(d.exp);const y=!u.alg||u.alg.startsWith("HS")||!u.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(u.kid,r?.keys?{keys:r.keys}:r?.jwks);if(!y){const{error:_}=await this.getUser(o);if(_)throw _;return{data:{claims:d,header:u,signature:f},error:null}}const b=l1(u.alg),x=await crypto.subtle.importKey("jwk",y,b,!0,["verify"]);if(!await crypto.subtle.verify(b,x,f,Yv(`${p}.${g}`)))throw new Tu("Invalid JWT signature");return{data:{claims:d,header:u,signature:f},error:null}}catch(o){if(re(o))return this._returnResult({data:null,error:o});throw o}}}Yr.nextInstanceID={};const q1=Yr,$1="2.91.0";let Lr="";typeof Deno<"u"?Lr="deno":typeof document<"u"?Lr="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Lr="react-native":Lr="node";const I1={"X-Client-Info":`supabase-js-${Lr}/${$1}`},G1={headers:I1},P1={schema:"public"},W1={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Z1={};function Kr(a){"@babel/helpers - typeof";return Kr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Kr(a)}function V1(a,n){if(Kr(a)!="object"||!a)return a;var r=a[Symbol.toPrimitive];if(r!==void 0){var o=r.call(a,n);if(Kr(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(a)}function Y1(a){var n=V1(a,"string");return Kr(n)=="symbol"?n:n+""}function K1(a,n,r){return(n=Y1(n))in a?Object.defineProperty(a,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):a[n]=r,a}function kg(a,n){var r=Object.keys(a);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(a);n&&(o=o.filter(function(u){return Object.getOwnPropertyDescriptor(a,u).enumerable})),r.push.apply(r,o)}return r}function et(a){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?kg(Object(r),!0).forEach(function(o){K1(a,o,r[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(r)):kg(Object(r)).forEach(function(o){Object.defineProperty(a,o,Object.getOwnPropertyDescriptor(r,o))})}return a}const J1=a=>a?(...n)=>a(...n):(...n)=>fetch(...n),Q1=()=>Headers,X1=(a,n,r)=>{const o=J1(r),u=Q1();return async(d,f)=>{var p;const g=(p=await n())!==null&&p!==void 0?p:a;let y=new u(f?.headers);return y.has("apikey")||y.set("apikey",a),y.has("Authorization")||y.set("Authorization",`Bearer ${g}`),o(d,et(et({},f),{},{headers:y}))}};function F1(a){return a.endsWith("/")?a:a+"/"}function ew(a,n){var r,o;const{db:u,auth:d,realtime:f,global:p}=a,{db:g,auth:y,realtime:b,global:x}=n,S={db:et(et({},g),u),auth:et(et({},y),d),realtime:et(et({},b),f),storage:{},global:et(et(et({},x),p),{},{headers:et(et({},(r=x?.headers)!==null&&r!==void 0?r:{}),(o=p?.headers)!==null&&o!==void 0?o:{})}),accessToken:async()=>""};return a.accessToken?S.accessToken=a.accessToken:delete S.accessToken,S}function tw(a){const n=a?.trim();if(!n)throw new Error("supabaseUrl is required.");if(!n.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(F1(n))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var nw=class extends q1{constructor(a){super(a)}},iw=class{constructor(a,n,r){var o,u;this.supabaseUrl=a,this.supabaseKey=n;const d=tw(a);if(!n)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",d),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",d),this.storageUrl=new URL("storage/v1",d),this.functionsUrl=new URL("functions/v1",d);const f=`sb-${d.hostname.split(".")[0]}-auth-token`,p={db:P1,realtime:Z1,auth:et(et({},W1),{},{storageKey:f}),global:G1},g=ew(r??{},p);if(this.storageKey=(o=g.auth.storageKey)!==null&&o!==void 0?o:"",this.headers=(u=g.global.headers)!==null&&u!==void 0?u:{},g.accessToken)this.accessToken=g.accessToken,this.auth=new Proxy({},{get:(b,x)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(x)} is not possible`)}});else{var y;this.auth=this._initSupabaseAuthClient((y=g.auth)!==null&&y!==void 0?y:{},this.headers,g.global.fetch)}this.fetch=X1(n,this._getAccessToken.bind(this),g.global.fetch),this.realtime=this._initRealtimeClient(et({headers:this.headers,accessToken:this._getAccessToken.bind(this)},g.realtime)),this.accessToken&&Promise.resolve(this.accessToken()).then(b=>this.realtime.setAuth(b)).catch(b=>console.warn("Failed to set initial Realtime auth token:",b)),this.rest=new Ux(new URL("rest/v1",d).href,{headers:this.headers,schema:g.db.schema,fetch:this.fetch}),this.storage=new Dv(this.storageUrl.href,this.headers,this.fetch,r?.storage),g.accessToken||this._listenForAuthEvents()}get functions(){return new zx(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(a){return this.rest.from(a)}schema(a){return this.rest.schema(a)}rpc(a,n={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(a,n,r)}channel(a,n={config:{}}){return this.realtime.channel(a,n)}getChannels(){return this.realtime.getChannels()}removeChannel(a){return this.realtime.removeChannel(a)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var a=this,n,r;if(a.accessToken)return await a.accessToken();const{data:o}=await a.auth.getSession();return(n=(r=o.session)===null||r===void 0?void 0:r.access_token)!==null&&n!==void 0?n:a.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:a,persistSession:n,detectSessionInUrl:r,storage:o,userStorage:u,storageKey:d,flowType:f,lock:p,debug:g,throwOnError:y},b,x){const S={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new nw({url:this.authUrl.href,headers:et(et({},S),b),storageKey:d,autoRefreshToken:a,persistSession:n,detectSessionInUrl:r,storage:o,userStorage:u,flowType:f,lock:p,debug:g,throwOnError:y,fetch:x,hasCustomAuthorizationHeader:Object.keys(this.headers).some(_=>_.toLowerCase()==="authorization")})}_initRealtimeClient(a){return new Fx(this.realtimeUrl.href,et(et({},a),{},{params:et(et({},{apikey:this.supabaseKey}),a?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((a,n)=>{this._handleTokenChanged(a,"CLIENT",n?.access_token)})}_handleTokenChanged(a,n,r){(a==="TOKEN_REFRESHED"||a==="SIGNED_IN")&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):a==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const aw=(a,n,r)=>new iw(a,n,r);function rw(){if(typeof window<"u")return!1;const a=globalThis.process;if(!a)return!1;const n=a.version;if(n==null)return!1;const r=n.match(/^v(\d+)\./);return r?parseInt(r[1],10)<=18:!1}rw()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const sw="https://wybxbrutuoohiujjyfry.supabase.co",ow="sb_publishable_f5XH0nc0vypEmY7sXOJ6kA_iqQpWYb9",Zt=aw(sw,ow),lw=a=>{let n=a,r="image/jpeg";if(a.includes(",")){const o=a.split(","),u=o[0].match(/:(.*?);/);u&&(r=u[1]),n=o[1]}return fetch(`data:${r};base64,${n}`).then(o=>o.blob())},cw=async(a,n=500)=>{const r=a.length*3/4/1024;return r<=n?a:(console.log(`[uploadPhoto] Image too large (${Math.round(r)}KB), compressing...`),new Promise(o=>{const u=new Image;u.onload=()=>{const d=document.createElement("canvas");let f=u.width,p=u.height;const g=Math.sqrt(n/r);f=Math.floor(f*g),p=Math.floor(p*g),f=Math.max(f,400),p=Math.max(p,300),d.width=f,d.height=p,d.getContext("2d").drawImage(u,0,0,f,p);const b=d.toDataURL("image/jpeg",.7);console.log(`[uploadPhoto] Compressed to ${Math.round(b.length*3/4/1024)}KB`),o(b)},u.onerror=()=>o(a),u.src=a}))},Ma=async(a,n="reports",r=3)=>{if(!a)return console.error("[uploadPhoto] No image data provided"),null;const o=await cw(a);for(let u=1;u<=r;u++)try{console.log(`[uploadPhoto] Attempt ${u}/${r} for folder: ${n}`);const d=await lw(o);console.log(`[uploadPhoto] Created blob, size: ${d.size} bytes`);const f=`${n}/${Date.now()}_${Math.random().toString(36).substr(2,9)}.jpg`,{error:p}=await Zt.storage.from("photos").upload(f,d,{contentType:"image/jpeg",upsert:!1});if(p){if(console.error(`[uploadPhoto] Supabase error on attempt ${u}:`,p),u===r)throw p;await new Promise(y=>setTimeout(y,1e3*u));continue}const{data:g}=Zt.storage.from("photos").getPublicUrl(f);return console.log("[uploadPhoto] Success! URL:",g.publicUrl),g.publicUrl}catch(d){if(console.error(`[uploadPhoto] Error on attempt ${u}:`,d),u===r)return console.error("[uploadPhoto] All retries failed, returning null instead of base64"),null;await new Promise(f=>setTimeout(f,1e3*u))}return null},uw=async a=>{try{console.log("[saveAudit] Starting save..."),console.log("[saveAudit] conditionAlertDetails from auditData:",a.conditionAlertDetails);const n=[];for(const u of a.conditionAlertDetails||[]){const d=u.photos||[];console.log("[saveAudit] Processing alert:",{zoneId:u.zoneId,photoCount:d.length});const f=[];for(const p of d)if(p&&p.startsWith("data:")){console.log("[saveAudit] Uploading photo for zone:",u.zoneId);const g=await Ma(p,"condition-alerts");console.log("[saveAudit] Upload result:",g?.substring(0,80)),f.push(g)}else p&&f.push(p);n.push({...u,photos:f})}console.log("[saveAudit] Final conditionAlertDetails:",n);const{data:r,error:o}=await Zt.from("audits").insert([{date:a.date,time:a.time,campus:a.campus,auditor:a.auditor,auditor_email:a.auditorEmail,status:a.status,defects:a.defects,zones:a.zones,duration:a.duration,tour_ready:a.tourReady,condition_alerts_count:a.conditionAlerts,zone_results:a.zoneResults,condition_alert_details:n,campus_data:a.campusData}]).select().single();if(o)throw o;return r}catch(n){throw console.error("Error saving audit:",n),n}},ym=async(a=50)=>{try{const{data:n,error:r}=await Zt.from("audits").select("*").order("created_at",{ascending:!1}).limit(a);if(r)throw r;return(n||[]).map(o=>({id:o.id,date:o.date,time:o.time,campus:o.campus,auditor:o.auditor,auditorEmail:o.auditor_email,status:o.status,defects:o.defects,zones:o.zones,duration:o.duration,tourReady:o.tour_ready,conditionAlerts:o.condition_alerts_count,zoneResults:o.zone_results,conditionAlertDetails:o.condition_alert_details,campusData:o.campus_data,createdAt:o.created_at}))}catch(n){return console.error("Error getting audits:",n),[]}},dw=async a=>{try{let n=a.photo;a.photo&&a.photo.startsWith("data:")&&(n=await Ma(a.photo,"reports"));const{data:r,error:o}=await Zt.from("reports").insert([{timestamp:a.timestamp,campus:a.campus,photo:n,category:a.category,location:a.location,note:a.note,urgent:a.urgent,team:a.team,status:a.status,campus_data:a.campusData}]).select().single();if(o)throw o;return r}catch(n){throw console.error("Error saving report:",n),n}},bm=async(a=50)=>{try{const{data:n,error:r}=await Zt.from("reports").select("*").order("created_at",{ascending:!1}).limit(a);if(r)throw r;return(n||[]).map(o=>({id:o.id,timestamp:o.timestamp,campus:o.campus,photo:o.photo,category:o.category,location:o.location,note:o.note,urgent:o.urgent,team:o.team,status:o.status,campusData:o.campus_data,createdAt:o.created_at}))}catch(n){return console.error("Error getting reports:",n),[]}},hw=async(a,n)=>{try{const{error:r}=await Zt.from("reports").update({status:n,updated_at:new Date().toISOString()}).eq("id",a);if(r)throw r}catch(r){throw console.error("Error updating report status:",r),r}},fw=async a=>{try{console.log("[saveBGWalkthrough] Starting save...");const n=[];for(const f of a.issues||[]){const p=[];for(const g of f.photos||[])if(g&&g.startsWith("data:")){const y=await Ma(g,"bg-issues");p.push(y)}else g&&p.push(g);n.push({...f,photos:p})}const r=[];for(const f of a.observations||[]){const p=[];for(const g of f.photos||[])if(g&&g.startsWith("data:")){const y=await Ma(g,"bg-observations");p.push(y)}else g&&p.push(g);r.push({...f,photos:p})}const o={};for(const[f,p]of Object.entries(a.exitPhotos||{}))p&&p.startsWith("data:")?o[f]=await Ma(p,"bg-exit"):p&&(o[f]=p);const{data:u,error:d}=await Zt.from("bg_walkthroughs").insert([{date:a.date,time:a.time,campus:a.campus,auditor:a.auditor,auditor_email:a.auditorEmail,duration:a.duration,campus_rating:a.campusRating,zone_ratings:a.zoneRatings,zone_results:a.zoneResults,room_results:a.roomResults,selected_rooms:a.selectedRooms,issues:n,observations:r,exit_photos:o,total_issues:a.totalIssues,total_observations:a.totalObservations,green_zones:a.greenZones,amber_zones:a.amberZones,red_zones:a.redZones,campus_data:a.campusData,start_time:a.startTime,end_time:a.endTime,is_complete:!0}]).select().single();if(d)throw d;return console.log("[saveBGWalkthrough] Saved successfully:",u.id),u}catch(n){throw console.error("Error saving B&G walkthrough:",n),n}},Iu=async(a=null,n=50)=>{try{let r=Zt.from("bg_walkthroughs").select("*").order("created_at",{ascending:!1}).limit(n);a&&(r=r.eq("campus",a));const{data:o,error:u}=await r;if(u)throw u;return(o||[]).map(d=>({id:d.id,date:d.date,time:d.time,campus:d.campus,auditor:d.auditor,auditorEmail:d.auditor_email,duration:d.duration,campusRating:d.campus_rating,zoneRatings:d.zone_ratings,zoneResults:d.zone_results,roomResults:d.room_results,selectedRooms:d.selected_rooms,issues:d.issues,observations:d.observations,exitPhotos:d.exit_photos,totalIssues:d.total_issues,totalObservations:d.total_observations,greenZones:d.green_zones,amberZones:d.amber_zones,redZones:d.red_zones,campusData:d.campus_data,startTime:d.start_time,endTime:d.end_time,isComplete:d.is_complete,createdAt:d.created_at}))}catch(r){return console.error("Error getting B&G walkthroughs:",r),[]}},pw=async a=>{try{const{data:n,error:r}=await Zt.from("bg_walkthroughs").select("*").eq("id",a).single();if(r)throw r;return{id:n.id,date:n.date,time:n.time,campus:n.campus,auditor:n.auditor,auditorEmail:n.auditor_email,duration:n.duration,campusRating:n.campus_rating,zoneRatings:n.zone_ratings,zoneResults:n.zone_results,roomResults:n.room_results,selectedRooms:n.selected_rooms,issues:n.issues,observations:n.observations,exitPhotos:n.exit_photos,totalIssues:n.total_issues,totalObservations:n.total_observations,greenZones:n.green_zones,amberZones:n.amber_zones,redZones:n.red_zones,campusData:n.campus_data,startTime:n.start_time,endTime:n.end_time,isComplete:n.is_complete,createdAt:n.created_at}}catch(n){return console.error("Error getting B&G walkthrough by ID:",n),null}},gw=async a=>{try{console.log("[sendBGWalkthroughEmail] Sending email to:",a.auditorEmail);const n="https://wybxbrutuoohiujjyfry.supabase.co",r="sb_publishable_f5XH0nc0vypEmY7sXOJ6kA_iqQpWYb9",o=await fetch(`${n}/functions/v1/send-bg-report`,{method:"POST",headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/json"},body:JSON.stringify({date:a.date,time:a.time,campus:a.campus,auditor:a.auditor,auditorEmail:a.auditorEmail,duration:a.duration,campusRating:a.campusRating,zoneRatings:a.zoneRatings,issues:a.issues||[],observations:a.observations||[],totalIssues:a.totalIssues||0,totalObservations:a.totalObservations||0,greenZones:a.greenZones||0,amberZones:a.amberZones||0,redZones:a.redZones||0})});if(!o.ok){const d=await o.json().catch(()=>({}));throw console.error("[sendBGWalkthroughEmail] API error:",d),new Error(d.error||"Failed to send email")}const u=await o.json();return console.log("[sendBGWalkthroughEmail] Email sent successfully:",u),u}catch(n){throw console.error("[sendBGWalkthroughEmail] Error:",n),n}},mw=(a,n=1200,r=.7)=>new Promise(o=>{const u=new Image;u.onload=()=>{const d=document.createElement("canvas");let f=u.width,p=u.height;f>n&&(p=p*n/f,f=n),d.width=f,d.height=p,d.getContext("2d").drawImage(u,0,0,f,p);const y=d.toDataURL("image/jpeg",r);console.log("[useCamera] Compressed image from",a.length,"to",y.length,"bytes"),o(y)},u.onerror=()=>{console.error("[useCamera] Image compression failed, using original"),o(a)},u.src=a}),yw=()=>{const a=w.useRef(null),n=w.useRef("photos"),r=w.useRef(null),o=w.useRef(null),u=w.useRef(null),d=w.useRef(null),[f,p]=w.useState(!1),[g,y]=w.useState(""),[b,x]=w.useState(!1),[S,_]=w.useState(!1),E=w.useCallback(async Y=>{_(!0);try{const J=await mw(Y);console.log("[useCamera] Uploading to Supabase...");const G=await Ma(J,n.current);G?(console.log("[useCamera] Upload successful:",G),a.current&&a.current(G)):(console.error("[useCamera] Upload failed, no URL returned"),a.current&&a.current(null))}catch(J){console.error("[useCamera] Upload error:",J),a.current&&a.current(null)}finally{_(!1)}},[]),R=w.useCallback(async Y=>{console.log("[useCamera] handleFileSelect triggered");const J=Y.target.files[0];if(J){console.log("[useCamera] File selected:",J.name,J.size,"bytes");const G=new FileReader;G.onload=async K=>{console.log("[useCamera] FileReader loaded, data length:",K.target.result?.length),await E(K.target.result)},G.onerror=K=>{console.error("[useCamera] FileReader error:",K),a.current&&a.current(null)},G.readAsDataURL(J)}else console.log("[useCamera] No file selected");r.current&&(r.current.value="")},[E]),T=w.useCallback(()=>{d.current&&(d.current.getTracks().forEach(Y=>Y.stop()),d.current=null),x(!1)},[]),O=w.useCallback(()=>{T(),p(!1),y(""),a.current=null},[T]),z=w.useCallback(async()=>{if(!o.current||!u.current||!b){console.error("[useCamera] Cannot capture: video not ready");return}const Y=o.current,J=u.current;J.width=Y.videoWidth,J.height=Y.videoHeight,J.getContext("2d").drawImage(Y,0,0);const K=J.toDataURL("image/jpeg",.8);console.log("[useCamera] Photo captured, size:",K.length),O(),await E(K)},[b,O,E]),B=w.useCallback((Y,J="Photo",G="bg-walkthrough")=>{if(console.log("[useCamera] openCamera called, callback:",!!Y,"folder:",G),a.current=Y,n.current=G,y(J),/iPhone|iPad|iPod|Android/i.test(navigator.userAgent)){console.log("[useCamera] Mobile detected, using file input"),r.current&&r.current.click();return}navigator.mediaDevices&&navigator.mediaDevices.getUserMedia?(p(!0),navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"},audio:!1}).then(P=>{console.log("[useCamera] Got video stream"),d.current=P,o.current&&(o.current.srcObject=P,o.current.onloadedmetadata=()=>{console.log("[useCamera] Video ready"),x(!0)})}).catch(P=>{console.error("[useCamera] getUserMedia error:",P),p(!1),r.current&&r.current.click()})):(console.log("[useCamera] No getUserMedia, using file input"),r.current&&r.current.click())},[]);return{fileInputRef:r,handleFileSelect:R,isOpen:f,label:g,isVideoReady:b,isUploading:S,videoRef:o,canvasRef:u,openCamera:B,capturePhoto:z,closeCamera:O}},xm={type:"restroom",amberEligible:!1,description:"Any defect = RED",cleanliness:["Toilets and urinals are clean (no soil, stains, or residue)?","Sinks and counters are dry and clean (no water spots or residue)?","Mirrors are clean (no smudges or streaks)?","Floor is clean (no debris, water, or stains)?","Soap dispensers are working and stocked (enough for one full day)?","Paper towels or hand dryers are working and stocked (enough for one full day)?","Toilet paper is fully stocked (fresh rolls in place)?","Trash cans are empty with liners in place (no overflow)?","Free of bad odors (no urine, mold, sewage, or garbage smell)?","Area is safe (no wet floors, broken fixtures, or hazards)?"]},bw=a=>({...xm,name:`Restroom ${a}`}),La={entry:{name:"Entry & Lobby",type:"mandatory",amberEligible:!0,description:"Parent-facing zone",cleanliness:["Floor is clean (no debris, spills, or stains)?","Entry mat is clean and flat (no curled edges or trip hazards)?","Exterior door glass is clean (no smudges or fingerprints)?","Interior glass is clean (no smudges or streaks)?","Reception surfaces are dust-free (counters, desks, shelves)?","High-touch surfaces are clean (door handles, counter edges)?","Trash cans are empty with liners in place (no overflow)?","Free of bad odors (no mold, garbage, or musty smell)?","Area is safe (no wet floors, loose items, or hazards)?"]},hallway:{name:"Hallway / Corridor",type:"mandatory",amberEligible:!0,cleanliness:["Floor is clean (no debris, spills, or stains)?","Edges, corners, and baseboards are dust-free (no buildup)?","Walls are free of scuff marks (no black marks or scrapes)?","Glass and doors are clean (no smudges or fingerprints)?","High-touch surfaces are clean (door handles, railings, light switches)?","Trash cans are empty with liners in place (no overflow)?","Area is safe (no wet floors, obstacles, or hazards)?"]},commons:{name:"Commons Area",type:"mandatory",amberEligible:!0,cleanliness:["Floor is clean (no debris, spills, or stains)?","Tables and surfaces are clean and dry (no sticky spots or residue)?","Furniture is properly arranged (chairs pushed in, not scattered)?","High-touch surfaces are clean (door handles, table edges, chair backs)?","Trash cans are empty with liners in place (no overflow)?","Free of bad odors (no food, mold, or garbage smell)?","Area is safe (no wet floors, broken furniture, or hazards)?"]},supply_closet:{name:"Supply Closet",type:"mandatory",amberEligible:!0,description:"1-week minimum threshold",isSupplyCheck:!0,cleanliness:["Toilet paper supply is sufficient (enough for one week)?","Paper towel supply is sufficient (enough for one week)?","Soap and sanitizer supply is sufficient (enough for one week)?","Trash liner supply is sufficient (enough for one week)?","Cleaning supplies are present and stocked (chemicals, mops, rags)?","Closet is organized (items on shelves, nothing blocking walkway)?"],supplyItems:[0,1,2,3]},classroom:{name:"Classroom",type:"optional",amberEligible:!0,cleanliness:["Floor is clean (no debris, spills, or stains)?","Edges, corners, and baseboards are dust-free (no buildup)?","Student desks and tables are clean (no writing, stickers, or residue)?","Teacher desk and surfaces are clean (no dust or clutter)?","Whiteboard area is clean (tray wiped, ledge dust-free)?","High-touch surfaces are clean (door handle, light switches)?","Trash cans are empty with liners in place (no overflow)?","Area is safe (no tripping hazards, loose wires, or broken items)?"]},office:{name:"Office / Workroom",type:"optional",amberEligible:!0,cleanliness:["Floor is clean (no debris, spills, or stains)?","Desk and work surfaces are dust-free (no buildup or clutter)?","High-touch surfaces are clean (door handles, light switches, shared equipment)?","Trash cans are empty with liners in place (no overflow)?","Area is safe (no tripping hazards, loose wires, or blocked exits)?"]},gym:{name:"Gym / Multi-Purpose",type:"optional",amberEligible:!0,cleanliness:["Floor is clean (no debris, spills, or stains)?","Floor finish is intact (no excessive scuffing, peeling, or damage)?","Bleachers and seating are clean (no dust, debris, or sticky spots)?","Equipment storage area is organized (items put away, nothing on floor)?","High-touch surfaces are clean (door handles, equipment, railings)?","Trash cans are empty with liners in place (no overflow)?","Free of bad odors (no sweat, mold, or musty smell)?","Area is safe (no loose equipment, wet floors, or hazards)?"]},cafeteria:{name:"Cafeteria",type:"optional",amberEligible:!0,cleanliness:["Floor is clean (no debris, spills, or stains)?","Tables and seating are clean and dry (no sticky spots or food residue)?","Service and counter area is clean (no crumbs, spills, or buildup)?","High-touch surfaces are clean (door handles, tray rails, chair backs)?","Trash cans are empty with liners in place (no overflow)?","Free of bad odors (no spoiled food, garbage, or drain smell)?","Area is safe (no wet floors, broken chairs, or hazards)?"]}},$r=["entry","hallway","commons","supply_closet"],xw=["classroom","office","gym","cafeteria"],fu=$r,vw=()=>{const[a,n]=w.useState(null),[r,o]=w.useState(""),[u,d]=w.useState(""),[f,p]=w.useState(null),[g,y]=w.useState([]),[b,x]=w.useState(1),[S,_]=w.useState(0),[E,R]=w.useState({}),[T,O]=w.useState([]),[z,B]=w.useState(null),[Y,J]=w.useState({}),G=w.useMemo(()=>Array.from({length:b},(ne,oe)=>`restroom_${oe+1}`),[b]),K=w.useMemo(()=>[...$r,...g,...G],[g,G]),P=w.useMemo(()=>K[S],[K,S]),F=w.useCallback(ne=>{if(!ne)return null;if(ne.startsWith("restroom_")){const oe=parseInt(ne.split("_")[1]);return bw(oe)}return La[ne]},[]),ve=w.useMemo(()=>F(P),[P,F]),be=w.useCallback(ne=>{const oe=E[ne]||{};return Object.values(oe).filter(pe=>pe==="no").length},[E]),Ae=w.useCallback(()=>K.reduce((ne,oe)=>ne+be(oe),0),[K,be]),Se=w.useCallback(()=>{let ne=0,oe=!1;for(const pe of K){const ke=F(pe),_e=be(pe);ne+=_e,ke&&!ke.amberEligible&&_e>0&&(oe=!0)}return z==="no"||oe?"RED":ne===0?"GREEN":ne===1?"AMBER":"RED"},[K,be,z,F]),q=w.useCallback(ne=>{const oe=F(ne);if(!oe)return!1;const pe=E[ne]||{};return Object.keys(pe).length===oe.cleanliness.length},[E,F]),V=w.useCallback((ne,oe,pe)=>{R(ke=>({...ke,[ne]:{...ke[ne]||{},[oe]:pe}}))},[]),j=w.useCallback((ne,oe,pe={})=>{O(ke=>{const _e=ke.findIndex(Ot=>Ot.zoneId===ne);if(_e>=0){const Ot=[...ke];return Ot[_e]={...Ot[_e],hasIssue:oe,...oe?pe:{photos:[],note:""}},Ot}else return[...ke,{zoneId:ne,hasIssue:oe,note:"",photos:[],...pe}]})},[]),M=w.useCallback((ne,oe)=>{console.log("[useAudit] addConditionAlertPhoto called:",{zoneId:ne,photoLength:oe?.length}),O(pe=>{const ke=pe.findIndex(_e=>_e.zoneId===ne);if(console.log("[useAudit] Found alert at index:",ke,"for zone:",ne),ke>=0){const _e=[...pe],Ot=_e[ke].photos||[];return _e[ke]={..._e[ke],photos:[...Ot,oe]},console.log("[useAudit] Updated alert:",_e[ke].zoneId,"photoCount:",_e[ke].photos.length),_e}return console.warn("[useAudit] WARNING: No existing alert found for zone:",ne),pe})},[]),Q=w.useCallback((ne,oe)=>{O(pe=>{const ke=pe.findIndex(_e=>_e.zoneId===ne);if(ke>=0){const _e=[...pe],Ot=_e[ke].photos||[];return _e[ke]={..._e[ke],photos:Ot.filter((ie,me)=>me!==oe)},_e}return pe})},[]),de=w.useCallback((ne,oe)=>{O(pe=>{const ke=pe.findIndex(_e=>_e.zoneId===ne);if(ke>=0){const _e=[...pe];return _e[ke]={..._e[ke],note:oe},_e}return pe})},[]),he=w.useCallback(ne=>{const oe=T.find(pe=>pe.zoneId===ne);return oe?oe.hasIssue===!1?!0:oe.hasIssue&&oe.photo&&oe.note&&oe.note.length>0:!1},[T]),k=w.useCallback(ne=>T.find(oe=>oe.zoneId===ne),[T]),I=w.useCallback((ne,oe)=>{J(pe=>({...pe,[ne]:[...pe[ne]||[],...oe]}))},[]),X=w.useCallback(ne=>Y[ne]||[],[Y]),ee=w.useCallback((ne,oe)=>{J(pe=>({...pe,[ne]:(pe[ne]||[]).filter((ke,_e)=>_e!==oe)}))},[]),fe=w.useCallback(()=>Y,[Y]),ge=w.useCallback(()=>{n(null),o(""),d(""),p(null),y([]),x(1),_(0),R({}),O([]),B(null),J({})},[]),ze=w.useCallback((ne,oe,pe,ke,_e=1)=>{n(ne),o(oe),d(pe),y(ke),x(_e),p(Date.now())},[]),Ke=w.useCallback(()=>f?Math.round((Date.now()-f)/6e4):0,[f]),Me=w.useCallback(()=>Object.keys(E).length,[E]),pn=w.useCallback(()=>{for(let ne=0;ne<K.length;ne++)if(!E[K[ne]])return ne;return-1},[K,E]),gn=w.useCallback(()=>{const ne=T.filter(oe=>oe.hasIssue);return console.log("[useAudit] buildAuditData - conditionAlerts:",T),console.log("[useAudit] buildAuditData - filtered alerts with hasIssue:",ne),ne.forEach((oe,pe)=>{console.log(`[useAudit] Alert ${pe}:`,{zoneId:oe.zoneId,hasIssue:oe.hasIssue,hasPhoto:!!oe.photo,photoLength:oe.photo?.length,note:oe.note})}),{date:new Date().toLocaleDateString(),time:new Date().toLocaleTimeString(),campus:a?.name||"",auditor:r,auditorEmail:u,status:Se(),defects:Ae(),zones:K.length,duration:Ke(),tourReady:z==="yes",conditionAlerts:ne.length,zoneResults:E,conditionAlertDetails:ne,campusData:a,zonePhotos:Y}},[a,r,u,Se,Ae,K,Ke,z,T,E,Y]);return{campus:a,auditorName:r,auditorEmail:u,startTime:f,selectedOptionalZones:g,restroomCount:b,currentZoneIndex:S,zoneResults:E,conditionAlerts:T,tourReady:z,allZones:K,currentZoneId:P,currentZone:ve,zonePhotos:Y,setCampus:n,setAuditorName:o,setAuditorEmail:d,setSelectedOptionalZones:y,setRestroomCount:x,setCurrentZoneIndex:_,setTourReady:B,setResponse:V,setConditionAlert:j,addConditionAlertPhoto:M,removeConditionAlertPhoto:Q,updateConditionAlertNote:de,addZonePhotos:I,getZonePhotos:X,removeZonePhoto:ee,getAllZonePhotos:fe,countDefects:be,getTotalDefects:Ae,calculateStatus:Se,isZoneComplete:q,canCompleteCondition:he,getConditionAlert:k,getZoneConfig:F,getDuration:Ke,getCompletedZonesCount:Me,getNextIncompleteZoneIndex:pn,resetAudit:ge,beginAudit:ze,buildAuditData:gn}},ww=()=>{const[a,n]=w.useState(null),[r,o]=w.useState([]),[u,d]=w.useState(""),[f,p]=w.useState(""),[g,y]=w.useState(!1),[b,x]=w.useState(null),[S,_]=w.useState(""),[E,R]=w.useState(!1),T=w.useCallback(J=>{o(G=>[...G,J])},[]),O=w.useCallback(J=>{o(G=>G.filter((K,P)=>P!==J))},[]),z=r[0]||null,B=w.useCallback(J=>{o(J?[J]:[])},[]),Y=w.useCallback(()=>{n(null),o([]),d(""),p(""),y(!1),x(null),_(""),R(!1)},[]);return{campus:a,photos:r,photo:z,description:u,location:f,isEmergency:g,category:b,note:S,urgent:E,setCampus:n,setPhotos:o,setPhoto:B,addPhoto:T,removePhoto:O,setDescription:d,setLocation:p,setIsEmergency:y,setCategory:x,setNote:_,setUrgent:R,resetReport:Y}},Ir={1:{resolution:"<12h"},2:{resolution:"<24h"},3:{resolution:"<72h"}},hn={landscaping:{id:"landscaping",name:"Landscaping",order:1,description:"Turf, beds, trees, mulch, irrigation, drainage",sections:[{name:"Turf (Grass Areas)",checks:[{id:"turf_height",text:"Grass is the same height everywhere (no tall patches or short patches)?",tier:3},{id:"turf_color",text:"Grass is green and healthy looking (no yellow or brown spots)?",tier:3},{id:"turf_weeds",text:"Grass is mostly grass, not weeds (some weeds OK, but grass should be the main plant)?",tier:3,amberEligible:!0},{id:"turf_bare",text:"Grass covers all areas (no bare dirt patches showing)?",tier:2,amberIneligibleIf:"visible from arrival path"},{id:"turf_scalping",text:"Grass is cut properly (not cut too short showing brown, not overgrown and shaggy)?",tier:3}]},{name:"Edging (Where Grass Meets Sidewalk)",checks:[{id:"edging_lines",text:"Edges look neat and straight (clean line between grass and sidewalk)?",tier:3},{id:"edging_overhang",text:"Grass stays in the grass area (not growing over onto sidewalk or curb)?",tier:3},{id:"edging_weeds",text:"Sidewalk cracks are clear (no weeds growing up through the cracks)?",tier:3}]},{name:"Plant Beds (Flower and Shrub Areas)",checks:[{id:"beds_healthy",text:"Plants look healthy (standing up straight, not drooping or wilting)?",tier:3},{id:"beds_pests",text:"Plants are pest-free (no holes in leaves, no bugs visible, no webs)?",tier:3},{id:"beds_dead",text:"All plants are alive (no brown, dead, or dying plants)?",tier:3},{id:"beds_toxic",text:"No dangerous plants present (no oleander, poison ivy, poison oak, or other toxic plants)?",tier:1},{id:"beds_weeds",text:"Beds are mostly plants, not weeds (some weeds OK, but planted flowers/shrubs should be the main plants)?",tier:3,amberEligible:!0},{id:"beds_seasonal",text:"Seasonal flowers are blooming and colorful (if the season calls for flowers, they should be alive and blooming)?",tier:4,amberEligible:!0}]},{name:"Mulch (Wood Chips in Plant Beds)",checks:[{id:"mulch_coverage",text:"Mulch covers all the soil (no bare dirt showing through the wood chips)?",tier:3,amberEligible:!0},{id:"mulch_weeds",text:"Mulch is weed-free (no weeds poking up through the wood chips)?",tier:3}]},{name:"Trees",checks:[{id:"trees_clearance",text:"Tree branches are high enough (an adult can walk under without ducking)?",tier:3},{id:"trees_limbs",text:"All branches are healthy and attached (no dead branches, no broken limbs hanging)?",tier:1},{id:"trees_disease",text:"Trees look healthy (no strange spots on leaves, no fungus on trunk, no oozing sap)?",tier:3},{id:"trees_lean",text:"Trees stand straight (no trees leaning dangerously that could fall)?",tier:1}]},{name:"Irrigation (Sprinkler System)",checks:[{id:"irrigation_leaks",text:"No water leaks visible (no puddles, no water spraying from broken pipes)?",tier:2},{id:"irrigation_dry",text:"All areas are getting water (no dry brown patches from sprinklers not reaching)?",tier:2},{id:"irrigation_overspray",text:"Water stays on plants (sprinklers not spraying onto sidewalks, walls, or parking lot)?",tier:3},{id:"irrigation_heads",text:"Sprinkler heads are intact (no broken, cracked, or missing sprinkler heads)?",tier:3}]},{name:"Debris (Trash and Litter)",checks:[{id:"debris_trash",text:"Grounds are litter-free (no trash, wrappers, bottles, or garbage on the ground)?",tier:3,amberEligible:!0},{id:"debris_leaves",text:"Grounds are clear of yard waste (no piles of leaves, sticks, or branches)?",tier:3,amberEligible:!0}]},{name:"Drainage (Water Flow)",checks:[{id:"drainage_standing",text:"No standing water (no puddles sitting in grass or low spots)?",tier:2},{id:"drainage_erosion",text:"No erosion damage (no washed-out areas, no gullies, no exposed roots from water runoff)?",tier:2}]}]},hardscapes:{id:"hardscapes",name:"Hardscapes & Parking",order:2,description:"Parking surface, striping, walkways, curbing, site furnishings",sections:[{name:"Parking Lot Surface",checks:[{id:"parking_potholes",text:"Parking lot is smooth (no potholes or dips you would walk around)?",tier:1},{id:"parking_cracks_width",text:"No wide cracks (no cracks big enough to fit a pencil inside)?",tier:2},{id:"parking_cracks_length",text:"No long cracks (no cracks longer than the length of your shoe)?",tier:2},{id:"parking_oil",text:"No large oil stains (no stains bigger than your hand)?",tier:3,amberEligible:!0},{id:"parking_stain_pattern",text:"Parking lot looks clean overall (no obvious pattern of stains when you drive in)?",tier:2}]},{name:"Parking Lot Striping (Painted Lines)",checks:[{id:"striping_visible",text:"Parking lines are easy to see (all painted lines are visible and not faded)?",tier:3},{id:"striping_ada",text:"Handicap markings are clear (blue paint and wheelchair symbol are easy to read)?",tier:2}]},{name:"Walkways and Sidewalks",checks:[{id:"walkways_cracks",text:"No wide cracks (no cracks big enough to fit a pencil inside)?",tier:2},{id:"walkways_trip",text:"No trip hazards (no raised edges, uneven sections, or gaps that could trip someone)?",tier:1},{id:"walkways_stains",text:"Walkways are clean (no stains, no chewing gum stuck to concrete)?",tier:3},{id:"walkways_moss",text:"Walkways are safe to walk on (no moss, algae, or slippery spots)?",tier:1}]},{name:"Curbing (Curbs and Borders)",checks:[{id:"curbing_intact",text:"Curbs are solid (no crumbling, chipping, or broken pieces)?",tier:3},{id:"curbing_paint",text:"Curb paint is visible (yellow, red, or white paint still shows where needed)?",tier:4,amberEligible:!0}]},{name:"Outdoor Furniture (Benches, Trash Cans)",checks:[{id:"furnishings_benches",text:"Benches are in good shape (no broken boards, no loose parts, safe to sit on)?",tier:3},{id:"furnishings_graffiti",text:"No graffiti anywhere (no spray paint, markers, or scratched messages)?",tier:2},{id:"furnishings_rust",text:"Metal items are rust-free (no rust holes, no flaking rust)?",tier:3},{id:"furnishings_trash",text:"Trash cans work properly (lids open and close, cans are not broken or overflowing)?",tier:3}]}]},buildingExterior:{id:"buildingExterior",name:"Building Exterior",order:3,description:"Roof, gutters, walls, windows, doors, lighting",sections:[{name:"Roof (What You Can See From Ground)",checks:[{id:"roof_debris",text:"Roof is clear (no leaves, branches, balls, or trash sitting on the roof)?",tier:3},{id:"roof_damage",text:"Roof looks intact (no missing shingles, no sagging areas, no visible damage)?",tier:2}]},{name:"Gutters and Downspouts",checks:[{id:"gutters_clear",text:"Gutters are clear (no leaves or debris sticking out of gutters)?",tier:3,amberEligible:!0},{id:"gutters_overflow",text:"Gutters drain properly (no water stains or streaks running down the walls)?",tier:2},{id:"gutters_attached",text:"Gutters are secure (no sagging sections, no gutters pulling away from building)?",tier:2}]},{name:"Exterior Walls",checks:[{id:"walls_paint",text:"Paint is in good condition (no peeling or flaking spots bigger than a quarter)?",tier:3},{id:"walls_cracks",text:"No deep cracks (no cracks with visible depth or shadow inside them)?",tier:2},{id:"walls_staining",text:"Walls are clean (no dark stains, no mold, no mildew visible from the parking lot)?",tier:2},{id:"walls_dirt",text:"Walls look presentable (no dirt buildup, no cobwebs, no debris on walls you can see walking in)?",tier:3,amberEligible:!0}]},{name:"Exterior Windows",checks:[{id:"windows_intact",text:"All windows are whole (no cracked, chipped, or broken glass)?",tier:2},{id:"windows_clean",text:"Windows are clean (no heavy dirt, dust, or grime buildup)?",tier:3},{id:"windows_seal",text:"Window seals are good (no foggy glass from broken seals, no gaps around frames)?",tier:3}]},{name:"Exterior Doors",checks:[{id:"doors_clean",text:"Doors are clean (no dirt, dust, or grime on door surfaces)?",tier:3},{id:"doors_damage",text:"Doors are undamaged (no dents, scratches, peeling paint, or broken parts)?",tier:2},{id:"doors_weatherstrip",text:"Weatherstripping is present (rubber seal around door edges is visible and intact)?",tier:3}]},{name:"Exterior Lighting",checks:[{id:"lighting_operational",text:"All lights work (no burnt out bulbs, no flickering lights)?",tier:2},{id:"lighting_lenses",text:"Light covers are clean (no heavy dirt, bugs, or debris inside light fixtures)?",tier:4,amberEligible:!0},{id:"lighting_dark",text:"Walkways are well-lit (no dark areas along the path from parking to entrance)?",tier:1}]}]},entrance:{id:"entrance",name:"Entrance & Arrival",order:4,description:"Signage, entry glass, mats, threshold, Ritz-Carlton test",sections:[{name:"Building Signage",checks:[{id:"signage_clean",text:"Signs are clean (no dirt, dust, bird droppings, or grime)?",tier:3},{id:"signage_aligned",text:"Signs are straight (not crooked, tilted, or hanging unevenly)?",tier:3},{id:"signage_illuminated",text:"Lit signs are working (if the sign has lights, they are all on and bright)?",tier:2},{id:"signage_visible",text:"Signs can be seen clearly (nothing blocking the view from the parking lot)?",tier:2}]},{name:"Entry Door Glass",checks:[{id:"entry_glass",text:"Entry glass is spotless (no fingerprints, smudges, streaks, or nose prints)?",tier:2,amberIneligible:!0}]},{name:"Entry Mats",checks:[{id:"mats_centered",text:"Mats are centered in doorway (not pushed to one side or crooked)?",tier:3,amberEligible:!0},{id:"mats_clean",text:"Mats are clean (no heavy dirt, stains, or debris on mat surface)?",tier:3},{id:"mats_trip",text:"Mats are flat and safe (no curled edges, bumps, or corners sticking up)?",tier:1}]},{name:"Door Threshold (Floor at Doorway)",checks:[{id:"threshold_clear",text:"Threshold is clean (no leaves, dirt, sand, or debris at the door)?",tier:3,amberEligible:!0},{id:"threshold_damage",text:"Threshold is in good condition (no chips, cracks, or damage to floor at doorway)?",tier:2}]},{name:"First Impression Test",checks:[{id:"ritz_test",text:"Entrance looks professional (would a guest at a nice hotel find this entrance acceptable)?",tier:2}]}]},interior:{id:"interior",name:"Interior Building Condition",order:5,description:"Walls, floors, ceilings, doors/windows, baseboards, fixtures, furniture",isRoomBased:!0,requiredRooms:{classroom:{min:3,label:"Classrooms"},bathroom:{min:2,label:"Bathrooms"}},classroomSections:[{name:"Interior Walls",checks:[{id:"int_walls_paint",text:"Paint is in good condition (no peeling, flaking, or chipping spots bigger than a quarter)?",tier:3},{id:"int_walls_bubbling",text:"Walls are flat (no bubbles, blisters, or bumps in the paint)?",tier:3},{id:"int_walls_touchup",text:"Touch-up paint matches (no obvious patches of different colored paint)?",tier:3},{id:"int_walls_water",text:"No water damage (no water stains, brown spots, or damp areas bigger than your hand)?",tier:1,amberIneligible:!0},{id:"int_walls_holes",text:"Walls are intact (no holes or gouges bigger than a quarter)?",tier:3},{id:"int_walls_cracks",text:"No deep cracks (no cracks with visible depth or shadow inside them)?",tier:2},{id:"int_walls_seams",text:"Drywall looks smooth (no visible tape lines, seams, or joints when standing arm's length away)?",tier:3},{id:"int_walls_scuffs",text:"Walls are mostly scuff-free (no more than 3 scuff marks on any wall)?",tier:3,amberEligible:!0}]},{name:"Floors",checks:[{id:"int_floors_cracks",text:"Hard floors are intact (no cracks bigger than a quarter)?",tier:2},{id:"int_floors_chips",text:"No chipped edges (no chips or lips that could catch your foot or trip someone)?",tier:1},{id:"int_floors_tiles",text:"Tiles are secure (no loose, wobbly, or cracked tiles)?",tier:2},{id:"int_floors_grout",text:"Grout is solid (no missing grout, no gaps wider than a pencil between tiles)?",tier:3},{id:"int_floors_carpet_wear",text:"Carpet looks good (no worn paths or bald spots you can see from 10 feet away)?",tier:3},{id:"int_floors_carpet_fray",text:"Carpet edges are intact (no fraying, unraveling, or loose threads at edges or seams)?",tier:3,amberEligible:!0},{id:"int_floors_carpet_ripples",text:"Carpet is flat (no bumps, ripples, or waves in the carpet)?",tier:2},{id:"int_floors_transitions",text:"Floor transitions are secure (metal strips between floor types are tight and don't move when stepped on)?",tier:2}]},{name:"Ceilings",checks:[{id:"int_ceilings_flush",text:"Ceiling tiles are in place (all tiles sitting flat in the grid, no gaps)?",tier:3},{id:"int_ceilings_sag",text:"Ceiling tiles are level (no tiles sagging or hanging below the others)?",tier:2},{id:"int_ceilings_stains",text:"No ceiling stains (no brown spots or water marks bigger than your hand)?",tier:1,amberIneligible:!0},{id:"int_ceilings_cracks",text:"No deep cracks (no cracks with visible depth or shadow inside them)?",tier:2},{id:"int_ceilings_fixtures",text:"Ceiling fixtures are secure (lights, vents, and speakers are sitting properly in ceiling)?",tier:3}]},{name:"Doors and Windows",checks:[{id:"int_doors_latch",text:"Doors close properly (door latches shut on the first try without extra pushing)?",tier:2,amberEligible:!0},{id:"int_doors_wobble",text:"Door handles are tight (no wobble or looseness when you turn the handle)?",tier:3},{id:"int_doors_components",text:"Door hardware is complete (all parts present - handle, latch plate, hinges)?",tier:3},{id:"int_doors_hinges",text:"Doors hang straight (door closes flush against the frame, no gaps or rubbing)?",tier:3},{id:"int_doors_glass",text:"Window glass is intact (no cracks, chips, or broken panes of any size)?",tier:2,amberEligible:!0},{id:"int_doors_frames",text:"Door and window frames are undamaged (no dents, chips, or missing pieces)?",tier:3}]},{name:"Baseboards and Trim",checks:[{id:"int_baseboards_gaps",text:"Baseboards are tight to wall (no gaps you can see when standing up)?",tier:3,amberEligible:!0},{id:"int_baseboards_damage",text:"Baseboards are in good shape (no damaged sections longer than your hand)?",tier:3},{id:"int_baseboards_missing",text:"All baseboards are present (no missing sections of baseboard)?",tier:2},{id:"int_baseboards_paint",text:"Baseboard paint is good (no peeling, flaking, or chipping bigger than a quarter)?",tier:3}]},{name:"Lighting and Electrical",checks:[{id:"class_lights_working",text:"All lights work (no burnt out bulbs or flickering lights)?",tier:2},{id:"class_lights_covers",text:"Light covers are in place and clean (no missing or damaged covers)?",tier:3},{id:"class_outlets_covers",text:"All outlet and switch covers are in place (no missing or broken covers)?",tier:3},{id:"class_outlets_secure",text:"Outlets are secure (no loose outlets that move when plugging in)?",tier:2}]},{name:"Furniture (Tables, Chairs, Desks)",checks:[{id:"int_furniture_wobble",text:"Furniture is stable (no wobbling when you sit down or lean on it)?",tier:2},{id:"int_furniture_legs",text:"All legs and supports are intact (no broken, bent, or missing legs)?",tier:2},{id:"int_furniture_broken",text:"Furniture is complete (no broken drawers, missing parts, or damaged pieces)?",tier:2},{id:"int_furniture_edges",text:"No sharp edges exposed (no broken corners, exposed metal, or splintered wood)?",tier:1},{id:"int_furniture_upholstery",text:"Fabric is intact (no tears, rips, or seams coming apart on upholstered items)?",tier:3}]},{name:"Whiteboard/Teaching Surfaces",checks:[{id:"class_whiteboard_surface",text:"Whiteboard surface is undamaged (no dents, scratches, cracks, or delamination)?",tier:3},{id:"class_whiteboard_secure",text:"Whiteboard is securely mounted (no wobble or movement)?",tier:2},{id:"class_markers_tray",text:"Marker tray is intact (no broken or missing tray)?",tier:3}]}],bathroomSections:[{name:"Walls and Partitions",checks:[{id:"bath_walls_paint",text:"Paint is in good condition (no peeling, flaking, or chipping)?",tier:3},{id:"bath_walls_water",text:"No water damage (no water stains, brown spots, or mold)?",tier:1,amberIneligible:!0},{id:"bath_walls_holes",text:"Walls are intact (no holes or damage bigger than a quarter)?",tier:3},{id:"bath_partitions_stable",text:"Stall partitions are stable (no wobbling or loose partitions)?",tier:2},{id:"bath_partitions_hardware",text:"Partition hardware is complete (all hinges, latches, and hooks present)?",tier:3},{id:"bath_partitions_gaps",text:"Partitions provide privacy (no large gaps between panels)?",tier:3}]},{name:"Floors",checks:[{id:"bath_floors_cracks",text:"Floor tiles are intact (no cracks or chips bigger than a quarter)?",tier:2},{id:"bath_floors_grout",text:"Grout is solid and sealed (no missing, crumbling, or discolored grout)?",tier:3},{id:"bath_floors_trip",text:"No trip hazards (no raised edges, loose tiles, or uneven surfaces)?",tier:1},{id:"bath_floors_drain",text:"Floor drains are clear (no standing water around drains)?",tier:2}]},{name:"Ceilings",checks:[{id:"bath_ceilings_stains",text:"No ceiling stains (no water marks or discoloration)?",tier:1,amberIneligible:!0},{id:"bath_ceilings_tiles",text:"Ceiling tiles are in place (no missing or sagging tiles)?",tier:2},{id:"bath_ceilings_vent",text:"Exhaust vent is present and appears functional?",tier:2}]},{name:"Toilets and Urinals",checks:[{id:"bath_toilets_secure",text:"Toilets are securely mounted (no rocking or movement)?",tier:2},{id:"bath_toilets_flush",text:"Toilets flush properly (water drains and refills correctly)?",tier:2},{id:"bath_toilets_seats",text:"Toilet seats are intact (no cracks, chips, or loose seats)?",tier:3},{id:"bath_toilets_handles",text:"Flush handles work (no broken or missing handles)?",tier:2},{id:"bath_urinals_flush",text:"Urinals flush properly (if applicable)?",tier:2},{id:"bath_urinals_dividers",text:"Urinal dividers are in place and secure (if applicable)?",tier:3}]},{name:"Sinks and Counters",checks:[{id:"bath_sinks_secure",text:"Sinks are securely mounted (no wobble or movement)?",tier:2},{id:"bath_sinks_drain",text:"Sinks drain properly (no slow drains or standing water)?",tier:2},{id:"bath_sinks_faucets",text:"Faucets work correctly (no leaks, proper hot/cold)?",tier:2},{id:"bath_sinks_handles",text:"Faucet handles are intact (no loose or missing handles)?",tier:3},{id:"bath_counters_surface",text:"Counter surfaces are intact (no chips, cracks, or delamination)?",tier:3},{id:"bath_counters_caulk",text:"Caulking around sinks is intact (no gaps or peeling)?",tier:3}]},{name:"Mirrors",checks:[{id:"bath_mirrors_intact",text:"Mirrors are intact (no cracks, chips, or damage)?",tier:2},{id:"bath_mirrors_secure",text:"Mirrors are securely mounted (no loose or angled mirrors)?",tier:2}]},{name:"Dispensers and Accessories",checks:[{id:"bath_soap_dispenser",text:"Soap dispensers are present and functional?",tier:2},{id:"bath_paper_dispenser",text:"Paper towel dispensers are present and functional?",tier:2},{id:"bath_tp_holders",text:"Toilet paper holders are present and secure?",tier:3},{id:"bath_trash_cans",text:"Trash receptacles are present and functional?",tier:3},{id:"bath_sanitary",text:"Sanitary product dispensers work (if applicable)?",tier:3}]},{name:"Doors",checks:[{id:"bath_door_main",text:"Main door closes and latches properly?",tier:2},{id:"bath_door_stalls",text:"Stall doors close and latch properly?",tier:2},{id:"bath_door_hardware",text:"Door hardware is complete (handles, locks work)?",tier:3},{id:"bath_door_gaps",text:"Door frames are intact (no large gaps or damage)?",tier:3}]}],sections:[{name:"Interior Walls",checks:[{id:"int_walls_paint",text:"Paint is in good condition (no peeling, flaking, or chipping spots bigger than a quarter)?",tier:3},{id:"int_walls_bubbling",text:"Walls are flat (no bubbles, blisters, or bumps in the paint)?",tier:3},{id:"int_walls_touchup",text:"Touch-up paint matches (no obvious patches of different colored paint)?",tier:3},{id:"int_walls_water",text:"No water damage (no water stains, brown spots, or damp areas bigger than your hand)?",tier:1,amberIneligible:!0},{id:"int_walls_holes",text:"Walls are intact (no holes or gouges bigger than a quarter)?",tier:3},{id:"int_walls_cracks",text:"No deep cracks (no cracks with visible depth or shadow inside them)?",tier:2},{id:"int_walls_seams",text:"Drywall looks smooth (no visible tape lines, seams, or joints when standing arm's length away)?",tier:3},{id:"int_walls_scuffs",text:"Walls are mostly scuff-free (no more than 3 scuff marks on any wall)?",tier:3,amberEligible:!0}]},{name:"Floors",checks:[{id:"int_floors_cracks",text:"Hard floors are intact (no cracks bigger than a quarter)?",tier:2},{id:"int_floors_chips",text:"No chipped edges (no chips or lips that could catch your foot or trip someone)?",tier:1},{id:"int_floors_tiles",text:"Tiles are secure (no loose, wobbly, or cracked tiles)?",tier:2},{id:"int_floors_grout",text:"Grout is solid (no missing grout, no gaps wider than a pencil between tiles)?",tier:3},{id:"int_floors_carpet_wear",text:"Carpet looks good (no worn paths or bald spots you can see from 10 feet away)?",tier:3},{id:"int_floors_carpet_fray",text:"Carpet edges are intact (no fraying, unraveling, or loose threads at edges or seams)?",tier:3,amberEligible:!0},{id:"int_floors_carpet_ripples",text:"Carpet is flat (no bumps, ripples, or waves in the carpet)?",tier:2},{id:"int_floors_transitions",text:"Floor transitions are secure (metal strips between floor types are tight and don't move when stepped on)?",tier:2}]},{name:"Ceilings",checks:[{id:"int_ceilings_flush",text:"Ceiling tiles are in place (all tiles sitting flat in the grid, no gaps)?",tier:3},{id:"int_ceilings_sag",text:"Ceiling tiles are level (no tiles sagging or hanging below the others)?",tier:2},{id:"int_ceilings_stains",text:"No ceiling stains (no brown spots or water marks bigger than your hand)?",tier:1,amberIneligible:!0},{id:"int_ceilings_cracks",text:"No deep cracks (no cracks with visible depth or shadow inside them)?",tier:2},{id:"int_ceilings_fixtures",text:"Ceiling fixtures are secure (lights, vents, and speakers are sitting properly in ceiling)?",tier:3}]},{name:"Interior Doors and Windows",checks:[{id:"int_doors_latch",text:"Doors close properly (door latches shut on the first try without extra pushing)?",tier:2,amberEligible:!0},{id:"int_doors_wobble",text:"Door handles are tight (no wobble or looseness when you turn the handle)?",tier:3},{id:"int_doors_components",text:"Door hardware is complete (all parts present - handle, latch plate, hinges)?",tier:3},{id:"int_doors_hinges",text:"Doors hang straight (door closes flush against the frame, no gaps or rubbing)?",tier:3},{id:"int_doors_glass",text:"Window glass is intact (no cracks, chips, or broken panes of any size)?",tier:2,amberEligible:!0},{id:"int_doors_frames",text:"Door and window frames are undamaged (no dents, chips, or missing pieces)?",tier:3}]},{name:"Baseboards and Trim",checks:[{id:"int_baseboards_gaps",text:"Baseboards are tight to wall (no gaps you can see when standing up)?",tier:3,amberEligible:!0},{id:"int_baseboards_damage",text:"Baseboards are in good shape (no damaged sections longer than your hand)?",tier:3},{id:"int_baseboards_missing",text:"All baseboards are present (no missing sections of baseboard)?",tier:2},{id:"int_baseboards_paint",text:"Baseboard paint is good (no peeling, flaking, or chipping bigger than a quarter)?",tier:3}]},{name:"Fixtures (Sinks, Lights, Outlets)",checks:[{id:"int_fixtures_secure",text:"Fixtures are attached firmly (nothing loose or pulling away from wall or ceiling)?",tier:2},{id:"int_fixtures_broken",text:"All parts work (no broken handles, knobs, switches, or levers)?",tier:2},{id:"int_fixtures_scratches",text:"Fixtures look good (no big chips or scratches you can see from arm's length)?",tier:3,amberEligible:!0},{id:"int_fixtures_covers",text:"All covers are in place (no missing outlet covers, switch plates, or vent covers)?",tier:3}]},{name:"Furniture (Tables, Chairs, Desks)",checks:[{id:"int_furniture_wobble",text:"Furniture is stable (no wobbling when you sit down or lean on it)?",tier:2},{id:"int_furniture_legs",text:"All legs and supports are intact (no broken, bent, or missing legs)?",tier:2},{id:"int_furniture_broken",text:"Furniture is complete (no broken drawers, missing parts, or damaged pieces)?",tier:2},{id:"int_furniture_edges",text:"No sharp edges exposed (no broken corners, exposed metal, or splintered wood)?",tier:1},{id:"int_furniture_upholstery",text:"Fabric is intact (no tears, rips, or seams coming apart on upholstered items)?",tier:3}]}]},observations:{id:"observations",name:"Observations & Routing",order:6,description:"Issues observed that route to other pillars",isObservationZone:!0,routingCategories:[{id:"security",name:"Security",pillar:"Security Pillar",tier:1,items:["Perimeter doors not latching properly","Gates not self-closing and latching","Fencing gaps","Cameras not powered or views obstructed","Access readers not functional","Doors propped open"]},{id:"outdoor_rec",name:"Outdoor Recreation",pillar:"Outdoor Recreation Pillar",tier:2,items:["Equipment with visible damage","Sharp edges or hazards visible","Surfacing voids or displacement","Hard surface exposed in fall zones","Fencing or gate issues","Debris/foreign objects in play area"]},{id:"fire_life_safety",name:"Fire & Life Safety",pillar:"Fire/Life Safety Pillar",tier:1,items:["Extinguishers missing or tags not current","Emergency lighting not functional","Exit signage not illuminated","Address numbers not visible from street","Egress paths obstructed"]},{id:"mechanical",name:"Mechanical",pillar:"Mechanical Domain",tier:2,items:["Temperature complaints","Plumbing issues","Electrical issues","Elevator not functioning"]},{id:"cleanliness",name:"Cleanliness",pillar:"Cleanliness Domain",tier:3,items:["Interior cleanliness issues"]},{id:"structural_capital",name:"Structural/Capital",pillar:"Leadership",tier:3,items:["Structural cracks","Foundation concerns","End-of-life asset conditions","Issues requiring capital investment"]}]},governance:{id:"governance",name:"Governance",order:7,description:"Process compliance and prior week follow-up",isGovernanceZone:!0,sections:[{name:"Prior Week Follow-Up",checks:[{id:"gov_amber_resolved",text:"Last week's Amber issues are fixed (all yellow-rated items from last week have been repaired)?",tier:2},{id:"gov_tickets_closed",text:"Last week's work orders are complete or on track (all tickets from last week are closed or have a plan)?",tier:3}]},{name:"Staff Reporting Queue",checks:[{id:"gov_see_it_empty",text:"Staff reports have been addressed (See It, Snap It queue is empty or caught up)?",tier:3}]},{name:"Photo Documentation",checks:[{id:"gov_photos_complete",text:"Photos taken for all problems (every Amber or Red item found today has a photo)?",tier:2}]}]}},Et=["landscaping","hardscapes","buildingExterior","entrance","interior","observations","governance"],Sw=a=>{const n=hn[a];return!n||!n.sections?[]:n.sections.flatMap(r=>r.checks.map(o=>({...o,section:r.name})))},Mr=(a,n)=>{const o=Sw(a).filter(p=>n[p.id]===!1);return o.length===0?"GREEN":o.some(p=>p.amberIneligible)||o.some(p=>p.tier===1)?"RED":o.every(p=>p.amberEligible)&&o.length<=2?"AMBER":(o.length>2,"RED")},_w=a=>{const n=Object.values(a),o=n.filter(d=>d==="GREEN").length/n.length*100,u=n.includes("SAFETY_FLAG");return o>=85&&!u?"PASS":"FAIL"},Ew=a=>{for(const n of Object.values(hn))if(n.sections)for(const r of n.sections){const o=r.checks.find(u=>u.id===a);if(o)return o.tier}return 3},pu="bg_walkthrough_state",gu=()=>({campus:null,campusData:null,auditor:"",auditorEmail:"",startTime:null,currentZoneIndex:0,selectedRooms:{classrooms:[],bathrooms:[]},currentRoomIndex:0,zoneResults:{},roomResults:{},issues:[],observations:[],exitPhotos:{},zoneRatings:{},priorWeekIssues:[],priorWeekResolved:null,isComplete:!1,endTime:null}),Rw=()=>{const[a,n]=w.useState(()=>{try{const q=localStorage.getItem(pu);if(q){const V=JSON.parse(q);if(V.startTime&&!V.isComplete){const j=new Date(V.startTime).toDateString(),M=new Date().toDateString();if(j===M)return V}}}catch(q){console.error("Error restoring B&G walkthrough state:",q)}return gu()});w.useEffect(()=>{if(a.startTime&&!a.isComplete)try{localStorage.setItem(pu,JSON.stringify(a))}catch(q){console.error("[useBGWalkthrough] Error saving to localStorage:",q)}},[a]);const r=w.useCallback(()=>{localStorage.removeItem(pu)},[]),o=w.useCallback((q,V,j,M)=>{n({...gu(),campus:q,campusData:V,auditor:j,auditorEmail:M,startTime:new Date().toISOString()})},[]),u=w.useCallback(()=>{r(),n(gu())},[r]),d=w.useCallback(()=>{const q=Et[a.currentZoneIndex];return hn[q]},[a.currentZoneIndex]),f=w.useCallback((q,V)=>{n(j=>({...j,selectedRooms:{classrooms:q,bathrooms:V}}))},[]),p=w.useCallback(()=>[...a.selectedRooms.classrooms.map(V=>({name:V,type:"classroom"})),...a.selectedRooms.bathrooms.map(V=>({name:V,type:"bathroom"}))][a.currentRoomIndex]||null,[a.selectedRooms,a.currentRoomIndex]),g=w.useCallback(()=>a.selectedRooms.classrooms.length+a.selectedRooms.bathrooms.length,[a.selectedRooms]),y=w.useCallback((q,V,j,M=null)=>{n(Q=>{if(M){const de=`${M}`;return{...Q,roomResults:{...Q.roomResults,[de]:{...Q.roomResults[de]||{},[V]:j}}}}else return{...Q,zoneResults:{...Q.zoneResults,[q]:{...Q.zoneResults[q]||{},[V]:j}}}})},[]),b=w.useCallback((q,V,j=null)=>{n(M=>j?{...M,roomResults:{...M.roomResults,[j]:{...M.roomResults[j]||{},...V}}}:{...M,zoneResults:{...M.zoneResults,[q]:{...M.zoneResults[q]||{},...V}}})},[]),x=w.useCallback(q=>{const V=`issue_${Date.now()}_${Math.random().toString(36).substr(2,9)}`;return n(j=>({...j,issues:[...j.issues,{id:V,timestamp:new Date().toISOString(),tier:Ew(q.checkId),photos:[],notes:"",...q}]})),V},[]),S=w.useCallback((q,V)=>{n(j=>({...j,issues:j.issues.map(M=>M.id===q?{...M,...V}:M)}))},[]),_=w.useCallback((q,V)=>{n(j=>({...j,issues:j.issues.map(M=>M.id===q?{...M,photos:[...M.photos||[],V]}:M)}))},[]),E=w.useCallback(q=>{n(V=>({...V,issues:V.issues.filter(j=>j.id!==q)}))},[]),R=w.useCallback(q=>{n(V=>({...V,observations:[...V.observations,{id:`obs_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,timestamp:new Date().toISOString(),photos:[],notes:"",...q}]}))},[]),T=w.useCallback((q,V)=>{n(j=>({...j,observations:j.observations.map(M=>M.id===q?{...M,...V}:M)}))},[]),O=w.useCallback(q=>{n(V=>({...V,observations:V.observations.filter(j=>j.id!==q)}))},[]),z=w.useCallback((q,V)=>{n(j=>({...j,exitPhotos:{...j.exitPhotos,[q]:V}}))},[]),B=w.useCallback(q=>{n(V=>({...V,priorWeekIssues:q}))},[]),Y=w.useCallback(q=>{const V=hn[q];let j;if(V.isRoomBased){const M=Object.values(a.roomResults).reduce((Q,de)=>(Object.entries(de).forEach(([he,k])=>{(Q[he]===void 0||k===!1)&&(Q[he]=k)}),Q),{});j=Mr(q,M)}else V.isObservationZone?j="GREEN":V.isGovernanceZone?j=Mr(q,a.zoneResults[q]||{}):j=Mr(q,a.zoneResults[q]||{});return n(M=>({...M,zoneRatings:{...M.zoneRatings,[q]:j}})),j},[a.zoneResults,a.roomResults]),J=w.useCallback(()=>{n(q=>{const V=q.currentZoneIndex+1;return V>=Et.length?q:{...q,currentZoneIndex:V,currentRoomIndex:0}})},[]),G=w.useCallback(()=>{n(q=>({...q,currentZoneIndex:Math.max(0,q.currentZoneIndex-1)}))},[]),K=w.useCallback(()=>{n(q=>({...q,currentRoomIndex:q.currentRoomIndex+1}))},[]),P=w.useCallback(()=>{n(q=>({...q,currentRoomIndex:Math.max(0,q.currentRoomIndex-1)}))},[]),F=w.useCallback(q=>{n(V=>({...V,currentZoneIndex:q,currentRoomIndex:0}))},[]),ve=w.useCallback(()=>{const q={};Et.forEach(j=>{const M=hn[j];if(M.isObservationZone)q[j]="GREEN";else if(M.isRoomBased){const Q=Object.values(a.roomResults).reduce((de,he)=>(Object.entries(he).forEach(([k,I])=>{(de[k]===void 0||I===!1)&&(de[k]=I)}),de),{});q[j]=Mr(j,Q)}else q[j]=Mr(j,a.zoneResults[j]||{})});const V=_w(q);return n(j=>({...j,zoneRatings:q,campusRating:V,isComplete:!0,endTime:new Date().toISOString()})),r(),{zoneRatings:q,campusRating:V}},[a.zoneResults,a.roomResults,r]),be=w.useCallback(()=>{const q=a.startTime&&a.endTime?Math.round((new Date(a.endTime)-new Date(a.startTime))/6e4):null;return{date:a.startTime?new Date(a.startTime).toLocaleDateString():null,time:a.startTime?new Date(a.startTime).toLocaleTimeString():null,campus:a.campus,campusData:a.campusData,auditor:a.auditor,auditorEmail:a.auditorEmail,duration:q,zoneResults:a.zoneResults,roomResults:a.roomResults,selectedRooms:a.selectedRooms,zoneRatings:a.zoneRatings,campusRating:a.campusRating,issues:a.issues,observations:a.observations,exitPhotos:a.exitPhotos,totalIssues:a.issues.length,totalObservations:a.observations.length,greenZones:Object.values(a.zoneRatings).filter(V=>V==="GREEN").length,amberZones:Object.values(a.zoneRatings).filter(V=>V==="AMBER").length,redZones:Object.values(a.zoneRatings).filter(V=>V==="RED").length,startTime:a.startTime,endTime:a.endTime}},[a]),Ae=a.startTime&&!a.isComplete,Se=w.useCallback(()=>{const q=d();if(!q)return!1;if(q.isObservationZone)return!0;if(q.isRoomBased){const j=[...a.selectedRooms.classrooms,...a.selectedRooms.bathrooms];return j.length===0?!1:j.every(M=>{const Q=a.roomResults[M]||{};return q.sections.every(de=>de.checks.every(he=>Q[he.id]!==void 0))})}const V=a.zoneResults[q.id]||{};return q.sections.every(j=>j.checks.every(M=>V[M.id]!==void 0))},[d,a.zoneResults,a.roomResults,a.selectedRooms]);return{...a,isInProgress:Ae,getCurrentZone:d,getCurrentRoom:p,getTotalRoomCount:g,getWalkthroughData:be,isCurrentZoneComplete:Se,initWalkthrough:o,resetWalkthrough:u,setSelectedRooms:f,recordCheckResult:y,recordZoneResults:b,addIssue:x,updateIssue:S,addPhotoToIssue:_,removeIssue:E,addObservation:R,updateObservation:T,removeObservation:O,addExitPhoto:z,setPriorWeekIssues:B,calculateAndSetZoneRating:Y,nextZone:J,prevZone:G,nextRoom:K,prevRoom:P,goToZone:F,completeWalkthrough:ve,clearSavedState:r}},jw=({isOpen:a,label:n,isVideoReady:r,videoRef:o,canvasRef:u,onCapture:d,onClose:f})=>a?c.jsxs("div",{className:"fixed inset-0 z-50 bg-black",children:[c.jsx("video",{ref:o,autoPlay:!0,playsInline:!0,muted:!0,className:"w-full h-full object-cover"}),c.jsx("canvas",{ref:u,className:"hidden"}),c.jsxs("div",{className:"absolute inset-0 flex flex-col",children:[c.jsxs("div",{className:"bg-black/50 p-4 flex justify-between items-center",children:[c.jsx("button",{onClick:f,className:"text-white text-lg",children:" Cancel"}),c.jsxs("span",{className:"text-white text-sm",children:[" ",n]})]}),c.jsx("div",{className:"flex-1 flex items-center justify-center",children:!r&&c.jsx("div",{className:"text-white text-lg bg-black/50 px-4 py-2 rounded-lg",children:"Loading camera..."})}),c.jsx("div",{className:"bg-black/50 p-6 flex justify-center",children:c.jsx("button",{onClick:d,disabled:!r,className:`w-20 h-20 rounded-full border-4 border-white flex items-center justify-center transition-all ${r?"bg-white/20 active:bg-white/40":"bg-gray-500/50 opacity-50 cursor-not-allowed"}`,children:c.jsx("div",{className:`w-16 h-16 rounded-full ${r?"bg-white":"bg-gray-400"}`})})})]})]}):null,Gu=[{id:"cleaning",name:"Cleaning Issue",icon:"",team:"Housekeeping"},{id:"supplies",name:"Supplies Empty",icon:"",team:"Housekeeping"},{id:"spill",name:"Spill / Wet Floor",icon:"",team:"Housekeeping"},{id:"trash",name:"Trash Overflow",icon:"",team:"Housekeeping"},{id:"odor",name:"Odor Issue",icon:"",team:"Housekeeping"},{id:"plumbing",name:"Plumbing",icon:"",team:"B&G"},{id:"electrical",name:"Electrical",icon:"",team:"B&G"},{id:"hvac",name:"HVAC / Temp",icon:"",team:"B&G"},{id:"damage",name:"Building Damage",icon:"",team:"B&G"},{id:"safety",name:"Safety Hazard",icon:"",team:"Facilities Manager"},{id:"pest",name:"Pest Issue",icon:"",team:"Vendor"},{id:"other",name:"Other",icon:"",team:"Facilities Manager"}],Cw={yes:"Yes",no:"No",save:"Save",cancel:"Cancel",back:"Back",next:"Next",submit:"Submit",loading:"Loading...",error:"Error",success:"Success",required:"Required",optional:"Optional",select:"Select",language:"Language",english:"English",spanish:"Spanish"},kw={home:"Home",audit:"Daily Cleanliness Check",report:"See It, Report It",bgWalkthrough:"Weekly Building and Grounds Check",history:"History",settings:"Settings"},Tw={title:"Daily QC Walkthrough",setup:{title:"Audit Setup",campus:"Campus",campusPlaceholder:"Select a campus",yourName:"Your Name",namePlaceholder:"Enter your name",email:"Email for Report",emailPlaceholder:"Enter your email",restroomCount:"Number of Restrooms",optionalZones:"Optional Zones",selectOptionalZones:"Select additional zones to inspect",beginWalkthrough:"Begin Walkthrough"},walkthrough:{zone:"Zone",of:"of",question:"Question",takePhoto:"Take Photo",addNote:"Add Note",notePlaceholder:"Enter notes about this zone...",photoAdded:"Photo added",photosAdded:"photos added",nextZone:"Next Zone",previousZone:"Previous Zone",finishAudit:"Finish Audit"},summary:{title:"Audit Summary",overallStatus:"Overall Status",zonesInspected:"Zones Inspected",defectsFound:"Defects Found",photosAttached:"Photos Attached",submitAudit:"Submit Audit",tourReady:"Is this facility tour-ready?",tourReadyYes:"Yes, tour-ready",tourReadyNo:"No, needs attention",zones:"Zones",defects:"Defects",duration:"Duration",submitting:"Submitting...",bgIssuesFlagged:"B&G Issue(s) Flagged",sentToBGTeam:"Will be sent to B&G team"},tourReady:{title:"Final Question",question:"Could a parent tour happen right now?",yesTourReady:"Yes - Tour Ready",noNotTourReady:"No - Not Tour Ready",automaticRed:"Automatic RED",reviewSummary:"Review Summary"},complete:{submitted:"Submitted!",done:"Done"},status:{green:"GREEN - All Clear",amber:"AMBER - Minor Issues",red:"RED - Needs Attention",GREEN:"GREEN",AMBER:"AMBER",RED:"RED"},validation:{selectCampus:"Please select a campus",enterName:"Please enter your name",enterEmail:"Please enter your email",completeAllQuestions:"Please answer all questions before proceeding"},bg:{title:"Any building issues to flag for B&G?",addAnotherPhoto:"Add Another Photo",takePhotoOfIssue:"Take Photo of Issue",requiredForAlerts:"Required for B&G alerts",describeIssue:"Describe the issue (required)...",answerAll:"Answer all",selectBGStatus:"Select B&G status",addBGPhoto:"Add B&G photo",describeBGIssue:"Describe B&G issue",completeZone:"Complete Zone",anyDefectRed:"Any defect = RED status"}},Aw={title:"See It, Report It",subtitle:"Report a facility issue",snapPhoto:"Snap a Photo",snapPhotoDesc:"Take a photo of the issue and we'll route it to the right team.",setup:{campus:"Campus",campusPlaceholder:"Select a campus",takePhoto:"Take Photo",photoRequired:"Photo helps identify the issue",category:"Issue Category",categoryPlaceholder:"Select a category",location:"Location",locationPlaceholder:"Where is the issue? (e.g., Room 101, Main Hallway)",description:"Description",descriptionPlaceholder:"Describe the issue...",urgent:"Urgent / Safety Issue",urgentDescription:"Mark if this requires immediate attention",submitReport:"Submit Report"},categories:{cleaning:"Cleaning Needed",maintenance:"Maintenance / Repair",safety:"Safety Hazard",supplies:"Supplies Needed",pest:"Pest Issue",odor:"Odor Problem",lighting:"Lighting Issue",hvac:"HVAC / Temperature",plumbing:"Plumbing Issue",electrical:"Electrical Issue",exterior:"Exterior / Grounds",other:"Other"},validation:{selectCampus:"Please select a campus",selectCategory:"Please select a category",enterLocation:"Please enter the location"},success:{title:"Report Submitted",message:"Your report has been submitted successfully.",reference:"Reference #"}},zw={names:{entry:"Entry & Lobby",hallway:"Hallway / Corridor",commons:"Commons Area",supply_closet:"Supply Closet",classroom:"Classroom",office:"Office / Workroom",gym:"Gym / Multi-Purpose",cafeteria:"Cafeteria",restroom:"Restroom"},descriptions:{entry:"Parent-facing zone",supply_closet:"1-week minimum threshold",restroom:"Any defect = RED"}},Ow={restroom:["Toilets and urinals are clean (no soil, stains, or residue)?","Sinks and counters are dry and clean (no water spots or residue)?","Mirrors are clean (no smudges or streaks)?","Floor is clean (no debris, water, or stains)?","Soap dispensers are working and stocked (enough for one full day)?","Paper towels or hand dryers are working and stocked (enough for one full day)?","Toilet paper is fully stocked (fresh rolls in place)?","Trash cans are empty with liners in place (no overflow)?","Free of bad odors (no urine, mold, sewage, or garbage smell)?","Area is safe (no wet floors, broken fixtures, or hazards)?"],entry:["Floor is clean (no debris, spills, or stains)?","Entry mat is clean and flat (no curled edges or trip hazards)?","Exterior door glass is clean (no smudges or fingerprints)?","Interior glass is clean (no smudges or streaks)?","Reception surfaces are dust-free (counters, desks, shelves)?","High-touch surfaces are clean (door handles, counter edges)?","Trash cans are empty with liners in place (no overflow)?","Free of bad odors (no mold, garbage, or musty smell)?","Area is safe (no wet floors, loose items, or hazards)?"],hallway:["Floor is clean (no debris, spills, or stains)?","Edges, corners, and baseboards are dust-free (no buildup)?","Walls are free of scuff marks (no black marks or scrapes)?","Glass and doors are clean (no smudges or fingerprints)?","High-touch surfaces are clean (door handles, railings, light switches)?","Trash cans are empty with liners in place (no overflow)?","Area is safe (no wet floors, obstacles, or hazards)?"],commons:["Floor is clean (no debris, spills, or stains)?","Tables and surfaces are clean and dry (no sticky spots or residue)?","Furniture is properly arranged (chairs pushed in, not scattered)?","High-touch surfaces are clean (door handles, table edges, chair backs)?","Trash cans are empty with liners in place (no overflow)?","Free of bad odors (no food, mold, or garbage smell)?","Area is safe (no wet floors, broken furniture, or hazards)?"],supply_closet:["Toilet paper supply is sufficient (enough for one week)?","Paper towel supply is sufficient (enough for one week)?","Soap and sanitizer supply is sufficient (enough for one week)?","Trash liner supply is sufficient (enough for one week)?","Cleaning supplies are present and stocked (chemicals, mops, rags)?","Closet is organized (items on shelves, nothing blocking walkway)?"],classroom:["Floor is clean (no debris, spills, or stains)?","Edges, corners, and baseboards are dust-free (no buildup)?","Student desks and tables are clean (no writing, stickers, or residue)?","Teacher desk and surfaces are clean (no dust or clutter)?","Whiteboard area is clean (tray wiped, ledge dust-free)?","High-touch surfaces are clean (door handle, light switches)?","Trash cans are empty with liners in place (no overflow)?","Area is safe (no tripping hazards, loose wires, or broken items)?"],office:["Floor is clean (no debris, spills, or stains)?","Desk and work surfaces are dust-free (no buildup or clutter)?","High-touch surfaces are clean (door handles, light switches, shared equipment)?","Trash cans are empty with liners in place (no overflow)?","Area is safe (no tripping hazards, loose wires, or blocked exits)?"],gym:["Floor is clean (no debris, spills, or stains)?","Floor finish is intact (no excessive scuffing, peeling, or damage)?","Bleachers and seating are clean (no dust, debris, or sticky spots)?","Equipment storage area is organized (items put away, nothing on floor)?","High-touch surfaces are clean (door handles, equipment, railings)?","Trash cans are empty with liners in place (no overflow)?","Free of bad odors (no sweat, mold, or musty smell)?","Area is safe (no loose equipment, wet floors, or hazards)?"],cafeteria:["Floor is clean (no debris, spills, or stains)?","Tables and seating are clean and dry (no sticky spots or food residue)?","Service and counter area is clean (no crumbs, spills, or buildup)?","High-touch surfaces are clean (door handles, tray rails, chair backs)?","Trash cans are empty with liners in place (no overflow)?","Free of bad odors (no spoiled food, garbage, or drain smell)?","Area is safe (no wet floors, broken chairs, or hazards)?"]},Dw={title:"History",audits:"Audits",reports:"Reports",noAudits:"No audits yet",noReports:"No reports yet",viewDetails:"View Details",date:"Date",campus:"Campus",auditor:"Auditor",status:"Status"},Bw={title:"Settings",language:"Language",apiKey:"OpenAI API Key",apiKeyDescription:"Used for AI photo analysis (optional)",apiKeyPlaceholder:"Enter your API key",saveSettings:"Save Settings",saved:"Settings saved"},Nw={common:Cw,nav:kw,audit:Tw,report:Aw,zones:zw,checklist:Ow,history:Dw,settings:Bw},Uw={yes:"S",no:"No",save:"Guardar",cancel:"Cancelar",back:"Atrs",next:"Siguiente",submit:"Enviar",loading:"Cargando...",error:"Error",success:"xito",required:"Requerido",optional:"Opcional",select:"Seleccionar",language:"Idioma",english:"Ingls",spanish:"Espaol"},Mw={home:"Inicio",audit:"Inspeccin Diaria de Limpieza",report:"Ver y Reportar",bgWalkthrough:"Inspeccin Semanal de Edificio y Terrenos",history:"Historial",settings:"Configuracin"},Lw={title:"Inspeccin Diaria QC",setup:{title:"Configuracin de Inspeccin",campus:"Campus",campusPlaceholder:"Seleccione un campus",yourName:"Su Nombre",namePlaceholder:"Ingrese su nombre",email:"Correo para el Reporte",emailPlaceholder:"Ingrese su correo electrnico",restroomCount:"Nmero de Baos",optionalZones:"Zonas Opcionales",selectOptionalZones:"Seleccione zonas adicionales para inspeccionar",beginWalkthrough:"Comenzar Inspeccin"},walkthrough:{zone:"Zona",of:"de",question:"Pregunta",takePhoto:"Tomar Foto",addNote:"Agregar Nota",notePlaceholder:"Ingrese notas sobre esta zona...",photoAdded:"Foto agregada",photosAdded:"fotos agregadas",nextZone:"Siguiente Zona",previousZone:"Zona Anterior",finishAudit:"Finalizar Inspeccin"},summary:{title:"Resumen de Inspeccin",overallStatus:"Estado General",zonesInspected:"Zonas Inspeccionadas",defectsFound:"Defectos Encontrados",photosAttached:"Fotos Adjuntas",submitAudit:"Enviar Inspeccin",tourReady:"Est esta instalacin lista para visitas?",tourReadyYes:"S, lista para visitas",tourReadyNo:"No, necesita atencin",zones:"Zonas",defects:"Defectos",duration:"Duracin",submitting:"Enviando...",bgIssuesFlagged:"Problema(s) de Mantenimiento Reportado(s)",sentToBGTeam:"Se enviar al equipo de Mantenimiento"},tourReady:{title:"Pregunta Final",question:"Podra ocurrir un recorrido de padres ahora mismo?",yesTourReady:"S - Listo para Recorrido",noNotTourReady:"No - No Listo para Recorrido",automaticRed:"ROJO Automtico",reviewSummary:"Ver Resumen"},complete:{submitted:"Enviado!",done:"Listo"},status:{green:"VERDE - Todo en Orden",amber:"AMARILLO - Problemas Menores",red:"ROJO - Necesita Atencin",GREEN:"VERDE",AMBER:"AMARILLO",RED:"ROJO"},validation:{selectCampus:"Por favor seleccione un campus",enterName:"Por favor ingrese su nombre",enterEmail:"Por favor ingrese su correo electrnico",completeAllQuestions:"Por favor responda todas las preguntas antes de continuar"},bg:{title:"Hay problemas del edificio para reportar a Mantenimiento?",addAnotherPhoto:"Agregar Otra Foto",takePhotoOfIssue:"Tomar Foto del Problema",requiredForAlerts:"Requerido para alertas de Mantenimiento",describeIssue:"Describa el problema (requerido)...",answerAll:"Responda todas",selectBGStatus:"Seleccione estado de Mantenimiento",addBGPhoto:"Agregar foto de Mantenimiento",describeBGIssue:"Describa el problema de Mantenimiento",completeZone:"Completar Zona",anyDefectRed:"Cualquier defecto = estado ROJO"}},Hw={title:"Ver y Reportar",subtitle:"Reportar un problema de instalacin",snapPhoto:"Tomar una Foto",snapPhotoDesc:"Tome una foto del problema y lo enviaremos al equipo correcto.",setup:{campus:"Campus",campusPlaceholder:"Seleccione un campus",takePhoto:"Tomar Foto",photoRequired:"La foto ayuda a identificar el problema",category:"Categora del Problema",categoryPlaceholder:"Seleccione una categora",location:"Ubicacin",locationPlaceholder:"Dnde est el problema? (ej., Saln 101, Pasillo Principal)",description:"Descripcin",descriptionPlaceholder:"Describa el problema...",urgent:"Urgente / Problema de Seguridad",urgentDescription:"Marque si esto requiere atencin inmediata",submitReport:"Enviar Reporte"},categories:{cleaning:"Limpieza Necesaria",maintenance:"Mantenimiento / Reparacin",safety:"Peligro de Seguridad",supplies:"Suministros Necesarios",pest:"Problema de Plagas",odor:"Problema de Olor",lighting:"Problema de Iluminacin",hvac:"HVAC / Temperatura",plumbing:"Problema de Plomera",electrical:"Problema Elctrico",exterior:"Exterior / Terrenos",other:"Otro"},validation:{selectCampus:"Por favor seleccione un campus",selectCategory:"Por favor seleccione una categora",enterLocation:"Por favor ingrese la ubicacin"},success:{title:"Reporte Enviado",message:"Su reporte ha sido enviado exitosamente.",reference:"Referencia #"}},qw={names:{entry:"Entrada y Vestbulo",hallway:"Pasillo / Corredor",commons:"rea Comn",supply_closet:"Armario de Suministros",classroom:"Saln de Clases",office:"Oficina / Sala de Trabajo",gym:"Gimnasio / Multiusos",cafeteria:"Cafetera",restroom:"Bao"},descriptions:{entry:"Zona visible para padres",supply_closet:"Mnimo de 1 semana de suministros",restroom:"Cualquier defecto = ROJO"}},$w={restroom:["Los inodoros y urinarios estn limpios (sin suciedad, manchas o residuos)?","Los lavabos y mostradores estn secos y limpios (sin manchas de agua o residuos)?","Los espejos estn limpios (sin manchas o rayas)?","El piso est limpio (sin escombros, agua o manchas)?","Los dispensadores de jabn funcionan y estn abastecidos (suficiente para un da completo)?","Las toallas de papel o secadores de manos funcionan y estn abastecidos (suficiente para un da completo)?","El papel higinico est completamente abastecido (rollos nuevos en su lugar)?","Los botes de basura estn vacos con bolsas en su lugar (sin desbordamiento)?","Libre de malos olores (sin olor a orina, moho, aguas residuales o basura)?","El rea es segura (sin pisos mojados, accesorios rotos o peligros)?"],entry:["El piso est limpio (sin escombros, derrames o manchas)?","El tapete de entrada est limpio y plano (sin bordes doblados o peligros de tropiezo)?","El vidrio de la puerta exterior est limpio (sin manchas o huellas)?","El vidrio interior est limpio (sin manchas o rayas)?","Las superficies de recepcin estn libres de polvo (mostradores, escritorios, estantes)?","Las superficies de alto contacto estn limpias (manijas de puertas, bordes de mostradores)?","Los botes de basura estn vacos con bolsas en su lugar (sin desbordamiento)?","Libre de malos olores (sin olor a moho, basura o humedad)?","El rea es segura (sin pisos mojados, objetos sueltos o peligros)?"],hallway:["El piso est limpio (sin escombros, derrames o manchas)?","Los bordes, esquinas y rodapi estn libres de polvo (sin acumulacin)?","Las paredes estn libres de marcas de rozaduras (sin marcas negras o rasguos)?","Los vidrios y puertas estn limpios (sin manchas o huellas)?","Las superficies de alto contacto estn limpias (manijas de puertas, pasamanos, interruptores de luz)?","Los botes de basura estn vacos con bolsas en su lugar (sin desbordamiento)?","El rea es segura (sin pisos mojados, obstculos o peligros)?"],commons:["El piso est limpio (sin escombros, derrames o manchas)?","Las mesas y superficies estn limpias y secas (sin reas pegajosas o residuos)?","Los muebles estn correctamente ordenados (sillas acomodadas, no dispersas)?","Las superficies de alto contacto estn limpias (manijas de puertas, bordes de mesas, respaldos de sillas)?","Los botes de basura estn vacos con bolsas en su lugar (sin desbordamiento)?","Libre de malos olores (sin olor a comida, moho o basura)?","El rea es segura (sin pisos mojados, muebles rotos o peligros)?"],supply_closet:["El suministro de papel higinico es suficiente (suficiente para una semana)?","El suministro de toallas de papel es suficiente (suficiente para una semana)?","El suministro de jabn y desinfectante es suficiente (suficiente para una semana)?","El suministro de bolsas de basura es suficiente (suficiente para una semana)?","Los suministros de limpieza estn presentes y abastecidos (qumicos, trapeadores, trapos)?","El armario est organizado (artculos en estantes, nada bloqueando el paso)?"],classroom:["El piso est limpio (sin escombros, derrames o manchas)?","Los bordes, esquinas y rodapi estn libres de polvo (sin acumulacin)?","Los escritorios y mesas de estudiantes estn limpios (sin escritura, calcomanas o residuos)?","El escritorio y superficies del maestro estn limpios (sin polvo o desorden)?","El rea del pizarrn est limpia (bandeja limpia, repisa sin polvo)?","Las superficies de alto contacto estn limpias (manija de puerta, interruptores de luz)?","Los botes de basura estn vacos con bolsas en su lugar (sin desbordamiento)?","El rea es segura (sin peligros de tropiezo, cables sueltos o artculos rotos)?"],office:["El piso est limpio (sin escombros, derrames o manchas)?","Las superficies de escritorios y trabajo estn libres de polvo (sin acumulacin o desorden)?","Las superficies de alto contacto estn limpias (manijas de puertas, interruptores de luz, equipo compartido)?","Los botes de basura estn vacos con bolsas en su lugar (sin desbordamiento)?","El rea es segura (sin peligros de tropiezo, cables sueltos o salidas bloqueadas)?"],gym:["El piso est limpio (sin escombros, derrames o manchas)?","El acabado del piso est intacto (sin raspaduras excesivas, descascaramiento o dao)?","Las gradas y asientos estn limpios (sin polvo, escombros o reas pegajosas)?","El rea de almacenamiento de equipo est organizada (artculos guardados, nada en el piso)?","Las superficies de alto contacto estn limpias (manijas de puertas, equipo, pasamanos)?","Los botes de basura estn vacos con bolsas en su lugar (sin desbordamiento)?","Libre de malos olores (sin olor a sudor, moho o humedad)?","El rea es segura (sin equipo suelto, pisos mojados o peligros)?"],cafeteria:["El piso est limpio (sin escombros, derrames o manchas)?","Las mesas y asientos estn limpios y secos (sin reas pegajosas o residuos de comida)?","El rea de servicio y mostrador est limpia (sin migajas, derrames o acumulacin)?","Las superficies de alto contacto estn limpias (manijas de puertas, rieles de bandejas, respaldos de sillas)?","Los botes de basura estn vacos con bolsas en su lugar (sin desbordamiento)?","Libre de malos olores (sin olor a comida echada a perder, basura o drenaje)?","El rea es segura (sin pisos mojados, sillas rotas o peligros)?"]},Iw={title:"Historial",audits:"Inspecciones",reports:"Reportes",noAudits:"Sin inspecciones todava",noReports:"Sin reportes todava",viewDetails:"Ver Detalles",date:"Fecha",campus:"Campus",auditor:"Inspector",status:"Estado"},Gw={title:"Configuracin",language:"Idioma",apiKey:"Clave API de OpenAI",apiKeyDescription:"Usada para anlisis de fotos con IA (opcional)",apiKeyPlaceholder:"Ingrese su clave API",saveSettings:"Guardar Configuracin",saved:"Configuracin guardada"},Pw={common:Uw,nav:Mw,audit:Lw,report:Hw,zones:qw,checklist:$w,history:Iw,settings:Gw},Eo={en:Nw,es:Pw},vm=w.createContext(),Tg=(a,n)=>n.split(".").reduce((r,o)=>r&&r[o],a);function Ww({children:a}){const[n,r]=w.useState(()=>typeof window<"u"&&localStorage.getItem("app-language")||"en");w.useEffect(()=>{localStorage.setItem("app-language",n)},[n]);const o=(g,y=g)=>{const b=Tg(Eo[n],g);if(b===void 0){console.warn(`Translation missing for key: ${g} in language: ${n}`);const x=Tg(Eo.en,g);return x!==void 0?x:y}return b},p={language:n,setLanguage:r,t:o,getChecklist:g=>{const y=Eo[n]?.checklist?.[g];return y||(console.warn(`Checklist missing for zone: ${g} in language: ${n}`),Eo.en?.checklist?.[g]||[])},getZoneName:g=>o(`zones.names.${g}`,g),getZoneDescription:g=>o(`zones.descriptions.${g}`,""),languages:[{code:"en",name:"English",nativeName:"English"},{code:"es",name:"Spanish",nativeName:"Espaol"}]};return c.jsx(vm.Provider,{value:p,children:a})}function Gn(){const a=w.useContext(vm);if(!a)throw new Error("useI18n must be used within an I18nProvider");return a}const Zw=a=>a.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Vw=a=>a.replace(/^([A-Z])|[\s-_]+(\w)/g,(n,r,o)=>o?o.toUpperCase():r.toLowerCase()),Ag=a=>{const n=Vw(a);return n.charAt(0).toUpperCase()+n.slice(1)},wm=(...a)=>a.filter((n,r,o)=>!!n&&n.trim()!==""&&o.indexOf(n)===r).join(" ").trim(),Yw=a=>{for(const n in a)if(n.startsWith("aria-")||n==="role"||n==="title")return!0};var Kw={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const Jw=w.forwardRef(({color:a="currentColor",size:n=24,strokeWidth:r=2,absoluteStrokeWidth:o,className:u="",children:d,iconNode:f,...p},g)=>w.createElement("svg",{ref:g,...Kw,width:n,height:n,stroke:a,strokeWidth:o?Number(r)*24/Number(n):r,className:wm("lucide",u),...!d&&!Yw(p)&&{"aria-hidden":"true"},...p},[...f.map(([y,b])=>w.createElement(y,b)),...Array.isArray(d)?d:[d]]));const Qw=(a,n)=>{const r=w.forwardRef(({className:o,...u},d)=>w.createElement(Jw,{ref:d,iconNode:n,className:wm(`lucide-${Zw(Ag(a))}`,`lucide-${a}`,o),...u}));return r.displayName=Ag(a),r};const Xw=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],zg=Qw("globe",Xw);function Sm({style:a="dropdown"}){const{language:n,setLanguage:r,languages:o,t:u}=Gn();return a==="buttons"?c.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:[c.jsx(zg,{size:18,style:{color:"#666"}}),o.map(d=>c.jsx("button",{onClick:()=>r(d.code),style:{padding:"6px 12px",borderRadius:"6px",border:n===d.code?"2px solid #2B57D0":"1px solid #ddd",backgroundColor:n===d.code?"#EEF2FF":"#fff",color:n===d.code?"#2B57D0":"#333",fontWeight:n===d.code?"600":"400",fontSize:"14px",cursor:"pointer",transition:"all 0.2s ease"},children:d.nativeName},d.code))]}):c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[c.jsx(zg,{size:18,style:{color:"#666"}}),c.jsx("select",{value:n,onChange:d=>r(d.target.value),style:{padding:"8px 12px",borderRadius:"8px",border:"1px solid #ddd",backgroundColor:"#fff",fontSize:"15px",color:"#333",cursor:"pointer",minWidth:"120px"},children:o.map(d=>c.jsx("option",{value:d.code,children:d.nativeName},d.code))})]})}const Fw=()=>{const a=We(),{t:n}=Gn(),[r,o]=w.useState([]),[u,d]=w.useState([]),[f,p]=w.useState([]),[g,y]=w.useState(!0),[b,x]=w.useState(!1);w.useEffect(()=>{const E=()=>{const R=window.innerWidth>window.innerHeight&&window.innerHeight<500;x(R)};return E(),window.addEventListener("resize",E),window.addEventListener("orientationchange",E),()=>{window.removeEventListener("resize",E),window.removeEventListener("orientationchange",E)}},[]),w.useEffect(()=>{(async()=>{try{const[R,T,O]=await Promise.all([ym(10),bm(10),Iu(null,10)]);o(R),d(T),p(O)}catch(R){console.error("Error loading data:",R)}finally{y(!1)}})()},[]);const S=u.filter(E=>E.status==="open").length,_=()=>{const E=[...r.map(R=>({...R,type:"audit",sortDate:new Date(R.createdAt||R.date+" "+R.time)})),...f.map(R=>({...R,type:"bg",sortDate:new Date(R.createdAt||R.date+" "+R.time)})),...u.map(R=>({...R,type:"report",sortDate:new Date(R.createdAt||R.timestamp)}))].sort((R,T)=>T.sortDate-R.sortDate).slice(0,5);return E.length===0?c.jsxs("div",{style:{textAlign:"center",padding:"32px 0",color:"#666"},children:[c.jsx("div",{style:{fontSize:"48px",marginBottom:"12px"},children:""}),c.jsx("p",{style:{fontSize:"17px"},children:n("history.noAudits")})]}):c.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:E.map((R,T)=>{if(R.type==="audit")return c.jsxs("div",{onClick:()=>R.id&&a(`/audit/${R.id}`),style:{display:"flex",alignItems:"center",padding:"14px",backgroundColor:"#f5f5f5",borderRadius:"12px",cursor:R.id?"pointer":"default"},children:[c.jsx("span",{style:{fontSize:"24px",marginRight:"14px"},children:R.status==="GREEN"?"":R.status==="AMBER"?"":""}),c.jsxs("div",{style:{flex:1},children:[c.jsx("div",{style:{fontWeight:"600",fontSize:"17px",color:"#092849"},children:R.campus}),c.jsxs("div",{style:{fontSize:"15px",color:"#666",marginTop:"2px"},children:[R.date,"  ",R.defects," defect",R.defects!==1?"s":""]})]}),c.jsx("span",{style:{color:"#9ca3af",fontSize:"20px"},children:""})]},`audit-${R.id||T}`);if(R.type==="bg")return c.jsxs("div",{onClick:()=>R.id&&a(`/bg/${R.id}`),style:{display:"flex",alignItems:"center",padding:"14px",backgroundColor:"#f5f5f5",borderRadius:"12px",cursor:R.id?"pointer":"default"},children:[c.jsx("span",{style:{fontSize:"24px",marginRight:"14px"},children:""}),c.jsxs("div",{style:{flex:1},children:[c.jsx("div",{style:{fontWeight:"600",fontSize:"17px",color:"#092849"},children:R.campus}),c.jsxs("div",{style:{fontSize:"15px",color:"#666",marginTop:"2px"},children:[R.date,"  B&G  ",R.campusRating||"N/A"]})]}),c.jsx("span",{style:{fontSize:"14px",padding:"6px 12px",borderRadius:"8px",backgroundColor:R.campusRating==="PASS"?"#10b981":"#ef4444",color:"#fff",fontWeight:"500"},children:R.campusRating||"N/A"}),c.jsx("span",{style:{color:"#9ca3af",fontSize:"20px",marginLeft:"8px"},children:""})]},`bg-${R.id||T}`);{const O=Gu.find(z=>z.id===R.category)||{icon:"",name:"Other"};return c.jsxs("div",{onClick:()=>R.id&&a(`/report/${R.id}`),style:{display:"flex",alignItems:"center",padding:"14px",backgroundColor:"#f5f5f5",borderRadius:"12px",cursor:R.id?"pointer":"default"},children:[c.jsx("span",{style:{fontSize:"24px",marginRight:"14px"},children:O.icon}),c.jsxs("div",{style:{flex:1},children:[c.jsx("div",{style:{fontWeight:"600",fontSize:"17px",color:"#092849"},children:O.name}),c.jsx("div",{style:{fontSize:"15px",color:"#666",marginTop:"2px"},children:R.campus})]}),c.jsx("span",{style:{fontSize:"14px",padding:"6px 12px",borderRadius:"8px",backgroundColor:R.status==="open"?"#47C4E6":"#C2ECFD",color:R.status==="open"?"#fff":"#092849",fontWeight:"500"},children:R.status}),c.jsx("span",{style:{color:"#9ca3af",fontSize:"20px",marginLeft:"8px"},children:""})]},`report-${R.id||T}`)}})})};return c.jsxs("div",{style:{minHeight:"100vh",background:"linear-gradient(180deg, #092849 0%, #141685 100%)",display:"flex",flexDirection:"column"},children:[c.jsxs("div",{style:{padding:"20px 24px 0",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[c.jsx("div",{style:{backgroundColor:"rgba(255,255,255,0.95)",borderRadius:"10px",padding:"4px 8px"},children:c.jsx(Sm,{style:"dropdown"})}),c.jsx("button",{onClick:()=>a("/settings"),style:{backgroundColor:"rgba(255,255,255,0.15)",border:"none",borderRadius:"50%",width:"44px",height:"44px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",fontSize:"22px"},children:""})]}),c.jsx("div",{style:{padding:b?"10px 24px":"30px 24px 30px",textAlign:"center"},children:c.jsx("img",{src:"/Alpha School Logo - Blue.png",alt:"Alpha School",style:{maxWidth:b?"120px":"200px",width:"auto",filter:"brightness(0) invert(1)"},onError:E=>{E.target.style.display="none"}})}),c.jsxs("div",{style:{padding:b?"0 24px 12px":"0 24px 24px"},children:[c.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:b?"12px":"20px"},children:[c.jsxs("button",{onClick:()=>a("/audit/setup"),style:{aspectRatio:b?"auto":"1",backgroundColor:"#fff",color:"#092849",borderRadius:b?"14px":"20px",fontSize:b?"14px":"17px",fontWeight:"700",border:"none",boxShadow:"0 4px 12px rgba(0,0,0,0.15)",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:b?"10px":"16px",cursor:"pointer",minHeight:b?"70px":"120px",maxHeight:b?"100px":"180px"},children:[c.jsx("span",{style:{fontSize:b?"28px":"48px",marginBottom:b?"4px":"12px"},children:""}),c.jsx("span",{style:{textAlign:"center",lineHeight:"1.3"},children:n("nav.audit")})]}),c.jsxs("button",{onClick:()=>a("/bg/setup"),style:{aspectRatio:b?"auto":"1",backgroundColor:"#fff",color:"#092849",borderRadius:b?"14px":"20px",fontSize:b?"14px":"17px",fontWeight:"700",border:"none",boxShadow:"0 4px 12px rgba(0,0,0,0.15)",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:b?"10px":"16px",cursor:"pointer",minHeight:b?"70px":"120px",maxHeight:b?"100px":"180px"},children:[c.jsx("span",{style:{fontSize:b?"28px":"48px",marginBottom:b?"4px":"12px"},children:""}),c.jsx("span",{style:{textAlign:"center",lineHeight:"1.3"},children:n("nav.bgWalkthrough")})]})]}),c.jsxs("button",{onClick:()=>a("/report"),style:{width:"100%",marginTop:b?"10px":"16px",backgroundColor:"rgba(255,255,255,0.15)",color:"#fff",borderRadius:b?"12px":"16px",fontSize:b?"14px":"16px",fontWeight:"700",border:"2px solid rgba(255,255,255,0.3)",boxShadow:"0 4px 12px rgba(0,0,0,0.1)",display:"flex",alignItems:"center",justifyContent:"center",padding:b?"10px 16px":"16px 20px",cursor:"pointer",gap:"12px"},children:[c.jsx("span",{style:{fontSize:b?"20px":"28px"},children:""}),c.jsx("span",{children:n("nav.report")})]})]}),c.jsx("div",{style:{padding:"0 24px 20px"},children:c.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px"},children:[c.jsxs("button",{onClick:()=>a("/history"),style:{backgroundColor:"rgba(255,255,255,0.1)",backdropFilter:"blur(10px)",padding:"16px",borderRadius:"14px",textAlign:"left",border:"none",cursor:"pointer"},children:[c.jsx("div",{style:{fontSize:"28px",fontWeight:"700",color:"#fff"},children:g?"...":r.length}),c.jsx("div",{style:{fontSize:"15px",color:"#C2ECFD",marginTop:"4px"},children:n("history.audits")})]}),c.jsxs("button",{onClick:()=>a("/reports"),style:{backgroundColor:"rgba(255,255,255,0.1)",backdropFilter:"blur(10px)",padding:"16px",borderRadius:"14px",textAlign:"left",border:"none",cursor:"pointer"},children:[c.jsx("div",{style:{fontSize:"28px",fontWeight:"700",color:"#fff"},children:g?"...":u.length}),c.jsx("div",{style:{fontSize:"15px",color:"#C2ECFD",marginTop:"4px"},children:n("history.reports")}),S>0&&c.jsxs("div",{style:{fontSize:"14px",color:"#47C4E6",marginTop:"4px"},children:[S," open"]})]})]})}),c.jsxs("div",{style:{backgroundColor:"#fff",borderRadius:"24px 24px 0 0",padding:"24px",flex:1,marginTop:"8px"},children:[c.jsx("h2",{style:{fontWeight:"700",fontSize:"20px",marginBottom:"20px",color:"#092849"},children:n("history.title")}),g?c.jsx("div",{style:{textAlign:"center",padding:"32px 0",color:"#666"},children:n("common.loading")}):_()]})]})},Uo=[{name:"Alpha School Austin",state:"Texas",city:"Austin",cc:"Shannon Peifer",ccEmail:"shannon.peifer@alpha.school",ccPhone:"(813) 389-0593",owner:"Aaron Crute",ownerEmail:"aaron.crute@trilogy.com",ownerPhone:"(404) 449-5043"},{name:"Alpha High School",state:"Texas",city:"Austin",cc:"Ian Huggins",ccEmail:"ian.huggins@alpha.school",ccPhone:"(971) 222-9736",owner:"Aaron Crute",ownerEmail:"aaron.crute@trilogy.com",ownerPhone:"(404) 449-5043"},{name:"Alpha School Miami",state:"Florida",city:"Miami",cc:"Maria Mejia",ccEmail:"maria.mejia@alpha.school",ccPhone:"(305) 775-3375",owner:"Tara Stephenson",ownerEmail:"tara.stephenson@trilogy.com",ownerPhone:"(704) 974-1413"},{name:"Alpha School Brownsville",state:"Texas",city:"Brownsville",cc:"Kathrine Ledesma",ccEmail:"kathrine.ledesma@alpha.school",ccPhone:"(956) 230-6648",owner:"Randall Grant",ownerEmail:"randall.grant@trilogy.com",ownerPhone:"(850) 212-6957"},{name:"Texas Sports Academy",state:"Texas",city:"Austin",cc:"Cyndie Jensen",ccEmail:"cyndie.jensen@sportsacademy.school",ccPhone:"",owner:"Aaron Crute",ownerEmail:"aaron.crute@trilogy.com",ownerPhone:"(404) 449-5043"},{name:"GT School",state:"Texas",city:"Georgetown",cc:"Keith Wong",ccEmail:"keith.wong@2hourlearning.com",ccPhone:"",owner:"Tara Stephenson",ownerEmail:"tara.stephenson@trilogy.com",ownerPhone:"(704) 974-1413"},{name:"Nova Academy Austin",state:"Texas",city:"Austin",cc:"Hiring CC",ccEmail:"",ccPhone:"",owner:"Randall Grant",ownerEmail:"randall.grant@trilogy.com",ownerPhone:"(850) 212-6957"},{name:"Nova Academy Bastrop",state:"Texas",city:"Bastrop",cc:"Not Yet",ccEmail:"",ccPhone:"",owner:"Randall Grant",ownerEmail:"randall.grant@trilogy.com",ownerPhone:"(850) 212-6957"},{name:"NextGen Academy",state:"Texas",city:"Austin",cc:"Christopher Ahrens",ccEmail:"christopher.ahrens@esports.school",ccPhone:"(571) 645-9825",owner:"Randall Grant",ownerEmail:"randall.grant@trilogy.com",ownerPhone:"(850) 212-6957"},{name:"Waypoint Academy",state:"Texas",city:"Dripping Springs",cc:"Natasha Lince",ccEmail:"natasha.lince@alpha.school",ccPhone:"(956) 292-5092",owner:"Randall Grant",ownerEmail:"randall.grant@trilogy.com",ownerPhone:"(850) 212-6957"},{name:"Alpha School Scottsdale",state:"Arizona",city:"Scottsdale",cc:"Tetiana Vozniuk",ccEmail:"tetiana.pierson@alpha.school",ccPhone:"(503) 943-9317",owner:"Jake Petersen",ownerEmail:"jake.petersen@trilogy.com",ownerPhone:"(712) 309-1377"},{name:"Alpha School Fort Worth",state:"Texas",city:"Fort Worth",cc:"Michaela Bosco",ccEmail:"michaela.bosco@alpha.school",ccPhone:"(817) 330-9327",owner:"Randall Grant",ownerEmail:"randall.grant@trilogy.com",ownerPhone:"(850) 212-6957"},{name:"Alpha School San Francisco",state:"California",city:"San Francisco",cc:"Hiring CC",ccEmail:"",ccPhone:"",owner:"Jake Petersen",ownerEmail:"jake.petersen@trilogy.com",ownerPhone:"(712) 309-1377"},{name:"Alpha School Palm Beach",state:"Florida",city:"Palm Beach",cc:"Hiring CC",ccEmail:"",ccPhone:"",owner:"Tara Stephenson",ownerEmail:"tara.stephenson@trilogy.com",ownerPhone:"(704) 974-1413"},{name:"Alpha School Plano",state:"Texas",city:"Plano",cc:"May Dobbs",ccEmail:"may.dobbs@alpha.school",ccPhone:"(972) 246-8783",owner:"Randall Grant",ownerEmail:"randall.grant@trilogy.com",ownerPhone:"(850) 212-6957"},{name:"Alpha Anywhere Center",state:"New York",city:"New York",cc:"Julianne Braime",ccEmail:"julianne.braime@alpha.school",ccPhone:"(805) 559-0131",owner:"Kevin Kongslie",ownerEmail:"kevin.kongslie@trilogy.com",ownerPhone:"(609) 933-6838"},{name:"Alpha School Santa Barbara",state:"California",city:"Santa Barbara",cc:"Hiring CC",ccEmail:"",ccPhone:"",owner:"Jake Petersen",ownerEmail:"jake.petersen@trilogy.com",ownerPhone:"(712) 309-1377"},{name:"Alpha School Chantilly",state:"Virginia",city:"Chantilly",cc:"Hiring CC",ccEmail:"",ccPhone:"",owner:"Jake Petersen",ownerEmail:"jake.petersen@trilogy.com",ownerPhone:"(712) 309-1377"},{name:"Alpha School Charlotte",state:"North Carolina",city:"Charlotte",cc:"Hiring CC",ccEmail:"",ccPhone:"",owner:"Jake Petersen",ownerEmail:"jake.petersen@trilogy.com",ownerPhone:"(712) 309-1377"},{name:"Alpha School Lake Forest",state:"California",city:"Lake Forest",cc:"Hiring CC",ccEmail:"",ccPhone:"",owner:"Jake Petersen",ownerEmail:"jake.petersen@trilogy.com",ownerPhone:"(712) 309-1377"},{name:"Alpha School Raleigh",state:"North Carolina",city:"Raleigh",cc:"Hiring CC",ccEmail:"",ccPhone:"",owner:"Jake Petersen",ownerEmail:"jake.petersen@trilogy.com",ownerPhone:"(712) 309-1377"},{name:"Alpha School Houston",state:"Texas",city:"Houston",cc:"Not Yet",ccEmail:"",ccPhone:"",owner:"Randall Grant",ownerEmail:"randall.grant@trilogy.com",ownerPhone:"(850) 212-6957"},{name:"Alpha School Tampa",state:"Florida",city:"Tampa",cc:"Not Yet",ccEmail:"",ccPhone:"",owner:"JR Houston",ownerEmail:"jr.houston@trilogy.com",ownerPhone:"(321) 890-5650"},{name:"Alpha School Orlando",state:"Florida",city:"Orlando",cc:"Not Yet",ccEmail:"",ccPhone:"",owner:"JR Houston",ownerEmail:"jr.houston@trilogy.com",ownerPhone:"(321) 890-5650"},{name:"Montessorium Cedar Park",state:"Texas",city:"Cedar Park",cc:"Hiring CC",ccEmail:"",ccPhone:"",owner:"Randall Grant",ownerEmail:"randall.grant@trilogy.com",ownerPhone:"(850) 212-6957"},{name:"Carrollton",state:"Texas",city:"Carrollton",cc:"Sara Leightman",ccEmail:"sara.leightman@sportsacademy.school",ccPhone:"(214) 392-8218",owner:"Kevin Kongslie",ownerEmail:"kevin.kongslie@trilogy.com",ownerPhone:"(609) 933-6838"}],eS=()=>{const a={};return Uo.forEach(n=>{a[n.state]||(a[n.state]=[]),a[n.state].push(n)}),a},Pu=({value:a,onChange:n,id:r="campus"})=>{const o=eS();return c.jsxs("select",{id:r,value:a||"",onChange:u=>n(u.target.value),style:{width:"100%",border:"1px solid #ccc",borderRadius:"10px",padding:"14px 16px",fontSize:"17px",backgroundColor:"#fff",boxSizing:"border-box",appearance:"none",backgroundImage:`url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24' fill='none' stroke='%23666' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E")`,backgroundRepeat:"no-repeat",backgroundPosition:"right 12px center",backgroundSize:"20px",paddingRight:"44px"},children:[c.jsx("option",{value:"",children:"Select campus..."}),Object.keys(o).sort().map(u=>c.jsx("optgroup",{label:u,children:o[u].map(d=>c.jsxs("option",{value:d.name,children:[d.name,"  ",d.city]},d.name))},u))]})},ut=({title:a,subtitle:n,onBack:r,variant:o="default",rightContent:u})=>{const d={default:"linear-gradient(180deg, #092849 0%, #141685 100%)",red:"#dc2626",orange:"#f97316",green:"#22c55e"};return c.jsx("div",{style:{background:d[o],color:"#fff",padding:"20px"},children:c.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[c.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[r&&c.jsx("button",{onClick:r,style:{fontSize:"24px",marginRight:"14px",background:"rgba(255,255,255,0.2)",border:"none",borderRadius:"8px",width:"40px",height:"40px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",color:"#fff"},children:""}),c.jsxs("div",{children:[c.jsx("h1",{style:{fontSize:"24px",fontWeight:"700",margin:0},children:a}),n&&c.jsx("p",{style:{fontSize:"15px",opacity:.8,margin:"4px 0 0 0"},children:n})]})]}),u]})})},tS=({audit:a})=>{const n=We(),{t:r,getZoneName:o}=Gn(),[u,d]=w.useState(""),[f,p]=w.useState(""),[g,y]=w.useState(""),[b,x]=w.useState(1),[S,_]=w.useState([]),E=T=>{_(O=>O.includes(T)?O.filter(z=>z!==T):[...O,T])},R=()=>{if(!u||!f||!g){alert(r("audit.validation.selectCampus")+", "+r("audit.validation.enterName").toLowerCase()+", "+r("audit.validation.enterEmail").toLowerCase());return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(g)){alert(r("audit.validation.enterEmail"));return}const T=Uo.find(O=>O.name===u);a.beginAudit(T,f,g,S,b),a.setCurrentZoneIndex(0),window.scrollTo(0,0),n("/audit/zone")};return c.jsxs("div",{className:"min-h-screen bg-gray-100",children:[c.jsx(ut,{title:r("audit.setup.title"),subtitle:r("audit.setup.selectOptionalZones"),onBack:()=>n("/")}),c.jsxs("div",{style:{padding:"20px",display:"flex",flexDirection:"column",gap:"24px"},children:[c.jsxs("div",{children:[c.jsxs("label",{style:{display:"block",fontSize:"17px",fontWeight:"600",color:"#333",marginBottom:"10px"},children:[r("audit.setup.campus")," *"]}),c.jsx(Pu,{value:u,onChange:d,placeholder:r("audit.setup.campusPlaceholder")})]}),c.jsxs("div",{children:[c.jsxs("label",{style:{display:"block",fontSize:"17px",fontWeight:"600",color:"#333",marginBottom:"10px"},children:[r("audit.setup.yourName")," *"]}),c.jsx("input",{type:"text",placeholder:r("audit.setup.namePlaceholder"),value:f,onChange:T=>p(T.target.value),style:{width:"100%",border:"1px solid #ccc",borderRadius:"10px",padding:"14px 16px",fontSize:"17px",boxSizing:"border-box",backgroundColor:"#fff"}})]}),c.jsxs("div",{children:[c.jsxs("label",{style:{display:"block",fontSize:"17px",fontWeight:"600",color:"#333",marginBottom:"10px"},children:[r("audit.setup.email")," *"]}),c.jsx("input",{type:"email",placeholder:r("audit.setup.emailPlaceholder"),value:g,onChange:T=>y(T.target.value),style:{width:"100%",border:"1px solid #ccc",borderRadius:"10px",padding:"14px 16px",fontSize:"17px",boxSizing:"border-box",backgroundColor:"#fff"}})]}),c.jsxs("div",{children:[c.jsxs("label",{style:{display:"block",fontSize:"17px",fontWeight:"600",color:"#333",marginBottom:"10px"},children:[r("audit.setup.restroomCount")," *"]}),c.jsx("select",{value:b,onChange:T=>x(parseInt(T.target.value)),style:{width:"100%",border:"1px solid #ccc",borderRadius:"10px",padding:"14px 16px",fontSize:"17px",boxSizing:"border-box",backgroundColor:"#fff",appearance:"none",backgroundImage:`url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke='%23666'%3E%3Cpath stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M19 9l-7 7-7-7'%3E%3C/path%3E%3C/svg%3E")`,backgroundRepeat:"no-repeat",backgroundPosition:"right 12px center",backgroundSize:"20px"},children:[1,2,3,4,5,6,7,8,9,10].map(T=>c.jsxs("option",{value:T,children:[T," ",o("restroom"),T>1?"s":""]},T))})]}),c.jsxs("div",{children:[c.jsxs("label",{style:{display:"block",fontSize:"17px",fontWeight:"600",color:"#333",marginBottom:"10px"},children:["Tour Route Zones (",$r.length,")"]}),c.jsx("div",{style:{backgroundColor:"rgba(194, 236, 253, 0.4)",border:"1px solid #47C4E6",borderRadius:"12px",padding:"16px"},children:$r.map((T,O)=>c.jsxs("div",{style:{display:"flex",alignItems:"center",padding:"12px 0",borderBottom:O!==$r.length-1?"1px solid rgba(71, 196, 230, 0.3)":"none"},children:[c.jsx("span",{style:{color:"#2B57D0",marginRight:"12px",fontSize:"20px"},children:""}),c.jsx("span",{style:{fontSize:"17px",flex:1},children:o(T)}),!La[T].amberEligible&&c.jsx("span",{style:{fontSize:"13px",backgroundColor:"#fee2e2",color:"#b91c1c",padding:"4px 10px",borderRadius:"6px",fontWeight:"500"},children:" RED"})]},T))})]}),c.jsxs("div",{children:[c.jsxs("label",{style:{display:"block",fontSize:"17px",fontWeight:"600",color:"#333",marginBottom:"10px"},children:[o("restroom"),"s (",b,")"]}),c.jsx("div",{style:{backgroundColor:"rgba(254, 226, 226, 0.4)",border:"1px solid #f87171",borderRadius:"12px",padding:"16px"},children:Array.from({length:b},(T,O)=>c.jsxs("div",{style:{display:"flex",alignItems:"center",padding:"12px 0",borderBottom:O!==b-1?"1px solid rgba(248, 113, 113, 0.3)":"none"},children:[c.jsx("span",{style:{color:"#b91c1c",marginRight:"12px",fontSize:"20px"},children:""}),c.jsxs("span",{style:{fontSize:"17px",flex:1},children:[o("restroom")," ",O+1]}),c.jsxs("span",{style:{fontSize:"13px",backgroundColor:"#fee2e2",color:"#b91c1c",padding:"4px 10px",borderRadius:"6px",fontWeight:"500"},children:[" ",r("audit.status.red").split(" ")[0]]})]},O))})]}),c.jsxs("div",{children:[c.jsx("label",{style:{display:"block",fontSize:"17px",fontWeight:"600",color:"#333",marginBottom:"10px"},children:r("audit.setup.optionalZones")}),c.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:xw.map(T=>c.jsxs("label",{style:{display:"flex",alignItems:"center",padding:"16px",backgroundColor:"#fff",borderRadius:"12px",border:"1px solid #ddd",cursor:"pointer",minHeight:"56px"},children:[c.jsx("input",{type:"checkbox",checked:S.includes(T),onChange:()=>E(T),style:{width:"24px",height:"24px",marginRight:"14px",accentColor:"#2B57D0"}}),c.jsx("span",{style:{flex:1,fontSize:"17px"},children:o(T)}),!La[T].amberEligible&&c.jsx("span",{style:{fontSize:"13px",backgroundColor:"#fef3c7",color:"#92400e",padding:"4px 10px",borderRadius:"6px",fontWeight:"500"},children:""})]},T))})]}),c.jsx("button",{onClick:R,style:{width:"100%",backgroundColor:"#092849",color:"#fff",padding:"18px",borderRadius:"12px",fontSize:"18px",fontWeight:"700",border:"none",cursor:"pointer",marginTop:"8px"},children:r("audit.setup.beginWalkthrough")})]})]})},Og=({zoneId:a,index:n,defects:r,isComplete:o,onClick:u})=>{const d=La[a],f=()=>o?r===0?"rgba(194, 236, 253, 0.3)":"rgba(194, 236, 253, 0.5)":"#fff",p=()=>o?r===0?"#47C4E6":"#141685":"#e5e7eb";return c.jsxs("button",{onClick:u,style:{width:"100%",backgroundColor:f(),padding:"16px",borderRadius:"12px",border:"1px solid #e5e7eb",display:"flex",alignItems:"center",textAlign:"left",cursor:"pointer"},children:[c.jsx("span",{style:{width:"36px",height:"36px",borderRadius:"50%",backgroundColor:p(),color:o?"#fff":"#666",display:"flex",alignItems:"center",justifyContent:"center",marginRight:"14px",fontWeight:"700",fontSize:"15px"},children:o?r===0?"":r:n+1}),c.jsxs("div",{style:{flex:1},children:[c.jsx("div",{style:{fontWeight:"600",fontSize:"17px",color:"#092849"},children:d.name}),d.description&&c.jsx("div",{style:{fontSize:"14px",color:"#666",marginTop:"2px"},children:d.description})]}),!d.amberEligible&&c.jsx("span",{style:{fontSize:"13px",backgroundColor:"#C2ECFD",color:"#141685",padding:"4px 10px",borderRadius:"6px"},children:""})]})},nS=({audit:a})=>{const n=We();w.useEffect(()=>{window.scrollTo(0,0)},[]);const{campus:r,allZones:o,selectedOptionalZones:u,zoneResults:d,countDefects:f,getCompletedZonesCount:p,getNextIncompleteZoneIndex:g,setCurrentZoneIndex:y}=a,b=p(),x=E=>{y(E),n("/audit/zone")},S=()=>{if(b===o.length)n("/audit/tour-ready");else{const E=g();E>=0&&(y(E),n("/audit/zone"))}},_=()=>{window.confirm("Exit? Progress will be lost.")&&(a.resetAudit(),n("/"))};return c.jsxs("div",{style:{minHeight:"100vh",backgroundColor:"#f3f4f6",paddingBottom:"100px"},children:[c.jsx(ut,{title:r?.name||"Audit",subtitle:`${r?.city||""}, ${r?.state||""}`,onBack:_}),c.jsxs("div",{style:{backgroundColor:"#fff",padding:"16px 20px",borderBottom:"1px solid #e5e7eb"},children:[c.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"15px",color:"#666",marginBottom:"10px"},children:[c.jsx("span",{children:"Progress"}),c.jsxs("span",{children:[b," of ",o.length," zones"]})]}),c.jsx("div",{style:{height:"8px",backgroundColor:"#e5e7eb",borderRadius:"4px",overflow:"hidden"},children:c.jsx("div",{style:{height:"100%",backgroundColor:"#092849",width:`${b/o.length*100}%`,transition:"width 0.3s ease"}})})]}),c.jsxs("div",{style:{padding:"20px"},children:[c.jsx("h2",{style:{fontWeight:"700",fontSize:"17px",color:"#374151",marginBottom:"14px"},children:"Mandatory Zones"}),c.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"10px",marginBottom:"24px"},children:fu.map((E,R)=>c.jsx(Og,{zoneId:E,index:R,defects:f(E),isComplete:!!d[E],onClick:()=>x(R)},E))}),u.length>0&&c.jsxs(c.Fragment,{children:[c.jsx("h2",{style:{fontWeight:"700",fontSize:"17px",color:"#374151",marginBottom:"14px"},children:"Optional Zones"}),c.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:u.map((E,R)=>c.jsx(Og,{zoneId:E,index:fu.length+R,defects:f(E),isComplete:!!d[E],onClick:()=>x(fu.length+R)},E))})]})]}),c.jsx("div",{style:{position:"fixed",bottom:0,left:0,right:0,backgroundColor:"#fff",borderTop:"1px solid #e5e7eb",padding:"16px 20px"},children:c.jsx("button",{onClick:S,style:{width:"100%",backgroundColor:"#092849",color:"#fff",padding:"18px",borderRadius:"12px",fontSize:"18px",fontWeight:"700",border:"none",cursor:"pointer"},children:b===o.length?"Final Question ":b===0?"Start First Zone ":"Continue "})})]})},iS=({audit:a,camera:n})=>{const r=We(),{t:o,getChecklist:u,getZoneName:d}=Gn(),{currentZoneIndex:f,currentZone:p,currentZoneId:g,allZones:y,zoneResults:b,setResponse:x,isZoneComplete:S,setConditionAlert:_,getConditionAlert:E,setCurrentZoneIndex:R,addConditionAlertPhoto:T,removeConditionAlertPhoto:O}=a,z=b[g]||{},B=Object.keys(z).length,Y=p?.type==="restroom"?"restroom":g,J=u(Y),G=J?.length||p?.cleanliness?.length||0,K=S(g),P=E(g),F=P?.hasIssue!==void 0,ve=P?.photos||[],be=P?.hasIssue===!1||P?.hasIssue===!0&&ve.length>0&&P?.note?.length>0,Ae=()=>{K&&be&&(f<y.length-1?(R(f+1),window.scrollTo(0,0),r("/audit/zone")):(window.scrollTo(0,0),r("/audit/tour-ready")))},Se=j=>{const M=j.target.value.slice(0,100);a.updateConditionAlertNote(g,M)},q=()=>{const j=g;console.log("[AuditZone] Taking condition photo for zone:",j),n.openCamera(M=>{console.log("[AuditZone] Condition photo received, length:",M?.length),M&&T(j,M)})},V=j=>{O(g,j)};return c.jsxs("div",{style:{minHeight:"100vh",backgroundColor:"#f3f4f6",paddingBottom:"100px"},children:[c.jsx("div",{style:{background:"linear-gradient(180deg, #092849 0%, #141685 100%)",color:"#fff",padding:"20px"},children:c.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[c.jsx("button",{onClick:()=>r("/audit/overview"),style:{fontSize:"24px",background:"rgba(255,255,255,0.2)",border:"none",borderRadius:"8px",width:"40px",height:"40px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",color:"#fff"},children:""}),c.jsxs("div",{style:{textAlign:"center"},children:[c.jsx("h1",{style:{fontSize:"20px",fontWeight:"700",margin:0},children:p?.type==="restroom"?p?.name:d(g)}),c.jsxs("p",{style:{fontSize:"15px",opacity:.8,margin:"4px 0 0 0"},children:[o("audit.walkthrough.zone")," ",f+1," ",o("audit.walkthrough.of")," ",y.length]})]}),c.jsx("div",{style:{width:"40px"}})]})}),c.jsx("div",{style:{height:"6px",backgroundColor:"#e5e7eb"},children:c.jsx("div",{style:{height:"100%",backgroundColor:"#092849",width:`${(f+1)/y.length*100}%`,transition:"width 0.3s ease"}})}),!p?.amberEligible&&c.jsx("div",{style:{backgroundColor:"rgba(194, 236, 253, 0.5)",borderLeft:"4px solid #2B57D0",padding:"14px 16px",margin:"16px 20px",borderRadius:"8px"},children:c.jsxs("div",{style:{fontWeight:"600",color:"#141685",fontSize:"15px"},children:[" ",o("audit.bg.anyDefectRed")]})}),c.jsxs("div",{style:{padding:"20px"},children:[c.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"14px"},children:J?.map((j,M)=>c.jsxs("div",{style:{backgroundColor:"#fff",borderRadius:"12px",padding:"16px",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[c.jsxs("div",{style:{fontSize:"16px",marginBottom:"14px",color:"#333",lineHeight:"1.4"},children:[M+1,". ",j]}),c.jsxs("div",{style:{display:"flex",gap:"10px"},children:[c.jsxs("button",{onClick:()=>x(g,M,"yes"),style:{flex:1,padding:"14px",borderRadius:"10px",fontWeight:"600",fontSize:"16px",border:"none",cursor:"pointer",backgroundColor:z[M]==="yes"?"#47C4E6":"#f3f4f6",color:z[M]==="yes"?"#fff":"#333"},children:[" ",o("common.yes")]}),c.jsxs("button",{onClick:()=>x(g,M,"no"),style:{flex:1,padding:"14px",borderRadius:"10px",fontWeight:"600",fontSize:"16px",border:"none",cursor:"pointer",backgroundColor:z[M]==="no"?"#141685":"#f3f4f6",color:z[M]==="no"?"#fff":"#333"},children:[" ",o("common.no")]})]})]},M))}),c.jsxs("div",{style:{backgroundColor:"#fff",borderRadius:"12px",padding:"16px",boxShadow:"0 1px 3px rgba(0,0,0,0.1)",marginTop:"20px",borderLeft:"4px solid #2B57D0"},children:[c.jsx("div",{style:{fontSize:"15px",fontWeight:"600",color:"#092849",marginBottom:"12px"},children:o("audit.bg.title")}),c.jsxs("div",{style:{display:"flex",gap:"10px"},children:[c.jsx("button",{onClick:()=>_(g,!1),style:{flex:1,padding:"12px",borderRadius:"10px",fontWeight:"600",fontSize:"14px",border:"none",cursor:"pointer",backgroundColor:P?.hasIssue===!1?"#47C4E6":"#f3f4f6",color:P?.hasIssue===!1?"#fff":"#333"},children:" No"}),c.jsx("button",{onClick:()=>_(g,!0),style:{flex:1,padding:"12px",borderRadius:"10px",fontWeight:"600",fontSize:"14px",border:"none",cursor:"pointer",backgroundColor:P?.hasIssue===!0?"#2B57D0":"#f3f4f6",color:P?.hasIssue===!0?"#fff":"#333"},children:" Yes"})]}),P?.hasIssue===!0&&c.jsxs("div",{style:{marginTop:"12px"},children:[c.jsxs("div",{style:{marginBottom:"12px"},children:[ve.length>0&&c.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"8px",marginBottom:"12px"},children:ve.map((j,M)=>c.jsxs("div",{style:{position:"relative"},children:[c.jsx("img",{src:j,alt:`B&G Issue ${M+1}`,style:{width:"100%",height:"120px",borderRadius:"8px",objectFit:"cover"}}),c.jsx("button",{onClick:()=>V(M),style:{position:"absolute",top:"4px",right:"4px",backgroundColor:"#ef4444",color:"#fff",width:"24px",height:"24px",borderRadius:"50%",border:"none",cursor:"pointer",fontSize:"14px",fontWeight:"700",display:"flex",alignItems:"center",justifyContent:"center"},children:""}),c.jsxs("div",{style:{position:"absolute",bottom:"4px",left:"4px",backgroundColor:"rgba(0,0,0,0.6)",color:"#fff",padding:"2px 6px",borderRadius:"4px",fontSize:"11px"},children:["#",M+1]})]},M))}),c.jsxs("button",{onClick:q,style:{width:"100%",padding:ve.length>0?"12px":"20px",border:"2px dashed #d1d5db",borderRadius:"8px",backgroundColor:"#f9fafb",cursor:"pointer",display:"flex",flexDirection:ve.length>0?"row":"column",alignItems:"center",justifyContent:"center",gap:"8px"},children:[c.jsx("span",{style:{fontSize:ve.length>0?"20px":"28px"},children:""}),c.jsx("span",{style:{fontSize:"14px",fontWeight:"600",color:"#374151"},children:ve.length>0?o("audit.bg.addAnotherPhoto"):o("audit.bg.takePhotoOfIssue")}),ve.length===0&&c.jsx("span",{style:{fontSize:"12px",color:"#6b7280"},children:o("audit.bg.requiredForAlerts")})]})]}),c.jsx("textarea",{value:P?.note||"",onChange:Se,placeholder:o("audit.bg.describeIssue"),maxLength:100,style:{width:"100%",padding:"12px",borderRadius:"8px",border:"1px solid #d1d5db",fontSize:"14px",resize:"none",minHeight:"60px",fontFamily:"inherit",boxSizing:"border-box"}}),c.jsxs("div",{style:{fontSize:"12px",color:"#6b7280",textAlign:"right",marginTop:"4px"},children:[P?.note?.length||0,"/100"]})]})]})]}),c.jsx("div",{style:{position:"fixed",bottom:0,left:0,right:0,backgroundColor:"#fff",borderTop:"1px solid #e5e7eb",padding:"16px 20px"},children:c.jsx("button",{onClick:Ae,disabled:!K||!be,style:{width:"100%",padding:"18px",borderRadius:"12px",fontSize:"18px",fontWeight:"700",border:"none",cursor:K&&be?"pointer":"not-allowed",backgroundColor:K&&be?"#092849":"#d1d5db",color:K&&be?"#fff":"#9ca3af"},children:K?F?P?.hasIssue&&ve.length===0?o("audit.bg.addBGPhoto"):P?.hasIssue&&!P?.note?.length?o("audit.bg.describeBGIssue"):`${o("audit.bg.completeZone")} `:o("audit.bg.selectBGStatus"):`${o("audit.bg.answerAll")} (${B}/${G})`})})]})},aS=({audit:a,camera:n})=>{const r=We(),{currentZoneIndex:o,currentZone:u,currentZoneId:d,allZones:f,setConditionAlert:p,updateConditionAlertPhoto:g,updateConditionAlertNote:y,canCompleteCondition:b,getConditionAlert:x,setCurrentZoneIndex:S}=a,_=x(d),E=b(d),R=()=>{const O=d;console.log("[AuditCondition] handleTakePhoto called for zone:",O),n.openCamera(z=>{console.log("[AuditCondition] Photo callback received, data length:",z?.length),console.log("[AuditCondition] Updating photo for zone:",O),z?g(O,z):console.error("[AuditCondition] ERROR: No image data received!")})},T=()=>{E&&(o<f.length-1?(S(o+1),r("/audit/zone")):r("/audit/overview"))};return c.jsxs("div",{style:{minHeight:"100vh",backgroundColor:"#f3f4f6",paddingBottom:"100px"},children:[c.jsx("div",{style:{backgroundColor:"#2B57D0",color:"#fff",padding:"20px"},children:c.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[c.jsx("button",{onClick:()=>r("/audit/zone"),style:{fontSize:"24px",background:"rgba(255,255,255,0.2)",border:"none",borderRadius:"8px",width:"40px",height:"40px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",color:"#fff",marginRight:"14px"},children:""}),c.jsxs("div",{children:[c.jsx("h1",{style:{fontSize:"22px",fontWeight:"700",margin:0},children:"Building Check"}),c.jsx("p",{style:{fontSize:"15px",color:"#C2ECFD",margin:"4px 0 0 0"},children:u?.name})]})]})}),c.jsxs("div",{style:{padding:"20px",display:"flex",flexDirection:"column",gap:"16px"},children:[c.jsxs("div",{style:{backgroundColor:"#fff",borderRadius:"12px",padding:"20px",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[c.jsx("div",{style:{fontSize:"18px",fontWeight:"600",marginBottom:"12px",color:"#092849"},children:"Any building issues to flag for B&G?"}),c.jsx("p",{style:{fontSize:"15px",color:"#666",marginBottom:"20px"},children:"Examples: holes in walls, broken fixtures, damaged flooring, water damage"}),c.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:[c.jsxs("button",{onClick:()=>p(d,!1),style:{width:"100%",padding:"16px",borderRadius:"12px",border:_?.hasIssue===!1?"2px solid #47C4E6":"2px solid #e5e7eb",backgroundColor:_?.hasIssue===!1?"rgba(194, 236, 253, 0.3)":"#fff",display:"flex",alignItems:"center",cursor:"pointer"},children:[c.jsx("span",{style:{fontSize:"24px",marginRight:"14px"},children:""}),c.jsx("div",{style:{fontWeight:"600",fontSize:"17px"},children:"No issues"})]}),c.jsxs("button",{onClick:()=>p(d,!0),style:{width:"100%",padding:"16px",borderRadius:"12px",border:_?.hasIssue===!0?"2px solid #2B57D0":"2px solid #e5e7eb",backgroundColor:_?.hasIssue===!0?"rgba(194, 236, 253, 0.3)":"#fff",display:"flex",alignItems:"center",cursor:"pointer",textAlign:"left"},children:[c.jsx("span",{style:{fontSize:"24px",marginRight:"14px"},children:""}),c.jsxs("div",{children:[c.jsx("div",{style:{fontWeight:"600",fontSize:"17px"},children:"Yes  flag for B&G"}),c.jsx("div",{style:{fontSize:"14px",color:"#666",marginTop:"2px"},children:"Photo + description required"})]})]})]})]}),_?.hasIssue===!0&&c.jsxs("div",{style:{backgroundColor:"#fff",borderRadius:"12px",padding:"20px",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[c.jsx("div",{style:{marginBottom:"16px"},children:_.photo?c.jsxs("div",{style:{position:"relative"},children:[c.jsx("img",{src:_.photo,alt:"Issue",style:{width:"100%",borderRadius:"12px"}}),c.jsx("button",{onClick:R,style:{position:"absolute",bottom:"12px",right:"12px",backgroundColor:"#fff",padding:"8px 14px",borderRadius:"8px",fontSize:"14px",boxShadow:"0 2px 6px rgba(0,0,0,0.15)",border:"none",cursor:"pointer"},children:" Retake"})]}):c.jsxs("button",{onClick:R,style:{width:"100%",border:"2px dashed #ccc",borderRadius:"12px",padding:"32px",textAlign:"center",backgroundColor:"#fafafa",cursor:"pointer"},children:[c.jsx("div",{style:{fontSize:"48px",marginBottom:"8px"},children:""}),c.jsx("div",{style:{fontWeight:"600",fontSize:"17px"},children:"Tap to Take Photo"})]})}),c.jsx("label",{style:{display:"block",fontSize:"15px",fontWeight:"600",color:"#374151",marginBottom:"10px"},children:"Describe the issue *"}),c.jsx("input",{type:"text",maxLength:100,placeholder:"e.g., Hole in drywall near door",style:{width:"100%",border:"1px solid #ccc",borderRadius:"10px",padding:"14px 16px",fontSize:"17px",boxSizing:"border-box"},value:_.note||"",onChange:O=>y(d,O.target.value)}),c.jsxs("div",{style:{fontSize:"13px",color:"#9ca3af",marginTop:"6px",textAlign:"right"},children:[(_.note||"").length,"/100"]})]}),c.jsx("div",{style:{backgroundColor:"rgba(194, 236, 253, 0.3)",border:"1px solid #47C4E6",borderRadius:"12px",padding:"14px 16px"},children:c.jsx("div",{style:{fontSize:"15px",color:"#141685"},children:"B&G alerts are separate from cleanliness and do NOT affect your score."})})]}),c.jsx("div",{style:{position:"fixed",bottom:0,left:0,right:0,backgroundColor:"#fff",borderTop:"1px solid #e5e7eb",padding:"16px 20px"},children:c.jsx("button",{onClick:T,disabled:!E,style:{width:"100%",padding:"18px",borderRadius:"12px",fontSize:"18px",fontWeight:"700",border:"none",cursor:E?"pointer":"not-allowed",backgroundColor:E?"#092849":"#d1d5db",color:E?"#fff":"#9ca3af"},children:o<f.length-1?"Next Zone ":"Finish Zones "})})]})},rS=({audit:a})=>{const n=We(),{t:r}=Gn(),{tourReady:o,setTourReady:u}=a;return c.jsxs("div",{style:{minHeight:"100vh",backgroundColor:"#f3f4f6",paddingBottom:"100px"},children:[c.jsx(ut,{title:r("audit.tourReady.title"),onBack:()=>n("/audit/overview")}),c.jsx("div",{style:{padding:"20px"},children:c.jsxs("div",{style:{backgroundColor:"#fff",borderRadius:"12px",padding:"24px",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[c.jsx("div",{style:{fontSize:"20px",fontWeight:"600",marginBottom:"20px",color:"#092849"},children:r("audit.tourReady.question")}),c.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:[c.jsxs("button",{onClick:()=>u("yes"),style:{width:"100%",padding:"18px",borderRadius:"12px",border:o==="yes"?"2px solid #47C4E6":"2px solid #e5e7eb",backgroundColor:o==="yes"?"rgba(194, 236, 253, 0.3)":"#fff",display:"flex",alignItems:"center",cursor:"pointer"},children:[c.jsx("span",{style:{fontSize:"28px",marginRight:"16px"},children:""}),c.jsx("div",{style:{fontWeight:"600",fontSize:"18px"},children:r("audit.tourReady.yesTourReady")})]}),c.jsxs("button",{onClick:()=>u("no"),style:{width:"100%",padding:"18px",borderRadius:"12px",border:o==="no"?"2px solid #2B57D0":"2px solid #e5e7eb",backgroundColor:o==="no"?"rgba(194, 236, 253, 0.3)":"#fff",display:"flex",alignItems:"center",cursor:"pointer",textAlign:"left"},children:[c.jsx("span",{style:{fontSize:"28px",marginRight:"16px"},children:""}),c.jsxs("div",{children:[c.jsx("div",{style:{fontWeight:"600",fontSize:"18px"},children:r("audit.tourReady.noNotTourReady")}),c.jsxs("div",{style:{fontSize:"15px",color:"#141685",marginTop:"4px"},children:[" ",r("audit.tourReady.automaticRed")]})]})]})]})]})}),c.jsx("div",{style:{position:"fixed",bottom:0,left:0,right:0,backgroundColor:"#fff",borderTop:"1px solid #e5e7eb",padding:"16px 20px"},children:c.jsxs("button",{onClick:()=>n("/audit/summary"),disabled:o===null,style:{width:"100%",padding:"18px",borderRadius:"12px",fontSize:"18px",fontWeight:"700",border:"none",cursor:o!==null?"pointer":"not-allowed",backgroundColor:o!==null?"#092849":"#d1d5db",color:o!==null?"#fff":"#9ca3af"},children:[r("audit.tourReady.reviewSummary")," "]})})]})},sS=({audit:a})=>{const n=We(),{t:r,getZoneName:o}=Gn(),[u,d]=w.useState(!1),{campus:f,allZones:p,conditionAlerts:g,calculateStatus:y,countDefects:b,getTotalDefects:x,getDuration:S,buildAuditData:_,getZoneConfig:E}=a,R=y(),T=x(),O=S(),z=g.filter(G=>G.hasIssue).length,B={GREEN:"#47C4E6",AMBER:"#2B57D0",RED:"#141685"},Y={GREEN:"",AMBER:"",RED:""},J=async()=>{d(!0);try{const G=_();await uw(G),n("/audit/complete")}catch(G){console.error("Error submitting audit:",G),alert("Error submitting audit. Please try again.")}finally{d(!1)}};return c.jsxs("div",{style:{minHeight:"100vh",backgroundColor:"#f3f4f6",paddingBottom:"100px"},children:[c.jsxs("div",{style:{backgroundColor:B[R],color:"#fff",padding:"28px 20px",textAlign:"center"},children:[c.jsx("div",{style:{fontSize:"56px",marginBottom:"8px"},children:Y[R]}),c.jsx("div",{style:{fontSize:"32px",fontWeight:"700"},children:r(`audit.status.${R}`)}),c.jsx("div",{style:{opacity:.9,fontSize:"17px",marginTop:"4px"},children:f?.name||""})]}),c.jsxs("div",{style:{padding:"20px",display:"flex",flexDirection:"column",gap:"16px"},children:[c.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:"12px"},children:[c.jsxs("div",{style:{backgroundColor:"#fff",padding:"16px",borderRadius:"12px",boxShadow:"0 1px 3px rgba(0,0,0,0.1)",textAlign:"center"},children:[c.jsx("div",{style:{fontSize:"24px",fontWeight:"700",color:"#092849"},children:p.length}),c.jsx("div",{style:{fontSize:"14px",color:"#666",marginTop:"4px"},children:r("audit.summary.zones")})]}),c.jsxs("div",{style:{backgroundColor:"#fff",padding:"16px",borderRadius:"12px",boxShadow:"0 1px 3px rgba(0,0,0,0.1)",textAlign:"center"},children:[c.jsx("div",{style:{fontSize:"24px",fontWeight:"700",color:T>0?"#141685":"#47C4E6"},children:T}),c.jsx("div",{style:{fontSize:"14px",color:"#666",marginTop:"4px"},children:r("audit.summary.defects")})]}),c.jsxs("div",{style:{backgroundColor:"#fff",padding:"16px",borderRadius:"12px",boxShadow:"0 1px 3px rgba(0,0,0,0.1)",textAlign:"center"},children:[c.jsxs("div",{style:{fontSize:"24px",fontWeight:"700",color:"#092849"},children:[O,"m"]}),c.jsx("div",{style:{fontSize:"14px",color:"#666",marginTop:"4px"},children:r("audit.summary.duration")})]})]}),c.jsx("div",{style:{backgroundColor:"#fff",borderRadius:"12px",boxShadow:"0 1px 3px rgba(0,0,0,0.1)",overflow:"hidden"},children:p.map((G,K)=>{const P=E(G),F=b(G);return c.jsxs("div",{style:{padding:"14px 16px",display:"flex",alignItems:"center",borderBottom:K!==p.length-1?"1px solid #e5e7eb":"none"},children:[c.jsx("span",{style:{width:"32px",height:"32px",borderRadius:"50%",backgroundColor:F===0?"#C2ECFD":"rgba(194, 236, 253, 0.5)",color:F===0?"#2B57D0":"#141685",display:"flex",alignItems:"center",justifyContent:"center",marginRight:"14px",fontWeight:"700",fontSize:"15px"},children:F===0?"":F}),c.jsx("span",{style:{flex:1,fontSize:"17px",color:"#374151"},children:P?.type==="restroom"?P?.name:o(G)})]},G)})}),z>0&&c.jsxs("div",{style:{backgroundColor:"rgba(194, 236, 253, 0.3)",border:"1px solid #47C4E6",borderRadius:"12px",padding:"16px"},children:[c.jsxs("div",{style:{fontWeight:"700",color:"#092849",marginBottom:"4px",fontSize:"17px"},children:[" ",z," ",r("audit.summary.bgIssuesFlagged")]}),c.jsx("div",{style:{fontSize:"15px",color:"#141685"},children:r("audit.summary.sentToBGTeam")})]})]}),c.jsx("div",{style:{position:"fixed",bottom:0,left:0,right:0,backgroundColor:"#fff",borderTop:"1px solid #e5e7eb",padding:"16px 20px"},children:c.jsx("button",{onClick:J,disabled:u,style:{width:"100%",backgroundColor:u?"#9ca3af":"#092849",color:"#fff",padding:"18px",borderRadius:"12px",fontSize:"18px",fontWeight:"700",border:"none",cursor:u?"not-allowed":"pointer"},children:u?r("audit.summary.submitting"):` ${r("audit.summary.submitAudit")}`})})]})},oS=({audit:a})=>{const n=We(),{t:r}=Gn(),{campus:o,calculateStatus:u,resetAudit:d}=a,f=u(),p={GREEN:"#47C4E6",AMBER:"#2B57D0",RED:"#141685"},g=()=>{d(),n("/")};return c.jsxs("div",{style:{minHeight:"100vh",backgroundColor:p[f],display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"32px",color:"#fff",textAlign:"center"},children:[c.jsx("div",{style:{fontSize:"96px",marginBottom:"24px"},children:""}),c.jsx("h1",{style:{fontSize:"32px",fontWeight:"700",marginBottom:"8px"},children:r("audit.complete.submitted")}),c.jsx("div",{style:{fontSize:"56px",fontWeight:"700",margin:"16px 0"},children:r(`audit.status.${f}`)}),c.jsx("p",{style:{opacity:.9,marginBottom:"32px",fontSize:"18px"},children:o?.name||""}),c.jsx("button",{onClick:g,style:{backgroundColor:"#fff",color:"#092849",padding:"16px 40px",borderRadius:"12px",fontWeight:"700",fontSize:"18px",border:"none",cursor:"pointer"},children:r("audit.complete.done")})]})},lS=()=>{const a=We(),[n,r]=w.useState([]),[o,u]=w.useState([]),[d,f]=w.useState(!0),[p,g]=w.useState("all");w.useEffect(()=>{(async()=>{try{const[_,E]=await Promise.all([ym(50),Iu(null,50)]);r(_),u(E)}catch(_){console.error("Error loading data:",_)}finally{f(!1)}})()},[]);const y={GREEN:"#47C4E6",AMBER:"#2B57D0",RED:"#141685"},x=(()=>{let S=[];return(p==="all"||p==="audits")&&(S=[...S,...n.map(_=>({..._,type:"audit",sortDate:new Date(_.createdAt||_.date+" "+_.time)}))]),(p==="all"||p==="bg")&&(S=[...S,...o.map(_=>({..._,type:"bg",sortDate:new Date(_.createdAt||_.date+" "+_.time)}))]),S.sort((_,E)=>E.sortDate-_.sortDate)})();return c.jsxs("div",{style:{minHeight:"100vh",backgroundColor:"#f3f4f6"},children:[c.jsx(ut,{title:"History",onBack:()=>a("/")}),c.jsxs("div",{style:{padding:"20px"},children:[c.jsxs("div",{style:{display:"flex",gap:"8px",marginBottom:"20px",backgroundColor:"#fff",padding:"6px",borderRadius:"12px",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[c.jsx("button",{onClick:()=>g("all"),style:{flex:1,padding:"12px",borderRadius:"8px",border:"none",fontSize:"15px",fontWeight:"600",cursor:"pointer",backgroundColor:p==="all"?"#092849":"transparent",color:p==="all"?"#fff":"#666"},children:"All"}),c.jsx("button",{onClick:()=>g("audits"),style:{flex:1,padding:"12px",borderRadius:"8px",border:"none",fontSize:"15px",fontWeight:"600",cursor:"pointer",backgroundColor:p==="audits"?"#092849":"transparent",color:p==="audits"?"#fff":"#666"},children:"Cleanliness"}),c.jsx("button",{onClick:()=>g("bg"),style:{flex:1,padding:"12px",borderRadius:"8px",border:"none",fontSize:"15px",fontWeight:"600",cursor:"pointer",backgroundColor:p==="bg"?"#092849":"transparent",color:p==="bg"?"#fff":"#666"},children:"B&G"})]}),d?c.jsx("div",{style:{textAlign:"center",padding:"48px 0",color:"#9ca3af",fontSize:"17px"},children:"Loading..."}):x.length===0?c.jsxs("div",{style:{textAlign:"center",padding:"48px 0",color:"#9ca3af"},children:[c.jsx("div",{style:{fontSize:"56px",marginBottom:"16px"},children:""}),c.jsx("p",{style:{fontSize:"17px"},children:"No records yet"})]}):c.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:x.map((S,_)=>S.type==="audit"?c.jsx("div",{onClick:()=>S.id&&a(`/audit/${S.id}`),style:{backgroundColor:"#fff",borderRadius:"12px",padding:"16px",boxShadow:"0 1px 3px rgba(0,0,0,0.1)",cursor:S.id?"pointer":"default"},children:c.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[c.jsx("span",{style:{fontSize:"28px",marginRight:"14px"},children:S.status==="GREEN"?"":S.status==="AMBER"?"":""}),c.jsxs("div",{style:{flex:1},children:[c.jsx("div",{style:{fontWeight:"700",fontSize:"17px",color:"#092849"},children:S.campus}),c.jsxs("div",{style:{fontSize:"15px",color:"#666",marginTop:"2px"},children:[S.date,"  ",S.auditor]}),c.jsx("div",{style:{fontSize:"12px",color:"#9ca3af",marginTop:"4px",display:"inline-block",backgroundColor:"#f3f4f6",padding:"2px 8px",borderRadius:"4px"},children:"Cleanliness"})]}),c.jsxs("div",{style:{textAlign:"right",marginRight:"8px"},children:[c.jsx("div",{style:{fontWeight:"700",fontSize:"17px",color:y[S.status]||"#092849"},children:S.status}),c.jsxs("div",{style:{fontSize:"15px",color:"#666",marginTop:"2px"},children:[S.defects," defect",S.defects!==1?"s":""]})]}),c.jsx("span",{style:{color:"#9ca3af",fontSize:"24px"},children:""})]})},`audit-${S.id||_}`):c.jsx("div",{onClick:()=>S.id&&a(`/bg/${S.id}`),style:{backgroundColor:"#fff",borderRadius:"12px",padding:"16px",boxShadow:"0 1px 3px rgba(0,0,0,0.1)",cursor:S.id?"pointer":"default"},children:c.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[c.jsx("span",{style:{fontSize:"28px",marginRight:"14px"},children:""}),c.jsxs("div",{style:{flex:1},children:[c.jsx("div",{style:{fontWeight:"700",fontSize:"17px",color:"#092849"},children:S.campus}),c.jsxs("div",{style:{fontSize:"15px",color:"#666",marginTop:"2px"},children:[S.date,"  ",S.auditor]}),c.jsx("div",{style:{fontSize:"12px",color:"#9ca3af",marginTop:"4px",display:"inline-block",backgroundColor:"#e0f2fe",padding:"2px 8px",borderRadius:"4px"},children:"B&G Walkthrough"})]}),c.jsxs("div",{style:{textAlign:"right",marginRight:"8px"},children:[c.jsx("div",{style:{fontWeight:"700",fontSize:"17px",color:S.campusRating==="PASS"?"#10b981":"#ef4444"},children:S.campusRating||"N/A"}),c.jsxs("div",{style:{fontSize:"15px",color:"#666",marginTop:"2px"},children:[S.totalIssues||0," issue",S.totalIssues!==1?"s":""]})]}),c.jsx("span",{style:{color:"#9ca3af",fontSize:"24px"},children:""})]})},`bg-${S.id||_}`))})]})]})},mu=a=>{if(La[a])return La[a];if(a.startsWith("restroom_")){const n=a.replace("restroom_","");return{...xm,name:`Restroom ${n}`}}return null},cS=()=>{const a=We(),{id:n}=Ou(),[r,o]=w.useState(null),[u,d]=w.useState([]),[f,p]=w.useState(!0);w.useEffect(()=>{(async()=>{try{const{data:x,error:S}=await Zt.from("audits").select("*").eq("id",n).single();if(S)throw S;console.log("Raw audit data:",{zone_results:x.zone_results,condition_alert_details:x.condition_alert_details}),x.condition_alert_details&&x.condition_alert_details.forEach((R,T)=>{console.log(`Condition Alert ${T}:`,{zoneId:R.zoneId,hasIssue:R.hasIssue,hasPhoto:!!R.photo,photoUrl:R.photo,note:R.note})}),o({id:x.id,date:x.date,time:x.time,campus:x.campus,auditor:x.auditor,auditorEmail:x.auditor_email,status:x.status,defects:x.defects,zones:x.zones,duration:x.duration,tourReady:x.tour_ready,conditionAlerts:x.condition_alerts_count,zoneResults:x.zone_results||{},conditionAlertDetails:x.condition_alert_details||[],campusData:x.campus_data,createdAt:x.created_at});const{data:_,error:E}=await Zt.from("zone_photos").select("*").eq("audit_id",n).order("created_at",{ascending:!0});!E&&_&&d(_)}catch(x){console.error("Error loading audit:",x)}finally{p(!1)}})()},[n]);const g={GREEN:{bg:"#dcfce7",text:"#166534",emoji:""},AMBER:{bg:"#fef3c7",text:"#92400e",emoji:""},RED:{bg:"#fee2e2",text:"#b91c1c",emoji:""}};if(f)return c.jsxs("div",{style:{minHeight:"100vh",backgroundColor:"#f3f4f6"},children:[c.jsx(ut,{title:"Audit Report",onBack:()=>a(-1)}),c.jsx("div",{style:{textAlign:"center",padding:"48px 0",color:"#9ca3af"},children:"Loading..."})]});if(!r)return c.jsxs("div",{style:{minHeight:"100vh",backgroundColor:"#f3f4f6"},children:[c.jsx(ut,{title:"Audit Report",onBack:()=>a(-1)}),c.jsx("div",{style:{textAlign:"center",padding:"48px 0",color:"#9ca3af"},children:"Audit not found"})]});const y=g[r.status]||g.RED;return c.jsxs("div",{style:{minHeight:"100vh",backgroundColor:"#f3f4f6"},children:[c.jsx(ut,{title:"Audit Report",onBack:()=>a(-1)}),c.jsxs("div",{style:{padding:"20px"},children:[c.jsxs("div",{style:{backgroundColor:y.bg,borderRadius:"16px",padding:"24px",textAlign:"center",marginBottom:"20px"},children:[c.jsx("div",{style:{fontSize:"56px",marginBottom:"12px"},children:y.emoji}),c.jsx("div",{style:{fontSize:"28px",fontWeight:"700",color:y.text},children:r.status}),c.jsxs("div",{style:{fontSize:"17px",color:y.text,marginTop:"8px"},children:[r.defects," defect",r.defects!==1?"s":""," found"]})]}),c.jsxs("div",{style:{backgroundColor:"#fff",borderRadius:"12px",padding:"20px",marginBottom:"16px",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[c.jsx("h3",{style:{fontSize:"18px",fontWeight:"700",color:"#092849",marginBottom:"16px"},children:"Audit Details"}),c.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:[c.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[c.jsx("span",{style:{color:"#666"},children:"Campus"}),c.jsx("span",{style:{fontWeight:"600",color:"#092849"},children:r.campus})]}),c.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[c.jsx("span",{style:{color:"#666"},children:"Auditor"}),c.jsx("span",{style:{fontWeight:"600",color:"#092849"},children:r.auditor})]}),r.auditorEmail&&c.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[c.jsx("span",{style:{color:"#666"},children:"Email"}),c.jsx("span",{style:{fontWeight:"600",color:"#092849"},children:r.auditorEmail})]}),c.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[c.jsx("span",{style:{color:"#666"},children:"Date"}),c.jsxs("span",{style:{fontWeight:"600",color:"#092849"},children:[r.date," at ",r.time]})]}),c.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[c.jsx("span",{style:{color:"#666"},children:"Duration"}),c.jsxs("span",{style:{fontWeight:"600",color:"#092849"},children:[r.duration," min"]})]}),c.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[c.jsx("span",{style:{color:"#666"},children:"Zones Checked"}),c.jsx("span",{style:{fontWeight:"600",color:"#092849"},children:r.zones})]}),c.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[c.jsx("span",{style:{color:"#666"},children:"Tour Ready"}),c.jsx("span",{style:{fontWeight:"600",color:r.tourReady?"#166534":"#b91c1c"},children:r.tourReady?"Yes":"No"})]})]})]}),r.zoneResults&&Object.keys(r.zoneResults).length>0&&c.jsxs("div",{style:{backgroundColor:"#fff",borderRadius:"12px",padding:"20px",marginBottom:"16px",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[c.jsx("h3",{style:{fontSize:"18px",fontWeight:"700",color:"#092849",marginBottom:"16px"},children:"Zone Results"}),c.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:Object.entries(r.zoneResults).map(([b,x])=>{const S=mu(b),_=Object.values(x).filter(E=>E==="no").length;return Object.keys(x).length,c.jsxs("div",{style:{padding:"14px",backgroundColor:_>0?"#fee2e2":"#dcfce7",borderRadius:"10px"},children:[c.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[c.jsx("span",{style:{fontWeight:"600",color:"#092849"},children:S?.name||b}),c.jsx("span",{style:{fontSize:"14px",fontWeight:"600",color:_>0?"#b91c1c":"#166534"},children:_>0?`${_} defect${_>1?"s":""}`:"Passed"})]}),_>0&&c.jsx("div",{style:{marginTop:"10px",fontSize:"14px",color:"#666"},children:Object.entries(x).filter(([,E])=>E==="no").map(([E])=>{const R=S?.cleanliness?.[parseInt(E)]||`Question ${parseInt(E)+1}`;return c.jsxs("div",{style:{marginTop:"4px",color:"#b91c1c"},children:[" ",R]},E)})})]},b)})})]}),r.conditionAlertDetails&&r.conditionAlertDetails.length>0&&c.jsxs("div",{style:{backgroundColor:"#fff",borderRadius:"12px",padding:"20px",marginBottom:"16px",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[c.jsxs("h3",{style:{fontSize:"18px",fontWeight:"700",color:"#092849",marginBottom:"16px"},children:["Condition Alerts (",r.conditionAlertDetails.length,")"]}),c.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:r.conditionAlertDetails.map((b,x)=>{const S=mu(b.zoneId);return c.jsxs("div",{style:{padding:"14px",backgroundColor:"#fef3c7",borderRadius:"10px"},children:[c.jsx("div",{style:{fontWeight:"600",color:"#92400e",marginBottom:"8px"},children:S?.name||b.zoneId}),b.note&&c.jsx("div",{style:{fontSize:"15px",color:"#666",marginBottom:"8px"},children:b.note}),b.photos?.length>0||b.photo?c.jsx("div",{style:{display:"grid",gridTemplateColumns:(b.photos?.length||1)>1?"repeat(2, 1fr)":"1fr",gap:"8px"},children:(b.photos||[b.photo]).filter(Boolean).map((_,E)=>c.jsx("img",{src:_,alt:`Condition alert ${E+1}`,style:{width:"100%",maxHeight:(b.photos?.length||1)>1?"150px":"300px",objectFit:"cover",borderRadius:"8px",backgroundColor:"#f3f4f6"},onError:R=>{console.error("Failed to load condition alert photo:",_),R.target.style.display="none"}},E))}):c.jsx("div",{style:{padding:"12px",backgroundColor:"#f3f4f6",borderRadius:"8px",fontSize:"14px",color:"#9ca3af",textAlign:"center"},children:"No photo attached"})]},x)})})]}),u.length>0&&c.jsxs("div",{style:{backgroundColor:"#fff",borderRadius:"12px",padding:"20px",marginBottom:"16px",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[c.jsxs("h3",{style:{fontSize:"18px",fontWeight:"700",color:"#092849",marginBottom:"16px"},children:["Zone Photos (",u.length,")"]}),c.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:Object.entries(u.reduce((b,x)=>{const S=x.zone_id||"unknown";return b[S]||(b[S]=[]),b[S].push(x),b},{})).map(([b,x])=>{const S=mu(b);return c.jsxs("div",{style:{padding:"14px",backgroundColor:"#f0f9ff",borderRadius:"10px"},children:[c.jsx("div",{style:{fontWeight:"600",color:"#0369a1",marginBottom:"12px"},children:S?.name||x[0]?.zone_name||b}),c.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"8px"},children:x.map((_,E)=>c.jsx("img",{src:_.photo_url,alt:`Zone photo ${E+1}`,style:{width:"100%",height:"120px",objectFit:"cover",borderRadius:"8px"}},_.id||E))})]},b)})})]}),c.jsx("button",{onClick:()=>a(-1),style:{width:"100%",backgroundColor:"#092849",color:"#fff",padding:"16px",borderRadius:"12px",fontSize:"17px",fontWeight:"700",border:"none",cursor:"pointer",marginTop:"8px"},children:"Back to History"})]})]})},uS=({report:a,camera:n})=>{const r=We(),{t:o}=Gn(),[u,d]=w.useState(""),f=()=>{if(!u){alert("Please select a campus first");return}const p=Uo.find(g=>g.name===u);a.setCampus(p),n.openCamera(g=>{a.addPhoto(g),r("/report/photo")},"Capture Issue")};return c.jsxs("div",{style:{minHeight:"100vh",backgroundColor:"#f3f4f6"},children:[c.jsx(ut,{title:o("nav.report"),subtitle:o("report.setup.subtitle","Report a facility issue"),variant:"red",onBack:()=>r("/")}),c.jsx("div",{style:{padding:"20px"},children:c.jsxs("div",{style:{backgroundColor:"#fff",borderRadius:"16px",padding:"28px 24px",boxShadow:"0 1px 3px rgba(0,0,0,0.1)",textAlign:"center"},children:[c.jsx("div",{style:{fontSize:"64px",marginBottom:"16px"},children:""}),c.jsx("h2",{style:{fontSize:"22px",fontWeight:"700",marginBottom:"10px",color:"#092849"},children:o("report.snapPhoto")}),c.jsx("p",{style:{color:"#666",marginBottom:"28px",fontSize:"17px",lineHeight:"1.5"},children:o("report.snapPhotoDesc")}),c.jsxs("div",{style:{marginBottom:"24px",textAlign:"left"},children:[c.jsxs("label",{style:{display:"block",fontSize:"17px",fontWeight:"600",color:"#333",marginBottom:"10px"},children:[o("report.setup.campus")," *"]}),c.jsx(Pu,{id:"reportCampus",value:u,onChange:d})]}),c.jsxs("button",{onClick:f,style:{width:"100%",backgroundColor:"#092849",color:"#fff",padding:"18px",borderRadius:"12px",fontSize:"18px",fontWeight:"700",border:"none",cursor:"pointer"},children:[" ",o("audit.walkthrough.takePhoto")]})]})})]})},dS=({report:a,camera:n})=>{const r=We(),{campus:o,photos:u,addPhoto:d}=a,f=()=>{n.openCamera(b=>{d(b)},"Add Another Photo")},p=b=>{a.removePhoto(b)},g=()=>{r("/report/description")},y=()=>{a.setPhotos([]),n.openCamera(b=>{a.addPhoto(b)},"Capture Issue")};return c.jsxs("div",{style:{minHeight:"100vh",backgroundColor:"#f3f4f6"},children:[c.jsx(ut,{title:"Photos",subtitle:o?.name||"",variant:"red",onBack:()=>r("/report")}),c.jsx("div",{style:{padding:"20px",display:"flex",flexDirection:"column",gap:"20px"},children:u.length>0?c.jsxs(c.Fragment,{children:[c.jsx("div",{style:{display:"grid",gridTemplateColumns:u.length===1?"1fr":"1fr 1fr",gap:"12px"},children:u.map((b,x)=>c.jsxs("div",{style:{position:"relative",borderRadius:"12px",overflow:"hidden",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[c.jsx("img",{src:b,alt:`Issue photo ${x+1}`,style:{width:"100%",aspectRatio:u.length===1?"auto":"1",objectFit:"cover",display:"block"}}),u.length>1&&c.jsx("button",{onClick:()=>p(x),style:{position:"absolute",top:"8px",right:"8px",width:"28px",height:"28px",borderRadius:"50%",backgroundColor:"rgba(0,0,0,0.6)",color:"#fff",border:"none",fontSize:"18px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},children:""})]},x))}),c.jsxs("div",{style:{textAlign:"center",fontSize:"15px",color:"#666"},children:[u.length," photo",u.length!==1?"s":""," captured"]}),c.jsxs("div",{style:{backgroundColor:"#fff",borderRadius:"16px",padding:"24px",boxShadow:"0 2px 8px rgba(0,0,0,0.08)",textAlign:"center"},children:[c.jsx("div",{style:{fontSize:"20px",fontWeight:"600",color:"#333",marginBottom:"24px"},children:"Do you need to add more photos?"}),c.jsxs("div",{style:{display:"flex",gap:"12px"},children:[c.jsxs("button",{onClick:f,style:{flex:1,backgroundColor:"#f3f4f6",color:"#374151",padding:"16px",borderRadius:"12px",fontWeight:"600",fontSize:"17px",border:"2px solid #e5e7eb",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},children:[c.jsx("span",{style:{fontSize:"20px"},children:""}),"Yes"]}),c.jsx("button",{onClick:g,style:{flex:1,backgroundColor:"#092849",color:"#fff",padding:"16px",borderRadius:"12px",fontWeight:"600",fontSize:"17px",border:"none",cursor:"pointer"},children:"No, Continue "})]})]}),c.jsx("button",{onClick:y,style:{backgroundColor:"transparent",color:"#666",padding:"12px",borderRadius:"8px",border:"none",fontSize:"15px",cursor:"pointer",textDecoration:"underline"},children:"Start over with new photo"})]}):c.jsxs("div",{style:{backgroundColor:"#fff",borderRadius:"12px",padding:"48px 24px",textAlign:"center",color:"#9ca3af"},children:[c.jsx("div",{style:{fontSize:"64px",marginBottom:"16px"},children:""}),c.jsx("p",{style:{fontSize:"17px",marginBottom:"20px"},children:"No photo captured"}),c.jsx("button",{onClick:y,style:{backgroundColor:"#092849",color:"#fff",padding:"14px 28px",borderRadius:"12px",fontWeight:"600",fontSize:"17px",border:"none",cursor:"pointer"},children:"Take Photo"})]})})]})},hS=({report:a})=>{const n=We(),{campus:r,photos:o,description:u,location:d,setDescription:f,setLocation:p}=a,g=u.trim()&&d.trim(),y=()=>{g&&n("/report/emergency")};return c.jsxs("div",{style:{minHeight:"100vh",backgroundColor:"#f3f4f6",paddingBottom:"100px"},children:[c.jsx(ut,{title:"Describe the Problem",subtitle:r?.name||"",variant:"red",onBack:()=>n("/report/photo")}),c.jsxs("div",{style:{padding:"20px",display:"flex",flexDirection:"column",gap:"20px"},children:[o.length>0&&c.jsxs("div",{style:{display:"flex",gap:"8px",overflowX:"auto",paddingBottom:"4px"},children:[o.map((b,x)=>c.jsx("img",{src:b,alt:`Photo ${x+1}`,style:{width:"60px",height:"60px",objectFit:"cover",borderRadius:"8px",flexShrink:0}},x)),c.jsxs("div",{style:{display:"flex",alignItems:"center",fontSize:"14px",color:"#666",paddingLeft:"8px"},children:[o.length," photo",o.length!==1?"s":""]})]}),c.jsxs("div",{style:{backgroundColor:"#fff",borderRadius:"16px",padding:"20px",boxShadow:"0 2px 8px rgba(0,0,0,0.08)"},children:[c.jsx("label",{style:{display:"block",fontSize:"18px",fontWeight:"600",color:"#333",marginBottom:"12px"},children:"What's the problem?"}),c.jsx("textarea",{value:u,onChange:b=>f(b.target.value),placeholder:"Describe what you see or what needs attention...",rows:4,style:{width:"100%",border:"1px solid #e5e7eb",borderRadius:"12px",padding:"14px 16px",fontSize:"17px",boxSizing:"border-box",backgroundColor:"#fafafa",resize:"vertical",fontFamily:"inherit"}})]}),c.jsxs("div",{style:{backgroundColor:"#fff",borderRadius:"16px",padding:"20px",boxShadow:"0 2px 8px rgba(0,0,0,0.08)"},children:[c.jsx("label",{style:{display:"block",fontSize:"18px",fontWeight:"600",color:"#333",marginBottom:"12px"},children:"Where is it located?"}),c.jsx("input",{type:"text",value:d,onChange:b=>p(b.target.value),placeholder:"e.g., 2nd floor restroom, Room 204, Main lobby",style:{width:"100%",border:"1px solid #e5e7eb",borderRadius:"12px",padding:"14px 16px",fontSize:"17px",boxSizing:"border-box",backgroundColor:"#fafafa"}})]})]}),c.jsx("div",{style:{position:"fixed",bottom:0,left:0,right:0,backgroundColor:"#fff",borderTop:"1px solid #e5e7eb",padding:"16px 20px"},children:c.jsx("button",{onClick:y,disabled:!g,style:{width:"100%",padding:"18px",borderRadius:"12px",fontSize:"18px",fontWeight:"700",border:"none",cursor:g?"pointer":"not-allowed",backgroundColor:g?"#092849":"#d1d5db",color:g?"#fff":"#9ca3af"},children:"Continue "})})]})},fS=({report:a})=>{const n=We(),[r,o]=w.useState(!1),{campus:u,photos:d,description:f,location:p,setIsEmergency:g}=a,y=async b=>{g(b),o(!0);try{await dw({timestamp:new Date().toLocaleString(),campus:u?.name||"",photo:d[0]||null,photos:d,category:"other",location:p,note:f,urgent:b,team:b?"Facilities Manager":"Facilities",status:"open",campusData:u,isEmergency:b}),n("/report/complete")}catch(x){console.error("Error submitting report:",x),alert("Error submitting report. Please try again."),o(!1)}};return c.jsxs("div",{style:{minHeight:"100vh",backgroundColor:"#f3f4f6"},children:[c.jsx(ut,{title:"One Last Question",subtitle:u?.name||"",variant:"red",onBack:()=>n("/report/description")}),c.jsxs("div",{style:{padding:"20px",display:"flex",flexDirection:"column",gap:"20px"},children:[c.jsx("div",{style:{backgroundColor:"#fff",borderRadius:"16px",padding:"16px",boxShadow:"0 2px 8px rgba(0,0,0,0.08)"},children:c.jsxs("div",{style:{display:"flex",gap:"12px"},children:[d[0]&&c.jsx("img",{src:d[0],alt:"Issue",style:{width:"64px",height:"64px",objectFit:"cover",borderRadius:"8px",flexShrink:0}}),c.jsxs("div",{style:{flex:1,minWidth:0},children:[c.jsx("div",{style:{fontSize:"15px",color:"#333",fontWeight:"500",marginBottom:"4px",overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical"},children:f}),c.jsxs("div",{style:{fontSize:"14px",color:"#666"},children:[" ",p]}),d.length>1&&c.jsxs("div",{style:{fontSize:"13px",color:"#999",marginTop:"4px"},children:["+",d.length-1," more photo",d.length>2?"s":""]})]})]})}),c.jsxs("div",{style:{backgroundColor:"#fff",borderRadius:"16px",padding:"28px 24px",boxShadow:"0 2px 8px rgba(0,0,0,0.08)",textAlign:"center"},children:[c.jsx("div",{style:{fontSize:"48px",marginBottom:"16px"},children:""}),c.jsx("div",{style:{fontSize:"22px",fontWeight:"700",color:"#333",marginBottom:"8px"},children:"Is this an emergency?"}),c.jsx("div",{style:{fontSize:"15px",color:"#666",marginBottom:"28px"},children:"Emergencies include safety hazards, flooding, or anything requiring immediate attention"}),c.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:[c.jsxs("button",{onClick:()=>y(!0),disabled:r,style:{width:"100%",backgroundColor:r?"#fca5a5":"#dc2626",color:"#fff",padding:"18px",borderRadius:"12px",fontWeight:"700",fontSize:"18px",border:"none",cursor:r?"not-allowed":"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"10px"},children:[c.jsx("span",{style:{fontSize:"22px"},children:""}),r?"Submitting...":"Yes, Emergency"]}),c.jsx("button",{onClick:()=>y(!1),disabled:r,style:{width:"100%",backgroundColor:r?"#d1d5db":"#092849",color:"#fff",padding:"18px",borderRadius:"12px",fontWeight:"700",fontSize:"18px",border:"none",cursor:r?"not-allowed":"pointer"},children:r?"Submitting...":"No, Not an Emergency"})]})]})]})]})},pS=({report:a})=>{const n=We(),{campus:r,location:o,description:u,isEmergency:d,resetReport:f}=a,p=()=>{f(),n("/")},g=()=>{f(),n("/reports")};return c.jsxs("div",{style:{minHeight:"100vh",backgroundColor:d?"#dc2626":"#2B57D0",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"32px",color:"#fff",textAlign:"center"},children:[c.jsx("div",{style:{fontSize:"96px",marginBottom:"24px"},children:d?"":""}),c.jsx("h1",{style:{fontSize:"32px",fontWeight:"700",marginBottom:"10px"},children:d?"Emergency Reported!":"Report Submitted!"}),c.jsx("p",{style:{fontSize:"18px",opacity:.9,marginBottom:"8px"},children:d?"Facilities Manager has been alerted":"Your report has been received"}),c.jsx("p",{style:{fontSize:"16px",opacity:.8,marginBottom:"24px"},children:"Added to recent history"}),c.jsxs("div",{style:{backgroundColor:"rgba(255, 255, 255, 0.2)",borderRadius:"12px",padding:"18px 20px",marginBottom:"32px",width:"100%",maxWidth:"320px",textAlign:"left"},children:[c.jsx("div",{style:{fontSize:"16px",fontWeight:"500",marginBottom:"8px",overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical"},children:u||"Issue reported"}),c.jsxs("div",{style:{fontSize:"15px",opacity:.9},children:[" ",r?.name||"Campus"]}),c.jsx("div",{style:{fontSize:"15px",opacity:.9,marginTop:"4px"},children:o})]}),c.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"12px",width:"100%",maxWidth:"320px"},children:[c.jsx("button",{onClick:p,style:{backgroundColor:"#fff",color:"#092849",padding:"16px 40px",borderRadius:"12px",fontWeight:"700",fontSize:"18px",border:"none",cursor:"pointer",width:"100%"},children:"Done"}),c.jsx("button",{onClick:g,style:{backgroundColor:"rgba(255, 255, 255, 0.2)",color:"#fff",padding:"14px 40px",borderRadius:"12px",fontWeight:"600",fontSize:"16px",border:"2px solid rgba(255, 255, 255, 0.3)",cursor:"pointer",width:"100%"},children:"View Recent Reports"})]})]})},gS=()=>{const a=We(),[n,r]=w.useState([]),[o,u]=w.useState(!0);return w.useEffect(()=>{(async()=>{try{const f=await bm(50);r(f)}catch(f){console.error("Error loading reports:",f)}finally{u(!1)}})()},[]),c.jsxs("div",{style:{minHeight:"100vh",backgroundColor:"#f3f4f6"},children:[c.jsx(ut,{title:"Reported Issues",variant:"red",onBack:()=>a("/")}),c.jsx("div",{style:{padding:"20px"},children:o?c.jsx("div",{style:{textAlign:"center",padding:"48px 0",color:"#9ca3af",fontSize:"17px"},children:"Loading..."}):n.length===0?c.jsxs("div",{style:{textAlign:"center",padding:"48px 0",color:"#9ca3af"},children:[c.jsx("div",{style:{fontSize:"56px",marginBottom:"16px"},children:""}),c.jsx("p",{style:{fontSize:"17px"},children:"No issues reported"})]}):c.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:n.map((d,f)=>{const p=Gu.find(g=>g.id===d.category)||{icon:"",name:"Other"};return c.jsx("div",{onClick:()=>d.id&&a(`/report/${d.id}`),style:{backgroundColor:"#fff",borderRadius:"12px",padding:"16px",boxShadow:"0 1px 3px rgba(0,0,0,0.1)",cursor:d.id?"pointer":"default"},children:c.jsxs("div",{style:{display:"flex",alignItems:"flex-start"},children:[d.photo&&c.jsx("img",{src:d.photo,alt:"Issue",style:{width:"64px",height:"64px",objectFit:"cover",borderRadius:"8px",marginRight:"14px"}}),c.jsxs("div",{style:{flex:1},children:[c.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"6px"},children:[c.jsxs("span",{style:{fontWeight:"700",fontSize:"17px",color:"#092849"},children:[p.icon," ",p.name]}),c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[c.jsx("span",{style:{fontSize:"14px",padding:"5px 10px",borderRadius:"6px",backgroundColor:d.status==="open"?"#C2ECFD":"rgba(194, 236, 253, 0.5)",color:d.status==="open"?"#141685":"#092849",fontWeight:"500"},children:d.status}),c.jsx("span",{style:{color:"#9ca3af",fontSize:"20px"},children:""})]})]}),c.jsx("div",{style:{fontSize:"15px",color:"#666"},children:d.campus}),c.jsx("div",{style:{fontSize:"15px",color:"#888",marginTop:"2px"},children:d.location}),c.jsx("div",{style:{fontSize:"13px",color:"#aaa",marginTop:"6px"},children:d.timestamp})]})]})},d.id||f)})})})]})},mS=()=>{const a=We(),{id:n}=Ou(),[r,o]=w.useState(null),[u,d]=w.useState(!0),[f,p]=w.useState(!1);w.useEffect(()=>{(async()=>{try{const{data:x,error:S}=await Zt.from("reports").select("*").eq("id",n).single();if(S)throw S;o({id:x.id,timestamp:x.timestamp,campus:x.campus,photo:x.photo,category:x.category,location:x.location,note:x.note,urgent:x.urgent,team:x.team,status:x.status,campusData:x.campus_data,createdAt:x.created_at})}catch(x){console.error("Error loading report:",x)}finally{d(!1)}})()},[n]);const g=async b=>{if(!(!r||f)){p(!0);try{await hw(r.id,b),o({...r,status:b})}catch(x){console.error("Error updating status:",x),alert("Failed to update status")}finally{p(!1)}}},y=r?Gu.find(b=>b.id===r.category):null;return u?c.jsxs("div",{style:{minHeight:"100vh",backgroundColor:"#f3f4f6"},children:[c.jsx(ut,{title:"Report Details",onBack:()=>a(-1)}),c.jsx("div",{style:{textAlign:"center",padding:"48px 0",color:"#9ca3af"},children:"Loading..."})]}):r?c.jsxs("div",{style:{minHeight:"100vh",backgroundColor:"#f3f4f6"},children:[c.jsx(ut,{title:"Report Details",onBack:()=>a(-1)}),c.jsxs("div",{style:{padding:"20px"},children:[c.jsxs("div",{style:{backgroundColor:r.urgent?"#fee2e2":r.status==="open"?"#C2ECFD":"#dcfce7",borderRadius:"16px",padding:"24px",textAlign:"center",marginBottom:"20px"},children:[c.jsx("div",{style:{fontSize:"56px",marginBottom:"12px"},children:r.urgent?"":y?.icon||""}),c.jsx("div",{style:{fontSize:"24px",fontWeight:"700",color:r.urgent?"#b91c1c":"#092849"},children:y?.name||"Issue"}),r.urgent&&c.jsx("div",{style:{fontSize:"15px",color:"#b91c1c",marginTop:"8px",fontWeight:"600"},children:"URGENT / SAFETY ISSUE"}),c.jsx("div",{style:{display:"inline-block",marginTop:"12px",padding:"6px 16px",borderRadius:"20px",backgroundColor:r.status==="open"?"#47C4E6":"#10b981",color:"#fff",fontSize:"14px",fontWeight:"600"},children:r.status})]}),r.photo&&c.jsxs("div",{style:{backgroundColor:"#fff",borderRadius:"12px",padding:"16px",marginBottom:"16px",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[c.jsx("h3",{style:{fontSize:"18px",fontWeight:"700",color:"#092849",marginBottom:"12px"},children:"Photo"}),c.jsx("img",{src:r.photo,alt:"Reported issue",style:{width:"100%",maxHeight:"400px",objectFit:"contain",borderRadius:"8px",backgroundColor:"#f3f4f6"}})]}),c.jsxs("div",{style:{backgroundColor:"#fff",borderRadius:"12px",padding:"20px",marginBottom:"16px",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[c.jsx("h3",{style:{fontSize:"18px",fontWeight:"700",color:"#092849",marginBottom:"16px"},children:"Report Details"}),c.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:[c.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[c.jsx("span",{style:{color:"#666"},children:"Campus"}),c.jsx("span",{style:{fontWeight:"600",color:"#092849"},children:r.campus})]}),c.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[c.jsx("span",{style:{color:"#666"},children:"Location"}),c.jsx("span",{style:{fontWeight:"600",color:"#092849"},children:r.location})]}),c.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[c.jsx("span",{style:{color:"#666"},children:"Category"}),c.jsxs("span",{style:{fontWeight:"600",color:"#092849"},children:[y?.icon," ",y?.name||r.category]})]}),c.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[c.jsx("span",{style:{color:"#666"},children:"Assigned To"}),c.jsx("span",{style:{fontWeight:"600",color:"#092849"},children:r.team||"Facilities"})]}),c.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[c.jsx("span",{style:{color:"#666"},children:"Reported"}),c.jsx("span",{style:{fontWeight:"600",color:"#092849"},children:r.timestamp})]})]})]}),r.note&&c.jsxs("div",{style:{backgroundColor:"#fff",borderRadius:"12px",padding:"20px",marginBottom:"16px",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[c.jsx("h3",{style:{fontSize:"18px",fontWeight:"700",color:"#092849",marginBottom:"12px"},children:"Notes"}),c.jsx("p",{style:{fontSize:"15px",color:"#374151",lineHeight:"1.5",margin:0},children:r.note})]}),c.jsxs("div",{style:{backgroundColor:"#fff",borderRadius:"12px",padding:"20px",marginBottom:"16px",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[c.jsx("h3",{style:{fontSize:"18px",fontWeight:"700",color:"#092849",marginBottom:"16px"},children:"Update Status"}),c.jsxs("div",{style:{display:"flex",gap:"12px"},children:[c.jsx("button",{onClick:()=>g("open"),disabled:r.status==="open"||f,style:{flex:1,padding:"14px",borderRadius:"10px",border:r.status==="open"?"2px solid #47C4E6":"2px solid #e5e7eb",backgroundColor:r.status==="open"?"#C2ECFD":"#fff",color:"#092849",fontSize:"15px",fontWeight:"600",cursor:r.status==="open"||f?"not-allowed":"pointer",opacity:f?.6:1},children:"Open"}),c.jsx("button",{onClick:()=>g("resolved"),disabled:r.status==="resolved"||f,style:{flex:1,padding:"14px",borderRadius:"10px",border:r.status==="resolved"?"2px solid #10b981":"2px solid #e5e7eb",backgroundColor:r.status==="resolved"?"#dcfce7":"#fff",color:"#092849",fontSize:"15px",fontWeight:"600",cursor:r.status==="resolved"||f?"not-allowed":"pointer",opacity:f?.6:1},children:"Resolved"})]})]}),c.jsx("button",{onClick:()=>a(-1),style:{width:"100%",backgroundColor:"#092849",color:"#fff",padding:"16px",borderRadius:"12px",fontSize:"17px",fontWeight:"700",border:"none",cursor:"pointer",marginTop:"8px"},children:"Back"})]})]}):c.jsxs("div",{style:{minHeight:"100vh",backgroundColor:"#f3f4f6"},children:[c.jsx(ut,{title:"Report Details",onBack:()=>a(-1)}),c.jsx("div",{style:{textAlign:"center",padding:"48px 0",color:"#9ca3af"},children:"Report not found"})]})},yS=()=>!0,bS=()=>{const a=We(),{t:n}=Gn(),[r,o]=w.useState(!1);return w.useEffect(()=>{o(yS())},[]),c.jsxs("div",{style:{minHeight:"100vh",backgroundColor:"#f3f4f6"},children:[c.jsx(ut,{title:n("settings.title"),subtitle:"",variant:"red",onBack:()=>a("/")}),c.jsxs("div",{style:{padding:"20px",display:"flex",flexDirection:"column",gap:"16px"},children:[c.jsxs("div",{style:{backgroundColor:"#fff",borderRadius:"12px",padding:"20px",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[c.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:"16px",gap:"10px"},children:[c.jsx("span",{style:{fontSize:"28px"},children:""}),c.jsxs("div",{children:[c.jsx("div",{style:{fontSize:"18px",fontWeight:"700",color:"#333"},children:n("settings.language")}),c.jsxs("div",{style:{fontSize:"14px",color:"#666"},children:[n("common.english")," / ",n("common.spanish")]})]})]}),c.jsx(Sm,{style:"buttons"})]}),c.jsxs("div",{style:{backgroundColor:"#fff",borderRadius:"12px",padding:"20px",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[c.jsx("span",{style:{fontSize:"28px"},children:""}),c.jsxs("div",{style:{flex:1},children:[c.jsx("div",{style:{fontSize:"18px",fontWeight:"700",color:"#333"},children:"AI Photo Analysis"}),c.jsx("div",{style:{fontSize:"14px",color:"#666"},children:"Automatically identifies issue types from photos"})]}),c.jsx("span",{style:{backgroundColor:r?"#d1fae5":"#fef2f2",color:r?"#059669":"#dc2626",fontSize:"13px",fontWeight:"600",padding:"6px 12px",borderRadius:"12px"},children:r?" Enabled":" Not configured"})]}),!r&&c.jsx("div",{style:{marginTop:"16px",padding:"12px",backgroundColor:"#fef3c7",borderRadius:"8px",fontSize:"14px",color:"#92400e"},children:"AI analysis is not available. Please contact your administrator."})]}),c.jsxs("div",{style:{backgroundColor:"#fff",borderRadius:"12px",padding:"20px",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[c.jsx("div",{style:{fontSize:"17px",fontWeight:"600",color:"#333",marginBottom:"12px"},children:"About This App"}),c.jsxs("div",{style:{fontSize:"15px",color:"#666",lineHeight:"1.5"},children:[c.jsxs("p",{style:{margin:"0 0 8px 0"},children:[c.jsx("strong",{children:"See It, Report It"})," allows you to quickly report facility issues by taking a photo."]}),c.jsx("p",{style:{margin:"0"},children:"AI-powered analysis automatically identifies the type of issue in your photo to speed up reporting."})]})]})]})]})},xS=({bgWalkthrough:a})=>{const n=We(),[r,o]=w.useState(""),[u,d]=w.useState(""),[f,p]=w.useState(""),[g,y]=w.useState(["","",""]),[b,x]=w.useState(["",""]),S=(O,z)=>{const B=[...g];B[O]=z,y(B)},_=(O,z)=>{const B=[...b];B[O]=z,x(B)},E=()=>{x([...b,""])},R=O=>{b.length>2&&x(b.filter((z,B)=>B!==O))},T=()=>{if(!r){alert("Please select a campus");return}if(!u.trim()){alert("Please enter your name");return}if(!f.trim()||!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(f)){alert("Please enter a valid email address");return}const O=g.filter(Y=>Y.trim()),z=b.filter(Y=>Y.trim());if(O.length<3){alert("Please enter names/numbers for at least 3 classrooms");return}if(z.length<2){alert("Please enter names/numbers for at least 2 bathrooms");return}const B=Uo.find(Y=>Y.name===r);a.initWalkthrough(r,B,u.trim(),f.trim()),a.setSelectedRooms(O,z),window.scrollTo(0,0),n("/bg/zone")};return c.jsxs("div",{className:"min-h-screen bg-gray-100",children:[c.jsx(ut,{title:"Weekly B&G Walkthrough",subtitle:"Building & Grounds Quality Control",onBack:()=>n("/")}),c.jsxs("div",{style:{padding:"20px",display:"flex",flexDirection:"column",gap:"24px"},children:[c.jsxs("div",{children:[c.jsx("label",{style:{display:"block",fontSize:"17px",fontWeight:"600",color:"#333",marginBottom:"10px"},children:"Campus *"}),c.jsx(Pu,{value:r,onChange:o,placeholder:"Select campus..."})]}),c.jsxs("div",{children:[c.jsx("label",{style:{display:"block",fontSize:"17px",fontWeight:"600",color:"#333",marginBottom:"10px"},children:"Your Name *"}),c.jsx("input",{type:"text",placeholder:"Enter your name",value:u,onChange:O=>d(O.target.value),style:{width:"100%",border:"1px solid #ccc",borderRadius:"10px",padding:"14px 16px",fontSize:"17px",boxSizing:"border-box",backgroundColor:"#fff"}})]}),c.jsxs("div",{children:[c.jsx("label",{style:{display:"block",fontSize:"17px",fontWeight:"600",color:"#333",marginBottom:"10px"},children:"Your Email *"}),c.jsx("input",{type:"email",placeholder:"Enter your email",value:f,onChange:O=>p(O.target.value),style:{width:"100%",border:"1px solid #ccc",borderRadius:"10px",padding:"14px 16px",fontSize:"17px",boxSizing:"border-box",backgroundColor:"#fff"}})]}),c.jsxs("div",{children:[c.jsxs("label",{style:{display:"block",fontSize:"17px",fontWeight:"600",color:"#333",marginBottom:"10px"},children:["Inspection Zones (",Et.length,")"]}),c.jsx("div",{style:{backgroundColor:"rgba(194, 236, 253, 0.4)",border:"1px solid #47C4E6",borderRadius:"12px",padding:"16px"},children:Et.map((O,z)=>{const B=hn[O];return c.jsxs("div",{style:{display:"flex",alignItems:"center",padding:"12px 0",borderBottom:z!==Et.length-1?"1px solid rgba(71, 196, 230, 0.3)":"none"},children:[c.jsx("span",{style:{color:"#2B57D0",marginRight:"12px",fontSize:"20px"},children:z+1}),c.jsxs("div",{style:{flex:1},children:[c.jsx("span",{style:{fontSize:"17px",fontWeight:"500"},children:B.name}),c.jsx("div",{style:{fontSize:"13px",color:"#666",marginTop:"2px"},children:B.description})]})]},O)})})]}),c.jsxs("div",{children:[c.jsx("label",{style:{display:"block",fontSize:"17px",fontWeight:"600",color:"#333",marginBottom:"10px"},children:"Interior Rooms to Inspect *"}),c.jsx("div",{style:{fontSize:"14px",color:"#666",marginBottom:"12px"},children:"Select 3 classrooms and at least 2 bathrooms to walk during the Interior Building Condition zone."}),c.jsxs("div",{style:{backgroundColor:"#fff",border:"1px solid #ddd",borderRadius:"12px",padding:"16px",marginBottom:"12px"},children:[c.jsx("div",{style:{fontWeight:"600",marginBottom:"12px",color:"#092849"},children:"Classrooms (3 required)"}),g.map((O,z)=>c.jsx("div",{style:{marginBottom:"8px"},children:c.jsx("input",{type:"text",placeholder:`Classroom ${z+1} (e.g., Room 101, K-1, etc.)`,value:O,onChange:B=>S(z,B.target.value),style:{width:"100%",border:"1px solid #ddd",borderRadius:"8px",padding:"12px",fontSize:"15px",boxSizing:"border-box"}})},z))]}),c.jsxs("div",{style:{backgroundColor:"#fff",border:"1px solid #ddd",borderRadius:"12px",padding:"16px"},children:[c.jsxs("div",{style:{fontWeight:"600",marginBottom:"12px",color:"#092849",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[c.jsx("span",{children:"Bathrooms (2+ required)"}),c.jsx("button",{onClick:E,style:{backgroundColor:"#47C4E6",color:"#fff",border:"none",borderRadius:"6px",padding:"6px 12px",fontSize:"14px",cursor:"pointer",fontWeight:"600"},children:"+ Add"})]}),b.map((O,z)=>c.jsxs("div",{style:{marginBottom:"8px",display:"flex",gap:"8px"},children:[c.jsx("input",{type:"text",placeholder:`Bathroom ${z+1} (e.g., Main Hall, Boys K-2, etc.)`,value:O,onChange:B=>_(z,B.target.value),style:{flex:1,border:"1px solid #ddd",borderRadius:"8px",padding:"12px",fontSize:"15px",boxSizing:"border-box"}}),b.length>2&&c.jsx("button",{onClick:()=>R(z),style:{backgroundColor:"#fee2e2",color:"#b91c1c",border:"none",borderRadius:"8px",width:"44px",fontSize:"18px",cursor:"pointer"},children:""})]},z))]})]}),c.jsxs("div",{style:{backgroundColor:"rgba(254, 243, 199, 0.5)",border:"1px solid #f59e0b",borderRadius:"12px",padding:"16px"},children:[c.jsx("div",{style:{fontWeight:"600",color:"#92400e",marginBottom:"8px"},children:"The Standard"}),c.jsx("div",{style:{fontSize:"15px",color:"#78350f",fontStyle:"italic"},children:`"If you wouldn't accept this at a Ritz-Carlton, report it."`}),c.jsx("div",{style:{fontSize:"13px",color:"#92400e",marginTop:"8px"},children:"Would this pass the 47-second arrival decision?"})]}),c.jsx("button",{onClick:T,style:{width:"100%",backgroundColor:"#092849",color:"#fff",padding:"18px",borderRadius:"12px",fontSize:"18px",fontWeight:"700",border:"none",cursor:"pointer",marginTop:"8px"},children:"Begin B&G Walkthrough"})]})]})},vS=({bgWalkthrough:a,camera:n})=>{const r=We(),[o,u]=w.useState({}),[d,f]=w.useState(0),[p,g]=w.useState({}),[y,b]=w.useState("0:00"),{currentZoneIndex:x,zoneResults:S,roomResults:_,selectedRooms:E,issues:R,startTime:T,recordZoneResults:O,addIssue:z,updateIssue:B,addPhotoToIssue:Y,nextZone:J,goToZone:G,calculateAndSetZoneRating:K}=a;w.useEffect(()=>{if(!T)return;const ie=()=>{const $e=new Date(T),Dt=new Date-$e,Vt=Math.floor(Dt/6e4),at=Math.floor(Dt%6e4/1e3),es=Math.floor(Vt/60),$a=Vt%60;es>0?b(`${es}:${$a.toString().padStart(2,"0")}:${at.toString().padStart(2,"0")}`):b(`${$a}:${at.toString().padStart(2,"0")}`)};ie();const me=setInterval(ie,1e3);return()=>clearInterval(me)},[T]);const P=Et[x],F=hn[P],ve=Et.length,be=F?.isObservationZone,Ae=F?.isGovernanceZone,Se=F?.isRoomBased,q=Se?[...E.classrooms.map(ie=>({name:ie,type:"classroom"})),...E.bathrooms.map(ie=>({name:ie,type:"bathroom"}))]:[],V=q[d],j=q.length,Q=(()=>{if(Se&&V){if(V.type==="classroom"&&F.classroomSections)return F.classroomSections;if(V.type==="bathroom"&&F.bathroomSections)return F.bathroomSections}return F?.sections||[]})(),he=Se&&V?`${V.type}_${V.name}`:P,k=`${P}-${d}`;w.useEffect(()=>{const ie=Se?_[he]||{}:S[P]||{};u(()=>ie);const me={};Q?.forEach($e=>{me[$e.name]=!0}),g(()=>me)},[k]),w.useEffect(()=>{be?r("/bg/observations"):Ae&&r("/bg/governance")},[P,be,Ae,r]);const I=(ie,me)=>{u($e=>({...$e,[ie]:me}))},X=ie=>{g(me=>({...me,[ie]:!me[ie]}))},ee=()=>Q?.reduce((ie,me)=>ie+me.checks.length,0)||0,fe=()=>Object.keys(o).filter(ie=>o[ie]!==void 0).length,ge=fe()===ee(),Ke=(()=>{const ie=[];return Q?.forEach(me=>{me.checks.forEach($e=>{o[$e.id]===!1&&ie.push({...$e,section:me.name})})}),ie})(),Me=R.filter(ie=>Se?ie.roomId===he:ie.zoneId===P),pn=Ke.every(ie=>{const me=Me.find($e=>$e.checkId===ie.id);return me&&me.photos&&me.photos.length>0}),gn=Ke.length===0&&ge,ne=ge&&(gn||pn),oe=ie=>{let me=Me.find(tt=>tt.checkId===ie.id),$e=me?.id;if(!me){const tt={zoneId:P,zoneName:F.name,checkId:ie.id,checkText:ie.text,section:ie.section,tier:ie.tier,amberEligible:ie.amberEligible||!1,amberIneligible:ie.amberIneligible||!1,roomId:Se?he:null,roomName:Se?V?.name:null,photos:[],notes:""};$e=z(tt)}n.openCamera(tt=>{tt&&$e&&Y($e,tt)})},pe=(ie,me)=>{const $e=R.find(tt=>tt.id===ie);if($e){const tt=$e.photos.filter((Dt,Vt)=>Vt!==me);B(ie,{photos:tt})}},ke=(ie,me)=>{B(ie,{notes:me.slice(0,200)})},_e=()=>{Se?O(P,o,he):O(P,o),Ke.forEach(ie=>{Me.find($e=>$e.checkId===ie.id)||z({zoneId:P,zoneName:F.name,checkId:ie.id,checkText:ie.text,section:ie.section,tier:ie.tier,amberEligible:ie.amberEligible||!1,amberIneligible:ie.amberIneligible||!1,roomId:Se?he:null,roomName:Se?V?.name:null,photos:[],notes:""})}),Se&&d<j-1?(f(d+1),u({}),window.scrollTo(0,0)):(K(P),x<ve-1?(J(),f(0),u({}),window.scrollTo(0,0)):r("/bg/summary"))},Ot=()=>{if(Se&&d>0)f(d-1),u({});else if(x>0){G(x-1);const ie=Et[x-1];if(hn[ie].isRoomBased){const $e=[...E.classrooms,...E.bathrooms];f($e.length-1)}else f(0)}else r("/bg/setup")};return!F||be||Ae?null:c.jsxs("div",{style:{minHeight:"100vh",backgroundColor:"#f3f4f6",paddingBottom:"120px"},children:[c.jsx("div",{style:{background:"linear-gradient(180deg, #092849 0%, #141685 100%)",color:"#fff",padding:"20px"},children:c.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[c.jsx("button",{onClick:Ot,style:{fontSize:"24px",background:"rgba(255,255,255,0.2)",border:"none",borderRadius:"8px",width:"40px",height:"40px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",color:"#fff"},children:""}),c.jsxs("div",{style:{textAlign:"center"},children:[c.jsx("h1",{style:{fontSize:"20px",fontWeight:"700",margin:0},children:Se&&V?`${V.type==="classroom"?"Classroom":"Restroom"} ${V.name}`:F.name}),Se&&V&&c.jsxs("p",{style:{fontSize:"16px",margin:"4px 0 0 0",color:"#C2ECFD"},children:[V.type==="classroom"?"":""," ",F.name]}),c.jsxs("p",{style:{fontSize:"14px",opacity:.8,margin:"4px 0 0 0"},children:["Zone ",x+1," of ",ve,Se&&`  Room ${d+1} of ${j}`]})]}),c.jsxs("div",{style:{backgroundColor:"rgba(255,255,255,0.2)",borderRadius:"8px",padding:"6px 10px",fontSize:"14px",fontWeight:"600",display:"flex",alignItems:"center",gap:"4px"},children:[c.jsx("span",{children:""}),c.jsx("span",{children:y})]})]})}),c.jsx("div",{style:{height:"6px",backgroundColor:"#e5e7eb"},children:c.jsx("div",{style:{height:"100%",backgroundColor:"#092849",width:`${(x+1)/ve*100}%`,transition:"width 0.3s ease"}})}),c.jsx("div",{style:{backgroundColor:"rgba(194, 236, 253, 0.5)",borderLeft:"4px solid #2B57D0",padding:"14px 16px",margin:"16px 20px",borderRadius:"8px"},children:c.jsx("div",{style:{fontSize:"14px",color:"#141685"},children:Se&&V?V.type==="classroom"?"Walls, floors, ceilings, doors/windows, baseboards, lighting, furniture, whiteboard":"Walls, floors, ceilings, toilets, sinks, mirrors, dispensers, doors, partitions":F.description})}),c.jsxs("div",{style:{padding:"0 20px"},children:[Q?.map(ie=>c.jsxs("div",{style:{marginBottom:"16px"},children:[c.jsxs("button",{onClick:()=>X(ie.name),style:{width:"100%",display:"flex",alignItems:"center",justifyContent:"space-between",padding:"14px 16px",backgroundColor:"#092849",color:"#fff",borderRadius:p[ie.name]?"12px 12px 0 0":"12px",border:"none",cursor:"pointer",fontSize:"16px",fontWeight:"600"},children:[c.jsx("span",{children:ie.name}),c.jsx("span",{style:{transform:p[ie.name]?"rotate(180deg)":"rotate(0)",transition:"transform 0.2s"},children:""})]}),p[ie.name]&&c.jsx("div",{style:{backgroundColor:"#fff",borderRadius:"0 0 12px 12px",border:"1px solid #e5e7eb",borderTop:"none"},children:ie.checks.map((me,$e)=>{const tt=o[me.id],Dt=Me.find(Vt=>Vt.checkId===me.id);return c.jsxs("div",{style:{padding:"16px",borderBottom:$e<ie.checks.length-1?"1px solid #e5e7eb":"none"},children:[c.jsxs("div",{style:{fontSize:"15px",marginBottom:"12px",color:"#333",lineHeight:"1.4"},children:[me.text,me.tier===1&&c.jsx("span",{style:{marginLeft:"8px",fontSize:"11px",backgroundColor:"#fee2e2",color:"#b91c1c",padding:"2px 6px",borderRadius:"4px",fontWeight:"600"},children:"TIER 1"}),me.amberEligible&&c.jsx("span",{style:{marginLeft:"8px",fontSize:"11px",backgroundColor:"#fef3c7",color:"#92400e",padding:"2px 6px",borderRadius:"4px"},children:"Amber OK"})]}),c.jsxs("div",{style:{display:"flex",gap:"10px"},children:[c.jsx("button",{onClick:()=>I(me.id,!0),style:{flex:1,padding:"12px",borderRadius:"10px",fontWeight:"600",fontSize:"15px",border:"none",cursor:"pointer",backgroundColor:tt===!0?"#10b981":"#f3f4f6",color:tt===!0?"#fff":"#333"},children:" Yes"}),c.jsx("button",{onClick:()=>I(me.id,!1),style:{flex:1,padding:"12px",borderRadius:"10px",fontWeight:"600",fontSize:"15px",border:"none",cursor:"pointer",backgroundColor:tt===!1?"#ef4444":"#f3f4f6",color:tt===!1?"#fff":"#333"},children:" No"})]}),tt===!1&&c.jsxs("div",{style:{marginTop:"12px",padding:"12px",backgroundColor:"#fef2f2",borderRadius:"8px",border:"1px solid #fecaca"},children:[c.jsxs("div",{style:{fontSize:"13px",fontWeight:"600",color:"#b91c1c",marginBottom:"8px"},children:[" Photo Required - Tier ",me.tier," Issue"]}),Dt?.photos?.length>0&&c.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"8px",marginBottom:"8px"},children:Dt.photos.map((Vt,at)=>c.jsxs("div",{style:{position:"relative"},children:[c.jsx("img",{src:Vt,alt:`Issue ${at+1}`,style:{width:"100%",height:"80px",borderRadius:"6px",objectFit:"cover"}}),c.jsx("button",{onClick:()=>pe(Dt.id,at),style:{position:"absolute",top:"2px",right:"2px",backgroundColor:"#ef4444",color:"#fff",width:"20px",height:"20px",borderRadius:"50%",border:"none",cursor:"pointer",fontSize:"12px",fontWeight:"700"},children:""})]},at))}),c.jsxs("button",{onClick:()=>oe(me),style:{width:"100%",padding:"10px",border:"2px dashed #fca5a5",borderRadius:"6px",backgroundColor:"#fff",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",marginBottom:"8px"},children:[c.jsx("span",{children:""}),c.jsx("span",{style:{fontSize:"14px",fontWeight:"600",color:"#b91c1c"},children:Dt?.photos?.length>0?"Add Another Photo":"Take Photo"})]}),c.jsx("textarea",{value:Dt?.notes||"",onChange:Vt=>Dt&&ke(Dt.id,Vt.target.value),placeholder:"Describe the issue (optional)...",maxLength:200,style:{width:"100%",padding:"10px",borderRadius:"6px",border:"1px solid #fca5a5",fontSize:"14px",resize:"none",minHeight:"50px",fontFamily:"inherit",boxSizing:"border-box"}})]})]},me.id)})})]},ie.name)),ge&&gn&&c.jsx("div",{style:{backgroundColor:"#fff",borderRadius:"12px",padding:"16px",marginTop:"16px",border:"2px solid #10b981"},children:c.jsx("div",{style:{fontSize:"16px",fontWeight:"600",color:"#059669"},children:" All checks passed - Zone is Green!"})})]}),c.jsx("div",{style:{position:"fixed",bottom:0,left:0,right:0,backgroundColor:"#fff",borderTop:"1px solid #e5e7eb",padding:"16px 20px"},children:c.jsx("button",{onClick:_e,disabled:!ne,style:{width:"100%",padding:"18px",borderRadius:"12px",fontSize:"18px",fontWeight:"700",border:"none",cursor:ne?"pointer":"not-allowed",backgroundColor:ne?"#092849":"#d1d5db",color:ne?"#fff":"#9ca3af"},children:ge?!pn&&!gn?"Add Photos for All Issues":Se&&d<j-1?"Next Room ":x<ve-1?"Next Zone ":"View Summary ":`Answer All Questions (${fe()}/${ee()})`})})]})},wS=({bgWalkthrough:a,camera:n})=>{const r=We(),[o,u]=w.useState(null),[d,f]=w.useState(!1),[p,g]=w.useState({description:"",photos:[]}),[y,b]=w.useState("0:00"),{currentZoneIndex:x,observations:S,startTime:_,addObservation:E,removeObservation:R,nextZone:T,goToZone:O}=a;w.useEffect(()=>{if(!_)return;const q=()=>{const j=new Date(_),Q=new Date-j,de=Math.floor(Q/6e4),he=Math.floor(Q%6e4/1e3),k=Math.floor(de/60),I=de%60;k>0?b(`${k}:${I.toString().padStart(2,"0")}:${he.toString().padStart(2,"0")}`):b(`${I}:${he.toString().padStart(2,"0")}`)};q();const V=setInterval(q,1e3);return()=>clearInterval(V)},[_]);const z=Et[x],B=hn[z],Y=Et.length,J=B?.routingCategories||[],G=q=>{u(q),f(!0),g({description:"",photos:[]})},K=()=>{n.openCamera(q=>{q&&g(V=>({...V,photos:[...V.photos,q]}))})},P=q=>{g(V=>({...V,photos:V.photos.filter((j,M)=>M!==q)}))},F=()=>{if(!o||!p.description.trim()){alert("Please select a category and describe the issue");return}if(p.photos.length===0){alert("Please take at least one photo");return}E({category:o.id,categoryName:o.name,pillar:o.pillar,tier:o.tier,description:p.description.trim(),photos:p.photos,examples:o.items}),f(!1),u(null),g({description:"",photos:[]})},ve=()=>{f(!1),u(null),g({description:"",photos:[]})},be=q=>{window.confirm("Delete this observation?")&&R(q)},Ae=()=>{x<Y-1?(T(),window.scrollTo(0,0),r("/bg/zone")):r("/bg/summary")},Se=()=>{x>0&&(O(x-1),r("/bg/zone"))};return c.jsxs("div",{style:{minHeight:"100vh",backgroundColor:"#f3f4f6",paddingBottom:"100px"},children:[c.jsx("div",{style:{background:"linear-gradient(180deg, #092849 0%, #141685 100%)",color:"#fff",padding:"20px"},children:c.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[c.jsx("button",{onClick:Se,style:{fontSize:"24px",background:"rgba(255,255,255,0.2)",border:"none",borderRadius:"8px",width:"40px",height:"40px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",color:"#fff"},children:""}),c.jsxs("div",{style:{textAlign:"center"},children:[c.jsx("h1",{style:{fontSize:"20px",fontWeight:"700",margin:0},children:B?.name}),c.jsxs("p",{style:{fontSize:"14px",opacity:.8,margin:"4px 0 0 0"},children:["Zone ",x+1," of ",Y]})]}),c.jsxs("div",{style:{backgroundColor:"rgba(255,255,255,0.2)",borderRadius:"8px",padding:"6px 10px",fontSize:"14px",fontWeight:"600",display:"flex",alignItems:"center",gap:"4px"},children:[c.jsx("span",{children:""}),c.jsx("span",{children:y})]})]})}),c.jsx("div",{style:{height:"6px",backgroundColor:"#e5e7eb"},children:c.jsx("div",{style:{height:"100%",backgroundColor:"#092849",width:`${(x+1)/Y*100}%`,transition:"width 0.3s ease"}})}),c.jsxs("div",{style:{backgroundColor:"rgba(194, 236, 253, 0.5)",borderLeft:"4px solid #2B57D0",padding:"14px 16px",margin:"16px 20px",borderRadius:"8px"},children:[c.jsx("div",{style:{fontSize:"15px",fontWeight:"600",color:"#141685",marginBottom:"4px"},children:"Observation & Routing"}),c.jsx("div",{style:{fontSize:"14px",color:"#1e3a5f"},children:"Report issues that belong to other pillars. B&G observes, the owning pillar sets the standard."})]}),d?c.jsx("div",{style:{padding:"0 20px"},children:c.jsxs("div",{style:{backgroundColor:"#fff",borderRadius:"12px",padding:"20px",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:[c.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:[c.jsxs("h3",{style:{margin:0,fontSize:"18px",color:"#092849"},children:["New ",o?.name," Observation"]}),c.jsx("button",{onClick:ve,style:{background:"none",border:"none",fontSize:"24px",cursor:"pointer",color:"#666"},children:""})]}),c.jsxs("div",{style:{backgroundColor:"#f0f9ff",padding:"12px",borderRadius:"8px",marginBottom:"16px"},children:[c.jsxs("div",{style:{fontSize:"13px",color:"#0369a1"},children:[c.jsx("strong",{children:"Routes to:"})," ",o?.pillar]}),c.jsxs("div",{style:{fontSize:"13px",color:"#0369a1",marginTop:"4px"},children:[c.jsx("strong",{children:"SLA Tier:"})," ",o?.tier]})]}),o?.items&&c.jsxs("div",{style:{marginBottom:"16px"},children:[c.jsx("div",{style:{fontSize:"14px",fontWeight:"600",color:"#333",marginBottom:"8px"},children:"Example Issues:"}),c.jsx("ul",{style:{margin:0,paddingLeft:"20px",fontSize:"13px",color:"#666"},children:o.items.slice(0,3).map((q,V)=>c.jsx("li",{style:{marginBottom:"4px"},children:q},V))})]}),c.jsxs("div",{style:{marginBottom:"16px"},children:[c.jsx("div",{style:{fontSize:"14px",fontWeight:"600",color:"#333",marginBottom:"8px"},children:"Photos *"}),p.photos.length>0&&c.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"8px",marginBottom:"8px"},children:p.photos.map((q,V)=>c.jsxs("div",{style:{position:"relative"},children:[c.jsx("img",{src:q,alt:`Photo ${V+1}`,style:{width:"100%",height:"80px",borderRadius:"6px",objectFit:"cover"}}),c.jsx("button",{onClick:()=>P(V),style:{position:"absolute",top:"2px",right:"2px",backgroundColor:"#ef4444",color:"#fff",width:"20px",height:"20px",borderRadius:"50%",border:"none",cursor:"pointer",fontSize:"12px"},children:""})]},V))}),c.jsxs("button",{onClick:K,style:{width:"100%",padding:"12px",border:"2px dashed #d1d5db",borderRadius:"8px",backgroundColor:"#f9fafb",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},children:[c.jsx("span",{children:""}),c.jsx("span",{style:{fontSize:"14px",fontWeight:"600",color:"#374151"},children:p.photos.length>0?"Add Another Photo":"Take Photo"})]})]}),c.jsxs("div",{style:{marginBottom:"16px"},children:[c.jsx("div",{style:{fontSize:"14px",fontWeight:"600",color:"#333",marginBottom:"8px"},children:"Description *"}),c.jsx("textarea",{value:p.description,onChange:q=>g(V=>({...V,description:q.target.value})),placeholder:"Describe the issue you observed...",maxLength:300,style:{width:"100%",padding:"12px",borderRadius:"8px",border:"1px solid #d1d5db",fontSize:"15px",resize:"none",minHeight:"80px",fontFamily:"inherit",boxSizing:"border-box"}}),c.jsxs("div",{style:{fontSize:"12px",color:"#6b7280",textAlign:"right",marginTop:"4px"},children:[p.description.length,"/300"]})]}),c.jsx("button",{onClick:F,style:{width:"100%",padding:"14px",borderRadius:"10px",fontSize:"16px",fontWeight:"700",border:"none",cursor:"pointer",backgroundColor:"#092849",color:"#fff"},children:"Save Observation"})]})}):c.jsxs(c.Fragment,{children:[c.jsxs("div",{style:{padding:"0 20px"},children:[c.jsx("div",{style:{fontSize:"16px",fontWeight:"600",color:"#333",marginBottom:"12px"},children:"Select Issue Category:"}),c.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:J.map(q=>c.jsxs("button",{onClick:()=>G(q),style:{display:"flex",alignItems:"center",padding:"16px",backgroundColor:"#fff",borderRadius:"12px",border:"1px solid #e5e7eb",cursor:"pointer",textAlign:"left"},children:[c.jsxs("div",{style:{width:"44px",height:"44px",borderRadius:"10px",backgroundColor:q.tier===1?"#fee2e2":"#f0f9ff",display:"flex",alignItems:"center",justifyContent:"center",marginRight:"14px",fontSize:"20px"},children:[q.id==="security"&&"",q.id==="outdoor_rec"&&"",q.id==="fire_life_safety"&&"",q.id==="mechanical"&&"",q.id==="cleanliness"&&"",q.id==="structural_capital"&&""]}),c.jsxs("div",{style:{flex:1},children:[c.jsx("div",{style:{fontWeight:"600",fontSize:"16px",color:"#092849"},children:q.name}),c.jsxs("div",{style:{fontSize:"13px",color:"#666",marginTop:"2px"},children:[" ",q.pillar]})]}),q.tier===1&&c.jsx("span",{style:{fontSize:"11px",backgroundColor:"#fee2e2",color:"#b91c1c",padding:"4px 8px",borderRadius:"4px",fontWeight:"600"},children:"TIER 1"}),c.jsx("span",{style:{color:"#9ca3af",fontSize:"20px",marginLeft:"8px"},children:"+"})]},q.id))})]}),S.length>0&&c.jsxs("div",{style:{padding:"20px"},children:[c.jsxs("div",{style:{fontSize:"16px",fontWeight:"600",color:"#333",marginBottom:"12px"},children:["Recorded Observations (",S.length,")"]}),c.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:S.map(q=>c.jsxs("div",{style:{backgroundColor:"#fff",borderRadius:"12px",padding:"16px",border:"1px solid #e5e7eb"},children:[c.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"8px"},children:[c.jsxs("div",{children:[c.jsx("div",{style:{fontWeight:"600",fontSize:"15px",color:"#092849"},children:q.categoryName}),c.jsxs("div",{style:{fontSize:"13px",color:"#666"},children:[" ",q.pillar,"  Tier ",q.tier]})]}),c.jsx("button",{onClick:()=>be(q.id),style:{background:"none",border:"none",color:"#ef4444",cursor:"pointer",fontSize:"18px"},children:""})]}),c.jsx("div",{style:{fontSize:"14px",color:"#333",marginBottom:"8px"},children:q.description}),q.photos?.length>0&&c.jsx("div",{style:{display:"flex",gap:"6px",flexWrap:"wrap"},children:q.photos.map((V,j)=>c.jsx("img",{src:V,alt:`Observation ${j+1}`,style:{width:"60px",height:"60px",borderRadius:"6px",objectFit:"cover"}},j))})]},q.id))})]})]}),!d&&c.jsx("div",{style:{position:"fixed",bottom:0,left:0,right:0,backgroundColor:"#fff",borderTop:"1px solid #e5e7eb",padding:"16px 20px"},children:c.jsx("button",{onClick:Ae,style:{width:"100%",padding:"18px",borderRadius:"12px",fontSize:"18px",fontWeight:"700",border:"none",cursor:"pointer",backgroundColor:"#092849",color:"#fff"},children:S.length===0?"No Observations - Continue ":`${S.length} Observation${S.length>1?"s":""} Recorded - Continue `})})]})},SS=({bgWalkthrough:a})=>{const n=We(),[r,o]=w.useState(null),[u,d]=w.useState(!0),[f,p]=w.useState({}),[g,y]=w.useState("0:00"),{currentZoneIndex:b,campus:x,zoneResults:S,startTime:_,recordZoneResults:E,goToZone:R,calculateAndSetZoneRating:T}=a;w.useEffect(()=>{if(!_)return;const j=()=>{const Q=new Date(_),he=new Date-Q,k=Math.floor(he/6e4),I=Math.floor(he%6e4/1e3),X=Math.floor(k/60),ee=k%60;X>0?y(`${X}:${ee.toString().padStart(2,"0")}:${I.toString().padStart(2,"0")}`):y(`${ee}:${I.toString().padStart(2,"0")}`)};j();const M=setInterval(j,1e3);return()=>clearInterval(M)},[_]);const O=Et[b],z=hn[O],B=Et.length;w.useEffect(()=>{(async()=>{if(!x){d(!1);return}try{const Q=(await Iu(x,2)).find(de=>de.isComplete);Q&&o(Q)}catch(M){console.error("Error loading prior week data:",M)}finally{d(!1)}})()},[x]),w.useEffect(()=>{const j=S[O]||{};p(j)},[O,S]);const Y=(j,M)=>{p(Q=>({...Q,[j]:M}))},J=z?.sections?.flatMap(j=>j.checks.map(M=>({...M,section:j.name})))||[],G=()=>J.length,K=()=>Object.keys(f).filter(j=>f[j]!==void 0).length,P=K()===G(),ve=J.filter(j=>f[j.id]===!1).length===0&&P,be=P,Ae=()=>{E(O,f),T(O),n("/bg/summary")},Se=()=>{b>0&&(R(b-1),n("/bg/zone"))},q=r?.issues?.filter(j=>j.tier===2||j.tier===3||j.amberEligible).length||0,V=r?.issues?.filter(j=>j.tier===1||j.amberIneligible).length||0;return c.jsxs("div",{style:{minHeight:"100vh",backgroundColor:"#f3f4f6",paddingBottom:"120px"},children:[c.jsx("div",{style:{background:"linear-gradient(180deg, #092849 0%, #141685 100%)",color:"#fff",padding:"20px"},children:c.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[c.jsx("button",{onClick:Se,style:{fontSize:"24px",background:"rgba(255,255,255,0.2)",border:"none",borderRadius:"8px",width:"40px",height:"40px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",color:"#fff"},children:""}),c.jsxs("div",{style:{textAlign:"center"},children:[c.jsx("h1",{style:{fontSize:"20px",fontWeight:"700",margin:0},children:z?.name}),c.jsxs("p",{style:{fontSize:"14px",opacity:.8,margin:"4px 0 0 0"},children:["Zone ",b+1," of ",B]})]}),c.jsxs("div",{style:{backgroundColor:"rgba(255,255,255,0.2)",borderRadius:"8px",padding:"6px 10px",fontSize:"14px",fontWeight:"600",display:"flex",alignItems:"center",gap:"4px"},children:[c.jsx("span",{children:""}),c.jsx("span",{children:g})]})]})}),c.jsx("div",{style:{height:"6px",backgroundColor:"#e5e7eb"},children:c.jsx("div",{style:{height:"100%",backgroundColor:"#092849",width:`${(b+1)/B*100}%`,transition:"width 0.3s ease"}})}),c.jsxs("div",{style:{padding:"20px"},children:[c.jsxs("div",{style:{backgroundColor:"#fff",borderRadius:"12px",padding:"20px",marginBottom:"20px",border:"1px solid #e5e7eb"},children:[c.jsx("h3",{style:{margin:"0 0 16px 0",fontSize:"18px",color:"#092849"},children:" Prior Week Summary"}),u?c.jsx("div",{style:{textAlign:"center",padding:"20px",color:"#666"},children:"Loading prior week data..."}):r?c.jsxs(c.Fragment,{children:[c.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:"12px",marginBottom:"16px"},children:[c.jsxs("div",{style:{backgroundColor:"#f0fdf4",padding:"12px",borderRadius:"8px",textAlign:"center"},children:[c.jsx("div",{style:{fontSize:"24px",fontWeight:"700",color:"#059669"},children:r.greenZones||0}),c.jsx("div",{style:{fontSize:"12px",color:"#065f46"},children:"Green Zones"})]}),c.jsxs("div",{style:{backgroundColor:"#fef3c7",padding:"12px",borderRadius:"8px",textAlign:"center"},children:[c.jsx("div",{style:{fontSize:"24px",fontWeight:"700",color:"#d97706"},children:q}),c.jsx("div",{style:{fontSize:"12px",color:"#92400e"},children:"Amber Issues"})]}),c.jsxs("div",{style:{backgroundColor:"#fee2e2",padding:"12px",borderRadius:"8px",textAlign:"center"},children:[c.jsx("div",{style:{fontSize:"24px",fontWeight:"700",color:"#dc2626"},children:V}),c.jsx("div",{style:{fontSize:"12px",color:"#991b1b"},children:"Red Issues"})]})]}),c.jsxs("div",{style:{fontSize:"14px",color:"#666",marginBottom:"8px"},children:[c.jsx("strong",{children:"Date:"})," ",r.date]}),c.jsxs("div",{style:{fontSize:"14px",color:"#666",marginBottom:"8px"},children:[c.jsx("strong",{children:"Auditor:"})," ",r.auditor]}),c.jsxs("div",{style:{fontSize:"14px",color:"#666"},children:[c.jsx("strong",{children:"Campus Rating:"})," ",c.jsx("span",{style:{fontWeight:"600",color:r.campusRating==="PASS"?"#059669":"#dc2626"},children:r.campusRating||"N/A"})]}),r.issues?.length>0&&c.jsxs("div",{style:{marginTop:"16px"},children:[c.jsx("div",{style:{fontSize:"14px",fontWeight:"600",color:"#333",marginBottom:"8px"},children:"Open Issues from Prior Week:"}),c.jsx("div",{style:{maxHeight:"200px",overflowY:"auto"},children:r.issues.map((j,M)=>c.jsxs("div",{style:{padding:"10px",backgroundColor:"#f9fafb",borderRadius:"6px",marginBottom:"6px",fontSize:"13px"},children:[c.jsxs("div",{style:{fontWeight:"500",color:"#374151"},children:[j.zoneName," - ",j.section]}),c.jsx("div",{style:{color:"#6b7280",marginTop:"2px"},children:j.checkText}),c.jsxs("div",{style:{display:"inline-block",marginTop:"4px",fontSize:"11px",padding:"2px 6px",borderRadius:"4px",backgroundColor:j.tier===1?"#fee2e2":"#fef3c7",color:j.tier===1?"#b91c1c":"#92400e"},children:["Tier ",j.tier]})]},M))})]})]}):c.jsxs("div",{style:{textAlign:"center",padding:"20px",color:"#666",backgroundColor:"#f9fafb",borderRadius:"8px"},children:[c.jsx("div",{style:{fontSize:"32px",marginBottom:"8px"},children:""}),c.jsx("div",{children:"No prior week walkthrough found for this campus."}),c.jsx("div",{style:{fontSize:"13px",marginTop:"4px"},children:"This may be the first B&G walkthrough."})]})]}),c.jsxs("div",{style:{backgroundColor:"#fff",borderRadius:"12px",padding:"20px",border:"1px solid #e5e7eb"},children:[c.jsx("h3",{style:{margin:"0 0 16px 0",fontSize:"18px",color:"#092849"},children:" Governance Checks"}),z?.sections?.map(j=>c.jsxs("div",{style:{marginBottom:"20px"},children:[c.jsx("div",{style:{fontSize:"15px",fontWeight:"600",color:"#374151",marginBottom:"12px",paddingBottom:"8px",borderBottom:"1px solid #e5e7eb"},children:j.name}),j.checks.map(M=>{const Q=f[M.id];return c.jsxs("div",{style:{marginBottom:"16px"},children:[c.jsx("div",{style:{fontSize:"15px",marginBottom:"10px",color:"#333",lineHeight:"1.4"},children:M.text}),c.jsxs("div",{style:{display:"flex",gap:"10px"},children:[c.jsx("button",{onClick:()=>Y(M.id,!0),style:{flex:1,padding:"12px",borderRadius:"10px",fontWeight:"600",fontSize:"15px",border:"none",cursor:"pointer",backgroundColor:Q===!0?"#10b981":"#f3f4f6",color:Q===!0?"#fff":"#333"},children:" Yes"}),c.jsx("button",{onClick:()=>Y(M.id,!1),style:{flex:1,padding:"12px",borderRadius:"10px",fontWeight:"600",fontSize:"15px",border:"none",cursor:"pointer",backgroundColor:Q===!1?"#ef4444":"#f3f4f6",color:Q===!1?"#fff":"#333"},children:" No"})]})]},M.id)})]},j.name))]}),P&&ve&&c.jsx("div",{style:{backgroundColor:"#fff",borderRadius:"12px",padding:"16px",marginTop:"16px",border:"2px solid #10b981"},children:c.jsx("div",{style:{fontSize:"16px",fontWeight:"600",color:"#059669"},children:" All governance checks passed!"})})]}),c.jsx("div",{style:{position:"fixed",bottom:0,left:0,right:0,backgroundColor:"#fff",borderTop:"1px solid #e5e7eb",padding:"16px 20px"},children:c.jsx("button",{onClick:Ae,disabled:!be,style:{width:"100%",padding:"18px",borderRadius:"12px",fontSize:"18px",fontWeight:"700",border:"none",cursor:be?"pointer":"not-allowed",backgroundColor:be?"#092849":"#d1d5db",color:be?"#fff":"#9ca3af"},children:P?"View Summary ":`Answer All Questions (${K()}/${G()})`})})]})},_S=({bgWalkthrough:a})=>{const n=We(),{campus:r,auditor:o,startTime:u,zoneRatings:d,issues:f,observations:p,completeWalkthrough:g}=a,y=w.useMemo(()=>{if(!u)return null;const P=new Date(u),ve=new Date-P,be=Math.round(ve/6e4),Ae=Math.floor(be/60),Se=be%60;return{total:be,hours:Ae,mins:Se}},[u]),b=w.useMemo(()=>g(),[g]),x=b?.zoneRatings||d,S=b?.campusRating,_=Object.values(x).filter(P=>P==="GREEN").length,E=Object.values(x).filter(P=>P==="AMBER").length,R=Object.values(x).filter(P=>P==="RED").length,T=Math.round(_/Et.length*100),O=f.filter(P=>P.tier===1),z=f.filter(P=>P.tier===2),B=f.filter(P=>P.tier===3),Y=f.filter(P=>P.tier===4),J=P=>{switch(P){case"GREEN":return"#10b981";case"AMBER":return"#f59e0b";case"RED":return"#ef4444";default:return"#6b7280"}},G=P=>{switch(P){case"GREEN":return"#f0fdf4";case"AMBER":return"#fef3c7";case"RED":return"#fee2e2";default:return"#f3f4f6"}},K=()=>{n("/bg/complete")};return c.jsxs("div",{style:{minHeight:"100vh",backgroundColor:"#f3f4f6",paddingBottom:"100px"},children:[c.jsxs("div",{style:{background:S==="PASS"?"linear-gradient(180deg, #059669 0%, #047857 100%)":"linear-gradient(180deg, #dc2626 0%, #b91c1c 100%)",color:"#fff",padding:"30px 20px",textAlign:"center"},children:[c.jsx("div",{style:{fontSize:"48px",marginBottom:"12px"},children:S==="PASS"?"":""}),c.jsxs("h1",{style:{fontSize:"28px",fontWeight:"700",margin:"0 0 8px 0"},children:["Campus ",S||"Calculating..."]}),c.jsxs("p",{style:{fontSize:"16px",opacity:.9,margin:0},children:[r," - Weekly B&G Walkthrough"]}),c.jsxs("p",{style:{fontSize:"14px",opacity:.8,margin:"4px 0 0 0"},children:["Completed by ",o]}),y&&c.jsxs("div",{style:{marginTop:"12px",backgroundColor:"rgba(255,255,255,0.2)",borderRadius:"8px",padding:"8px 16px",display:"inline-block"},children:[c.jsx("span",{style:{fontSize:"14px",opacity:.9},children:" Walkthrough Time: "}),c.jsx("span",{style:{fontSize:"16px",fontWeight:"700"},children:y.hours>0?`${y.hours}h ${y.mins}m`:`${y.mins} minutes`})]})]}),c.jsxs("div",{style:{padding:"20px"},children:[c.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"12px",marginBottom:"20px"},children:[c.jsxs("div",{style:{backgroundColor:"#f0fdf4",padding:"16px",borderRadius:"12px",textAlign:"center",border:"2px solid #10b981"},children:[c.jsx("div",{style:{fontSize:"32px",fontWeight:"700",color:"#059669"},children:_}),c.jsx("div",{style:{fontSize:"13px",color:"#065f46",fontWeight:"600"},children:"GREEN"})]}),c.jsxs("div",{style:{backgroundColor:"#fef3c7",padding:"16px",borderRadius:"12px",textAlign:"center",border:"2px solid #f59e0b"},children:[c.jsx("div",{style:{fontSize:"32px",fontWeight:"700",color:"#d97706"},children:E}),c.jsx("div",{style:{fontSize:"13px",color:"#92400e",fontWeight:"600"},children:"AMBER"})]}),c.jsxs("div",{style:{backgroundColor:"#fee2e2",padding:"16px",borderRadius:"12px",textAlign:"center",border:"2px solid #ef4444"},children:[c.jsx("div",{style:{fontSize:"32px",fontWeight:"700",color:"#dc2626"},children:R}),c.jsx("div",{style:{fontSize:"13px",color:"#991b1b",fontWeight:"600"},children:"RED"})]})]}),c.jsxs("div",{style:{backgroundColor:"#fff",borderRadius:"12px",padding:"16px",marginBottom:"20px",border:"1px solid #e5e7eb"},children:[c.jsx("div",{style:{fontSize:"14px",color:"#666",marginBottom:"8px"},children:"Campus Rating Criteria:"}),c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"8px"},children:[c.jsx("span",{style:{width:"20px",height:"20px",borderRadius:"50%",backgroundColor:T>=85?"#10b981":"#e5e7eb",display:"flex",alignItems:"center",justifyContent:"center",color:"#fff",fontSize:"12px"},children:T>=85?"":""}),c.jsxs("span",{style:{fontSize:"14px"},children:["85% zones GREEN (",T,"% achieved)"]})]}),c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[c.jsx("span",{style:{width:"20px",height:"20px",borderRadius:"50%",backgroundColor:O.length===0?"#10b981":"#ef4444",display:"flex",alignItems:"center",justifyContent:"center",color:"#fff",fontSize:"12px"},children:O.length===0?"":""}),c.jsxs("span",{style:{fontSize:"14px"},children:["Zero Tier 1 (Safety) issues (",O.length," found)"]})]})]}),c.jsxs("div",{style:{backgroundColor:"#fff",borderRadius:"12px",padding:"16px",marginBottom:"20px",border:"1px solid #e5e7eb"},children:[c.jsx("h3",{style:{margin:"0 0 16px 0",fontSize:"18px",color:"#092849"},children:"Zone Ratings"}),Et.map(P=>{const F=hn[P],ve=x[P]||"N/A",be=f.filter(Ae=>Ae.zoneId===P);return c.jsxs("div",{style:{display:"flex",alignItems:"center",padding:"12px",backgroundColor:G(ve),borderRadius:"8px",marginBottom:"8px"},children:[c.jsxs("div",{style:{flex:1},children:[c.jsx("div",{style:{fontWeight:"600",fontSize:"15px",color:"#333"},children:F.name}),be.length>0&&c.jsxs("div",{style:{fontSize:"13px",color:"#666",marginTop:"2px"},children:[be.length," issue",be.length>1?"s":""]})]}),c.jsx("div",{style:{padding:"6px 12px",borderRadius:"6px",backgroundColor:J(ve),color:"#fff",fontWeight:"700",fontSize:"14px"},children:ve})]},P)})]}),f.length>0&&c.jsxs("div",{style:{backgroundColor:"#fff",borderRadius:"12px",padding:"16px",marginBottom:"20px",border:"1px solid #e5e7eb"},children:[c.jsxs("h3",{style:{margin:"0 0 16px 0",fontSize:"18px",color:"#092849"},children:["Issues by SLA Tier (",f.length," total)"]}),O.length>0&&c.jsxs("div",{style:{marginBottom:"16px"},children:[c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"8px"},children:[c.jsx("span",{style:{backgroundColor:"#fee2e2",color:"#b91c1c",padding:"4px 8px",borderRadius:"4px",fontSize:"12px",fontWeight:"700"},children:"TIER 1 - CRITICAL"}),c.jsx("span",{style:{fontSize:"13px",color:"#666"},children:Ir[1].resolution})]}),O.map((P,F)=>c.jsxs("div",{style:{padding:"10px",backgroundColor:"#fef2f2",borderRadius:"6px",marginBottom:"6px",fontSize:"14px"},children:[c.jsx("div",{style:{fontWeight:"500"},children:P.zoneName}),c.jsx("div",{style:{color:"#666",fontSize:"13px"},children:P.checkText})]},F))]}),z.length>0&&c.jsxs("div",{style:{marginBottom:"16px"},children:[c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"8px"},children:[c.jsx("span",{style:{backgroundColor:"#fef3c7",color:"#92400e",padding:"4px 8px",borderRadius:"4px",fontSize:"12px",fontWeight:"700"},children:"TIER 2 - HIGH-VISIBILITY"}),c.jsx("span",{style:{fontSize:"13px",color:"#666"},children:Ir[2].resolution})]}),z.map((P,F)=>c.jsxs("div",{style:{padding:"10px",backgroundColor:"#fffbeb",borderRadius:"6px",marginBottom:"6px",fontSize:"14px"},children:[c.jsx("div",{style:{fontWeight:"500"},children:P.zoneName}),c.jsx("div",{style:{color:"#666",fontSize:"13px"},children:P.checkText})]},F))]}),(B.length>0||Y.length>0)&&c.jsxs("div",{children:[c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"8px"},children:[c.jsx("span",{style:{backgroundColor:"#e5e7eb",color:"#374151",padding:"4px 8px",borderRadius:"4px",fontSize:"12px",fontWeight:"700"},children:"TIER 3/4 - ROUTINE"}),c.jsx("span",{style:{fontSize:"13px",color:"#666"},children:Ir[3].resolution})]}),[...B,...Y].map((P,F)=>c.jsxs("div",{style:{padding:"10px",backgroundColor:"#f9fafb",borderRadius:"6px",marginBottom:"6px",fontSize:"14px"},children:[c.jsx("div",{style:{fontWeight:"500"},children:P.zoneName}),c.jsx("div",{style:{color:"#666",fontSize:"13px"},children:P.checkText})]},F))]})]}),p.length>0&&c.jsxs("div",{style:{backgroundColor:"#fff",borderRadius:"12px",padding:"16px",marginBottom:"20px",border:"1px solid #e5e7eb"},children:[c.jsxs("h3",{style:{margin:"0 0 16px 0",fontSize:"18px",color:"#092849"},children:["Observations Routed to Other Pillars (",p.length,")"]}),p.map((P,F)=>c.jsxs("div",{style:{padding:"12px",backgroundColor:"#f0f9ff",borderRadius:"8px",marginBottom:"8px"},children:[c.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[c.jsx("div",{style:{fontWeight:"600",color:"#0369a1"},children:P.categoryName}),c.jsxs("span",{style:{fontSize:"12px",backgroundColor:"#e0f2fe",color:"#0369a1",padding:"2px 6px",borderRadius:"4px"},children:[" ",P.pillar]})]}),c.jsx("div",{style:{fontSize:"14px",color:"#333",marginTop:"4px"},children:P.description})]},F))]})]}),c.jsx("div",{style:{position:"fixed",bottom:0,left:0,right:0,backgroundColor:"#fff",borderTop:"1px solid #e5e7eb",padding:"16px 20px"},children:c.jsx("button",{onClick:K,style:{width:"100%",padding:"18px",borderRadius:"12px",fontSize:"18px",fontWeight:"700",border:"none",cursor:"pointer",backgroundColor:"#092849",color:"#fff"},children:"Submit & Send Report "})})]})},ES=({bgWalkthrough:a})=>{const n=We(),[r,o]=w.useState(!0),[u,d]=w.useState(null),[f,p]=w.useState(!1),g=w.useRef(!1),{getWalkthroughData:y,resetWalkthrough:b}=a,x=y(),S=w.useCallback(E=>{const R=Object.values(E.zoneRatings||{}).filter(B=>B==="GREEN").length,T=Object.values(E.zoneRatings||{}).filter(B=>B==="AMBER").length,O=Object.values(E.zoneRatings||{}).filter(B=>B==="RED").length;let z=`
WEEKLY B&G WALKTHROUGH REPORT
=============================
Campus: ${E.campus}
Date: ${E.date}
Time: ${E.time}
Auditor: ${E.auditor}
Duration: ${E.duration||"N/A"} minutes

CAMPUS RATING: ${E.campusRating||"N/A"}
=============================

ZONE SUMMARY:
- GREEN: ${R}
- AMBER: ${T}
- RED: ${O}

`;if(E.issues?.length>0){z+=`
ISSUES FOUND (${E.issues.length}):
`,z+=`-----------------------------
`;const B=E.issues.filter(G=>G.tier===1),Y=E.issues.filter(G=>G.tier===2),J=E.issues.filter(G=>G.tier>2);B.length>0&&(z+=`
TIER 1 - CRITICAL (${Ir[1].resolution}):
`,B.forEach(G=>{z+=`  - ${G.zoneName}: ${G.checkText}
`,G.notes&&(z+=`    Notes: ${G.notes}
`)})),Y.length>0&&(z+=`
TIER 2 - HIGH-VISIBILITY (${Ir[2].resolution}):
`,Y.forEach(G=>{z+=`  - ${G.zoneName}: ${G.checkText}
`,G.notes&&(z+=`    Notes: ${G.notes}
`)})),J.length>0&&(z+=`
TIER 3/4 - ROUTINE:
`,J.forEach(G=>{z+=`  - ${G.zoneName}: ${G.checkText}
`,G.notes&&(z+=`    Notes: ${G.notes}
`)}))}return E.observations?.length>0&&(z+=`
OBSERVATIONS ROUTED TO OTHER PILLARS (${E.observations.length}):
`,z+=`-----------------------------
`,E.observations.forEach(B=>{z+=`  - ${B.categoryName} -> ${B.pillar}
`,z+=`    ${B.description}
`})),z+=`
-----------------------------
`,z+=`Report generated by Alpha Facilities App
`,z},[]);w.useEffect(()=>{if(g.current)return;g.current=!0,(async()=>{try{o(!0),d(null);const R=y();await fw(R);try{console.log("[BGComplete] Sending email to:",R.auditorEmail),await gw(R),console.log("[BGComplete] Email sent successfully"),p(!0)}catch(T){console.error("[BGComplete] Email failed (non-blocking):",T),p(!1)}}catch(R){console.error("Error saving B&G walkthrough:",R),d(R.message||"Failed to save walkthrough")}finally{o(!1)}})()},[y,S]);const _=()=>{b(),n("/")};return c.jsxs("div",{style:{minHeight:"100vh",background:x.campusRating==="PASS"?"linear-gradient(180deg, #059669 0%, #047857 100%)":"linear-gradient(180deg, #dc2626 0%, #b91c1c 100%)",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"40px 20px"},children:[c.jsx("div",{style:{width:"120px",height:"120px",borderRadius:"50%",backgroundColor:"rgba(255,255,255,0.2)",display:"flex",alignItems:"center",justifyContent:"center",marginBottom:"24px"},children:r?c.jsx("div",{style:{fontSize:"48px"},children:""}):u?c.jsx("div",{style:{fontSize:"48px"},children:""}):c.jsx("div",{style:{fontSize:"48px"},children:x.campusRating==="PASS"?"":""})}),c.jsx("h1",{style:{color:"#fff",fontSize:"28px",fontWeight:"700",marginBottom:"8px",textAlign:"center"},children:r?"Saving Walkthrough...":u?"Error Saving":"Walkthrough Complete!"}),c.jsx("p",{style:{color:"rgba(255,255,255,0.9)",fontSize:"18px",marginBottom:"32px",textAlign:"center"},children:r?"Please wait...":u||`Campus ${x.campusRating||"Rating"}`}),!r&&!u&&c.jsxs("div",{style:{backgroundColor:"#fff",borderRadius:"16px",padding:"24px",width:"100%",maxWidth:"320px",marginBottom:"32px"},children:[c.jsxs("div",{style:{textAlign:"center",marginBottom:"20px"},children:[c.jsx("div",{style:{fontSize:"14px",color:"#666",marginBottom:"4px"},children:"Campus"}),c.jsx("div",{style:{fontSize:"20px",fontWeight:"700",color:"#092849"},children:x.campus})]}),c.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:"12px",marginBottom:"20px"},children:[c.jsxs("div",{style:{textAlign:"center"},children:[c.jsx("div",{style:{fontSize:"24px",fontWeight:"700",color:"#10b981"},children:x.greenZones||0}),c.jsx("div",{style:{fontSize:"12px",color:"#666"},children:"Green"})]}),c.jsxs("div",{style:{textAlign:"center"},children:[c.jsx("div",{style:{fontSize:"24px",fontWeight:"700",color:"#f59e0b"},children:x.amberZones||0}),c.jsx("div",{style:{fontSize:"12px",color:"#666"},children:"Amber"})]}),c.jsxs("div",{style:{textAlign:"center"},children:[c.jsx("div",{style:{fontSize:"24px",fontWeight:"700",color:"#ef4444"},children:x.redZones||0}),c.jsx("div",{style:{fontSize:"12px",color:"#666"},children:"Red"})]})]}),c.jsxs("div",{style:{borderTop:"1px solid #e5e7eb",paddingTop:"16px"},children:[c.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"8px"},children:[c.jsx("span",{style:{color:"#666",fontSize:"14px"},children:"Issues Found"}),c.jsx("span",{style:{fontWeight:"600",fontSize:"14px"},children:x.totalIssues||0})]}),c.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"8px"},children:[c.jsx("span",{style:{color:"#666",fontSize:"14px"},children:"Observations"}),c.jsx("span",{style:{fontWeight:"600",fontSize:"14px"},children:x.totalObservations||0})]}),c.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[c.jsx("span",{style:{color:"#666",fontSize:"14px"},children:"Duration"}),c.jsx("span",{style:{fontWeight:"600",fontSize:"14px"},children:x.duration?`${x.duration} min`:"N/A"})]})]}),c.jsxs("div",{style:{marginTop:"16px",padding:"12px",backgroundColor:f?"#f0fdf4":f===!1?"#fef3c7":"#f3f4f6",borderRadius:"8px",display:"flex",alignItems:"center",gap:"8px"},children:[c.jsx("span",{style:{fontSize:"20px"},children:f?"":f===!1?"":""}),c.jsx("div",{style:{fontSize:"14px",color:f?"#059669":f===!1?"#92400e":"#666"},children:f?`Report sent to ${x.auditorEmail}`:f===!1?"Email could not be sent (data saved)":"Sending email report..."})]})]}),!r&&c.jsxs("div",{style:{width:"100%",maxWidth:"320px"},children:[c.jsx("button",{onClick:_,style:{width:"100%",padding:"18px",borderRadius:"12px",fontSize:"18px",fontWeight:"700",border:"none",cursor:"pointer",backgroundColor:"#fff",color:"#092849",marginBottom:"12px"},children:"Done"}),u&&c.jsx("button",{onClick:()=>window.location.reload(),style:{width:"100%",padding:"16px",borderRadius:"12px",fontSize:"16px",fontWeight:"600",border:"2px solid rgba(255,255,255,0.3)",cursor:"pointer",backgroundColor:"transparent",color:"#fff"},children:"Retry"})]})]})},RS=()=>{const a=We(),{id:n}=Ou(),[r,o]=w.useState(null),[u,d]=w.useState(!0);if(w.useEffect(()=>{(async()=>{try{const g=await pw(n);o(g)}catch(g){console.error("Error loading B&G walkthrough:",g)}finally{d(!1)}})()},[n]),u)return c.jsxs("div",{style:{minHeight:"100vh",backgroundColor:"#f3f4f6"},children:[c.jsx(ut,{title:"B&G Walkthrough",onBack:()=>a(-1)}),c.jsx("div",{style:{textAlign:"center",padding:"48px 0",color:"#9ca3af"},children:"Loading..."})]});if(!r)return c.jsxs("div",{style:{minHeight:"100vh",backgroundColor:"#f3f4f6"},children:[c.jsx(ut,{title:"B&G Walkthrough",onBack:()=>a(-1)}),c.jsx("div",{style:{textAlign:"center",padding:"48px 0",color:"#9ca3af"},children:"Walkthrough not found"})]});const f=r.campusRating==="PASS";return c.jsxs("div",{style:{minHeight:"100vh",backgroundColor:"#f3f4f6"},children:[c.jsx(ut,{title:"B&G Walkthrough",onBack:()=>a(-1)}),c.jsxs("div",{style:{padding:"20px"},children:[c.jsxs("div",{style:{backgroundColor:f?"#dcfce7":"#fee2e2",borderRadius:"16px",padding:"24px",textAlign:"center",marginBottom:"20px"},children:[c.jsx("div",{style:{fontSize:"56px",marginBottom:"12px"},children:f?"":""}),c.jsx("div",{style:{fontSize:"28px",fontWeight:"700",color:f?"#166534":"#b91c1c"},children:r.campusRating||"N/A"}),c.jsxs("div",{style:{fontSize:"17px",color:f?"#166534":"#b91c1c",marginTop:"8px"},children:[r.totalIssues||0," issue",r.totalIssues!==1?"s":""," found"]})]}),c.jsxs("div",{style:{backgroundColor:"#fff",borderRadius:"12px",padding:"20px",marginBottom:"16px",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[c.jsx("h3",{style:{fontSize:"18px",fontWeight:"700",color:"#092849",marginBottom:"16px"},children:"Walkthrough Details"}),c.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:[c.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[c.jsx("span",{style:{color:"#666"},children:"Campus"}),c.jsx("span",{style:{fontWeight:"600",color:"#092849"},children:r.campus})]}),c.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[c.jsx("span",{style:{color:"#666"},children:"Auditor"}),c.jsx("span",{style:{fontWeight:"600",color:"#092849"},children:r.auditor})]}),r.auditorEmail&&c.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[c.jsx("span",{style:{color:"#666"},children:"Email"}),c.jsx("span",{style:{fontWeight:"600",color:"#092849"},children:r.auditorEmail})]}),c.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[c.jsx("span",{style:{color:"#666"},children:"Date"}),c.jsxs("span",{style:{fontWeight:"600",color:"#092849"},children:[r.date," at ",r.time]})]}),c.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[c.jsx("span",{style:{color:"#666"},children:"Duration"}),c.jsxs("span",{style:{fontWeight:"600",color:"#092849"},children:[r.duration||"N/A"," min"]})]})]})]}),c.jsxs("div",{style:{backgroundColor:"#fff",borderRadius:"12px",padding:"20px",marginBottom:"16px",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[c.jsx("h3",{style:{fontSize:"18px",fontWeight:"700",color:"#092849",marginBottom:"16px"},children:"Zone Summary"}),c.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"12px",marginBottom:"16px"},children:[c.jsxs("div",{style:{textAlign:"center",padding:"16px",backgroundColor:"#dcfce7",borderRadius:"10px"},children:[c.jsx("div",{style:{fontSize:"28px",fontWeight:"700",color:"#166534"},children:r.greenZones||0}),c.jsx("div",{style:{fontSize:"14px",color:"#166534"},children:"Green"})]}),c.jsxs("div",{style:{textAlign:"center",padding:"16px",backgroundColor:"#fef3c7",borderRadius:"10px"},children:[c.jsx("div",{style:{fontSize:"28px",fontWeight:"700",color:"#92400e"},children:r.amberZones||0}),c.jsx("div",{style:{fontSize:"14px",color:"#92400e"},children:"Amber"})]}),c.jsxs("div",{style:{textAlign:"center",padding:"16px",backgroundColor:"#fee2e2",borderRadius:"10px"},children:[c.jsx("div",{style:{fontSize:"28px",fontWeight:"700",color:"#b91c1c"},children:r.redZones||0}),c.jsx("div",{style:{fontSize:"14px",color:"#b91c1c"},children:"Red"})]})]}),r.zoneRatings&&Object.keys(r.zoneRatings).length>0&&c.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:Object.entries(r.zoneRatings).map(([p,g])=>c.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"12px",backgroundColor:g==="GREEN"?"#dcfce7":g==="AMBER"?"#fef3c7":"#fee2e2",borderRadius:"8px"},children:[c.jsx("span",{style:{fontWeight:"500",color:"#092849"},children:p}),c.jsx("span",{style:{fontSize:"14px",fontWeight:"600",color:g==="GREEN"?"#166534":g==="AMBER"?"#92400e":"#b91c1c"},children:g})]},p))})]}),r.issues&&r.issues.length>0&&c.jsxs("div",{style:{backgroundColor:"#fff",borderRadius:"12px",padding:"20px",marginBottom:"16px",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[c.jsxs("h3",{style:{fontSize:"18px",fontWeight:"700",color:"#092849",marginBottom:"16px"},children:["Issues (",r.issues.length,")"]}),c.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:r.issues.map((p,g)=>c.jsxs("div",{style:{padding:"14px",backgroundColor:p.tier===1?"#fee2e2":p.tier===2?"#fef3c7":"#f3f4f6",borderRadius:"10px"},children:[c.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px"},children:[c.jsx("span",{style:{fontWeight:"600",color:"#092849"},children:p.zoneName||p.zoneId}),c.jsxs("span",{style:{fontSize:"12px",padding:"4px 8px",borderRadius:"6px",backgroundColor:p.tier===1?"#b91c1c":p.tier===2?"#92400e":"#666",color:"#fff",fontWeight:"600"},children:["Tier ",p.tier]})]}),c.jsx("div",{style:{fontSize:"15px",color:"#333",marginBottom:"8px"},children:p.checkText}),p.notes&&c.jsxs("div",{style:{fontSize:"14px",color:"#666",fontStyle:"italic"},children:["Note: ",p.notes]}),p.photos&&p.photos.length>0&&c.jsx("div",{style:{display:"grid",gridTemplateColumns:p.photos.length>1?"repeat(2, 1fr)":"1fr",gap:"8px",marginTop:"12px"},children:p.photos.filter(Boolean).map((y,b)=>c.jsx("img",{src:y,alt:`Issue photo ${b+1}`,style:{width:"100%",maxHeight:p.photos.length>1?"150px":"200px",objectFit:"cover",borderRadius:"8px"}},b))})]},g))})]}),r.observations&&r.observations.length>0&&c.jsxs("div",{style:{backgroundColor:"#fff",borderRadius:"12px",padding:"20px",marginBottom:"16px",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[c.jsxs("h3",{style:{fontSize:"18px",fontWeight:"700",color:"#092849",marginBottom:"16px"},children:["Observations (",r.observations.length,")"]}),c.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:r.observations.map((p,g)=>c.jsxs("div",{style:{padding:"14px",backgroundColor:"#f0f9ff",borderRadius:"10px"},children:[c.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px"},children:[c.jsx("span",{style:{fontWeight:"600",color:"#092849"},children:p.categoryName||"Observation"}),c.jsx("span",{style:{fontSize:"12px",padding:"4px 8px",borderRadius:"6px",backgroundColor:"#0369a1",color:"#fff"},children:p.pillar||"General"})]}),c.jsx("div",{style:{fontSize:"15px",color:"#333"},children:p.description}),p.photos&&p.photos.length>0&&c.jsx("div",{style:{display:"grid",gridTemplateColumns:p.photos.length>1?"repeat(2, 1fr)":"1fr",gap:"8px",marginTop:"12px"},children:p.photos.filter(Boolean).map((y,b)=>c.jsx("img",{src:y,alt:`Observation photo ${b+1}`,style:{width:"100%",maxHeight:p.photos.length>1?"150px":"200px",objectFit:"cover",borderRadius:"8px"}},b))})]},g))})]}),c.jsx("button",{onClick:()=>a(-1),style:{width:"100%",backgroundColor:"#092849",color:"#fff",padding:"16px",borderRadius:"12px",fontSize:"17px",fontWeight:"700",border:"none",cursor:"pointer",marginTop:"8px"},children:"Back to History"})]})]})};function jS(){const a=yw(),n=vw(),r=ww(),o=Rw();return c.jsxs(bx,{children:[c.jsx("input",{type:"file",ref:a.fileInputRef,accept:"image/*",capture:"environment",className:"hidden",onChange:a.handleFileSelect}),c.jsx(jw,{isOpen:a.isOpen,label:a.label,isVideoReady:a.isVideoReady,videoRef:a.videoRef,canvasRef:a.canvasRef,onCapture:a.capturePhoto,onClose:a.closeCamera}),a.isUploading&&c.jsx("div",{className:"fixed inset-0 z-[100] bg-black/70 flex items-center justify-center",children:c.jsxs("div",{className:"bg-white rounded-xl p-6 flex flex-col items-center gap-4 shadow-2xl",children:[c.jsx("div",{className:"w-12 h-12 border-4 border-blue-500 border-t-transparent rounded-full animate-spin"}),c.jsx("p",{className:"text-gray-700 font-medium",children:"Uploading photo..."})]})}),c.jsxs(Yb,{children:[c.jsx(Ge,{path:"/",element:c.jsx(Fw,{})}),c.jsx(Ge,{path:"/audit/setup",element:c.jsx(tS,{audit:n})}),c.jsx(Ge,{path:"/audit/overview",element:c.jsx(nS,{audit:n})}),c.jsx(Ge,{path:"/audit/zone",element:c.jsx(iS,{audit:n,camera:a})}),c.jsx(Ge,{path:"/audit/condition",element:c.jsx(aS,{audit:n,camera:a})}),c.jsx(Ge,{path:"/audit/tour-ready",element:c.jsx(rS,{audit:n})}),c.jsx(Ge,{path:"/audit/summary",element:c.jsx(sS,{audit:n})}),c.jsx(Ge,{path:"/audit/complete",element:c.jsx(oS,{audit:n})}),c.jsx(Ge,{path:"/bg/setup",element:c.jsx(xS,{bgWalkthrough:o})}),c.jsx(Ge,{path:"/bg/zone",element:c.jsx(vS,{bgWalkthrough:o,camera:a})}),c.jsx(Ge,{path:"/bg/observations",element:c.jsx(wS,{bgWalkthrough:o,camera:a})}),c.jsx(Ge,{path:"/bg/governance",element:c.jsx(SS,{bgWalkthrough:o,camera:a})}),c.jsx(Ge,{path:"/bg/summary",element:c.jsx(_S,{bgWalkthrough:o})}),c.jsx(Ge,{path:"/bg/complete",element:c.jsx(ES,{bgWalkthrough:o})}),c.jsx(Ge,{path:"/history",element:c.jsx(lS,{})}),c.jsx(Ge,{path:"/audit/:id",element:c.jsx(cS,{})}),c.jsx(Ge,{path:"/bg/:id",element:c.jsx(RS,{})}),c.jsx(Ge,{path:"/report",element:c.jsx(uS,{report:r,camera:a})}),c.jsx(Ge,{path:"/report/photo",element:c.jsx(dS,{report:r,camera:a})}),c.jsx(Ge,{path:"/report/description",element:c.jsx(hS,{report:r})}),c.jsx(Ge,{path:"/report/emergency",element:c.jsx(fS,{report:r})}),c.jsx(Ge,{path:"/report/complete",element:c.jsx(pS,{report:r})}),c.jsx(Ge,{path:"/reports",element:c.jsx(gS,{})}),c.jsx(Ge,{path:"/report/:id",element:c.jsx(mS,{})}),c.jsx(Ge,{path:"/settings",element:c.jsx(bS,{})})]})]})}Q0.createRoot(document.getElementById("root")).render(c.jsx(w.StrictMode,{children:c.jsx(Ww,{children:c.jsx(jS,{})})}));
